!function($){$?($.Unslider=function(t,n){var e=this;return e._="unslider",e.defaults={autoplay:!1,delay:3e3,speed:750,easing:"swing",keys:{prev:37,next:39},nav:!0,arrows:{prev:'<a class="'+e._+'-arrow prev">Prev</a>',next:'<a class="'+e._+'-arrow next">Next</a>'},animation:"horizontal",selectors:{container:"ul:first",slides:"li"},animateHeight:!1,activeClass:e._+"-active",swipe:!0,swipeThreshold:.2},e.$context=t,e.options={},e.$parent=null,e.$container=null,e.$slides=null,e.$nav=null,e.$arrows=[],e.total=0,e.current=0,e.prefix=e._+"-",e.eventSuffix="."+e.prefix+~~(2e3*Math.random()),e.interval=null,e.init=function(t){return e.options=$.extend({},e.defaults,t),e.$container=e.$context.find(e.options.selectors.container).addClass(e.prefix+"wrap"),e.$slides=e.$container.children(e.options.selectors.slides),e.setup(),$.each(["nav","arrows","keys","infinite"],function(t,n){e.options[n]&&e["init"+$._ucfirst(n)]()}),jQuery.event.special.swipe&&e.options.swipe&&e.initSwipe(),e.options.autoplay&&e.start(),e.calculateSlides(),e.$context.trigger(e._+".ready"),e.animate(e.options.index||e.current,"init")},e.setup=function(){e.$context.addClass(e.prefix+e.options.animation).wrap('<div class="'+e._+'" />'),e.$parent=e.$context.parent("."+e._),"static"===e.$context.css("position")&&e.$context.css("position","relative"),e.$context.css("overflow","hidden")},e.calculateSlides=function(){if(e.total=e.$slides.length,"fade"!==e.options.animation){var t="width";"vertical"===e.options.animation&&(t="height"),e.$container.css(t,100*e.total+"%").addClass(e.prefix+"carousel"),e.$slides.css(t,100/e.total+"%")}},e.start=function(){return e.interval=setTimeout(function(){e.next()},e.options.delay),e},e.stop=function(){return clearTimeout(e.interval),e},e.initNav=function(){var t=$('<nav class="'+e.prefix+'nav"><ol /></nav>');e.$slides.each(function(n){var i=this.getAttribute("data-nav")||n+1;$.isFunction(e.options.nav)&&(i=e.options.nav.call(e.$slides.eq(n),n,i)),t.children("ol").append('<li data-slide="'+n+'">'+i+"</li>")}),e.$nav=t.insertAfter(e.$context),e.$nav.find("li").on("click"+e.eventSuffix,function(){var t=$(this).addClass(e.options.activeClass);t.siblings().removeClass(e.options.activeClass),e.animate(t.attr("data-slide"))})},e.initArrows=function(){!0===e.options.arrows&&(e.options.arrows=e.defaults.arrows),$.each(e.options.arrows,function(t,n){e.$arrows.push($(n).insertAfter(e.$context).on("click"+e.eventSuffix,e[t]))})},e.initKeys=function(){!0===e.options.keys&&(e.options.keys=e.defaults.keys),$(document).on("keyup"+e.eventSuffix,function(t){$.each(e.options.keys,function(n,i){t.which===i&&$.isFunction(e[n])&&e[n].call(e)})})},e.initSwipe=function(){var t=e.$slides.width();"fade"!==e.options.animation&&e.$container.on({movestart:function(t){return t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY?!!t.preventDefault():void e.$container.css("position","relative")},move:function(n){e.$container.css("left",-100*e.current+100*n.distX/t+"%")},moveend:function(n){Math.abs(n.distX)/t>e.options.swipeThreshold?e[n.distX<0?"next":"prev"]():e.$container.animate({left:-100*e.current+"%"},e.options.speed/2)}})},e.initInfinite=function(){var t=["first","last"];$.each(t,function(n,i){e.$slides.push.apply(e.$slides,e.$slides.filter(':not(".'+e._+'-clone")')[i]().clone().addClass(e._+"-clone")["insert"+(0===n?"After":"Before")](e.$slides[t[~~!n]]()))})},e.destroyArrows=function(){$.each(e.$arrows,function(t,n){n.remove()})},e.destroySwipe=function(){e.$container.off("movestart move moveend")},e.destroyKeys=function(){$(document).off("keyup"+e.eventSuffix)},e.setIndex=function(t){return t<0&&(t=e.total-1),e.current=Math.min(Math.max(0,t),e.total-1),e.options.nav&&e.$nav.find('[data-slide="'+e.current+'"]')._active(e.options.activeClass),e.$slides.eq(e.current)._active(e.options.activeClass),e},e.animate=function(t,n){if("first"===t&&(t=0),"last"===t&&(t=e.total),isNaN(t))return e;e.options.autoplay&&e.stop().start(),e.setIndex(t),e.$context.trigger(e._+".change",[t,e.$slides.eq(t)]);var i="animate"+$._ucfirst(e.options.animation);return $.isFunction(e[i])&&e[i](e.current,n),e},e.next=function(){var t=e.current+1;return t>=e.total&&(t=0),e.animate(t,"next")},e.prev=function(){return e.animate(e.current-1,"prev")},e.animateHorizontal=function(t){var n="left";return"rtl"===e.$context.attr("dir")&&(n="right"),e.options.infinite&&e.$container.css("margin-"+n,"-100%"),e.slide(n,t)},e.animateVertical=function(t){return e.options.animateHeight=!0,e.options.infinite&&e.$container.css("margin-top",-e.$slides.outerHeight()),e.slide("top",t)},e.slide=function(t,n){var i;(e.options.animateHeight&&e._move(e.$context,{height:e.$slides.eq(n).outerHeight()},!1),e.options.infinite)&&(n===e.total-1&&(i=e.total-3,n=-1),n===e.total-2&&(i=0,n=e.total-2),"number"==typeof i&&(e.setIndex(i),e.$context.on(e._+".moved",function(){e.current===i&&e.$container.css(t,-100*i+"%").off(e._+".moved")})));var o={};return o[t]=-100*n+"%",e._move(e.$container,o)},e.animateFade=function(t){var n=e.$slides.eq(t).addClass(e.options.activeClass);e._move(n.siblings().removeClass(e.options.activeClass),{opacity:0}),e._move(n,{opacity:1},!1)},e._move=function(t,n,i,o){return!1!==i&&(i=function(){e.$context.trigger(e._+".moved")}),t._move(n,o||e.options.speed,e.options.easing,i)},e.init(n)},$.fn._active=function(t){return this.addClass(t).siblings().removeClass(t)},$._ucfirst=function(t){return(t+"").toLowerCase().replace(/^./,function(t){return t.toUpperCase()})},$.fn._move=function(){return this.stop(!0,!0),$.fn[$.fn.velocity?"velocity":"animate"].apply(this,arguments)},$.fn.unslider=function(t){return this.each(function(){var n=$(this);if("string"==typeof t&&n.data("unslider")){t=t.split(":");var e=n.data("unslider")[t[0]];if($.isFunction(e))return e.apply(n,t[1]?t[1].split(","):null)}return n.data("unslider",new $.Unslider(n,t))})}):console.warn("Unslider needs jQuery")}(window.jQuery),function(fn){"function"==typeof define&&define.amd?define([],fn):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=fn:fn()}(function(){var assign=Object.assign||window.jQuery&&jQuery.extend,threshold=8,requestFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn()},25)},ignoreTags={textarea:!0,input:!0,select:!0,button:!0},mouseevents={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},touchevents={move:"touchmove",cancel:"touchend",end:"touchend"},rspaces=/\s+/,eventOptions={bubbles:!0,cancelable:!0},eventsSymbol=Symbol("events");function getEvents(node){return node[eventsSymbol]||(node[eventsSymbol]={})}function on(node,types,fn,data,selector){types=types.split(rspaces);var type,events=getEvents(node),i=types.length;function handler(e){fn(e,data)}for(;i--;)(events[type=types[i]]||(events[type]=[])).push([fn,handler]),node.addEventListener(type,handler)}function off(node,types,fn,selector){types=types.split(rspaces);var type,handlers,k,events=getEvents(node),i=types.length;if(events)for(;i--;)if(handlers=events[type=types[i]])for(k=handlers.length;k--;)handlers[k][0]===fn&&(node.removeEventListener(type,handlers[k][1]),handlers.splice(k,1))}function trigger(node,type,properties){var event=function(type){return new CustomEvent(type,eventOptions)}(type);properties&&assign(event,properties),node.dispatchEvent(event)}function Timer(fn){var callback=fn,active=!1,running=!1;function trigger(time){active?(callback(),requestFrame(trigger),active=!(running=!0)):running=!1}this.kick=function(fn){active=!0,running||trigger()},this.end=function(fn){var cb=callback;fn&&(running?(callback=active?function(){cb(),fn()}:fn,active=!0):fn())}}function noop(){}function preventDefault(e){e.preventDefault()}function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch)return touchList.identifiedTouch(id);for(i=-1,l=touchList.length;++i<l;)if(touchList[i].identifier===id)return touchList[i]}function changedTouch(e,data){var touch=identifiedTouch(e.changedTouches,data.identifier);if(touch&&(touch.pageX!==data.pageX||touch.pageY!==data.pageY))return touch}function mousemove(e,data){checkThreshold(e,data,e,removeMouse)}function mouseend(e,data){removeMouse()}function removeMouse(){off(document,mouseevents.move,mousemove),off(document,mouseevents.cancel,mouseend)}function removeTouch(data){off(document,touchevents.move,data.touchmove),off(document,touchevents.cancel,data.touchend)}function checkThreshold(e,data,touch,fn){var distX=touch.pageX-data.pageX,distY=touch.pageY-data.pageY;distX*distX+distY*distY<threshold*threshold||function(e,data,touch,distX,distY,fn){var touches=e.targetTouches,time=e.timeStamp-data.timeStamp,template={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,startX:data.pageX,startY:data.pageY,distX:distX,distY:distY,deltaX:distX,deltaY:distY,pageX:touch.pageX,pageY:touch.pageY,velocityX:distX/time,velocityY:distY/time,identifier:data.identifier,targetTouches:touches,finger:touches?touches.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=noop,e.preventDefault()}};trigger(data.target,"movestart",template),fn(data)}(e,data,touch,distX,distY,fn)}function activeMousemove(e,data){var timer=data.timer;data.touch=e,data.timeStamp=e.timeStamp,timer.kick()}function activeMouseend(e,data){var target=data.target,event=data.event,timer=data.timer;off(document,mouseevents.move,activeMousemove),off(document,mouseevents.end,activeMouseend),endEvent(target,event,timer,function(){setTimeout(function(){off(target,"click",preventDefault)},0)})}function activeTouchend(e,data){var target=data.target,event=data.event,timer=data.timer;identifiedTouch(e.changedTouches,event.identifier)&&(!function(data){off(document,touchevents.move,data.activeTouchmove),off(document,touchevents.end,data.activeTouchend)}(data),endEvent(target,event,timer))}function endEvent(target,event,timer,fn){timer.end(function(){return trigger(target,"moveend",event),fn&&fn()})}if(on(document,"mousedown",function(e){(function(e){return 1===e.which&&!e.ctrlKey&&!e.altKey})(e)&&(function(e){return!!ignoreTags[e.target.tagName.toLowerCase()]}(e)||(on(document,mouseevents.move,mousemove,e),on(document,mouseevents.cancel,mouseend,e)))}),on(document,"touchstart",function(e){if(!ignoreTags[e.target.tagName.toLowerCase()]){var touch=e.changedTouches[0],data={target:touch.target,pageX:touch.pageX,pageY:touch.pageY,identifier:touch.identifier,touchmove:function(e,data){!function(e,data){var touch=changedTouch(e,data);touch&&checkThreshold(e,data,touch,removeTouch)}(e,data)},touchend:function(e,data){!function(e,data){identifiedTouch(e.changedTouches,data.identifier)&&removeTouch(data)}(e,data)}};on(document,touchevents.move,data.touchmove,data),on(document,touchevents.cancel,data.touchend,data)}}),on(document,"movestart",function(e){if(!e.defaultPrevented&&e.moveEnabled){var event={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},data={target:e.target,event:event,timer:new Timer(function(time){(function(event,touch,timeStamp){var time=timeStamp-event.timeStamp;event.distX=touch.pageX-event.startX,event.distY=touch.pageY-event.startY,event.deltaX=touch.pageX-event.pageX,event.deltaY=touch.pageY-event.pageY,event.velocityX=.3*event.velocityX+.7*event.deltaX/time,event.velocityY=.3*event.velocityY+.7*event.deltaY/time,event.pageX=touch.pageX,event.pageY=touch.pageY})(event,data.touch,data.timeStamp),trigger(data.target,"move",event)}),touch:void 0,timeStamp:e.timeStamp};void 0===e.identifier?(on(e.target,"click",preventDefault),on(document,mouseevents.move,activeMousemove,data),on(document,mouseevents.end,activeMouseend,data)):(data.activeTouchmove=function(e,data){!function(e,data){var event=data.event,timer=data.timer,touch=changedTouch(e,event);touch&&(e.preventDefault(),event.targetTouches=e.targetTouches,data.touch=touch,data.timeStamp=e.timeStamp,timer.kick())}(e,data)},data.activeTouchend=function(e,data){activeTouchend(e,data)},on(document,touchevents.move,data.activeTouchmove,data),on(document,touchevents.end,data.activeTouchend,data))}}),window.jQuery){var properties="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return on(this,"movestart",enableMove1),!1},teardown:function(){return off(this,"movestart",enableMove1),!1},add:add},jQuery.event.special.move={setup:function(){return on(this,"movestart",enableMove2),!1},teardown:function(){return off(this,"movestart",enableMove2),!1},add:add},jQuery.event.special.moveend={setup:function(){return on(this,"movestart",enableMove3),!1},teardown:function(){return off(this,"movestart",enableMove3),!1},add:add}}function enableMove1(e){e.enableMove()}function enableMove2(e){e.enableMove()}function enableMove3(e){e.enableMove()}function add(handleObj){var handler=handleObj.handler;handleObj.handler=function(e){for(var property,i=properties.length;i--;)e[property=properties[i]]=e.originalEvent[property];handler.apply(this,arguments)}}}),function(thisModule){"function"==typeof define&&define.amd?define(["jquery",void 0,"jquery.event.move"],thisModule):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=thisModule:thisModule(jQuery)}(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node)},settings={threshold:.4,sensitivity:6};function moveend(e){var w,h,event;w=e.currentTarget.offsetWidth,h=e.currentTarget.offsetHeight,event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger},e.distX>e.distY?e.distX>-e.distY?(e.distX/w>settings.threshold||1<e.velocityX*e.distX/w*settings.sensitivity)&&(event.type="swiperight",trigger(e.currentTarget,event)):(-e.distY/h>settings.threshold||1<e.velocityY*e.distY/w*settings.sensitivity)&&(event.type="swipeup",trigger(e.currentTarget,event)):e.distX>-e.distY?(e.distY/h>settings.threshold||1<e.velocityY*e.distY/w*settings.sensitivity)&&(event.type="swipedown",trigger(e.currentTarget,event)):(-e.distX/w>settings.threshold||1<e.velocityX*e.distX/w*settings.sensitivity)&&(event.type="swipeleft",trigger(e.currentTarget,event))}function getData(node){var data=jQuery.data(node,"event_swipe");return data||(data={count:0},jQuery.data(node,"event_swipe",data)),data}jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){if(!(0<getData(this).count++))return add(this,"moveend",moveend),!0},teardown:function(){if(!(0<--getData(this).count))return remove(this,"moveend",moveend),!0},settings:settings}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var c;return function(){var a,c,d;b&&b.requirejs||(b?c=b:b={},function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(g=(a=a.split("/")).length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if("."===(m=a[k]))a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;0<k&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(k=(c=a.split("/")).length;0<k;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;0<l;l-=1)if((e=o[n.slice(0,l).join("/")])&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(b,d.concat([a,c]))}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return-1<c&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(c=j(e=f(e,b))),e?a=c&&c.normalize?c.normalize(a,function(a){return function(b){return f(b,a)}}(b)):f(a,b):(e=(d=k(a=f(a,b)))[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return void 0!==b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:function(a){return function(){return s&&s.config&&s.config[a]||{}}}(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if("require"===(k=(m=o(c[n],f)).f))u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if("string"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if((s=a).deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,(d=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])}).amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d)}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){"function"==typeof b[d]&&"constructor"!==d&&c.push(d)}return c}var c={Extend:function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},Decorate:function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;0<d&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new function(){this.constructor=d};for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){return Array.prototype.unshift.call(arguments,b),e.apply(this,arguments)}},k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d}},d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),(c[0]._type=a)in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;c<a;c++){b+=Math.floor(36*Math.random()).toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];(f=f.substring(0,1).toLowerCase()+f.substring(1))in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return(e!==f||"hidden"!==f&&"visible"!==f)&&("scroll"===e||"scroll"===f||(d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth))},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),d[0].className+=" select2-results__message",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},c.prototype.append=function(a){this.hideLoading();var b=[];if(null!=a.results&&0!==a.results.length){a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},c.prototype.position=function(a,b){b.find(".select2-results").append(a)},c.prototype.sort=function(a){return this.options.get("sorter")(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(".select2-results__option[aria-selected]"),b=a.filter("[aria-selected=true]");0<b.length?b.first().trigger("mouseenter"):a.first().trigger("mouseenter"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()});b.$results.find(".select2-results__option[aria-selected]").each(function(){var b=a(this),c=a.data(this,"data"),e=""+c.id;null!=c.element&&c.element.selected||null==c.element&&-1<a.inArray(e,d)?b.attr("aria-selected","true"):b.attr("aria-selected","false")})})},c.prototype.showLoading=function(a){this.hideLoading();var c={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(b){var c=document.createElement("li");c.className="select2-results__option";var d={role:"treeitem","aria-selected":"false"};for(var e in b.disabled&&(delete d["aria-selected"],d["aria-disabled"]="true"),null==b.id&&delete d["aria-selected"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role="group",d["aria-label"]=b.text,delete d["aria-selected"]),d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement("strong");h.className="select2-results__group",a(h),this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,"data",b),c},c.prototype.bind=function(b,c){var d=this,e=b.id+"-results";this.$results.attr("id",e),b.on("results:all",function(a){d.clear(),d.append(a.data),b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("results:append",function(a){d.append(a.data),b.isOpen()&&d.setClasses()}),b.on("query",function(a){d.hideMessages(),d.showLoading(a)}),b.on("select",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("unselect",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("open",function(){d.$results.attr("aria-expanded","true"),d.$results.attr("aria-hidden","false"),d.setClasses(),d.ensureHighlightVisible()}),b.on("close",function(){d.$results.attr("aria-expanded","false"),d.$results.attr("aria-hidden","true"),d.$results.removeAttr("aria-activedescendant")}),b.on("results:toggle",function(){var a=d.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),b.on("results:select",function(){var a=d.getHighlightedResults();if(0!==a.length){var b=a.data("data");"true"==a.attr("aria-selected")?d.trigger("close",{}):d.trigger("select",{data:b})}}),b.on("results:previous",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),c=b.index(a);if(0!==c){var e=c-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top,h=f.offset().top,i=d.$results.scrollTop()+(h-g);0===e?d.$results.scrollTop(0):h-g<0&&d.$results.scrollTop(i)}}),b.on("results:next",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),e=b.index(a)+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top+d.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=d.$results.scrollTop()+h-g;0===e?d.$results.scrollTop(0):g<h&&d.$results.scrollTop(i)}}),b.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")}),b.on("results:message",function(a){d.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=d.$results.scrollTop(),c=d.$results.get(0).scrollHeight-b+a.deltaY,e=0<a.deltaY&&b-a.deltaY<=0,f=a.deltaY<0&&c<=d.$results.height();e?(d.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(d.$results.scrollTop(d.$results.get(0).scrollHeight-d.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(b){var c=a(this),e=c.data("data");return"true"===c.attr("aria-selected")?void(d.options.get("multiple")?d.trigger("unselect",{originalEvent:b,data:e}):d.trigger("close",{})):void d.trigger("select",{originalEvent:b,data:e})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(b){var c=a(this).data("data");d.getHighlightedResults().removeClass("select2-results__option--highlighted"),d.trigger("results:focus",{data:c,element:a(this)})})},c.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var c=this.$results.find("[aria-selected]").index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),c<=2?this.$results.scrollTop(0):(g>this.$results.outerHeight()||g<0)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b,c);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),b.attr("title",this.$element.attr("title")),b.attr("tabindex",this._tabindex),this.$selection=b},d.prototype.bind=function(a,b){var d=this,e=(a.id,a.id+"-results");this.container=a,this.$selection.on("focus",function(a){d.trigger("focus",a)}),this.$selection.on("blur",function(a){d._handleBlur(a)}),this.$selection.on("keydown",function(a){d.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()}),a.on("results:focus",function(a){d.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){d.update(a.data)}),a.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",e),d._attachCloseHandler(a)}),a.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.focus(),d._detachCloseHandler(a)}),a.on("enable",function(){d.$selection.attr("tabindex",d._tabindex)}),a.on("disable",function(){d.$selection.attr("tabindex","-1")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger("blur",b)},1)},d.prototype._attachCloseHandler=function(b){a(document.body).on("mousedown.select2."+b.id,function(b){var d=a(b.target).closest(".select2");a(".select2.select2-container--open").each(function(){var b=a(this);this!=d[0]&&b.data("element").select2("close")})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){b.find(".selection").append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(a){throw new Error("The `update` method must be defined in child classes.")},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c,d){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},e.prototype.bind=function(a,b){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",d),this.$selection.attr("aria-labelledby",d),this.$selection.on("mousedown",function(a){1===a.which&&c.trigger("toggle",{originalEvent:a})}),this.$selection.on("focus",function(a){}),this.$selection.on("blur",function(a){}),a.on("focus",function(b){a.isOpen()||c.$selection.focus()}),a.on("selection:update",function(a){c.update(a.data)})},e.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},e.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},e.prototype.selectionContainer=function(){return a("<span></span>")},e.prototype.update=function(a){if(0!==a.length){var b=a[0],c=this.$selection.find(".select2-selection__rendered"),d=this.display(b,c);c.empty().append(d),c.prop("title",b.title||b.text)}else this.clear()},e}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(a,b){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(b,c){var e=this;d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){e.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(b){if(!e.options.get("disabled")){var f=a(this).parent().data("data");e.trigger("unselect",{originalEvent:b,data:f})}})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},d.prototype.selectionContainer=function(){return a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.prop("title",e.title||e.text),f.data("data",e),b.push(f)}var h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),b.define("select2/selection/placeholder",["../utils"],function(a){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id;if(1<b.length||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(e)},b}),b.define("select2/selection/allowClear",["jquery","../keys"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)}),b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get("disabled")){var c=this.$selection.find(".select2-selection__clear");if(0!==c.length){b.stopPropagation();for(var d=c.data("data"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger("unselect",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||(c.which==b.DELETE||c.which==b.BACKSPACE)&&this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(0<this.$selection.find(".select2-selection__placeholder").length||0===c.length)){var d=a('<span class="select2-selection__clear">&times;</span>');d.data("data",c),this.$selection.find(".select2-selection__rendered").prepend(d)}},c}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=c,this.$search=c.find("input");var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on("open",function(){e.$search.trigger("focus")}),b.on("close",function(){e.$search.val(""),e.$search.removeAttr("aria-activedescendant"),e.$search.trigger("focus")}),b.on("enable",function(){e.$search.prop("disabled",!1),e._transferTabIndex()}),b.on("disable",function(){e.$search.prop("disabled",!0)}),b.on("focus",function(a){e.$search.trigger("focus")}),b.on("results:focus",function(a){e.$search.attr("aria-activedescendant",a.id)}),this.$selection.on("focusin",".select2-search--inline",function(a){e.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){e._handleBlur(a)}),this.$selection.on("keydown",".select2-search--inline",function(a){if(a.stopPropagation(),e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented(),a.which===c.BACKSPACE&&""===e.$search.val()){var d=e.$searchContainer.prev(".select2-selection__choice");if(0<d.length){var f=d.data("data");e.searchRemoveChoice(f),a.preventDefault()}}});var f=document.documentMode,g=f&&f<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(a){return g?void e.$selection.off("input.search input.searchcheck"):void e.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(a){if(g&&"input"===a.type)e.$selection.off("input.search input.searchcheck");else{var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&e.handleSearch(a)}})},d.prototype._transferTabIndex=function(a){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.$search.val(b.text),this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";""!==this.$search.attr("placeholder")?a=this.$selection.find(".select2-selection__rendered").innerWidth():a=.75*(this.$search.val().length+1)+"em";this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],g=["opening","closing","selecting","unselecting"];b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),b.define("select2/data/base",["../utils"],function(a){function b(a,c){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(a){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(a,b){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(a,b){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return(d+=a.generateChars(4))+(null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4))},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(d){var e=[];(a=[a]).push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple"))return a.selected=!1,c(a.element).is("option")?(a.element.selected=!1,void this.$element.trigger("change")):void this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")})},d.prototype.bind=function(a,b){var c=this;(this.container=a).on("select",function(a){c.select(a.data)}),a.on("unselect",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){c.removeData(this,"data")})},d.prototype.query=function(a,b){var d=[],e=this;this.$element.children().each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement("optgroup")).label=a.text:void 0!==(b=document.createElement("option")).textContent?b.textContent=a.text:b.innerText=a.text,a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,"data",e),d},d.prototype.item=function(a){var b={};if(null!=(b=c.data(a[0],"data")))return b;if(a.is("option"))b={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){b={text:a.prop("label"),children:[],title:a.prop("title")};for(var d=a.children("option"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return(b=this._normalizeItem(b)).element=a[0],c.data(a[0],"data",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a});return null!=(a=c.extend({},{text:""},a)).id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},{selected:!1,disabled:!1},a)},d.prototype.matches=function(a,b){return this.options.get("matcher")(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find("option"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(0<=c.inArray(j.id,g)){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);b.appendMany(o,p)}h.push(o)}}return h},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){d.status&&"0"===d.status||e.trigger("results:message",{message:"errorLoading"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url.call(this.$element,a)),"function"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");void 0!==f&&(this.createTag=f);var g=d.get("insertTag");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){var e=this;return this._removeOldTags(),null==b.term||null!=b.page?void a.call(this,b,c):void a.call(this,b,function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0);if(i.text===b.term||j)return!f&&(a.data=g,void c(a))}if(f)return!0;var l=e.createTag(b);if(null!=l){var m=e.option(l);m.attr("data-select2-tag",!0),e.addOptions([m]),e.insertTag(g,l)}a.results=g,c(a)})},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(b){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(b,c,d){var g=this;c.term=c.term||"";var h=this.tokenizer(c,this.options,function(b){var c=g._normalizeItem(b);if(!g.$element.find("option").filter(function(){return a(this).val()===c.id}).length){var e=g.option(c);e.attr("data-select2-tag",!0),g._removeOldTags(),g.addOptions([e])}!function(a){g.trigger("select",{data:a})}(c)});h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),m=i(a.extend({},c,{term:k}));null!=m?(e(m),g=g.substr(h+1)||"",h=0):h++}else h++}return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",b.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",0<this.maximumInputLength&&b.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return 0<d.maximumSelectionLength&&f>=d.maximumSelectionLength?void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}}):void a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b},c.prototype.bind=function(){},c.prototype.position=function(a,b){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a,b){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(b){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val("")}),c.on("focus",function(){c.isOpen()&&e.$search.focus()}),c.on("results:all",function(a){null!=a.query.term&&""!==a.query.term||(e.showSearch(a)?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide"))})},c.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger("query",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(a,b){return!0},c}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;0<=d;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1);e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1)<=c+50&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get("dropdownParent")||a(document.body),b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c},c.prototype._hideDropdown=function(a){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f="scroll.select2."+d.id,g="resize.select2."+d.id,h="orientationchange.select2."+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){a(this).data("select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(b){var c=a(this).data("select2-scroll-position");a(this).scrollTop(c.y)}),a(window).on(f+" "+g+" "+h,function(a){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e="scroll.select2."+d.id,f="resize.select2."+d.id,g="orientationchange.select2."+d.id;this.$container.parents().filter(b.hasScroll).off(e),a(window).off(e+" "+f+" "+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=this.$container.offset();f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h_height=this.$dropdown.outerHeight(!1),i_top=b.scrollTop(),i_bottom=b.scrollTop()+b.height(),j=i_top<f.top-h_height,k=i_bottom>f.bottom+h_height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-n.top-h_height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.position="relative",a.width="auto"),this.$dropdown.css(a)},c.prototype._showDropdown=function(a){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return!(function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}(c.data.results)<this.minimumResultsForSearch)&&b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(a){d._handleSelectOnClose(a)})},a.prototype._handleSelectOnClose=function(a,b){if(b&&null!=b.originalSelect2Event){var c=b.originalSelect2Event;if("select"===c._type||"unselect"===c._type)return}var d=this.getHighlightedResults();if(!(d.length<1)){var e=d.data("data");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger("select",{data:e})}},a}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close",{originalEvent:c,originalSelect2Event:b})},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){return"Please enter "+(a.minimum-a.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}return D.prototype.apply=function(l){if(null==(l=a.extend(!0,{},this.defaults,l)).dataAdapter){if(null!=l.ajax?l.dataAdapter=o:null!=l.data?l.dataAdapter=n:l.dataAdapter=m,0<l.minimumInputLength&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),0<l.maximumInputLength&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),0<l.maximumSelectionLength&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+"compat/dropdownCss");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.multiple?l.selectionAdapter=e:l.selectionAdapter=d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+"compat/containerCss");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if("string"==typeof l.language)if(0<l.language.indexOf("-")){var I=l.language.split("-")[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push("en");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(O){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(P){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var Q=k.loadPath(this.defaults.amdLanguageBase+"en"),R=new k(l.language);R.extend(Q),l.translations=R}return l},D.prototype.reset=function(){function b(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return l[a]||a})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&0<e.children.length){for(var f=a.extend(!0,{},e),g=e.children.length-1;0<=g;g--)null==c(d,e.children[g])&&f.children.splice(g,1);return 0<f.children.length?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();return-1<j.indexOf(k)?e:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var e={};e[a.camelCase(b)]=c;var f=j._convertData(e);a.extend(this.defaults,f)},new D}),b.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"];null==this.options.multiple&&(this.options.multiple=a.prop("multiple")),null==this.options.disabled&&(this.options.disabled=a.prop("disabled")),null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang"))),null==this.options.dir&&(a.prop("dir")?this.options.dir=a.prop("dir"):a.closest("[dir]").prop("dir")?this.options.dir=a.closest("[dir]").prop("dir"):this.options.dir="ltr"),a.prop("disabled",this.options.disabled),a.prop("multiple",this.options.multiple),a.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),a.data("data",a.data("select2Tags")),a.data("tags",!0)),a.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",a.data("ajaxUrl")),a.data("ajax--url",a.data("ajaxUrl")));var e;e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);for(var g in f=d._convertData(f))-1<b.inArray(g,c)||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,c){null!=a.data("select2")&&a.data("select2").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr("tabindex")||0;a.data("old-tabindex",d),a.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get("selectionAdapter");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get("dropdownAdapter");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get("resultsAdapter");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger("selection:update",{data:a})}),a.addClass("select2-hidden-accessible"),a.attr("aria-hidden","true"),this._syncAttributes(),a.data("select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){return"select2-"+(null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return e<=0?"auto":e+"px"}if("style"!=b)return b;var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;h<i;h+=1){var k=g[h].replace(/\s/g,"").match(c);if(null!==k&&1<=k.length)return k[1]}return null},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this.$element.on("focus.select2",function(a){b.trigger("focus",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",b._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",b._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle","focus"];this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("focus",function(a){b.focus(a)}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open",{}),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger("results:select",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle",{}),b.preventDefault()):c===d.UP?(a.trigger("results:previous",{}),b.preventDefault()):c===d.DOWN&&(a.trigger("results:next",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||"OPTION"===a.target.nodeName||"OPTGROUP"===a.target.nodeName){if(b)if(b.addedNodes&&0<b.addedNodes.length)for(var e=0;e<b.addedNodes.length;e++){b.addedNodes[e].selected&&(c=!0)}else b.removedNodes&&0<b.removedNodes.length&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger("selection:update",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger("query",{})},e.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},e.prototype.focus=function(a){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),b.data("element",this.$element),b},e}),b.define("select2/compat/utils",["jquery"],function(a){return{syncCssClasses:function(b,c,d){var e,f,g=[];(e=a.trim(b.attr("class")))&&a((e=""+e).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&g.push(this)}),(e=a.trim(c.attr("class")))&&a((e=""+e).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(f=d(this))&&g.push(f)}),b.attr("class",g.join(" "))}}}),b.define("select2/compat/containerCss",["jquery","./utils"],function(a,b){function c(a){return null}function d(){}return d.prototype.render=function(d){var e=d.call(this),f=this.options.get("containerCssClass")||"";a.isFunction(f)&&(f=f(this.$element));var g=this.options.get("adaptContainerCssClass");if(g=g||c,-1!==f.indexOf(":all:")){f=f.replace(":all:","");var h=g;g=function(a){var b=h(a);return null!=b?b+" "+a:a}}var i=this.options.get("containerCss")||{};return a.isFunction(i)&&(i=i(this.$element)),b.syncCssClasses(e,this.$element,g),e.css(i),e.addClass(f),e},d}),b.define("select2/compat/dropdownCss",["jquery","./utils"],function(a,b){function c(a){return null}function d(){}return d.prototype.render=function(d){var e=d.call(this),f=this.options.get("dropdownCssClass")||"";a.isFunction(f)&&(f=f(this.$element));var g=this.options.get("adaptDropdownCssClass");if(g=g||c,-1!==f.indexOf(":all:")){f=f.replace(":all:","");var h=g;g=function(a){var b=h(a);return null!=b?b+" "+a:a}}var i=this.options.get("dropdownCss")||{};return a.isFunction(i)&&(i=i(this.$element)),b.syncCssClasses(e,this.$element,g),e.css(i),e.addClass(f),e},d}),b.define("select2/compat/initSelection",["jquery"],function(a){function b(a,b,c){c.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=c.get("initSelection"),this._isInitialized=!1,a.call(this,b,c)}return b.prototype.current=function(b,c){var d=this;return this._isInitialized?void b.call(this,c):void this.initSelection.call(null,this.$element,function(b){d._isInitialized=!0,a.isArray(b)||(b=[b]),c(b)})},b}),b.define("select2/compat/inputData",["jquery"],function(a){function b(a,b,c){this._currentData=[],this._valueSeparator=c.get("valueSeparator")||",","hidden"===b.prop("type")&&c.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),a.call(this,b,c)}return b.prototype.current=function(b,c){function d(b,c){var e=[];return b.selected||-1!==a.inArray(b.id,c)?(b.selected=!0,e.push(b)):b.selected=!1,b.children&&e.push.apply(e,d(b.children,c)),e}for(var e=[],f=0;f<this._currentData.length;f++){var g=this._currentData[f];e.push.apply(e,d(g,this.$element.val().split(this._valueSeparator)))}c(e)},b.prototype.select=function(b,c){if(this.options.get("multiple")){var d=this.$element.val();d+=this._valueSeparator+c.id,this.$element.val(d),this.$element.trigger("change")}else this.current(function(b){a.map(b,function(a){a.selected=!1})}),this.$element.val(c.id),this.$element.trigger("change")},b.prototype.unselect=function(a,b){var c=this;b.selected=!1,this.current(function(a){for(var d=[],e=0;e<a.length;e++){var f=a[e];b.id!=f.id&&d.push(f.id)}c.$element.val(d.join(c._valueSeparator)),c.$element.trigger("change")})},b.prototype.query=function(a,b,c){for(var d=[],e=0;e<this._currentData.length;e++){var f=this._currentData[e],g=this.matches(b,f);null!==g&&d.push(g)}c({results:d})},b.prototype.addOptions=function(b,c){var d=a.map(c,function(b){return a.data(b[0],"data")});this._currentData.push.apply(this._currentData,d)},b}),b.define("select2/compat/matcher",["jquery"],function(a){return function(b){return function(c,d){var e=a.extend(!0,{},d);if(null==c.term||""===a.trim(c.term))return e;if(d.children){for(var f=d.children.length-1;0<=f;f--){var g=d.children[f];b(c.term,g.text,g)||e.children.splice(f,1)}if(0<e.children.length)return e}return b(c.term,d.text,d)?e:null}}}),b.define("select2/compat/query",[],function(){function a(a,b,c){c.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),a.call(this,b,c)}return a.prototype.query=function(a,b,c){b.callback=c,this.options.get("query").call(null,b)},a}),b.define("select2/dropdown/attachContainer",[],function(){function a(a,b,c){a.call(this,b,c)}return a.prototype.position=function(a,b,c){c.find(".dropdown-wrapper").append(b),b.addClass("select2-dropdown--below"),c.addClass("select2-container--below")},a}),b.define("select2/dropdown/stopPropagation",[],function(){function a(){}return a.prototype.bind=function(a,b,c){a.call(this,b,c);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(a){a.stopPropagation()})},a}),b.define("select2/selection/stopPropagation",[],function(){function a(){}return a.prototype.bind=function(a,b,c){a.call(this,b,c);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(a){a.stopPropagation()})},a}),c=function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if((b=a.event.fix(g)).type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(j=m=-1*g.deltaY),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||n<f)&&(d(g,f=n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[1<=j?"floor":"ceil"](j/f),l=Math[1<=l?"floor":"ceil"](l/f),m=Math[1<=m?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})},"function"==typeof b.define&&b.define.amd?b.define("jquery-mousewheel",["jquery"],c):"object"==typeof exports?module.exports=c:c(a),b.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(a,b,c,d){if(null==a.fn.select2){var e=["open","close","destroy"];a.fn.select2=function(b){if("object"==typeof(b=b||{}))return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if("string"!=typeof b)throw new Error("Invalid arguments for Select2: "+b);var d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=a(this).data("select2");null==c&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2."),d=c[b].apply(c,f)}),-1<a.inArray(b,e)?this:d}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).CodeMirror=factory()}(this,function(){"use strict";var userAgent=navigator.userAgent,platform=navigator.platform,gecko=/gecko\/\d/i.test(userAgent),ie_upto10=/MSIE \d/.test(userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent),edge=/Edge\/(\d+)/.exec(userAgent),ie=ie_upto10||ie_11up||edge,ie_version=ie&&(ie_upto10?document.documentMode||6:+(edge||ie_11up)[1]),webkit=!edge&&/WebKit\//.test(userAgent),qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent),chrome=!edge&&/Chrome\//.test(userAgent),presto=/Opera\//.test(userAgent),safari=/Apple Computer/.test(navigator.vendor),mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent),phantom=/PhantomJS/.test(userAgent),ios=safari&&(/Mobile\/\w+/.test(userAgent)||2<navigator.maxTouchPoints),android=/Android/.test(userAgent),mobile=ios||android||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent),mac=ios||/Mac/.test(platform),chromeOS=/\bCrOS\b/.test(userAgent),windows=/win/i.test(platform),presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);presto_version&&(presto_version=Number(presto_version[1])),presto_version&&15<=presto_version&&(webkit=!(presto=!1));var flipCtrlCmd=mac&&(qtwebkit||presto&&(null==presto_version||presto_version<12.11)),captureRightClick=gecko||ie&&9<=ie_version;function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}var range,rmClass=function(node,cls){var current=node.className,match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}};function removeChildren(e){for(var count=e.childNodes.length;0<count;--count)e.removeChild(e.firstChild);return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}function elt(tag,content,className,style){var e=document.createElement(tag);if(className&&(e.className=className),style&&(e.style.cssText=style),"string"==typeof content)e.appendChild(document.createTextNode(content));else if(content)for(var i=0;i<content.length;++i)e.appendChild(content[i]);return e}function eltP(tag,content,className,style){var e=elt(tag,content,className,style);return e.setAttribute("role","presentation"),e}function contains(parent,child){if(3==child.nodeType&&(child=child.parentNode),parent.contains)return parent.contains(child);do{if(11==child.nodeType&&(child=child.host),child==parent)return!0}while(child=child.parentNode)}function activeElt(){var activeElement;try{activeElement=document.activeElement}catch(e){activeElement=document.body||null}for(;activeElement&&activeElement.shadowRoot&&activeElement.shadowRoot.activeElement;)activeElement=activeElement.shadowRoot.activeElement;return activeElement}function addClass(node,cls){var current=node.className;classTest(cls).test(current)||(node.className+=(current?" ":"")+cls)}function joinClasses(a,b){for(var as=a.split(" "),i=0;i<as.length;i++)as[i]&&!classTest(as[i]).test(b)&&(b+=" "+as[i]);return b}range=document.createRange?function(node,start,end,endNode){var r=document.createRange();return r.setEnd(endNode||node,end),r.setStart(node,start),r}:function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r};var selectInput=function(node){node.select()};function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}function copyObj(obj,target,overwrite){for(var prop in target||(target={}),obj)!obj.hasOwnProperty(prop)||!1===overwrite&&target.hasOwnProperty(prop)||(target[prop]=obj[prop]);return target}function countColumn(string,end,tabSize,startIndex,startValue){null==end&&-1==(end=string.search(/[^\s\u00a0]/))&&(end=string.length);for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||end<=nextTab)return n+(end-i);n+=nextTab-i,n+=tabSize-n%tabSize,i=nextTab+1}}ios?selectInput=function(node){node.selectionStart=0,node.selectionEnd=node.value.length}:ie&&(selectInput=function(node){try{node.select()}catch(_e){}});var Delayed=function(){this.id=null,this.f=null,this.time=0,this.handler=bind(this.onTimeout,this)};function indexOf(array,elt){for(var i=0;i<array.length;++i)if(array[i]==elt)return i;return-1}Delayed.prototype.onTimeout=function(self){self.id=0,self.time<=+new Date?self.f():setTimeout(self.handler,self.time-+new Date)},Delayed.prototype.set=function(ms,f){this.f=f;var time=+new Date+ms;(!this.id||time<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,ms),this.time=time)};var scrollerGap=50,Pass={toString:function(){return"CodeMirror.Pass"}},sel_dontScroll={scroll:!1},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function findColumn(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);-1==nextTab&&(nextTab=string.length);var skipped=nextTab-pos;if(nextTab==string.length||goal<=col+skipped)return pos+Math.min(skipped,goal-col);if(col+=nextTab-pos,pos=nextTab+1,goal<=(col+=tabSize-col%tabSize))return pos}}var spaceStrs=[""];function spaceStr(n){for(;spaceStrs.length<=n;)spaceStrs.push(lst(spaceStrs)+" ");return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}function map(array,f){for(var out=[],i=0;i<array.length;i++)out[i]=f(array[i],i);return out}function nothing(){}function createObj(base,props){var inst;return inst=Object.create?Object.create(base):(nothing.prototype=base,new nothing),props&&copyObj(props,inst),inst}var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function isWordCharBasic(ch){return/\w/.test(ch)||""<ch&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}function isWordChar(ch,helper){return helper?!!(-1<helper.source.indexOf("\\w")&&isWordCharBasic(ch))||helper.test(ch):isWordCharBasic(ch)}function isEmpty(obj){for(var n in obj)if(obj.hasOwnProperty(n)&&obj[n])return!1;return!0}var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return 768<=ch.charCodeAt(0)&&extendingChars.test(ch)}function skipExtendingChars(str,pos,dir){for(;(dir<0?0<pos:pos<str.length)&&isExtendingChar(str.charAt(pos));)pos+=dir;return pos}function findFirst(pred,from,to){for(var dir=to<from?-1:1;;){if(from==to)return from;var midF=(from+to)/2,mid=dir<0?Math.ceil(midF):Math.floor(midF);if(mid==from)return pred(mid)?from:to;pred(mid)?to=mid:from=mid+dir}}var bidiOther=null;function getBidiPartAt(order,ch,sticky){var found;bidiOther=null;for(var i=0;i<order.length;++i){var cur=order[i];if(cur.from<ch&&cur.to>ch)return i;cur.to==ch&&(cur.from!=cur.to&&"before"==sticky?found=i:bidiOther=i),cur.from==ch&&(cur.from!=cur.to&&"before"!=sticky?found=i:bidiOther=i)}return null!=found?found:bidiOther}var bidiOrdering=function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",arabicTypes="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;function BidiSpan(level,from,to){this.level=level,this.from=from,this.to=to}return function(str,direction){var outerType="ltr"==direction?"L":"R";if(0==str.length||"ltr"==direction&&!bidiRE.test(str))return!1;for(var code,len=str.length,types=[],i=0;i<len;++i)types.push((code=str.charCodeAt(i))<=247?lowTypes.charAt(code):1424<=code&&code<=1524?"R":1536<=code&&code<=1785?arabicTypes.charAt(code-1536):1774<=code&&code<=2220?"r":8192<=code&&code<=8203?"w":8204==code?"b":"L");for(var i$1=0,prev=outerType;i$1<len;++i$1){var type=types[i$1];"m"==type?types[i$1]=prev:prev=type}for(var i$2=0,cur=outerType;i$2<len;++i$2){var type$1=types[i$2];"1"==type$1&&"r"==cur?types[i$2]="n":isStrong.test(type$1)&&"r"==(cur=type$1)&&(types[i$2]="R")}for(var i$3=1,prev$1=types[0];i$3<len-1;++i$3){var type$2=types[i$3];"+"==type$2&&"1"==prev$1&&"1"==types[i$3+1]?types[i$3]="1":","!=type$2||prev$1!=types[i$3+1]||"1"!=prev$1&&"n"!=prev$1||(types[i$3]=prev$1),prev$1=type$2}for(var i$4=0;i$4<len;++i$4){var type$3=types[i$4];if(","==type$3)types[i$4]="N";else if("%"==type$3){var end=void 0;for(end=i$4+1;end<len&&"%"==types[end];++end);for(var replace=i$4&&"!"==types[i$4-1]||end<len&&"1"==types[end]?"1":"N",j=i$4;j<end;++j)types[j]=replace;i$4=end-1}}for(var i$5=0,cur$1=outerType;i$5<len;++i$5){var type$4=types[i$5];"L"==cur$1&&"1"==type$4?types[i$5]="L":isStrong.test(type$4)&&(cur$1=type$4)}for(var i$6=0;i$6<len;++i$6)if(isNeutral.test(types[i$6])){var end$1=void 0;for(end$1=i$6+1;end$1<len&&isNeutral.test(types[end$1]);++end$1);for(var before="L"==(i$6?types[i$6-1]:outerType),replace$1=before==("L"==(end$1<len?types[end$1]:outerType))?before?"L":"R":outerType,j$1=i$6;j$1<end$1;++j$1)types[j$1]=replace$1;i$6=end$1-1}for(var m,order=[],i$7=0;i$7<len;)if(countsAsLeft.test(types[i$7])){var start=i$7;for(++i$7;i$7<len&&countsAsLeft.test(types[i$7]);++i$7);order.push(new BidiSpan(0,start,i$7))}else{var pos=i$7,at=order.length,isRTL="rtl"==direction?1:0;for(++i$7;i$7<len&&"L"!=types[i$7];++i$7);for(var j$2=pos;j$2<i$7;)if(countsAsNum.test(types[j$2])){pos<j$2&&(order.splice(at,0,new BidiSpan(1,pos,j$2)),at+=isRTL);var nstart=j$2;for(++j$2;j$2<i$7&&countsAsNum.test(types[j$2]);++j$2);order.splice(at,0,new BidiSpan(2,nstart,j$2)),at+=isRTL,pos=j$2}else++j$2;pos<i$7&&order.splice(at,0,new BidiSpan(1,pos,i$7))}return"ltr"==direction&&(1==order[0].level&&(m=str.match(/^\s+/))&&(order[0].from=m[0].length,order.unshift(new BidiSpan(0,0,m[0].length))),1==lst(order).level&&(m=str.match(/\s+$/))&&(lst(order).to-=m[0].length,order.push(new BidiSpan(0,len-m[0].length,len)))),"rtl"==direction?order.reverse():order}}();function getOrder(line,direction){var order=line.order;return null==order&&(order=line.order=bidiOrdering(line.text,direction)),order}var noHandlers=[],on=function(emitter,type,f){if(emitter.addEventListener)emitter.addEventListener(type,f,!1);else if(emitter.attachEvent)emitter.attachEvent("on"+type,f);else{var map=emitter._handlers||(emitter._handlers={});map[type]=(map[type]||noHandlers).concat(f)}};function getHandlers(emitter,type){return emitter._handlers&&emitter._handlers[type]||noHandlers}function off(emitter,type,f){if(emitter.removeEventListener)emitter.removeEventListener(type,f,!1);else if(emitter.detachEvent)emitter.detachEvent("on"+type,f);else{var map=emitter._handlers,arr=map&&map[type];if(arr){var index=indexOf(arr,f);-1<index&&(map[type]=arr.slice(0,index).concat(arr.slice(index+1)))}}}function signal(emitter,type){var handlers=getHandlers(emitter,type);if(handlers.length)for(var args=Array.prototype.slice.call(arguments,2),i=0;i<handlers.length;++i)handlers[i].apply(null,args)}function signalDOMEvent(cm,e,override){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),signal(cm,override||e.type,cm,e),e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(arr)for(var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]),i=0;i<arr.length;++i)-1==indexOf(set,arr[i])&&set.push(arr[i])}function hasHandler(emitter,type){return 0<getHandlers(emitter,type).length}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)},ctor.prototype.off=function(type,f){off(this,type,f)}}function e_preventDefault(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function e_stopPropagation(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function e_defaultPrevented(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function e_stop(e){e_preventDefault(e),e_stopPropagation(e)}function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;return null==b&&(1&e.button?b=1:2&e.button?b=3:4&e.button&&(b=2)),mac&&e.ctrlKey&&1==b&&(b=3),b}var zwspSupported,badBidiRects,dragAndDrop=function(){if(ie&&ie_version<9)return!1;var div=elt("div");return"draggable"in div||"dragDrop"in div}();function zeroWidthElement(measure){if(null==zwspSupported){var test=elt("span","​");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")])),0!=measure.firstChild.offsetHeight&&(zwspSupported=test.offsetWidth<=1&&2<test.offsetHeight&&!(ie&&ie_version<8))}var node=zwspSupported?elt("span","​"):elt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return node.setAttribute("cm-text",""),node}function hasBadBidiRects(measure){if(null!=badBidiRects)return badBidiRects;var txt=removeChildrenAndAdd(measure,document.createTextNode("AخA")),r0=range(txt,0,1).getBoundingClientRect(),r1=range(txt,1,2).getBoundingClientRect();return removeChildren(measure),!(!r0||r0.left==r0.right)&&(badBidiRects=r1.right-r0.right<3)}var e,splitLinesAuto=3!="\n\nb".split(/\n/).length?function(string){for(var pos=0,result=[],l=string.length;pos<=l;){var nl=string.indexOf("\n",pos);-1==nl&&(nl=string.length);var line=string.slice(pos,"\r"==string.charAt(nl-1)?nl-1:nl),rt=line.indexOf("\r");-1!=rt?(result.push(line.slice(0,rt)),pos+=rt+1):(result.push(line),pos=nl+1)}return result}:function(string){return string.split(/\r\n?|\n/)},hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return!1}}:function(te){var range;try{range=te.ownerDocument.selection.createRange()}catch(e){}return!(!range||range.parentElement()!=te)&&0!=range.compareEndPoints("StartToEnd",range)},hasCopyEvent="oncopy"in(e=elt("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),badZoomedRects=null;var modes={},mimeModes={};function resolveMode(spec){if("string"==typeof spec&&mimeModes.hasOwnProperty(spec))spec=mimeModes[spec];else if(spec&&"string"==typeof spec.name&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];"string"==typeof found&&(found={name:found}),(spec=createObj(found,spec)).name=found.name}else{if("string"==typeof spec&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec))return resolveMode("application/xml");if("string"==typeof spec&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec))return resolveMode("application/json")}return"string"==typeof spec?{name:spec}:spec||{name:"null"}}function getMode(options,spec){spec=resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory)return getMode(options,"text/plain");var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts)exts.hasOwnProperty(prop)&&(modeObj.hasOwnProperty(prop)&&(modeObj["_"+prop]=modeObj[prop]),modeObj[prop]=exts[prop])}if(modeObj.name=spec.name,spec.helperType&&(modeObj.helperType=spec.helperType),spec.modeProps)for(var prop$1 in spec.modeProps)modeObj[prop$1]=spec.modeProps[prop$1];return modeObj}var modeExtensions={};function extendMode(mode,properties){copyObj(properties,modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:modeExtensions[mode]={})}function copyState(mode,state){if(!0===state)return state;if(mode.copyState)return mode.copyState(state);var nstate={};for(var n in state){var val=state[n];val instanceof Array&&(val=val.concat([])),nstate[n]=val}return nstate}function innerMode(mode,state){for(var info;mode.innerMode&&(info=mode.innerMode(state))&&info.mode!=mode;)state=info.state,mode=info.mode;return info||{mode:mode,state:state}}function startState(mode,a1,a2){return!mode.startState||mode.startState(a1,a2)}var StringStream=function(string,tabSize,lineOracle){this.pos=this.start=0,this.string=string,this.tabSize=tabSize||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=lineOracle};function getLine(doc,n){if((n-=doc.first)<0||n>=doc.size)throw new Error("There is no line "+(n+doc.first)+" in the document.");for(var chunk=doc;!chunk.lines;)for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}return chunk.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;return doc.iter(start.line,end.line+1,function(line){var text=line.text;n==end.line&&(text=text.slice(0,end.ch)),n==start.line&&(text=text.slice(start.ch)),out.push(text),++n}),out}function getLines(doc,from,to){var out=[];return doc.iter(from,to,function(line){out.push(line.text)}),out}function updateLineHeight(line,height){var diff=height-line.height;if(diff)for(var n=line;n;n=n.parent)n.height+=diff}function lineNo(line){if(null==line.parent)return null;for(var cur=line.parent,no=indexOf(cur.lines,line),chunk=cur.parent;chunk;chunk=(cur=chunk).parent)for(var i=0;chunk.children[i]!=cur;++i)no+=chunk.children[i].chunkSize();return no+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i$1=0;i$1<chunk.children.length;++i$1){var child=chunk.children[i$1],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch,n+=child.chunkSize()}return n}while(!chunk.lines);for(var i=0;i<chunk.lines.length;++i){var lh=chunk.lines[i].height;if(h<lh)break;h-=lh}return n+i}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function Pos(line,ch,sticky){if(void 0===sticky&&(sticky=null),!(this instanceof Pos))return new Pos(line,ch,sticky);this.line=line,this.ch=ch,this.sticky=sticky}function cmp(a,b){return a.line-b.line||a.ch-b.ch}function equalCursorPos(a,b){return a.sticky==b.sticky&&0==cmp(a,b)}function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return cmp(a,b)<0?b:a}function minPos(a,b){return cmp(a,b)<0?a:b}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function clipPos(doc,pos){if(pos.line<doc.first)return Pos(doc.first,0);var last=doc.first+doc.size-1;return pos.line>last?Pos(last,getLine(doc,last).text.length):function(pos,linelen){var ch=pos.ch;return null==ch||linelen<ch?Pos(pos.line,linelen):ch<0?Pos(pos.line,0):pos}(pos,getLine(doc,pos.line).text.length)}function clipPosArray(doc,array){for(var out=[],i=0;i<array.length;i++)out[i]=clipPos(doc,array[i]);return out}StringStream.prototype.eol=function(){return this.pos>=this.string.length},StringStream.prototype.sol=function(){return this.pos==this.lineStart},StringStream.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},StringStream.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},StringStream.prototype.eat=function(match){var ch=this.string.charAt(this.pos);if("string"==typeof match?ch==match:ch&&(match.test?match.test(ch):match(ch)))return++this.pos,ch},StringStream.prototype.eatWhile=function(match){for(var start=this.pos;this.eat(match););return this.pos>start},StringStream.prototype.eatSpace=function(){for(var start=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>start},StringStream.prototype.skipToEnd=function(){this.pos=this.string.length},StringStream.prototype.skipTo=function(ch){var found=this.string.indexOf(ch,this.pos);if(-1<found)return this.pos=found,!0},StringStream.prototype.backUp=function(n){this.pos-=n},StringStream.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},StringStream.prototype.indentation=function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},StringStream.prototype.match=function(pattern,consume,caseInsensitive){if("string"!=typeof pattern){var match=this.string.slice(this.pos).match(pattern);return match&&0<match.index?null:(match&&!1!==consume&&(this.pos+=match[0].length),match)}var cased=function(str){return caseInsensitive?str.toLowerCase():str};if(cased(this.string.substr(this.pos,pattern.length))==cased(pattern))return!1!==consume&&(this.pos+=pattern.length),!0},StringStream.prototype.current=function(){return this.string.slice(this.start,this.pos)},StringStream.prototype.hideFirstChars=function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}},StringStream.prototype.lookAhead=function(n){var oracle=this.lineOracle;return oracle&&oracle.lookAhead(n)},StringStream.prototype.baseToken=function(){var oracle=this.lineOracle;return oracle&&oracle.baseToken(this.pos)};var SavedContext=function(state,lookAhead){this.state=state,this.lookAhead=lookAhead},Context=function(doc,state,line,lookAhead){this.state=state,this.doc=doc,this.line=line,this.maxLookAhead=lookAhead||0,this.baseTokens=null,this.baseTokenPos=1};function highlightLine(cm,line,context,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,context,function(end,style){return st.push(end,style)},lineClasses,forceToEnd);for(var state=context.state,loop=function(o){context.baseTokens=st;var overlay=cm.state.overlays[o],i=1,at=0;context.state=!0,runMode(cm,line.text,overlay.mode,context,function(end,style){for(var start=i;at<end;){var i_end=st[i];end<i_end&&st.splice(i,1,end,st[i+1],i_end),i+=2,at=Math.min(end,i_end)}if(style)if(overlay.opaque)st.splice(start,i-start,end,"overlay "+style),i=start+2;else for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"overlay "+style}},lineClasses),context.state=state,context.baseTokens=null,context.baseTokenPos=1},o=0;o<cm.state.overlays.length;++o)loop(o);return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var context=getContextBefore(cm,lineNo(line)),resetState=line.text.length>cm.options.maxHighlightLength&&copyState(cm.doc.mode,context.state),result=highlightLine(cm,line,context);resetState&&(context.state=resetState),line.stateAfter=context.save(!resetState),line.styles=result.styles,result.classes?line.styleClasses=result.classes:line.styleClasses&&(line.styleClasses=null),updateFrontier===cm.doc.highlightFrontier&&(cm.doc.modeFrontier=Math.max(cm.doc.modeFrontier,++cm.doc.highlightFrontier))}return line.styles}function getContextBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState)return new Context(doc,!0,n);var start=function(cm,n,precise){for(var minindent,minline,doc=cm.doc,lim=precise?-1:n-(cm.doc.mode.innerMode?1e3:100),search=n;lim<search;--search){if(search<=doc.first)return doc.first;var line=getLine(doc,search-1),after=line.stateAfter;if(after&&(!precise||search+(after instanceof SavedContext?after.lookAhead:0)<=doc.modeFrontier))return search;var indented=countColumn(line.text,null,cm.options.tabSize);(null==minline||indented<minindent)&&(minline=search-1,minindent=indented)}return minline}(cm,n,precise),saved=start>doc.first&&getLine(doc,start-1).stateAfter,context=saved?Context.fromSaved(doc,saved,start):new Context(doc,startState(doc.mode),start);return doc.iter(start,n,function(line){processLine(cm,line.text,context);var pos=context.line;line.stateAfter=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo?context.save():null,context.nextLine()}),precise&&(doc.modeFrontier=context.line),context}function processLine(cm,text,context,startAt){var mode=cm.doc.mode,stream=new StringStream(text,cm.options.tabSize,context);for(stream.start=stream.pos=startAt||0,""==text&&callBlankLine(mode,context.state);!stream.eol();)readToken(mode,stream,context.state),stream.start=stream.pos}function callBlankLine(mode,state){if(mode.blankLine)return mode.blankLine(state);if(mode.innerMode){var inner=innerMode(mode,state);return inner.mode.blankLine?inner.mode.blankLine(inner.state):void 0}}function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){inner&&(inner[0]=innerMode(mode,state).mode);var style=mode.token(stream,state);if(stream.pos>stream.start)return style}throw new Error("Mode "+mode.name+" failed to advance stream.")}Context.prototype.lookAhead=function(n){var line=this.doc.getLine(this.line+n);return null!=line&&n>this.maxLookAhead&&(this.maxLookAhead=n),line},Context.prototype.baseToken=function(n){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=n;)this.baseTokenPos+=2;var type=this.baseTokens[this.baseTokenPos+1];return{type:type&&type.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}},Context.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Context.fromSaved=function(doc,saved,line){return saved instanceof SavedContext?new Context(doc,copyState(doc.mode,saved.state),line,saved.lookAhead):new Context(doc,copyState(doc.mode,saved),line)},Context.prototype.save=function(copy){var state=!1!==copy?copyState(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new SavedContext(state,this.maxLookAhead):state};var Token=function(stream,type,state){this.start=stream.start,this.end=stream.pos,this.string=stream.current(),this.type=type||null,this.state=state};function takeToken(cm,pos,precise,asArray){var style,tokens,doc=cm.doc,mode=doc.mode,line=getLine(doc,(pos=clipPos(doc,pos)).line),context=getContextBefore(cm,pos.line,precise),stream=new StringStream(line.text,cm.options.tabSize,context);for(asArray&&(tokens=[]);(asArray||stream.pos<pos.ch)&&!stream.eol();)stream.start=stream.pos,style=readToken(mode,stream,context.state),asArray&&tokens.push(new Token(stream,style,copyState(doc.mode,context.state)));return asArray?tokens:new Token(stream,style,context.state)}function extractLineClasses(type,output){if(type)for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass)break;type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";null==output[prop]?output[prop]=lineClass[2]:new RegExp("(?:^|\\s)"+lineClass[2]+"(?:$|\\s)").test(output[prop])||(output[prop]+=" "+lineClass[2])}return type}function runMode(cm,text,mode,context,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;null==flattenSpans&&(flattenSpans=cm.options.flattenSpans);var style,curStart=0,curStyle=null,stream=new StringStream(text,cm.options.tabSize,context),inner=cm.options.addModeClass&&[null];for(""==text&&extractLineClasses(callBlankLine(mode,context.state),lineClasses);!stream.eol();){if(style=stream.pos>cm.options.maxHighlightLength?(flattenSpans=!1,forceToEnd&&processLine(cm,text,context,stream.pos),stream.pos=text.length,null):extractLineClasses(readToken(mode,stream,context.state,inner),lineClasses),inner){var mName=inner[0].name;mName&&(style="m-"+(style?mName+" "+style:mName))}if(!flattenSpans||curStyle!=style){for(;curStart<stream.start;)f(curStart=Math.min(stream.start,curStart+5e3),curStyle);curStyle=style}stream.start=stream.pos}for(;curStart<stream.pos;){var pos=Math.min(stream.pos,curStart+5e3);f(pos,curStyle),curStart=pos}}var sawReadOnlySpans=!1,sawCollapsedSpans=!1;function MarkedSpan(marker,from,to){this.marker=marker,this.from=from,this.to=to}function getMarkedSpanFor(spans,marker){if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker)return span}}function removeMarkedSpan(spans,span){for(var r,i=0;i<spans.length;++i)spans[i]!=span&&(r||(r=[])).push(spans[i]);return r}function stretchSpansOverChange(doc,change){if(change.full)return null;var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans,oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast)return null;var startCh=change.from.ch,endCh=change.to.ch,isInsert=0==cmp(change.from,change.to),first=function(old,startCh,isInsert){var nw;if(old)for(var i=0;i<old.length;++i){var span=old[i],marker=span.marker;if(null==span.from||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh)||span.from==startCh&&"bookmark"==marker.type&&(!isInsert||!span.marker.insertLeft)){var endsAfter=null==span.to||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}return nw}(oldFirst,startCh,isInsert),last=function(old,endCh,isInsert){var nw;if(old)for(var i=0;i<old.length;++i){var span=old[i],marker=span.marker;if(null==span.to||(marker.inclusiveRight?span.to>=endCh:span.to>endCh)||span.from==endCh&&"bookmark"==marker.type&&(!isInsert||span.marker.insertLeft)){var startsBefore=null==span.from||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,null==span.to?null:span.to-endCh))}}return nw}(oldLast,endCh,isInsert),sameLine=1==change.text.length,offset=lst(change.text).length+(sameLine?startCh:0);if(first)for(var i=0;i<first.length;++i){var span=first[i];if(null==span.to){var found=getMarkedSpanFor(last,span.marker);found?sameLine&&(span.to=null==found.to?null:found.to+offset):span.to=startCh}}if(last)for(var i$1=0;i$1<last.length;++i$1){var span$1=last[i$1];if(null!=span$1.to&&(span$1.to+=offset),null==span$1.from)getMarkedSpanFor(first,span$1.marker)||(span$1.from=offset,sameLine&&(first||(first=[])).push(span$1));else span$1.from+=offset,sameLine&&(first||(first=[])).push(span$1)}first&&(first=clearEmptySpans(first)),last&&last!=first&&(last=clearEmptySpans(last));var newMarkers=[first];if(!sameLine){var gapMarkers,gap=change.text.length-2;if(0<gap&&first)for(var i$2=0;i$2<first.length;++i$2)null==first[i$2].to&&(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i$2].marker,null,null));for(var i$3=0;i$3<gap;++i$3)newMarkers.push(gapMarkers);newMarkers.push(last)}return newMarkers}function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];null!=span.from&&span.from==span.to&&!1!==span.marker.clearWhenEmpty&&spans.splice(i--,1)}return spans.length?spans:null}function detachMarkedSpans(line){var spans=line.markedSpans;if(spans){for(var i=0;i<spans.length;++i)spans[i].marker.detachLine(line);line.markedSpans=null}}function attachMarkedSpans(line,spans){if(spans){for(var i=0;i<spans.length;++i)spans[i].marker.attachLine(line);line.markedSpans=spans}}function extraLeft(marker){return marker.inclusiveLeft?-1:0}function extraRight(marker){return marker.inclusiveRight?1:0}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(0!=lenDiff)return lenDiff;var aPos=a.find(),bPos=b.find(),fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp)return-fromCmp;var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);return toCmp||b.id-a.id}function collapsedSpanAtSide(line,start){var found,sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp=void 0,i=0;i<sps.length;++i)(sp=sps[i]).marker.collapsed&&null==(start?sp.from:sp.to)&&(!found||compareCollapsedMarkers(found,sp.marker)<0)&&(found=sp.marker);return found}function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,!0)}function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,!1)}function collapsedSpanAround(line,ch){var found,sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var i=0;i<sps.length;++i){var sp=sps[i];sp.marker.collapsed&&(null==sp.from||sp.from<ch)&&(null==sp.to||sp.to>ch)&&(!found||compareCollapsedMarkers(found,sp.marker)<0)&&(found=sp.marker)}return found}function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo),sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var i=0;i<sps.length;++i){var sp=sps[i];if(sp.marker.collapsed){var found=sp.marker.find(0),fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker),toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(!(0<=fromCmp&&toCmp<=0||fromCmp<=0&&0<=toCmp)&&(fromCmp<=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?0<=cmp(found.to,from):0<cmp(found.to,from))||0<=fromCmp&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.from,to)<=0:cmp(found.from,to)<0)))return!0}}}function visualLine(line){for(var merged;merged=collapsedSpanAtStart(line);)line=merged.find(-1,!0).line;return line}function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);return line==vis?lineN:lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine())return lineN;var merged,line=getLine(doc,lineN);if(!lineIsHidden(doc,line))return lineN;for(;merged=collapsedSpanAtEnd(line);)line=merged.find(1,!0).line;return lineNo(line)+1}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp=void 0,i=0;i<sps.length;++i)if((sp=sps[i]).marker.collapsed){if(null==sp.from)return!0;if(!sp.marker.widgetNode&&0==sp.from&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp))return!0}}function lineIsHiddenInner(doc,line,span){if(null==span.to){var end=span.marker.find(1,!0);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length)return!0;for(var sp=void 0,i=0;i<line.markedSpans.length;++i)if((sp=line.markedSpans[i]).marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(null==sp.to||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp))return!0}function heightAtLine(lineObj){for(var h=0,chunk=(lineObj=visualLine(lineObj)).parent,i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj)break;h+=line.height}for(var p=chunk.parent;p;p=(chunk=p).parent)for(var i$1=0;i$1<p.children.length;++i$1){var cur=p.children[i$1];if(cur==chunk)break;h+=cur.height}return h}function lineLength(line){if(0==line.height)return 0;for(var merged,len=line.text.length,cur=line;merged=collapsedSpanAtStart(cur);){var found=merged.find(0,!0);cur=found.from.line,len+=found.from.ch-found.to.ch}for(cur=line;merged=collapsedSpanAtEnd(cur);){var found$1=merged.find(0,!0);len-=cur.text.length-found$1.from.ch,len+=(cur=found$1.to.line).text.length-found$1.to.ch}return len}function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first),d.maxLineLength=lineLength(d.maxLine),d.maxLineChanged=!0,doc.iter(function(line){var len=lineLength(line);len>d.maxLineLength&&(d.maxLineLength=len,d.maxLine=line)})}var Line=function(text,markedSpans,estimateHeight){this.text=text,attachMarkedSpans(this,markedSpans),this.height=estimateHeight?estimateHeight(this):1};function cleanUpLine(line){line.parent=null,detachMarkedSpans(line)}Line.prototype.lineNo=function(){return lineNo(this)},eventMixin(Line);var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style))return null;var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}function buildLineContent(cm,lineView){var content=eltP("span",null,null,webkit?"padding-right: .1px":null),builder={pre:eltP("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:!1,splitSpaces:cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order=void 0;builder.pos=0,builder.addToken=buildToken,hasBadBidiRects(cm.display.measure)&&(order=getOrder(line,cm.doc.direction))&&(builder.addToken=buildTokenBadBidi(builder.addToken,order)),builder.map=[],insertLineContent(line,builder,getLineStyles(cm,line,lineView!=cm.display.externalMeasured&&lineNo(line))),line.styleClasses&&(line.styleClasses.bgClass&&(builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"")),line.styleClasses.textClass&&(builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||""))),0==builder.map.length&&builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure))),0==i?(lineView.measure.map=builder.map,lineView.measure.cache={}):((lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map),(lineView.measure.caches||(lineView.measure.caches=[])).push({}))}if(webkit){var last=builder.content.lastChild;(/\bcm-tab\b/.test(last.className)||last.querySelector&&last.querySelector(".cm-tab"))&&(builder.content.className="cm-tab-wrap-hack")}return signal(cm,"renderLine",cm,lineView.line,builder.pre),builder.pre.className&&(builder.textClass=joinClasses(builder.pre.className,builder.textClass||"")),builder}function defaultSpecialCharPlaceholder(ch){var token=elt("span","•","cm-invalidchar");return token.title="\\u"+ch.charCodeAt(0).toString(16),token.setAttribute("aria-label",token.title),token}function buildToken(builder,text,style,startStyle,endStyle,css,attributes){if(text){var content,displayText=builder.splitSpaces?function(text,trailingBefore){if(1<text.length&&!/  /.test(text))return text;for(var spaceBefore=trailingBefore,result="",i=0;i<text.length;i++){var ch=text.charAt(i);" "!=ch||!spaceBefore||i!=text.length-1&&32!=text.charCodeAt(i+1)||(ch=" "),result+=ch,spaceBefore=" "==ch}return result}(text,builder.trailingSpace):text,special=builder.cm.state.specialChars,mustWrap=!1;if(special.test(text)){content=document.createDocumentFragment();for(var pos=0;;){special.lastIndex=pos;var m=special.exec(text),skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));ie&&ie_version<9?content.appendChild(elt("span",[txt])):content.appendChild(txt),builder.map.push(builder.pos,builder.pos+skipped,txt),builder.col+=skipped,builder.pos+=skipped}if(!m)break;pos+=skipped+1;var txt$1=void 0;if("\t"==m[0]){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;(txt$1=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"))).setAttribute("role","presentation"),txt$1.setAttribute("cm-text","\t"),builder.col+=tabWidth}else"\r"==m[0]||"\n"==m[0]?(txt$1=content.appendChild(elt("span","\r"==m[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",m[0]):((txt$1=builder.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),ie&&ie_version<9?content.appendChild(elt("span",[txt$1])):content.appendChild(txt$1)),builder.col+=1;builder.map.push(builder.pos,builder.pos+1,txt$1),builder.pos++}}else builder.col+=text.length,content=document.createTextNode(displayText),builder.map.push(builder.pos,builder.pos+text.length,content),ie&&ie_version<9&&(mustWrap=!0),builder.pos+=text.length;if(builder.trailingSpace=32==displayText.charCodeAt(text.length-1),style||startStyle||endStyle||mustWrap||css||attributes){var fullStyle=style||"";startStyle&&(fullStyle+=startStyle),endStyle&&(fullStyle+=endStyle);var token=elt("span",[content],fullStyle,css);if(attributes)for(var attr in attributes)attributes.hasOwnProperty(attr)&&"style"!=attr&&"class"!=attr&&token.setAttribute(attr,attributes[attr]);return builder.content.appendChild(token)}builder.content.appendChild(content)}}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,css,attributes){style=style?style+" cm-force-border":"cm-force-border";for(var start=builder.pos,end=start+text.length;;){for(var part=void 0,i=0;i<order.length&&!((part=order[i]).to>start&&part.from<=start);i++);if(part.to>=end)return inner(builder,text,style,startStyle,endStyle,css,attributes);inner(builder,text.slice(0,part.to-start),style,startStyle,null,css,attributes),startStyle=null,text=text.slice(part.to-start),start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;widget&&builder.map.push(builder.pos,builder.pos+size,widget),!ignoreWidget&&builder.cm.display.input.needsContentAttribute&&(widget||(widget=builder.content.appendChild(document.createElement("span"))),widget.setAttribute("cm-marker",marker.id)),widget&&(builder.cm.display.input.setUneditable(widget),builder.content.appendChild(widget)),builder.pos+=size,builder.trailingSpace=!1}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(spans)for(var style,css,spanStyle,spanEndStyle,spanStartStyle,collapsed,attributes,len=allText.length,pos=0,i=1,text="",nextChange=0;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=css="",collapsed=attributes=null,nextChange=1/0;for(var foundBookmarks=[],endStyles=void 0,j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if("bookmark"==m.type&&sp.from==pos&&m.widgetNode)foundBookmarks.push(m);else if(sp.from<=pos&&(null==sp.to||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(null!=sp.to&&sp.to!=pos&&nextChange>sp.to&&(nextChange=sp.to,spanEndStyle=""),m.className&&(spanStyle+=" "+m.className),m.css&&(css=(css?css+";":"")+m.css),m.startStyle&&sp.from==pos&&(spanStartStyle+=" "+m.startStyle),m.endStyle&&sp.to==nextChange&&(endStyles||(endStyles=[])).push(m.endStyle,sp.to),m.title&&((attributes||(attributes={})).title=m.title),m.attributes)for(var attr in m.attributes)(attributes||(attributes={}))[attr]=m.attributes[attr];m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0)&&(collapsed=sp)}else sp.from>pos&&nextChange>sp.from&&(nextChange=sp.from)}if(endStyles)for(var j$1=0;j$1<endStyles.length;j$1+=2)endStyles[j$1+1]==nextChange&&(spanEndStyle+=" "+endStyles[j$1]);if(!collapsed||collapsed.from==pos)for(var j$2=0;j$2<foundBookmarks.length;++j$2)buildCollapsedSpan(builder,0,foundBookmarks[j$2]);if(collapsed&&(collapsed.from||0)==pos){if(buildCollapsedSpan(builder,(null==collapsed.to?len+1:collapsed.to)-pos,collapsed.marker,null==collapsed.from),null==collapsed.to)return;collapsed.to==pos&&(collapsed=!1)}}if(len<=pos)break;for(var upto=Math.min(len,nextChange);;){if(text){var end=pos+text.length;if(!collapsed){var tokenText=upto<end?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",css,attributes)}if(upto<=end){text=text.slice(upto-pos),pos=upto;break}pos=end,spanStartStyle=""}text=allText.slice(at,at=styles[i++]),style=interpretTokenStyle(styles[i++],builder.cm.options)}}else for(var i$1=1;i$1<styles.length;i$1+=2)builder.addToken(builder,allText.slice(at,at=styles[i$1]),interpretTokenStyle(styles[i$1+1],builder.cm.options))}function LineView(doc,line,lineN){this.line=line,this.rest=function(line){for(var merged,lines;merged=collapsedSpanAtEnd(line);)line=merged.find(1,!0).line,(lines||(lines=[])).push(line);return lines}(line),this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1,this.node=this.text=null,this.hidden=lineIsHidden(doc,line)}function buildViewArray(cm,from,to){for(var nextPos,array=[],pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size,array.push(view)}return array}var operationGroup=null;var orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type);if(arr.length){var list,args=Array.prototype.slice.call(arguments,2);operationGroup?list=operationGroup.delayedCallbacks:orphanDelayedCallbacks?list=orphanDelayedCallbacks:(list=orphanDelayedCallbacks=[],setTimeout(fireOrphanDelayed,0));for(var loop=function(i){list.push(function(){return arr[i].apply(null,args)})},i=0;i<arr.length;++i)loop(i)}}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i)delayed[i]()}function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];"text"==type?updateLineText(cm,lineView):"gutter"==type?updateLineGutter(cm,lineView,lineN,dims):"class"==type?updateLineClasses(cm,lineView):"widget"==type&&updateLineWidgets(cm,lineView,dims)}lineView.changes=null}function ensureLineWrapped(lineView){return lineView.node==lineView.text&&(lineView.node=elt("div",null,null,"position: relative"),lineView.text.parentNode&&lineView.text.parentNode.replaceChild(lineView.node,lineView.text),lineView.node.appendChild(lineView.text),ie&&ie_version<8&&(lineView.node.style.zIndex=2)),lineView.node}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;return ext&&ext.line==lineView.line?(cm.display.externalMeasured=null,lineView.measure=ext.measure,ext.built):buildLineContent(cm,lineView)}function updateLineText(cm,lineView){var cls=lineView.text.className,built=getLineContent(cm,lineView);lineView.text==lineView.node&&(lineView.node=built.pre),lineView.text.parentNode.replaceChild(built.pre,lineView.text),lineView.text=built.pre,built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass?(lineView.bgClass=built.bgClass,lineView.textClass=built.textClass,updateLineClasses(cm,lineView)):cls&&(lineView.text.className=cls)}function updateLineClasses(cm,lineView){!function(cm,lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls&&(cls+=" CodeMirror-linebackground"),lineView.background)cls?lineView.background.className=cls:(lineView.background.parentNode.removeChild(lineView.background),lineView.background=null);else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild),cm.display.input.setUneditable(lineView.background)}}(cm,lineView),lineView.line.wrapClass?ensureLineWrapped(lineView).className=lineView.line.wrapClass:lineView.node!=lineView.text&&(lineView.node.className="");var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter&&(lineView.node.removeChild(lineView.gutter),lineView.gutter=null),lineView.gutterBackground&&(lineView.node.removeChild(lineView.gutterBackground),lineView.gutterBackground=null),lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px"),cm.display.input.setUneditable(lineView.gutterBackground),wrap.insertBefore(lineView.gutterBackground,lineView.text)}var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap$1=ensureLineWrapped(lineView),gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");if(cm.display.input.setUneditable(gutterWrap),wrap$1.insertBefore(gutterWrap,lineView.text),lineView.line.gutterClass&&(gutterWrap.className+=" "+lineView.line.gutterClass),!cm.options.lineNumbers||markers&&markers["CodeMirror-linenumbers"]||(lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"))),markers)for(var k=0;k<cm.display.gutterSpecs.length;++k){var id=cm.display.gutterSpecs[k].className,found=markers.hasOwnProperty(id)&&markers[id];found&&gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}function updateLineWidgets(cm,lineView,dims){lineView.alignable&&(lineView.alignable=null);for(var isWidget=classTest("CodeMirror-linewidget"),node=lineView.node.firstChild,next=void 0;node;node=next)next=node.nextSibling,isWidget.test(node.className)&&lineView.node.removeChild(node);insertLineWidgets(cm,lineView,dims)}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);return lineView.text=lineView.node=built.pre,built.bgClass&&(lineView.bgClass=built.bgClass),built.textClass&&(lineView.textClass=built.textClass),updateLineClasses(cm,lineView),updateLineGutter(cm,lineView,lineN,dims),insertLineWidgets(cm,lineView,dims),lineView.node}function insertLineWidgets(cm,lineView,dims){if(insertLineWidgetsFor(cm,lineView.line,lineView,dims,!0),lineView.rest)for(var i=0;i<lineView.rest.length;i++)insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,!1)}function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(line.widgets)for(var wrap=ensureLineWrapped(lineView),i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget"+(widget.className?" "+widget.className:""));widget.handleMouseEvents||node.setAttribute("cm-ignore-events","true"),positionLineWidget(widget,node,lineView,dims),cm.display.input.setUneditable(node),allowAbove&&widget.above?wrap.insertBefore(node,lineView.gutter||lineView.text):wrap.appendChild(node),signalLater(widget,"redraw")}}function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px",widget.coverGutter||(width-=dims.gutterTotalWidth,node.style.paddingLeft=dims.gutterTotalWidth+"px"),node.style.width=width+"px"}widget.coverGutter&&(node.style.zIndex=5,node.style.position="relative",widget.noHScroll||(node.style.marginLeft=-dims.gutterTotalWidth+"px"))}function widgetHeight(widget){if(null!=widget.height)return widget.height;var cm=widget.doc.cm;if(!cm)return 0;if(!contains(document.body,widget.node)){var parentStyle="position: relative;";widget.coverGutter&&(parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;"),widget.noHScroll&&(parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;"),removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==display.sizer&&n!=display.mover)return!0}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH)return display.cachedPaddingH;var e=removeChildrenAndAdd(display.measure,elt("pre","x","CodeMirror-line-like")),style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};return isNaN(data.left)||isNaN(data.right)||(display.cachedPaddingH=data),data}function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function mapFromLineView(lineView,line,lineN){if(lineView.line==line)return{map:lineView.measure.map,cache:lineView.measure.cache};for(var i=0;i<lineView.rest.length;i++)if(lineView.rest[i]==line)return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]};for(var i$1=0;i$1<lineView.rest.length;i$1++)if(lineNo(lineView.rest[i$1])>lineN)return{map:lineView.measure.maps[i$1],cache:lineView.measure.caches[i$1],before:!0}}function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo)return cm.display.view[findViewIndex(cm,lineN)];var ext=cm.display.externalMeasured;return ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size?ext:void 0}function prepareMeasureForLine(cm,line){var lineN=lineNo(line),view=findViewForLine(cm,lineN);view&&!view.text?view=null:view&&view.changes&&(updateLineForChanges(cm,view,lineN,getDimensions(cm)),cm.curOp.forceUpdate=!0),view||(view=function(cm,line){var lineN=lineNo(line=visualLine(line)),view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);return view.text=built.pre,removeChildrenAndAdd(cm.display.lineMeasure,built.pre),view}(cm,line));var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:!1}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){prepared.before&&(ch=-1);var found,key=ch+(bias||"");return prepared.cache.hasOwnProperty(key)?found=prepared.cache[key]:(prepared.rect||(prepared.rect=prepared.view.text.getBoundingClientRect()),prepared.hasHeights||(!function(cm,lineView,rect){var wrapping=cm.options.lineWrapping,curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;for(var rects=lineView.text.firstChild.getClientRects(),i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];2<Math.abs(cur.bottom-next.bottom)&&heights.push((cur.bottom+next.top)/2-rect.top)}}heights.push(rect.bottom-rect.top)}}(cm,prepared.view,prepared.rect),prepared.hasHeights=!0),(found=function(cm,prepared,ch,bias){var rect,place=nodeAndOffsetInLineMap(prepared.map,ch,bias),node=place.node,start=place.start,end=place.end,collapse=place.collapse;if(3==node.nodeType){for(var i$1=0;i$1<4;i$1++){for(;start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start));)--start;for(;place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end));)++end;if((rect=ie&&ie_version<9&&0==start&&end==place.coverEnd-place.coverStart?node.parentNode.getBoundingClientRect():getUsefulRect(range(node,start,end).getClientRects(),bias)).left||rect.right||0==start)break;end=start,start-=1,collapse="right"}ie&&ie_version<11&&(rect=function(measure,rect){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(measure){if(null!=badZoomedRects)return badZoomedRects;var node=removeChildrenAndAdd(measure,elt("span","x")),normal=node.getBoundingClientRect(),fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=1<Math.abs(normal.left-fromRange.left)}(measure))return rect;var scaleX=screen.logicalXDPI/screen.deviceXDPI,scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}(cm.display.measure,rect))}else{var rects;0<start&&(collapse=bias="right"),rect=cm.options.lineWrapping&&1<(rects=node.getClientRects()).length?rects["right"==bias?rects.length-1:0]:node.getBoundingClientRect()}if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];rect=rSpan?{left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom}:nullRect}for(var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top,mid=(rtop+rbot)/2,heights=prepared.view.measure.heights,i=0;i<heights.length-1&&!(mid<heights[i]);i++);var top=i?heights[i-1]:0,bot=heights[i],result={left:("right"==collapse?rect.right:rect.left)-prepared.rect.left,right:("left"==collapse?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};rect.left||rect.right||(result.bogus=!0);cm.options.singleCursorHeightPerLine||(result.rtop=rtop,result.rbottom=rbot);return result}(cm,prepared,ch,bias)).bogus||(prepared.cache[key]=found)),{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}var measureText,nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){for(var node,start,end,collapse,mStart,mEnd,i=0;i<map.length;i+=3)if(mStart=map[i],mEnd=map[i+1],ch<mStart?(start=0,end=1,collapse="left"):ch<mEnd?end=(start=ch-mStart)+1:(i==map.length-3||ch==mEnd&&map[i+3]>ch)&&(start=(end=mEnd-mStart)-1,mEnd<=ch&&(collapse="right")),null!=start){if(node=map[i+2],mStart==mEnd&&bias==(node.insertLeft?"left":"right")&&(collapse=bias),"left"==bias&&0==start)for(;i&&map[i-2]==map[i-3]&&map[i-1].insertLeft;)node=map[2+(i-=3)],collapse="left";if("right"==bias&&start==mEnd-mStart)for(;i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft;)node=map[(i+=3)+2],collapse="right";break}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}function getUsefulRect(rects,bias){var rect=nullRect;if("left"==bias)for(var i=0;i<rects.length&&(rect=rects[i]).left==rect.right;i++);else for(var i$1=rects.length-1;0<=i$1&&(rect=rects[i$1]).left==rect.right;i$1--);return rect}function clearLineMeasurementCacheFor(lineView){if(lineView.measure&&(lineView.measure.cache={},lineView.measure.heights=null,lineView.rest))for(var i=0;i<lineView.rest.length;i++)lineView.measure.caches[i]={}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null,removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++)clearLineMeasurementCacheFor(cm.display.view[i])}function clearCaches(cm){clearLineMeasurementCache(cm),cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null,cm.options.lineWrapping||(cm.display.maxLineChanged=!0),cm.display.lineNumChars=null}function pageScrollX(){return chrome&&android?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){return chrome&&android?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function widgetTopHeight(lineObj){var height=0;if(lineObj.widgets)for(var i=0;i<lineObj.widgets.length;++i)lineObj.widgets[i].above&&(height+=widgetHeight(lineObj.widgets[i]));return height}function intoCoordSystem(cm,lineObj,rect,context,includeWidgets){if(!includeWidgets){var height=widgetTopHeight(lineObj);rect.top+=height,rect.bottom+=height}if("line"==context)return rect;context||(context="local");var yOff=heightAtLine(lineObj);if("local"==context?yOff+=paddingTop(cm.display):yOff-=cm.display.viewOffset,"page"==context||"window"==context){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+("window"==context?0:pageScrollY());var xOff=lOff.left+("window"==context?0:pageScrollX());rect.left+=xOff,rect.right+=xOff}return rect.top+=yOff,rect.bottom+=yOff,rect}function fromCoordSystem(cm,coords,context){if("div"==context)return coords;var left=coords.left,top=coords.top;if("page"==context)left-=pageScrollX(),top-=pageScrollY();else if("local"==context||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left,top+=localBox.top}var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function charCoords(cm,pos,context,lineObj,bias){return lineObj||(lineObj=getLine(cm.doc,pos.line)),intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);return right?m.left=m.right:m.right=m.left,intoCoordSystem(cm,lineObj,m,context)}lineObj=lineObj||getLine(cm.doc,pos.line),preparedMeasure||(preparedMeasure=prepareMeasureForLine(cm,lineObj));var order=getOrder(lineObj,cm.doc.direction),ch=pos.ch,sticky=pos.sticky;if(ch>=lineObj.text.length?(ch=lineObj.text.length,sticky="before"):ch<=0&&(ch=0,sticky="after"),!order)return get("before"==sticky?ch-1:ch,"before"==sticky);function getBidi(ch,partPos,invert){return get(invert?ch-1:ch,1==order[partPos].level!=invert)}var partPos=getBidiPartAt(order,ch,sticky),other=bidiOther,val=getBidi(ch,partPos,"before"==sticky);return null!=other&&(val.other=getBidi(ch,other,"before"!=sticky)),val}function estimateCoords(cm,pos){var left=0;pos=clipPos(cm.doc,pos),cm.options.lineWrapping||(left=charWidth(cm.display)*pos.ch);var lineObj=getLine(cm.doc,pos.line),top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}function PosWithInfo(line,ch,sticky,outside,xRel){var pos=Pos(line,ch,sticky);return pos.xRel=xRel,outside&&(pos.outside=outside),pos}function coordsChar(cm,x,y){var doc=cm.doc;if((y+=cm.display.viewOffset)<0)return PosWithInfo(doc.first,0,null,-1,-1);var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(last<lineN)return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,null,1,1);x<0&&(x=0);for(var lineObj=getLine(doc,lineN);;){var found=coordsCharInner(cm,lineObj,lineN,x,y),collapsed=collapsedSpanAround(lineObj,found.ch+(0<found.xRel||0<found.outside?1:0));if(!collapsed)return found;var rangeEnd=collapsed.find(1);if(rangeEnd.line==lineN)return rangeEnd;lineObj=getLine(doc,lineN=rangeEnd.line)}}function wrappedLineExtent(cm,lineObj,preparedMeasure,y){y-=widgetTopHeight(lineObj);var end=lineObj.text.length,begin=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch-1).bottom<=y},end,0);return{begin:begin,end:end=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch).top>y},begin,end)}}function wrappedLineExtentChar(cm,lineObj,preparedMeasure,target){return preparedMeasure||(preparedMeasure=prepareMeasureForLine(cm,lineObj)),wrappedLineExtent(cm,lineObj,preparedMeasure,intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,target),"line").top)}function boxIsAfter(box,x,y,left){return!(box.bottom<=y)&&(box.top>y||(left?box.left:box.right)>x)}function coordsCharInner(cm,lineObj,lineNo,x,y){y-=heightAtLine(lineObj);var preparedMeasure=prepareMeasureForLine(cm,lineObj),widgetHeight=widgetTopHeight(lineObj),begin=0,end=lineObj.text.length,ltr=!0,order=getOrder(lineObj,cm.doc.direction);if(order){var part=(cm.options.lineWrapping?function(cm,lineObj,_lineNo,preparedMeasure,order,x,y){var ref=wrappedLineExtent(cm,lineObj,preparedMeasure,y),begin=ref.begin,end=ref.end;/\s/.test(lineObj.text.charAt(end-1))&&end--;for(var part=null,closestDist=null,i=0;i<order.length;i++){var p=order[i];if(!(p.from>=end||p.to<=begin)){var ltr=1!=p.level,endX=measureCharPrepared(cm,preparedMeasure,ltr?Math.min(end,p.to)-1:Math.max(begin,p.from)).right,dist=endX<x?x-endX+1e9:endX-x;(!part||dist<closestDist)&&(part=p,closestDist=dist)}}part||(part=order[order.length-1]);part.from<begin&&(part={from:begin,to:part.to,level:part.level});part.to>end&&(part={from:part.from,to:end,level:part.level});return part}:function(cm,lineObj,lineNo,preparedMeasure,order,x,y){var index=findFirst(function(i){var part=order[i],ltr=1!=part.level;return boxIsAfter(cursorCoords(cm,Pos(lineNo,ltr?part.to:part.from,ltr?"before":"after"),"line",lineObj,preparedMeasure),x,y,!0)},0,order.length-1),part=order[index];if(0<index){var ltr=1!=part.level,start=cursorCoords(cm,Pos(lineNo,ltr?part.from:part.to,ltr?"after":"before"),"line",lineObj,preparedMeasure);boxIsAfter(start,x,y,!0)&&start.top>y&&(part=order[index-1])}return part})(cm,lineObj,lineNo,preparedMeasure,order,x,y);begin=(ltr=1!=part.level)?part.from:part.to-1,end=ltr?part.to:part.from-1}var baseX,sticky,chAround=null,boxAround=null,ch=findFirst(function(ch){var box=measureCharPrepared(cm,preparedMeasure,ch);return box.top+=widgetHeight,box.bottom+=widgetHeight,!!boxIsAfter(box,x,y,!1)&&(box.top<=y&&box.left<=x&&(chAround=ch,boxAround=box),!0)},begin,end),outside=!1;if(boxAround){var atLeft=x-boxAround.left<boxAround.right-x,atStart=atLeft==ltr;ch=chAround+(atStart?0:1),sticky=atStart?"after":"before",baseX=atLeft?boxAround.left:boxAround.right}else{ltr||ch!=end&&ch!=begin||ch++,sticky=0==ch?"after":ch==lineObj.text.length?"before":measureCharPrepared(cm,preparedMeasure,ch-(ltr?1:0)).bottom+widgetHeight<=y==ltr?"after":"before";var coords=cursorCoords(cm,Pos(lineNo,ch,sticky),"line",lineObj,preparedMeasure);baseX=coords.left,outside=y<coords.top?-1:y>=coords.bottom?1:0}return PosWithInfo(lineNo,ch=skipExtendingChars(lineObj.text,ch,1),sticky,outside,x-baseX)}function textHeight(display){if(null!=display.cachedTextHeight)return display.cachedTextHeight;if(null==measureText){measureText=elt("pre",null,"CodeMirror-line-like");for(var i=0;i<49;++i)measureText.appendChild(document.createTextNode("x")),measureText.appendChild(elt("br"));measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;return 3<height&&(display.cachedTextHeight=height),removeChildren(display.measure),height||1}function charWidth(display){if(null!=display.cachedCharWidth)return display.cachedCharWidth;var anchor=elt("span","xxxxxxxxxx"),pre=elt("pre",[anchor],"CodeMirror-line-like");removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;return 2<width&&(display.cachedCharWidth=width),width||10}function getDimensions(cm){for(var d=cm.display,left={},width={},gutterLeft=d.gutters.clientLeft,n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){var id=cm.display.gutterSpecs[i].className;left[id]=n.offsetLeft+n.clientLeft+gutterLeft,width[id]=n.clientWidth}return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping,perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line))return 0;var widgetsHeight=0;if(line.widgets)for(var i=0;i<line.widgets.length;i++)line.widgets[i].height&&(widgetsHeight+=line.widgets[i].height);return wrapping?widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th:widgetsHeight+th}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);estHeight!=line.height&&updateLineHeight(line,estHeight)})}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&"true"==e_target(e).getAttribute("cm-not-content"))return null;var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left,y=e.clientY-space.top}catch(e$1){return null}var line,coords=coordsChar(cm,x,y);if(forRect&&0<coords.xRel&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}return coords}function findViewIndex(cm,n){if(n>=cm.display.viewTo)return null;if((n-=cm.display.viewFrom)<0)return null;for(var view=cm.display.view,i=0;i<view.length;i++)if((n-=view[i].size)<0)return i}function regChange(cm,from,to,lendiff){null==from&&(from=cm.doc.first),null==to&&(to=cm.doc.first+cm.doc.size),lendiff||(lendiff=0);var display=cm.display;if(lendiff&&to<display.viewTo&&(null==display.updateLineNumbers||display.updateLineNumbers>from)&&(display.updateLineNumbers=from),cm.curOp.viewChanged=!0,from>=display.viewTo)sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo&&resetView(cm);else if(to<=display.viewFrom)sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom?resetView(cm):(display.viewFrom+=lendiff,display.viewTo+=lendiff);else if(from<=display.viewFrom&&to>=display.viewTo)resetView(cm);else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);cut?(display.view=display.view.slice(cut.index),display.viewFrom=cut.lineN,display.viewTo+=lendiff):resetView(cm)}else if(to>=display.viewTo){var cut$1=viewCuttingPoint(cm,from,from,-1);cut$1?(display.view=display.view.slice(0,cut$1.index),display.viewTo=cut$1.lineN):resetView(cm)}else{var cutTop=viewCuttingPoint(cm,from,from,-1),cutBot=viewCuttingPoint(cm,to,to+lendiff,1);cutTop&&cutBot?(display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index)),display.viewTo+=lendiff):resetView(cm)}var ext=display.externalMeasured;ext&&(to<ext.lineN?ext.lineN+=lendiff:from<ext.lineN+ext.size&&(display.externalMeasured=null))}function regLineChange(cm,line,type){cm.curOp.viewChanged=!0;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size&&(display.externalMeasured=null),!(line<display.viewFrom||line>=display.viewTo)){var lineView=display.view[findViewIndex(cm,line)];if(null!=lineView.node){var arr=lineView.changes||(lineView.changes=[]);-1==indexOf(arr,type)&&arr.push(type)}}}function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first,cm.display.view=[],cm.display.viewOffset=0}function viewCuttingPoint(cm,oldN,newN,dir){var diff,index=findViewIndex(cm,oldN),view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size)return{index:index,lineN:newN};for(var n=cm.display.viewFrom,i=0;i<index;i++)n+=view[i].size;if(n!=oldN){if(0<dir){if(index==view.length-1)return null;diff=n+view[index].size-oldN,index++}else diff=n-oldN;oldN+=diff,newN+=diff}for(;visualLineNo(cm.doc,newN)!=newN;){if(index==(dir<0?0:view.length-1))return null;newN+=dir*view[index-(dir<0?1:0)].size,index+=dir}return{index:index,lineN:newN}}function countDirtyView(cm){for(var view=cm.display.view,dirty=0,i=0;i<view.length;i++){var lineView=view[i];lineView.hidden||lineView.node&&!lineView.changes||++dirty}return dirty}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){void 0===primary&&(primary=!0);for(var doc=cm.doc,result={},curFragment=result.cursors=document.createDocumentFragment(),selFragment=result.selection=document.createDocumentFragment(),i=0;i<doc.sel.ranges.length;i++)if(primary||i!=doc.sel.primIndex){var range=doc.sel.ranges[i];if(!(range.from().line>=cm.display.viewTo||range.to().line<cm.display.viewFrom)){var collapsed=range.empty();(collapsed||cm.options.showCursorWhenSelecting)&&drawSelectionCursor(cm,range.head,curFragment),collapsed||drawSelectionRange(cm,range,selFragment)}}return result}function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine),cursor=output.appendChild(elt("div"," ","CodeMirror-cursor"));if(cursor.style.left=pos.left+"px",cursor.style.top=pos.top+"px",cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px",pos.other){var otherCursor=output.appendChild(elt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="",otherCursor.style.left=pos.other.left+"px",otherCursor.style.top=pos.other.top+"px",otherCursor.style.height=.85*(pos.other.bottom-pos.other.top)+"px"}}function cmpCoords(a,b){return a.top-b.top||a.left-b.left}function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc,fragment=document.createDocumentFragment(),padding=paddingH(cm.display),leftSide=padding.left,rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right,docLTR="ltr"==doc.direction;function add(left,top,width,bottom){top<0&&(top=0),top=Math.round(top),bottom=Math.round(bottom),fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px;\n                             top: "+top+"px; width: "+(null==width?rightSide-left:width)+"px;\n                             height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var start,end,lineObj=getLine(doc,line),lineLen=lineObj.text.length;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}function wrapX(pos,dir,side){var extent=wrappedLineExtentChar(cm,lineObj,null,pos),prop="ltr"==dir==("after"==side)?"left":"right";return coords("after"==side?extent.begin:extent.end-(/\s/.test(lineObj.text.charAt(extent.end-1))?2:1),prop)[prop]}var order=getOrder(lineObj,doc.direction);return function(order,from,to,f){if(!order)return f(from,to,"ltr",0);for(var found=!1,i=0;i<order.length;++i){var part=order[i];(part.from<to&&part.to>from||from==to&&part.to==from)&&(f(Math.max(part.from,from),Math.min(part.to,to),1==part.level?"rtl":"ltr",i),found=!0)}found||f(from,to,"ltr")}(order,fromArg||0,null==toArg?lineLen:toArg,function(from,to,dir,i){var ltr="ltr"==dir,fromPos=coords(from,ltr?"left":"right"),toPos=coords(to-1,ltr?"right":"left"),openStart=null==fromArg&&0==from,openEnd=null==toArg&&to==lineLen,first=0==i,last=!order||i==order.length-1;if(toPos.top-fromPos.top<=3){var openRight=(docLTR?openEnd:openStart)&&last,left=(docLTR?openStart:openEnd)&&first?leftSide:(ltr?fromPos:toPos).left,right=openRight?rightSide:(ltr?toPos:fromPos).right;add(left,fromPos.top,right-left,fromPos.bottom)}else{var topLeft,topRight,botLeft,botRight;botRight=ltr?(topLeft=docLTR&&openStart&&first?leftSide:fromPos.left,topRight=docLTR?rightSide:wrapX(from,dir,"before"),botLeft=docLTR?leftSide:wrapX(to,dir,"after"),docLTR&&openEnd&&last?rightSide:toPos.right):(topLeft=docLTR?wrapX(from,dir,"before"):leftSide,topRight=!docLTR&&openStart&&first?rightSide:fromPos.right,botLeft=!docLTR&&openEnd&&last?leftSide:toPos.left,docLTR?wrapX(to,dir,"after"):rightSide),add(topLeft,fromPos.top,topRight-topLeft,fromPos.bottom),fromPos.bottom<toPos.top&&add(leftSide,fromPos.bottom,null,toPos.top),add(botLeft,toPos.top,botRight-botLeft,toPos.bottom)}(!start||cmpCoords(fromPos,start)<0)&&(start=fromPos),cmpCoords(toPos,start)<0&&(start=toPos),(!end||cmpCoords(fromPos,end)<0)&&(end=fromPos),cmpCoords(toPos,end)<0&&(end=toPos)}),{start:start,end:end}}var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line)drawForLine(sFrom.line,sFrom.ch,sTo.ch);else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line),singleVLine=visualLine(fromLine)==visualLine(toLine),leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end,rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;singleVLine&&(leftEnd.top<rightStart.top-2?(add(leftEnd.right,leftEnd.top,null,leftEnd.bottom),add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)):add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)),leftEnd.bottom<rightStart.top&&add(leftSide,leftEnd.bottom,null,rightStart.top)}output.appendChild(fragment)}function restartBlink(cm){if(cm.state.focused){var display=cm.display;clearInterval(display.blinker);var on=!0;display.cursorDiv.style.visibility="",0<cm.options.cursorBlinkRate?display.blinker=setInterval(function(){cm.hasFocus()||onBlur(cm),display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate):cm.options.cursorBlinkRate<0&&(display.cursorDiv.style.visibility="hidden")}}function ensureFocus(cm){cm.hasFocus()||(cm.display.input.focus(),cm.state.focused||onFocus(cm))}function delayBlurEvent(cm){cm.state.delayingBlurEvent=!0,setTimeout(function(){cm.state.delayingBlurEvent&&(cm.state.delayingBlurEvent=!1,cm.state.focused&&onBlur(cm))},100)}function onFocus(cm,e){cm.state.delayingBlurEvent&&!cm.state.draggingText&&(cm.state.delayingBlurEvent=!1),"nocursor"!=cm.options.readOnly&&(cm.state.focused||(signal(cm,"focus",cm,e),cm.state.focused=!0,addClass(cm.display.wrapper,"CodeMirror-focused"),cm.curOp||cm.display.selForContextMenu==cm.doc.sel||(cm.display.input.reset(),webkit&&setTimeout(function(){return cm.display.input.reset(!0)},20)),cm.display.input.receivedFocus()),restartBlink(cm))}function onBlur(cm,e){cm.state.delayingBlurEvent||(cm.state.focused&&(signal(cm,"blur",cm,e),cm.state.focused=!1,rmClass(cm.display.wrapper,"CodeMirror-focused")),clearInterval(cm.display.blinker),setTimeout(function(){cm.state.focused||(cm.display.shift=!1)},150))}function updateHeightsInViewport(cm){for(var display=cm.display,prevBottom=display.lineDiv.offsetTop,i=0;i<display.view.length;i++){var cur=display.view[i],wrapping=cm.options.lineWrapping,height=void 0,width=0;if(!cur.hidden){if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom,prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top,!wrapping&&cur.text.firstChild&&(width=cur.text.firstChild.getBoundingClientRect().right-box.left-1)}var diff=cur.line.height-height;if((.005<diff||diff<-.005)&&(updateLineHeight(cur.line,height),updateWidgetHeight(cur.line),cur.rest))for(var j=0;j<cur.rest.length;j++)updateWidgetHeight(cur.rest[j]);if(width>cm.display.sizerWidth){var chWidth=Math.ceil(width/charWidth(cm.display));chWidth>cm.display.maxLineLength&&(cm.display.maxLineLength=chWidth,cm.display.maxLine=cur.line,cm.display.maxLineChanged=!0)}}}}function updateWidgetHeight(line){if(line.widgets)for(var i=0;i<line.widgets.length;++i){var w=line.widgets[i],parent=w.node.parentNode;parent&&(w.height=parent.offsetHeight)}}function visibleLines(display,doc,viewport){var top=viewport&&null!=viewport.top?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&null!=viewport.bottom?viewport.bottom:top+display.wrapper.clientHeight,from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;ensureFrom<from?to=lineAtHeight(doc,heightAtLine(getLine(doc,from=ensureFrom))+display.wrapper.clientHeight):Math.min(ensureTo,doc.lastLine())>=to&&(from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight),to=ensureTo)}return{from:from,to:Math.max(to,from+1)}}function calculateScrollPos(cm,rect){var display=cm.display,snapMargin=textHeight(cm.display);rect.top<0&&(rect.top=0);var screentop=cm.curOp&&null!=cm.curOp.scrollTop?cm.curOp.scrollTop:display.scroller.scrollTop,screen=displayHeight(cm),result={};rect.bottom-rect.top>screen&&(rect.bottom=rect.top+screen);var docBottom=cm.doc.height+paddingVert(display),atTop=rect.top<snapMargin,atBottom=rect.bottom>docBottom-snapMargin;if(rect.top<screentop)result.scrollTop=atTop?0:rect.top;else if(rect.bottom>screentop+screen){var newTop=Math.min(rect.top,(atBottom?docBottom:rect.bottom)-screen);newTop!=screentop&&(result.scrollTop=newTop)}var gutterSpace=cm.options.fixedGutter?0:display.gutters.offsetWidth,screenleft=cm.curOp&&null!=cm.curOp.scrollLeft?cm.curOp.scrollLeft:display.scroller.scrollLeft-gutterSpace,screenw=displayWidth(cm)-display.gutters.offsetWidth,tooWide=rect.right-rect.left>screenw;return tooWide&&(rect.right=rect.left+screenw),rect.left<10?result.scrollLeft=0:rect.left<screenleft?result.scrollLeft=Math.max(0,rect.left+gutterSpace-(tooWide?0:10)):rect.right>screenw+screenleft-3&&(result.scrollLeft=rect.right+(tooWide?0:10)-screenw),result}function addToScrollTop(cm,top){null!=top&&(resolveScrollToPos(cm),cm.curOp.scrollTop=(null==cm.curOp.scrollTop?cm.doc.scrollTop:cm.curOp.scrollTop)+top)}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor();cm.curOp.scrollToPos={from:cur,to:cur,margin:cm.options.cursorScrollMargin}}function scrollToCoords(cm,x,y){null==x&&null==y||resolveScrollToPos(cm),null!=x&&(cm.curOp.scrollLeft=x),null!=y&&(cm.curOp.scrollTop=y)}function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;range&&(cm.curOp.scrollToPos=null,scrollToCoordsRange(cm,estimateCoords(cm,range.from),estimateCoords(cm,range.to),range.margin))}function scrollToCoordsRange(cm,from,to,margin){var sPos=calculateScrollPos(cm,{left:Math.min(from.left,to.left),top:Math.min(from.top,to.top)-margin,right:Math.max(from.right,to.right),bottom:Math.max(from.bottom,to.bottom)+margin});scrollToCoords(cm,sPos.scrollLeft,sPos.scrollTop)}function updateScrollTop(cm,val){Math.abs(cm.doc.scrollTop-val)<2||(gecko||updateDisplaySimple(cm,{top:val}),setScrollTop(cm,val,!0),gecko&&updateDisplaySimple(cm),startWorker(cm,100))}function setScrollTop(cm,val,forceScroll){val=Math.max(0,Math.min(cm.display.scroller.scrollHeight-cm.display.scroller.clientHeight,val)),(cm.display.scroller.scrollTop!=val||forceScroll)&&(cm.doc.scrollTop=val,cm.display.scrollbars.setScrollTop(val),cm.display.scroller.scrollTop!=val&&(cm.display.scroller.scrollTop=val))}function setScrollLeft(cm,val,isScroller,forceScroll){val=Math.max(0,Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth)),(isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)&&!forceScroll||(cm.doc.scrollLeft=val,alignHorizontally(cm),cm.display.scroller.scrollLeft!=val&&(cm.display.scroller.scrollLeft=val),cm.display.scrollbars.setScrollLeft(val))}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth,docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}var NativeScrollbars=function(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");vert.tabIndex=horiz.tabIndex=-1,place(vert),place(horiz),on(vert,"scroll",function(){vert.clientHeight&&scroll(vert.scrollTop,"vertical")}),on(horiz,"scroll",function(){horiz.clientWidth&&scroll(horiz.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ie&&ie_version<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};NativeScrollbars.prototype.update=function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1,needsV=measure.scrollHeight>measure.clientHeight+1,sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block",this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(needsH){this.horiz.style.display="block",this.horiz.style.right=needsV?sWidth+"px":"0",this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=Math.max(0,measure.scrollWidth-measure.clientWidth+totalWidth)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<measure.clientHeight&&(0==sWidth&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:needsV?sWidth:0,bottom:needsH?sWidth:0}},NativeScrollbars.prototype.setScrollLeft=function(pos){this.horiz.scrollLeft!=pos&&(this.horiz.scrollLeft=pos),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},NativeScrollbars.prototype.setScrollTop=function(pos){this.vert.scrollTop!=pos&&(this.vert.scrollTop=pos),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},NativeScrollbars.prototype.zeroWidthHack=function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Delayed,this.disableVert=new Delayed},NativeScrollbars.prototype.enableZeroWidthBar=function(bar,delay,type){bar.style.pointerEvents="auto",delay.set(1e3,function maybeDisable(){var box=bar.getBoundingClientRect();("vert"==type?document.elementFromPoint(box.right-1,(box.top+box.bottom)/2):document.elementFromPoint((box.right+box.left)/2,box.bottom-1))!=bar?bar.style.pointerEvents="none":delay.set(1e3,maybeDisable)})},NativeScrollbars.prototype.clear=function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz),parent.removeChild(this.vert)};var NullScrollbars=function(){};function updateScrollbars(cm,measure){measure||(measure=measureForScrollbars(cm));var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++)startWidth!=cm.display.barWidth&&cm.options.lineWrapping&&updateHeightsInViewport(cm),updateScrollbarsInner(cm,measureForScrollbars(cm)),startWidth=cm.display.barWidth,startHeight=cm.display.barHeight}function updateScrollbarsInner(cm,measure){var d=cm.display,sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px",d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px",d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent",sizes.right&&sizes.bottom?(d.scrollbarFiller.style.display="block",d.scrollbarFiller.style.height=sizes.bottom+"px",d.scrollbarFiller.style.width=sizes.right+"px"):d.scrollbarFiller.style.display="",sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter?(d.gutterFiller.style.display="block",d.gutterFiller.style.height=sizes.bottom+"px",d.gutterFiller.style.width=measure.gutterWidth+"px"):d.gutterFiller.style.display=""}NullScrollbars.prototype.update=function(){return{bottom:0,right:0}},NullScrollbars.prototype.setScrollLeft=function(){},NullScrollbars.prototype.setScrollTop=function(){},NullScrollbars.prototype.clear=function(){};var scrollbarModel={native:NativeScrollbars,null:NullScrollbars};function initScrollbars(cm){cm.display.scrollbars&&(cm.display.scrollbars.clear(),cm.display.scrollbars.addClass&&rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)),cm.display.scrollbars=new scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller),on(node,"mousedown",function(){cm.state.focused&&setTimeout(function(){return cm.display.input.focus()},0)}),node.setAttribute("cm-not-content","true")},function(pos,axis){"horizontal"==axis?setScrollLeft(cm,pos):updateScrollTop(cm,pos)},cm),cm.display.scrollbars.addClass&&addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}var nextOpId=0;function startOperation(cm){var op;cm.curOp={cm:cm,viewChanged:!1,startHeight:cm.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nextOpId},op=cm.curOp,operationGroup?operationGroup.ops.push(op):op.ownsGroup=operationGroup={ops:[op],delayedCallbacks:[]}}function endOperation(cm){var op=cm.curOp;op&&function(op,endCb){var group=op.ownsGroup;if(group)try{!function(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++)callbacks[i].call(null);for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers)for(;op.cursorActivityCalled<op.cursorActivityHandlers.length;)op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}while(i<callbacks.length)}(group)}finally{operationGroup=null,endCb(group)}}(op,function(group){for(var i=0;i<group.ops.length;i++)group.ops[i].cm.curOp=null;!function(group){for(var ops=group.ops,i=0;i<ops.length;i++)endOperation_R1(ops[i]);for(var i$1=0;i$1<ops.length;i$1++)(op=ops[i$1]).updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update);var op;for(var i$2=0;i$2<ops.length;i$2++)endOperation_R2(ops[i$2]);for(var i$3=0;i$3<ops.length;i$3++)endOperation_W2(ops[i$3]);for(var i$4=0;i$4<ops.length;i$4++)endOperation_finish(ops[i$4])}(group)})}function endOperation_R1(op){var cm=op.cm,display=cm.display;!function(cm){var display=cm.display;!display.scrollbarsClipped&&display.scroller.offsetWidth&&(display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth,display.heightForcer.style.height=scrollGap(cm)+"px",display.sizer.style.marginBottom=-display.nativeBarWidth+"px",display.sizer.style.borderRightWidth=scrollGap(cm)+"px",display.scrollbarsClipped=!0)}(cm),op.updateMaxLine&&findMaxLine(cm),op.mustUpdate=op.viewChanged||op.forceUpdate||null!=op.scrollTop||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping,op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}function endOperation_R2(op){var cm=op.cm,display=cm.display;op.updatedDisplay&&updateHeightsInViewport(cm),op.barMeasure=measureForScrollbars(cm),display.maxLineChanged&&!cm.options.lineWrapping&&(op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3,cm.display.sizerWidth=op.adjustWidthTo,op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth),op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))),(op.updatedDisplay||op.selectionChanged)&&(op.preparedSelection=display.input.prepareSelection())}function endOperation_W2(op){var cm=op.cm;null!=op.adjustWidthTo&&(cm.display.sizer.style.minWidth=op.adjustWidthTo+"px",op.maxScrollLeft<cm.doc.scrollLeft&&setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),!0),cm.display.maxLineChanged=!1);var takeFocus=op.focus&&op.focus==activeElt();op.preparedSelection&&cm.display.input.showSelection(op.preparedSelection,takeFocus),(op.updatedDisplay||op.startHeight!=cm.doc.height)&&updateScrollbars(cm,op.barMeasure),op.updatedDisplay&&setDocumentHeight(cm,op.barMeasure),op.selectionChanged&&restartBlink(cm),cm.state.focused&&op.updateInput&&cm.display.input.reset(op.typing),takeFocus&&ensureFocus(op.cm)}function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;(op.updatedDisplay&&postUpdateDisplay(cm,op.update),null==display.wheelStartX||null==op.scrollTop&&null==op.scrollLeft&&!op.scrollToPos||(display.wheelStartX=display.wheelStartY=null),null!=op.scrollTop&&setScrollTop(cm,op.scrollTop,op.forceScroll),null!=op.scrollLeft&&setScrollLeft(cm,op.scrollLeft,!0,!0),op.scrollToPos)&&function(cm,rect){if(!signalDOMEvent(cm,"scrollCursorIntoView")){var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(rect.top+box.top<0?doScroll=!0:rect.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)&&(doScroll=!1),null!=doScroll&&!phantom){var scrollNode=elt("div","​",null,"position: absolute;\n                         top: "+(rect.top-display.viewOffset-paddingTop(cm.display))+"px;\n                         height: "+(rect.bottom-rect.top+scrollGap(cm)+display.barHeight)+"px;\n                         left: "+rect.left+"px; width: "+Math.max(2,rect.right-rect.left)+"px;");cm.display.lineSpace.appendChild(scrollNode),scrollNode.scrollIntoView(doScroll),cm.display.lineSpace.removeChild(scrollNode)}}}(cm,function(cm,pos,end,margin){var rect;null==margin&&(margin=0),cm.options.lineWrapping||pos!=end||(end="before"==(pos=pos.ch?Pos(pos.line,"before"==pos.sticky?pos.ch-1:pos.ch,"after"):pos).sticky?Pos(pos.line,pos.ch+1,"before"):pos);for(var limit=0;limit<5;limit++){var changed=!1,coords=cursorCoords(cm,pos),endCoords=end&&end!=pos?cursorCoords(cm,end):coords,scrollPos=calculateScrollPos(cm,rect={left:Math.min(coords.left,endCoords.left),top:Math.min(coords.top,endCoords.top)-margin,right:Math.max(coords.left,endCoords.left),bottom:Math.max(coords.bottom,endCoords.bottom)+margin}),startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(null!=scrollPos.scrollTop&&(updateScrollTop(cm,scrollPos.scrollTop),1<Math.abs(cm.doc.scrollTop-startTop)&&(changed=!0)),null!=scrollPos.scrollLeft&&(setScrollLeft(cm,scrollPos.scrollLeft),1<Math.abs(cm.doc.scrollLeft-startLeft)&&(changed=!0)),!changed)break}return rect}(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin));var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden)for(var i=0;i<hidden.length;++i)hidden[i].lines.length||signal(hidden[i],"hide");if(unhidden)for(var i$1=0;i$1<unhidden.length;++i$1)unhidden[i$1].lines.length&&signal(unhidden[i$1],"unhide");display.wrapper.offsetHeight&&(doc.scrollTop=cm.display.scroller.scrollTop),op.changeObjs&&signal(cm,"changes",cm,op.changeObjs),op.update&&op.update.finish()}function runInOp(cm,f){if(cm.curOp)return f();startOperation(cm);try{return f()}finally{endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp)return f.apply(cm,arguments);startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp)return f.apply(this,arguments);startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp)return f.apply(this,arguments);startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}function startWorker(cm,time){cm.doc.highlightFrontier<cm.display.viewTo&&cm.state.highlight.set(time,bind(highlightWorker,cm))}function highlightWorker(cm){var doc=cm.doc;if(!(doc.highlightFrontier>=cm.display.viewTo)){var end=+new Date+cm.options.workTime,context=getContextBefore(cm,doc.highlightFrontier),changedLines=[];doc.iter(context.line,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(context.line>=cm.display.viewFrom){var oldStyles=line.styles,resetState=line.text.length>cm.options.maxHighlightLength?copyState(doc.mode,context.state):null,highlighted=highlightLine(cm,line,context,!0);resetState&&(context.state=resetState),line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;newCls?line.styleClasses=newCls:oldCls&&(line.styleClasses=null);for(var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass),i=0;!ischange&&i<oldStyles.length;++i)ischange=oldStyles[i]!=line.styles[i];ischange&&changedLines.push(context.line),line.stateAfter=context.save(),context.nextLine()}else line.text.length<=cm.options.maxHighlightLength&&processLine(cm,line.text,context),line.stateAfter=context.line%5==0?context.save():null,context.nextLine();if(+new Date>end)return startWorker(cm,cm.options.workDelay),!0}),doc.highlightFrontier=context.line,doc.modeFrontier=Math.max(doc.modeFrontier,context.line),changedLines.length&&runInOp(cm,function(){for(var i=0;i<changedLines.length;i++)regLineChange(cm,changedLines[i],"text")})}}var DisplayUpdate=function(cm,viewport,force){var display=cm.display;this.viewport=viewport,this.visible=visibleLines(display,cm.doc,viewport),this.editorIsHidden=!display.wrapper.offsetWidth,this.wrapperHeight=display.wrapper.clientHeight,this.wrapperWidth=display.wrapper.clientWidth,this.oldDisplayWidth=displayWidth(cm),this.force=force,this.dims=getDimensions(cm),this.events=[]};function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden)return resetView(cm),!1;if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(null==display.updateLineNumbers||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&0==countDirtyView(cm))return!1;maybeUpdateLineNumberWidth(cm)&&(resetView(cm),update.dims=getDimensions(cm));var end=doc.first+doc.size,from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first),to=Math.min(end,update.visible.to+cm.options.viewportMargin);display.viewFrom<from&&from-display.viewFrom<20&&(from=Math.max(doc.first,display.viewFrom)),display.viewTo>to&&display.viewTo-to<20&&(to=Math.min(end,display.viewTo)),sawCollapsedSpans&&(from=visualLineNo(cm.doc,from),to=visualLineEndNo(cm.doc,to));var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;!function(cm,from,to){var display=cm.display;0==display.view.length||from>=display.viewTo||to<=display.viewFrom?(display.view=buildViewArray(cm,from,to),display.viewFrom=from):(display.viewFrom>from?display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view):display.viewFrom<from&&(display.view=display.view.slice(findViewIndex(cm,from))),display.viewFrom=from,display.viewTo<to?display.view=display.view.concat(buildViewArray(cm,display.viewTo,to)):display.viewTo>to&&(display.view=display.view.slice(0,findViewIndex(cm,to)))),display.viewTo=to}(cm,from,to),display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom)),cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&0==toUpdate&&!update.force&&display.renderedView==display.view&&(null==display.updateLineNumbers||display.updateLineNumbers>=display.viewTo))return!1;var selSnapshot=function(cm){if(cm.hasFocus())return null;var active=activeElt();if(!active||!contains(cm.display.lineDiv,active))return null;var result={activeElt:active};if(window.getSelection){var sel=window.getSelection();sel.anchorNode&&sel.extend&&contains(cm.display.lineDiv,sel.anchorNode)&&(result.anchorNode=sel.anchorNode,result.anchorOffset=sel.anchorOffset,result.focusNode=sel.focusNode,result.focusOffset=sel.focusOffset)}return result}(cm);return 4<toUpdate&&(display.lineDiv.style.display="none"),function(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers,container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;return webkit&&mac&&cm.display.currentWheelTarget==node?node.style.display="none":node.parentNode.removeChild(node),next}for(var view=display.view,lineN=display.viewFrom,i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden);else if(lineView.node&&lineView.node.parentNode==container){for(;cur!=lineView.node;)cur=rm(cur);var updateNumber=lineNumbers&&null!=updateNumbersFrom&&updateNumbersFrom<=lineN&&lineView.lineNumber;lineView.changes&&(-1<indexOf(lineView.changes,"gutter")&&(updateNumber=!1),updateLineForChanges(cm,lineView,lineN,dims)),updateNumber&&(removeChildren(lineView.lineNumber),lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))),cur=lineView.node.nextSibling}else{var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}lineN+=lineView.size}for(;cur;)cur=rm(cur)}(cm,display.updateLineNumbers,update.dims),4<toUpdate&&(display.lineDiv.style.display=""),display.renderedView=display.view,function(snapshot){if(snapshot&&snapshot.activeElt&&snapshot.activeElt!=activeElt()&&(snapshot.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName)&&snapshot.anchorNode&&contains(document.body,snapshot.anchorNode)&&contains(document.body,snapshot.focusNode))){var sel=window.getSelection(),range=document.createRange();range.setEnd(snapshot.anchorNode,snapshot.anchorOffset),range.collapse(!1),sel.removeAllRanges(),sel.addRange(range),sel.extend(snapshot.focusNode,snapshot.focusOffset)}}(selSnapshot),removeChildren(display.cursorDiv),removeChildren(display.selectionDiv),display.gutters.style.height=display.sizer.style.minHeight=0,different&&(display.lastWrapHeight=update.wrapperHeight,display.lastWrapWidth=update.wrapperWidth,startWorker(cm,400)),!(display.updateLineNumbers=null)}function postUpdateDisplay(cm,update){for(var viewport=update.viewport,first=!0;;first=!1){if(first&&cm.options.lineWrapping&&update.oldDisplayWidth!=displayWidth(cm))first&&(update.visible=visibleLines(cm.display,cm.doc,viewport));else if(viewport&&null!=viewport.top&&(viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)}),update.visible=visibleLines(cm.display,cm.doc,viewport),update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo)break;if(!updateDisplayIfNeeded(cm,update))break;updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm),updateScrollbars(cm,barMeasure),setDocumentHeight(cm,barMeasure),update.force=!1}update.signal(cm,"update",cm),cm.display.viewFrom==cm.display.reportedViewFrom&&cm.display.viewTo==cm.display.reportedViewTo||(update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo),cm.display.reportedViewFrom=cm.display.viewFrom,cm.display.reportedViewTo=cm.display.viewTo)}function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm),postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm),updateScrollbars(cm,barMeasure),setDocumentHeight(cm,barMeasure),update.finish()}}function updateGutterSpace(display){var width=display.gutters.offsetWidth;display.sizer.style.marginLeft=width+"px"}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px",cm.display.heightForcer.style.top=measure.docHeight+"px",cm.display.gutters.style.height=measure.docHeight+cm.display.barHeight+scrollGap(cm)+"px"}function alignHorizontally(cm){var display=cm.display,view=display.view;if(display.alignWidgets||display.gutters.firstChild&&cm.options.fixedGutter){for(var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft,gutterW=display.gutters.offsetWidth,left=comp+"px",i=0;i<view.length;i++)if(!view[i].hidden){cm.options.fixedGutter&&(view[i].gutter&&(view[i].gutter.style.left=left),view[i].gutterBackground&&(view[i].gutterBackground.style.left=left));var align=view[i].alignable;if(align)for(var j=0;j<align.length;j++)align[j].style.left=left}cm.options.fixedGutter&&(display.gutters.style.left=comp+gutterW+"px")}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers)return!1;var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length==display.lineNumChars)return!1;var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt")),innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;return display.lineGutter.style.width="",display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1,display.lineNumWidth=display.lineNumInnerWidth+padding,display.lineNumChars=display.lineNumInnerWidth?last.length:-1,display.lineGutter.style.width=display.lineNumWidth+"px",updateGutterSpace(cm.display),!0}function getGutters(gutters,lineNumbers){for(var result=[],sawLineNumbers=!1,i=0;i<gutters.length;i++){var name=gutters[i],style=null;if("string"!=typeof name&&(style=name.style,name=name.className),"CodeMirror-linenumbers"==name){if(!lineNumbers)continue;sawLineNumbers=!0}result.push({className:name,style:style})}return lineNumbers&&!sawLineNumbers&&result.push({className:"CodeMirror-linenumbers",style:null}),result}function renderGutters(display){var gutters=display.gutters,specs=display.gutterSpecs;removeChildren(gutters),display.lineGutter=null;for(var i=0;i<specs.length;++i){var ref=specs[i],className=ref.className,style=ref.style,gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+className));style&&(gElt.style.cssText=style),"CodeMirror-linenumbers"==className&&((display.lineGutter=gElt).style.width=(display.lineNumWidth||1)+"px")}gutters.style.display=specs.length?"":"none",updateGutterSpace(display)}function updateGutters(cm){renderGutters(cm.display),regChange(cm),alignHorizontally(cm)}function Display(place,doc,input,options){var d=this;this.input=input,d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=eltP("div",null,"CodeMirror-code"),d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=elt("div",null,"CodeMirror-cursors"),d.measure=elt("div",null,"CodeMirror-measure"),d.lineMeasure=elt("div",null,"CodeMirror-measure"),d.lineSpace=eltP("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var lines=eltP("div",[d.lineSpace],"CodeMirror-lines");d.mover=elt("div",[lines],null,"position: relative"),d.sizer=elt("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;"),d.gutters=elt("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),ie&&ie_version<8&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),webkit||gecko&&mobile||(d.scroller.draggable=!0),place&&(place.appendChild?place.appendChild(d.wrapper):place(d.wrapper)),d.viewFrom=d.viewTo=doc.first,d.reportedViewFrom=d.reportedViewTo=doc.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,d.gutterSpecs=getGutters(options.gutters,options.lineNumbers),renderGutters(d),input.init(d)}DisplayUpdate.prototype.signal=function(emitter,type){hasHandler(emitter,type)&&this.events.push(arguments)},DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++)signal.apply(null,this.events[i])};var wheelSamples=0,wheelPixelsPerUnit=null;function wheelEventDelta(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;return null==dx&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(dx=e.detail),null==dy&&e.detail&&e.axis==e.VERTICAL_AXIS?dy=e.detail:null==dy&&(dy=e.wheelDelta),{x:dx,y:dy}}function wheelEventPixels(e){var delta=wheelEventDelta(e);return delta.x*=wheelPixelsPerUnit,delta.y*=wheelPixelsPerUnit,delta}function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y,display=cm.display,scroll=display.scroller,canScrollX=scroll.scrollWidth>scroll.clientWidth,canScrollY=scroll.scrollHeight>scroll.clientHeight;if(dx&&canScrollX||dy&&canScrollY){if(dy&&mac&&webkit)outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode)for(var i=0;i<view.length;i++)if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}if(dx&&!gecko&&!presto&&null!=wheelPixelsPerUnit)return dy&&canScrollY&&updateScrollTop(cm,Math.max(0,scroll.scrollTop+dy*wheelPixelsPerUnit)),setScrollLeft(cm,Math.max(0,scroll.scrollLeft+dx*wheelPixelsPerUnit)),(!dy||dy&&canScrollY)&&e_preventDefault(e),void(display.wheelStartX=null);if(dy&&null!=wheelPixelsPerUnit){var pixels=dy*wheelPixelsPerUnit,top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;pixels<0?top=Math.max(0,top+pixels-50):bot=Math.min(cm.doc.height,bot+pixels+50),updateDisplaySimple(cm,{top:top,bottom:bot})}wheelSamples<20&&(null==display.wheelStartX?(display.wheelStartX=scroll.scrollLeft,display.wheelStartY=scroll.scrollTop,display.wheelDX=dx,display.wheelDY=dy,setTimeout(function(){if(null!=display.wheelStartX){var movedX=scroll.scrollLeft-display.wheelStartX,movedY=scroll.scrollTop-display.wheelStartY,sample=movedY&&display.wheelDY&&movedY/display.wheelDY||movedX&&display.wheelDX&&movedX/display.wheelDX;display.wheelStartX=display.wheelStartY=null,sample&&(wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1),++wheelSamples)}},200)):(display.wheelDX+=dx,display.wheelDY+=dy))}}ie?wheelPixelsPerUnit=-.53:gecko?wheelPixelsPerUnit=15:chrome?wheelPixelsPerUnit=-.7:safari&&(wheelPixelsPerUnit=-1/3);var Selection=function(ranges,primIndex){this.ranges=ranges,this.primIndex=primIndex};Selection.prototype.primary=function(){return this.ranges[this.primIndex]},Selection.prototype.equals=function(other){if(other==this)return!0;if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(!equalCursorPos(here.anchor,there.anchor)||!equalCursorPos(here.head,there.head))return!1}return!0},Selection.prototype.deepCopy=function(){for(var out=[],i=0;i<this.ranges.length;i++)out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head));return new Selection(out,this.primIndex)},Selection.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},Selection.prototype.contains=function(pos,end){end||(end=pos);for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(0<=cmp(end,range.from())&&cmp(pos,range.to())<=0)return i}return-1};var Range=function(anchor,head){this.anchor=anchor,this.head=head};function normalizeSelection(cm,ranges,primIndex){var mayTouch=cm&&cm.options.selectionsMayTouch,prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())}),primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1],diff=cmp(prev.to(),cur.from());if(mayTouch&&!cur.empty()?0<diff:0<=diff){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to()),inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;i<=primIndex&&--primIndex,ranges.splice(--i,2,new Range(inv?to:from,inv?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function changeEnd(change){return change.text?Pos(change.from.line+change.text.length-1,lst(change.text).length+(1==change.text.length?change.from.ch:0)):change.to}function adjustForChange(pos,change){if(cmp(pos,change.from)<0)return pos;if(cmp(pos,change.to)<=0)return changeEnd(change);var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;return pos.line==change.to.line&&(ch+=changeEnd(change).ch-change.to.ch),Pos(line,ch)}function computeSelAfterChange(doc,change){for(var out=[],i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(doc.cm,out,doc.sel.primIndex)}function offsetPos(pos,old,nw){return pos.line==old.line?Pos(nw.line,pos.ch-old.ch+nw.ch):Pos(nw.line+(pos.line-old.line),pos.ch)}function loadMode(cm){cm.doc.mode=getMode(cm.options,cm.doc.modeOption),resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){line.stateAfter&&(line.stateAfter=null),line.styles&&(line.styles=null)}),cm.doc.modeFrontier=cm.doc.highlightFrontier=cm.doc.first,startWorker(cm,100),cm.state.modeGen++,cm.curOp&&regChange(cm)}function isWholeLineUpdate(doc,change){return 0==change.from.ch&&0==change.to.ch&&""==lst(change.text)&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){!function(line,text,markedSpans,estimateHeight){line.text=text,line.stateAfter&&(line.stateAfter=null),line.styles&&(line.styles=null),null!=line.order&&(line.order=null),detachMarkedSpans(line),attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;estHeight!=line.height&&updateLineHeight(line,estHeight)}(line,text,spans,estimateHeight),signalLater(line,"change",line,change)}function linesFor(start,end){for(var result=[],i=start;i<end;++i)result.push(new Line(text[i],spansFor(i),estimateHeight));return result}var from=change.from,to=change.to,text=change.text,firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line),lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full)doc.insert(0,linesFor(0,text.length)),doc.remove(text.length,doc.size-text.length);else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans),nlines&&doc.remove(from.line,nlines),added.length&&doc.insert(from.line,added)}else if(firstLine==lastLine)if(1==text.length)update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans);else{var added$1=linesFor(1,text.length-1);added$1.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight)),update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0)),doc.insert(from.line+1,added$1)}else if(1==text.length)update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0)),doc.remove(from.line+1,nlines);else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0)),update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added$2=linesFor(1,text.length-1);1<nlines&&doc.remove(from.line+1,nlines-1),doc.insert(from.line+1,added$2)}signalLater(doc,"change",doc,change)}function linkedDocs(doc,f,sharedHistOnly){!function propagate(doc,skip,sharedHist){if(doc.linked)for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc!=skip){var shared=sharedHist&&rel.sharedHist;sharedHistOnly&&!shared||(f(rel.doc,shared),propagate(rel.doc,doc,shared))}}}(doc,null,!0)}function attachDoc(cm,doc){if(doc.cm)throw new Error("This document is already in use.");estimateLineHeights((cm.doc=doc).cm=cm),loadMode(cm),setDirectionClass(cm),cm.options.lineWrapping||findMaxLine(cm),cm.options.mode=doc.modeOption,regChange(cm)}function setDirectionClass(cm){("rtl"==cm.doc.direction?addClass:rmClass)(cm.display.lineDiv,"CodeMirror-rtl")}function History(prev){this.done=[],this.undone=[],this.undoDepth=prev?prev.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=prev?prev.maxGeneration:1}function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1),linkedDocs(doc,function(doc){return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},!0),histChange}function clearSelectionEvents(array){for(;array.length;){if(!lst(array).ranges)break;array.pop()}}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var cur,last,time=+new Date;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&("+"==change.origin.charAt(0)&&hist.lastModTime>time-(doc.cm?doc.cm.options.historyEventDelay:500)||"*"==change.origin.charAt(0)))&&(cur=function(hist,force){return force?(clearSelectionEvents(hist.done),lst(hist.done)):hist.done.length&&!lst(hist.done).ranges?lst(hist.done):1<hist.done.length&&!hist.done[hist.done.length-2].ranges?(hist.done.pop(),lst(hist.done)):void 0}(hist,hist.lastOp==opId)))last=lst(cur.changes),0==cmp(change.from,change.to)&&0==cmp(change.from,last.to)?last.to=changeEnd(change):cur.changes.push(historyChangeFromChange(doc,change));else{var before=lst(hist.done);for(before&&before.ranges||pushSelectionToHistory(doc.sel,hist.done),cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation},hist.done.push(cur);hist.done.length>hist.undoDepth;)hist.done.shift(),hist.done[0].ranges||hist.done.shift()}hist.done.push(selAfter),hist.generation=++hist.maxGeneration,hist.lastModTime=hist.lastSelTime=time,hist.lastOp=hist.lastSelOp=opId,hist.lastOrigin=hist.lastSelOrigin=change.origin,last||signal(doc,"historyAdded")}function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;opId==hist.lastSelOp||origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||function(doc,origin,prev,sel){var ch=origin.charAt(0);return"*"==ch||"+"==ch&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}(doc,origin,lst(hist.done),sel))?hist.done[hist.done.length-1]=sel:pushSelectionToHistory(sel,hist.done),hist.lastSelTime=+new Date,hist.lastSelOrigin=origin,hist.lastSelOp=opId,options&&!1!==options.clearRedo&&clearSelectionEvents(hist.undone)}function pushSelectionToHistory(sel,dest){var top=lst(dest);top&&top.ranges&&top.equals(sel)||dest.push(sel)}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){line.markedSpans&&((existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans),++n})}function removeClearedSpans(spans){if(!spans)return null;for(var out,i=0;i<spans.length;++i)spans[i].marker.explicitlyCleared?out||(out=spans.slice(0,i)):out&&out.push(spans[i]);return out?out.length?out:null:spans}function mergeOldSpans(doc,change){var old=function(doc,change){var found=change["spans_"+doc.id];if(!found)return null;for(var nw=[],i=0;i<change.text.length;++i)nw.push(removeClearedSpans(found[i]));return nw}(doc,change),stretched=stretchSpansOverChange(doc,change);if(!old)return stretched;if(!stretched)return old;for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur)spans:for(var j=0;j<stretchCur.length;++j){for(var span=stretchCur[j],k=0;k<oldCur.length;++k)if(oldCur[k].marker==span.marker)continue spans;oldCur.push(span)}else stretchCur&&(old[i]=stretchCur)}return old}function copyHistoryArray(events,newGroup,instantiateSel){for(var copy=[],i=0;i<events.length;++i){var event=events[i];if(event.ranges)copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);else{var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var change=changes[j],m=void 0;if(newChanges.push({from:change.from,to:change.to,text:change.text}),newGroup)for(var prop in change)(m=prop.match(/^spans_(\d+)$/))&&-1<indexOf(newGroup,Number(m[1]))&&(lst(newChanges)[prop]=change[prop],delete change[prop])}}}return copy}function extendRange(range,head,other,extend){if(extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;posBefore!=cmp(other,anchor)<0?(anchor=head,head=other):posBefore!=cmp(head,other)<0&&(head=other)}return new Range(anchor,head)}return new Range(other||head,head)}function extendSelection(doc,head,other,options,extend){null==extend&&(extend=doc.cm&&(doc.cm.display.shift||doc.extend)),setSelection(doc,new Selection([extendRange(doc.sel.primary(),head,other,extend)],0),options)}function extendSelections(doc,heads,options){for(var out=[],extend=doc.cm&&(doc.cm.display.shift||doc.extend),i=0;i<doc.sel.ranges.length;i++)out[i]=extendRange(doc.sel.ranges[i],heads[i],null,extend);setSelection(doc,normalizeSelection(doc.cm,out,doc.sel.primIndex),options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range,setSelection(doc,normalizeSelection(doc.cm,ranges,doc.sel.primIndex),options)}function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);last&&last.ranges?setSelectionNoUndo(doc,done[done.length-1]=sel,options):setSelection(doc,sel,options)}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options),addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}function setSelectionNoUndo(doc,sel,options){(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange"))&&(sel=function(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++)this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head))},origin:options&&options.origin};return signal(doc,"beforeSelectionChange",doc,obj),doc.cm&&signal(doc.cm,"beforeSelectionChange",doc.cm,obj),obj.ranges!=sel.ranges?normalizeSelection(doc.cm,obj.ranges,obj.ranges.length-1):sel}(doc,sel,options)),setSelectionInner(doc,skipAtomicInSelection(doc,sel,options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1),!0)),options&&!1===options.scroll||!doc.cm||"nocursor"==doc.cm.getOption("readOnly")||ensureCursorVisible(doc.cm)}function setSelectionInner(doc,sel){sel.equals(doc.sel)||(doc.sel=sel,doc.cm&&(doc.cm.curOp.updateInput=1,doc.cm.curOp.selectionChanged=!0,signalCursorActivity(doc.cm)),signalLater(doc,"cursorActivity",doc))}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,!1))}function skipAtomicInSelection(doc,sel,bias,mayClear){for(var out,i=0;i<sel.ranges.length;i++){var range=sel.ranges[i],old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i],newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear),newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);(out||newAnchor!=range.anchor||newHead!=range.head)&&(out||(out=sel.ranges.slice(0,i)),out[i]=new Range(newAnchor,newHead))}return out?normalizeSelection(doc.cm,out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker,preventCursorLeft="selectLeft"in m?!m.selectLeft:m.inclusiveLeft,preventCursorRight="selectRight"in m?!m.selectRight:m.inclusiveRight;if((null==sp.from||(preventCursorLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(null==sp.to||(preventCursorRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear&&(signal(m,"beforeCursorEnter"),m.explicitlyCleared)){if(line.markedSpans){--i;continue}break}if(!m.atomic)continue;if(oldPos){var near=m.find(dir<0?1:-1),diff=void 0;if((dir<0?preventCursorRight:preventCursorLeft)&&(near=movePos(doc,near,-dir,near&&near.line==pos.line?line:null)),near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:0<diff))return skipAtomicInner(doc,near,pos,dir,mayClear)}var far=m.find(dir<0?-1:1);return(dir<0?preventCursorLeft:preventCursorRight)&&(far=movePos(doc,far,dir,far.line==pos.line?line:null)),far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1,found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,!0)||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,!0);return found||(doc.cantEdit=!0,Pos(doc.first,0))}function movePos(doc,pos,dir,line){return dir<0&&0==pos.ch?pos.line>doc.first?clipPos(doc,Pos(pos.line-1)):null:0<dir&&pos.ch==(line||getLine(doc,pos.line)).text.length?pos.line<doc.first+doc.size-1?Pos(pos.line+1,0):null:new Pos(pos.line,pos.ch+dir)}function selectAll(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)}function filterChange(doc,change,update){var obj={canceled:!1,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){return obj.canceled=!0}};return update&&(obj.update=function(from,to,text,origin){from&&(obj.from=clipPos(doc,from)),to&&(obj.to=clipPos(doc,to)),text&&(obj.text=text),void 0!==origin&&(obj.origin=origin)}),signal(doc,"beforeChange",doc,obj),doc.cm&&signal(doc.cm,"beforeChange",doc.cm,obj),obj.canceled?(doc.cm&&(doc.cm.curOp.updateInput=2),null):{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp)return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly);if(doc.cm.state.suppressEdits)return}if(!(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange"))||(change=filterChange(doc,change,!0))){var split=sawReadOnlySpans&&!ignoreReadOnly&&function(doc,from,to){var markers=null;if(doc.iter(from.line,to.line+1,function(line){if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;!mark.readOnly||markers&&-1!=indexOf(markers,mark)||(markers||(markers=[])).push(mark)}}),!markers)return null;for(var parts=[{from:from,to:to}],i=0;i<markers.length;++i)for(var mk=markers[i],m=mk.find(0),j=0;j<parts.length;++j){var p=parts[j];if(!(cmp(p.to,m.from)<0||0<cmp(p.from,m.to))){var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);(dfrom<0||!mk.inclusiveLeft&&!dfrom)&&newParts.push({from:p.from,to:m.from}),(0<dto||!mk.inclusiveRight&&!dto)&&newParts.push({from:m.to,to:p.to}),parts.splice.apply(parts,newParts),j+=newParts.length-3}}return parts}(doc,change.from,change.to);if(split)for(var i=split.length-1;0<=i;--i)makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text,origin:change.origin});else makeChangeInner(doc,change)}}function makeChangeInner(doc,change){if(1!=change.text.length||""!=change.text[0]||0!=cmp(change.from,change.to)){var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN),makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){sharedHist||-1!=indexOf(rebased,doc.history)||(rebaseHist(doc.history,change),rebased.push(doc.history)),makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}}function makeChangeFromHistory(doc,type,allowSelectionOnly){var suppress=doc.cm&&doc.cm.state.suppressEdits;if(!suppress||allowSelectionOnly){for(var event,hist=doc.history,selAfter=doc.sel,source="undo"==type?hist.done:hist.undone,dest="undo"==type?hist.undone:hist.done,i=0;i<source.length&&(event=source[i],allowSelectionOnly?!event.ranges||event.equals(doc.sel):event.ranges);i++);if(i!=source.length){for(hist.lastOrigin=hist.lastSelOrigin=null;;){if(!(event=source.pop()).ranges){if(suppress)return void source.push(event);break}if(pushSelectionToHistory(event,dest),allowSelectionOnly&&!event.equals(doc.sel))return void setSelection(doc,event,{clearRedo:!1});selAfter=event}var antiChanges=[];pushSelectionToHistory(selAfter,dest),dest.push({changes:antiChanges,generation:hist.generation}),hist.generation=event.generation||++hist.maxGeneration;for(var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange"),loop=function(i){var change=event.changes[i];if(change.origin=type,filter&&!filterChange(doc,change,!1))return source.length=0,{};antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change)),!i&&doc.cm&&doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)});var rebased=[];linkedDocs(doc,function(doc,sharedHist){sharedHist||-1!=indexOf(rebased,doc.history)||(rebaseHist(doc.history,change),rebased.push(doc.history)),makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})},i$1=event.changes.length-1;0<=i$1;--i$1){var returned=loop(i$1);if(returned)return returned.v}}}}function shiftDoc(doc,distance){if(0!=distance&&(doc.first+=distance,doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex),doc.cm)){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++)regLineChange(doc.cm,l,"gutter")}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans);if(change.to.line<doc.first)shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));else if(!(change.from.line>doc.lastLine())){if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift),change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();change.to.line>last&&(change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}),change.removed=getBetween(doc,change.from,change.to),selAfter||(selAfter=computeSelAfterChange(doc,change)),doc.cm?function(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to,recomputeMaxLength=!1,checkWidthStart=from.line;cm.options.lineWrapping||(checkWidthStart=lineNo(visualLine(getLine(doc,from.line))),doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine)return recomputeMaxLength=!0}));-1<doc.sel.contains(change.from,change.to)&&signalCursorActivity(cm);updateDoc(doc,change,spans,estimateHeight(cm)),cm.options.lineWrapping||(doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);len>display.maxLineLength&&(display.maxLine=line,display.maxLineLength=len,display.maxLineChanged=!0,recomputeMaxLength=!1)}),recomputeMaxLength&&(cm.curOp.updateMaxLine=!0));(function(doc,n){if(doc.modeFrontier=Math.min(doc.modeFrontier,n),!(doc.highlightFrontier<n-10)){for(var start=doc.first,line=n-1;start<line;line--){var saved=getLine(doc,line).stateAfter;if(saved&&(!(saved instanceof SavedContext)||line+saved.lookAhead<n)){start=line+1;break}}doc.highlightFrontier=Math.min(doc.highlightFrontier,start)}})(doc,from.line),startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;change.full?regChange(cm):from.line!=to.line||1!=change.text.length||isWholeLineUpdate(cm.doc,change)?regChange(cm,from.line,to.line+1,lendiff):regLineChange(cm,from.line,"text");var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};changeHandler&&signalLater(cm,"change",cm,obj),changesHandler&&(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}cm.display.selForContextMenu=null}(doc.cm,change,spans):updateDoc(doc,change,spans),setSelectionNoUndo(doc,selAfter,sel_dontScroll),doc.cantEdit&&skipAtomic(doc,Pos(doc.firstLine(),0))&&(doc.cantEdit=!1)}}function replaceRange(doc,code,from,to,origin){var assign;to||(to=from),cmp(to,from)<0&&(from=(assign=[to,from])[0],to=assign[1]),"string"==typeof code&&(code=doc.splitLines(code)),makeChange(doc,{from:from,to:to,text:code,origin:origin})}function rebaseHistSelSingle(pos,from,to,diff){to<pos.line?pos.line+=diff:from<pos.line&&(pos.line=from,pos.ch=0)}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=!0;if(sub.ranges){sub.copied||((sub=array[i]=sub.deepCopy()).copied=!0);for(var j=0;j<sub.ranges.length;j++)rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff),rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}else{for(var j$1=0;j$1<sub.changes.length;++j$1){var cur=sub.changes[j$1];if(to<cur.from.line)cur.from=Pos(cur.from.line+diff,cur.from.ch),cur.to=Pos(cur.to.line+diff,cur.to.ch);else if(from<=cur.to.line){ok=!1;break}}ok||(array.splice(0,i+1),i=0)}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff),rebaseHistArray(hist.undone,from,to,diff)}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;return"number"==typeof handle?line=getLine(doc,clipLine(doc,handle)):no=lineNo(handle),null==no?null:(op(line,no)&&doc.cm&&regLineChange(doc.cm,no,changeType),line)}function LeafChunk(lines){this.lines=lines,this.parent=null;for(var height=0,i=0;i<lines.length;++i)lines[i].parent=this,height+=lines[i].height;this.height=height}function BranchChunk(children){this.children=children;for(var size=0,height=0,i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize(),height+=ch.height,ch.parent=this}this.size=size,this.height=height,this.parent=null}Range.prototype.from=function(){return minPos(this.anchor,this.head)},Range.prototype.to=function(){return maxPos(this.anchor,this.head)},Range.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height,cleanUpLine(line),signalLater(line,"delete")}this.lines.splice(at,n)},collapse:function(lines){lines.push.apply(lines,this.lines)},insertInner:function(at,lines,height){this.height+=height,this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i)lines[i].parent=this},iterN:function(at,n,op){for(var e=at+n;at<e;++at)if(op(this.lines[at]))return!0}},BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;if(child.removeInner(at,rm),this.height-=oldHeight-child.height,sz==rm&&(this.children.splice(i--,1),child.parent=null),0==(n-=rm))break;at=0}else at-=sz}if(this.size-n<25&&(1<this.children.length||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines),this.children=[new LeafChunk(lines)],this.children[0].parent=this}},collapse:function(lines){for(var i=0;i<this.children.length;++i)this.children[i].collapse(lines)},insertInner:function(at,lines,height){this.size+=lines.length,this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){if(child.insertInner(at,lines,height),child.lines&&50<child.lines.length){for(var remaining=child.lines.length%25+25,pos=remaining;pos<child.lines.length;){var leaf=new LeafChunk(child.lines.slice(pos,pos+=25));child.height-=leaf.height,this.children.splice(++i,0,leaf),leaf.parent=this}child.lines=child.lines.slice(0,remaining),this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(!(this.children.length<=10)){var me=this;do{var sibling=new BranchChunk(me.children.splice(me.children.length-5,5));if(me.parent){me.size-=sibling.size,me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}else{var copy=new BranchChunk(me.children);(copy.parent=me).children=[copy,sibling],me=copy}sibling.parent=me.parent}while(10<me.children.length);me.parent.maybeSpill()}},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op))return!0;if(0==(n-=used))break;at=0}else at-=sz}}};var LineWidget=function(doc,node,options){if(options)for(var opt in options)options.hasOwnProperty(opt)&&(this[opt]=options[opt]);this.doc=doc,this.node=node};function adjustScrollWhenAboveVisible(cm,line,diff){heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)&&addToScrollTop(cm,diff)}LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(null!=no&&ws){for(var i=0;i<ws.length;++i)ws[i]==this&&ws.splice(i--,1);ws.length||(line.widgets=null);var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height)),cm&&(runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height),regLineChange(cm,no,"widget")}),signalLater(cm,"lineWidgetCleared",cm,this,no))}},LineWidget.prototype.changed=function(){var this$1=this,oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;diff&&(lineIsHidden(this.doc,line)||updateLineHeight(line,line.height+diff),cm&&runInOp(cm,function(){cm.curOp.forceUpdate=!0,adjustScrollWhenAboveVisible(cm,line,diff),signalLater(cm,"lineWidgetChanged",cm,this$1,lineNo(line))}))},eventMixin(LineWidget);var nextMarkerId=0,TextMarker=function(doc,type){this.lines=[],this.type=type,this.doc=doc,this.id=++nextMarkerId};function markText(doc,from,to,options,type){if(options&&options.shared)return function(doc,from,to,options,type){(options=copyObj(options)).shared=!1;var markers=[markText(doc,from,to,options,type)],primary=markers[0],widget=options.widgetNode;return linkedDocs(doc,function(doc){widget&&(options.widgetNode=widget.cloneNode(!0)),markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i)if(doc.linked[i].isParent)return;primary=lst(markers)}),new SharedTextMarker(markers,primary)}(doc,from,to,options,type);if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,markText)(doc,from,to,options,type);var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options&&copyObj(options,marker,!1),0<diff||0==diff&&!1!==marker.clearWhenEmpty)return marker;if(marker.replacedWith&&(marker.collapsed=!0,marker.widgetNode=eltP("span",[marker.replacedWith],"CodeMirror-widget"),options.handleMouseEvents||marker.widgetNode.setAttribute("cm-ignore-events","true"),options.insertLeft&&(marker.widgetNode.insertLeft=!0)),marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker))throw new Error("Inserting collapsed marker partially overlapping an existing one");sawCollapsedSpans=!0}marker.addToHistory&&addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN);var updateMaxLine,curLine=from.line,cm=doc.cm;if(doc.iter(curLine,to.line+1,function(line){cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine&&(updateMaxLine=!0),marker.collapsed&&curLine!=from.line&&updateLineHeight(line,0),function(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span],span.marker.attachLine(line)}(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null)),++curLine}),marker.collapsed&&doc.iter(from.line,to.line+1,function(line){lineIsHidden(doc,line)&&updateLineHeight(line,0)}),marker.clearOnEnter&&on(marker,"beforeCursorEnter",function(){return marker.clear()}),marker.readOnly&&(sawReadOnlySpans=!0,(doc.history.done.length||doc.history.undone.length)&&doc.clearHistory()),marker.collapsed&&(marker.id=++nextMarkerId,marker.atomic=!0),cm){if(updateMaxLine&&(cm.curOp.updateMaxLine=!0),marker.collapsed)regChange(cm,from.line,to.line+1);else if(marker.className||marker.startStyle||marker.endStyle||marker.css||marker.attributes||marker.title)for(var i=from.line;i<=to.line;i++)regLineChange(cm,i,"text");marker.atomic&&reCheckSelection(cm.doc),signalLater(cm,"markerAdded",cm,marker)}return marker}TextMarker.prototype.clear=function(){if(!this.explicitlyCleared){var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp&&startOperation(cm),hasHandler(this,"clear")){var found=this.find();found&&signalLater(this,"clear",found.from,found.to)}for(var min=null,max=null,i=0;i<this.lines.length;++i){var line=this.lines[i],span=getMarkedSpanFor(line.markedSpans,this);cm&&!this.collapsed?regLineChange(cm,lineNo(line),"text"):cm&&(null!=span.to&&(max=lineNo(line)),null!=span.from&&(min=lineNo(line))),line.markedSpans=removeMarkedSpan(line.markedSpans,span),null==span.from&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm&&updateLineHeight(line,textHeight(cm.display))}if(cm&&this.collapsed&&!cm.options.lineWrapping)for(var i$1=0;i$1<this.lines.length;++i$1){var visual=visualLine(this.lines[i$1]),len=lineLength(visual);len>cm.display.maxLineLength&&(cm.display.maxLine=visual,cm.display.maxLineLength=len,cm.display.maxLineChanged=!0)}null!=min&&cm&&this.collapsed&&regChange(cm,min,max+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,cm&&reCheckSelection(cm.doc)),cm&&signalLater(cm,"markerCleared",cm,this,min,max),withOp&&endOperation(cm),this.parent&&this.parent.clear()}},TextMarker.prototype.find=function(side,lineObj){var from,to;null==side&&"bookmark"==this.type&&(side=1);for(var i=0;i<this.lines.length;++i){var line=this.lines[i],span=getMarkedSpanFor(line.markedSpans,this);if(null!=span.from&&(from=Pos(lineObj?line:lineNo(line),span.from),-1==side))return from;if(null!=span.to&&(to=Pos(lineObj?line:lineNo(line),span.to),1==side))return to}return from&&{from:from,to:to}},TextMarker.prototype.changed=function(){var this$1=this,pos=this.find(-1,!0),widget=this,cm=this.doc.cm;pos&&cm&&runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line),view=findViewForLine(cm,lineN);if(view&&(clearLineMeasurementCacheFor(view),cm.curOp.selectionChanged=cm.curOp.forceUpdate=!0),cm.curOp.updateMaxLine=!0,!lineIsHidden(widget.doc,line)&&null!=widget.height){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;dHeight&&updateLineHeight(line,line.height+dHeight)}signalLater(cm,"markerChanged",cm,this$1)})},TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;op.maybeHiddenMarkers&&-1!=indexOf(op.maybeHiddenMarkers,this)||(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(line)},TextMarker.prototype.detachLine=function(line){if(this.lines.splice(indexOf(this.lines,line),1),!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}},eventMixin(TextMarker);var SharedTextMarker=function(markers,primary){this.markers=markers,this.primary=primary;for(var i=0;i<markers.length;++i)markers[i].parent=this};function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function detachSharedMarkers(markers){for(var loop=function(i){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){return linked.push(d)});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];-1==indexOf(linked,subMarker.doc)&&(subMarker.parent=null,marker.markers.splice(j--,1))}},i=0;i<markers.length;i++)loop(i)}SharedTextMarker.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();signalLater(this,"clear")}},SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)},eventMixin(SharedTextMarker);var nextDocId=0,Doc=function(text,mode,firstLine,lineSep,direction){if(!(this instanceof Doc))return new Doc(text,mode,firstLine,lineSep,direction);null==firstLine&&(firstLine=0),BranchChunk.call(this,[new LeafChunk([new Line("",null)])]),this.first=firstLine,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start),this.history=new History(null),this.id=++nextDocId,this.modeOption=mode,this.lineSep=lineSep,this.direction="rtl"==direction?"rtl":"ltr",this.extend=!1,"string"==typeof text&&(text=this.splitLines(text)),updateDoc(this,{from:start,to:start,text:text}),setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){op?this.iterN(from-this.first,to-from,op):this.iterN(this.first,this.first+this.size,from)},insert:function(at,lines){for(var height=0,i=0;i<lines.length;++i)height+=lines[i].height;this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:!0},!0),this.cm&&scrollToCoords(this.cm,0,0),setSelection(this,simpleSelection(top),sel_dontScroll)}),replaceRange:function(code,from,to,origin){replaceRange(this,code,from=clipPos(this,from),to=to?clipPos(this,to):from,origin)},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function(line){if(isLine(this,line))return getLine(this,line)},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){return"number"==typeof line&&(line=getLine(this,line)),visualLine(line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range=this.sel.primary();return null==start||"head"==start?range.head:"anchor"==start?range.anchor:"end"==start||"to"==start||!1===start?range.to():range.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,"number"==typeof line?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){extendSelections(this,clipPosArray(this,map(this.sel.ranges,f)),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(ranges.length){for(var out=[],i=0;i<ranges.length;i++)out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head));null==primary&&(primary=Math.min(ranges.length-1,this.sel.primIndex)),setSelection(this,normalizeSelection(this.cm,out,primary),options)}}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor))),setSelection(this,normalizeSelection(this.cm,ranges,ranges.length-1),options)}),getSelection:function(lineSep){for(var lines,ranges=this.sel.ranges,i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},getSelections:function(lineSep){for(var parts=[],ranges=this.sel.ranges,i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());!1!==lineSep&&(sel=sel.join(lineSep||this.lineSeparator())),parts[i]=sel}return parts},replaceSelection:function(code,collapse,origin){for(var dup=[],i=0;i<this.sel.ranges.length;i++)dup[i]=code;this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){for(var changes=[],sel=this.sel,i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin}}for(var newSel=collapse&&"end"!=collapse&&function(doc,changes,hint){for(var out=[],oldPrev=Pos(doc.first,0),newPrev=oldPrev,i=0;i<changes.length;i++){var change=changes[i],from=offsetPos(change.from,oldPrev,newPrev),to=offsetPos(changeEnd(change),oldPrev,newPrev);if(oldPrev=change.to,newPrev=to,"around"==hint){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else out[i]=new Range(from,from)}return new Selection(out,doc.sel.primIndex)}(this,changes,collapse),i$1=changes.length-1;0<=i$1;i$1--)makeChange(this,changes[i$1]);newSel?setSelectionReplaceHistory(this,newSel):this.cm&&ensureCursorVisible(this.cm)}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",!0)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",!0)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){for(var hist=this.history,done=0,undone=0,i=0;i<hist.done.length;i++)hist.done[i].ranges||++done;for(var i$1=0;i$1<hist.undone.length;i$1++)hist.undone[i$1].ranges||++undone;return{undo:done,redo:undone}},clearHistory:function(){var this$1=this;this.history=new History(this.history),linkedDocs(this,function(doc){return doc.history=this$1.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(forceSplit){return forceSplit&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history);hist.done=copyHistoryArray(histData.done.slice(0),null,!0),hist.undone=copyHistoryArray(histData.undone.slice(0),null,!0)},setGutterMarker:docMethodOp(function(line,gutterID,value){return changeLine(this,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});return!(markers[gutterID]=value)&&isEmpty(markers)&&(line.gutterMarkers=null),!0})}),clearGutter:docMethodOp(function(gutterID){var this$1=this;this.iter(function(line){line.gutterMarkers&&line.gutterMarkers[gutterID]&&changeLine(this$1,line,"gutter",function(){return line.gutterMarkers[gutterID]=null,isEmpty(line.gutterMarkers)&&(line.gutterMarkers=null),!0})})}),lineInfo:function(line){var n;if("number"==typeof line){if(!isLine(this,line))return null;if(!(line=getLine(this,n=line)))return null}else if(null==(n=lineNo(line)))return null;return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,"gutter"==where?"gutter":"class",function(line){var prop="text"==where?"textClass":"background"==where?"bgClass":"gutter"==where?"gutterClass":"wrapClass";if(line[prop]){if(classTest(cls).test(line[prop]))return!1;line[prop]+=" "+cls}else line[prop]=cls;return!0})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,"gutter"==where?"gutter":"class",function(line){var prop="text"==where?"textClass":"background"==where?"bgClass":"gutter"==where?"gutterClass":"wrapClass",cur=line[prop];if(!cur)return!1;if(null==cls)line[prop]=null;else{var found=cur.match(classTest(cls));if(!found)return!1;var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(found.index&&end!=cur.length?" ":"")+cur.slice(end)||null}return!0})}),addLineWidget:docMethodOp(function(handle,node,options){return function(doc,handle,node,options){var widget=new LineWidget(doc,node,options),cm=doc.cm;return cm&&widget.noHScroll&&(cm.display.alignWidgets=!0),changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(null==widget.insertAt?widgets.push(widget):widgets.splice(Math.min(widgets.length,Math.max(0,widget.insertAt)),0,widget),widget.line=line,cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget)),aboveVisible&&addToScrollTop(cm,widget.height),cm.curOp.forceUpdate=!0}return!0}),cm&&signalLater(cm,"lineWidgetAdded",cm,widget,"number"==typeof handle?handle:lineNo(handle)),widget}(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(null==options.nodeType?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:!1,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};return markText(this,pos=clipPos(this,pos),pos,realOpts,"bookmark")},findMarksAt:function(pos){var markers=[],spans=getLine(this,(pos=clipPos(this,pos)).line).markedSpans;if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];(null==span.from||span.from<=pos.ch)&&(null==span.to||span.to>=pos.ch)&&markers.push(span.marker.parent||span.marker)}return markers},findMarks:function(from,to,filter){from=clipPos(this,from),to=clipPos(this,to);var found=[],lineNo=from.line;return this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans)for(var i=0;i<spans.length;i++){var span=spans[i];null!=span.to&&lineNo==from.line&&from.ch>=span.to||null==span.from&&lineNo!=from.line||null!=span.from&&lineNo==to.line&&span.from>=to.ch||filter&&!filter(span.marker)||found.push(span.marker.parent||span.marker)}++lineNo}),found},getAllMarks:function(){var markers=[];return this.iter(function(line){var sps=line.markedSpans;if(sps)for(var i=0;i<sps.length;++i)null!=sps[i].from&&markers.push(sps[i].marker)}),markers},posFromIndex:function(off){var ch,lineNo=this.first,sepSize=this.lineSeparator().length;return this.iter(function(line){var sz=line.text.length+sepSize;if(off<sz)return ch=off,!0;off-=sz,++lineNo}),clipPos(this,Pos(lineNo,ch))},indexFromPos:function(coords){var index=(coords=clipPos(this,coords)).ch;if(coords.line<this.first||coords.ch<0)return 0;var sepSize=this.lineSeparator().length;return this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize}),index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return doc.scrollTop=this.scrollTop,doc.scrollLeft=this.scrollLeft,doc.sel=this.sel,doc.extend=!1,copyHistory&&(doc.history.undoDepth=this.history.undoDepth,doc.setHistory(this.getHistory())),doc},linkedDoc:function(options){options||(options={});var from=this.first,to=this.first+this.size;null!=options.from&&options.from>from&&(from=options.from),null!=options.to&&options.to<to&&(to=options.to);var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep,this.direction);return options.sharedHist&&(copy.history=this.history),(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist}),copy.linked=[{doc:this,isParent:!0,sharedHist:options.sharedHist}],function(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find(),mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark),subMark.parent=marker}}}(copy,findSharedMarkers(this)),copy},unlinkDoc:function(other){if(other instanceof CodeMirror&&(other=other.doc),this.linked)for(var i=0;i<this.linked.length;++i){if(this.linked[i].doc==other){this.linked.splice(i,1),other.unlinkDoc(this),detachSharedMarkers(findSharedMarkers(this));break}}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){return splitIds.push(doc.id)},!0),other.history=new History(null),other.history.done=copyHistoryArray(this.history.done,splitIds),other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){return this.lineSep?str.split(this.lineSep):splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:docMethodOp(function(dir){var cm;("rtl"!=dir&&(dir="ltr"),dir!=this.direction)&&(this.direction=dir,this.iter(function(line){return line.order=null}),this.cm&&runInOp(cm=this.cm,function(){setDirectionClass(cm),regChange(cm)}))})}),Doc.prototype.eachLine=Doc.prototype.iter;var lastDrop=0;function onDrop(e){var cm=this;if(clearDragCursor(cm),!signalDOMEvent(cm,e)&&!eventInWidget(cm.display,e)){e_preventDefault(e),ie&&(lastDrop=+new Date);var pos=posFromMouse(cm,e,!0),files=e.dataTransfer.files;if(pos&&!cm.isReadOnly())if(files&&files.length&&window.FileReader&&window.File)for(var n=files.length,text=Array(n),read=0,markAsReadAndPasteIfAllFilesAreRead=function(){++read==n&&operation(cm,function(){var change={from:pos=clipPos(cm.doc,pos),to:pos,text:cm.doc.splitLines(text.filter(function(t){return null!=t}).join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change),setSelectionReplaceHistory(cm.doc,simpleSelection(clipPos(cm.doc,pos),clipPos(cm.doc,changeEnd(change))))})()},readTextFromFile=function(file,i){if(cm.options.allowDropFileTypes&&-1==indexOf(cm.options.allowDropFileTypes,file.type))markAsReadAndPasteIfAllFilesAreRead();else{var reader=new FileReader;reader.onerror=function(){return markAsReadAndPasteIfAllFilesAreRead()},reader.onload=function(){var content=reader.result;/[\x00-\x08\x0e-\x1f]{2}/.test(content)||(text[i]=content),markAsReadAndPasteIfAllFilesAreRead()},reader.readAsText(file)}},i=0;i<files.length;i++)readTextFromFile(files[i],i);else{if(cm.state.draggingText&&-1<cm.doc.sel.contains(pos))return cm.state.draggingText(e),void setTimeout(function(){return cm.display.input.focus()},20);try{var text$1=e.dataTransfer.getData("Text");if(text$1){var selected;if(cm.state.draggingText&&!cm.state.draggingText.copy&&(selected=cm.listSelections()),setSelectionNoUndo(cm.doc,simpleSelection(pos,pos)),selected)for(var i$1=0;i$1<selected.length;++i$1)replaceRange(cm.doc,"",selected[i$1].anchor,selected[i$1].head,"drag");cm.replaceSelection(text$1,"around","paste"),cm.display.input.focus()}}catch(e$1){}}}}function clearDragCursor(cm){cm.display.dragCursor&&(cm.display.lineSpace.removeChild(cm.display.dragCursor),cm.display.dragCursor=null)}function forEachCodeMirror(f){if(document.getElementsByClassName){for(var byClass=document.getElementsByClassName("CodeMirror"),editors=[],i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;cm&&editors.push(cm)}editors.length&&editors[0].operation(function(){for(var i=0;i<editors.length;i++)f(editors[i])})}}var globalsRegistered=!1;function ensureGlobalHandlers(){var resizeTimer;globalsRegistered||(on(window,"resize",function(){null==resizeTimer&&(resizeTimer=setTimeout(function(){resizeTimer=null,forEachCodeMirror(onResize)},100))}),on(window,"blur",function(){return forEachCodeMirror(onBlur)}),globalsRegistered=!0)}function onResize(cm){var d=cm.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,cm.setSize()}for(var keyNames={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},i=0;i<10;i++)keyNames[i+48]=keyNames[i+96]=String(i);for(var i$1=65;i$1<=90;i$1++)keyNames[i$1]=String.fromCharCode(i$1);for(var i$2=1;i$2<=12;i$2++)keyNames[i$2+111]=keyNames[i$2+63235]="F"+i$2;var keyMap={};function normalizeKeyName(name){var alt,ctrl,shift,cmd,parts=name.split(/-(?!$)/);name=parts[parts.length-1];for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else{if(!/^s(hift)?$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);shift=!0}}return alt&&(name="Alt-"+name),ctrl&&(name="Ctrl-"+name),cmd&&(name="Cmd-"+name),shift&&(name="Shift-"+name),name}function normalizeKeyMap(keymap){var copy={};for(var keyname in keymap)if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname))continue;if("..."==value){delete keymap[keyname];continue}for(var keys=map(keyname.split(" "),normalizeKeyName),i=0;i<keys.length;i++){var val=void 0,name=void 0;val=i==keys.length-1?(name=keys.join(" "),value):(name=keys.slice(0,i+1).join(" "),"...");var prev=copy[name];if(prev){if(prev!=val)throw new Error("Inconsistent bindings for "+name)}else copy[name]=val}delete keymap[keyname]}for(var prop in copy)keymap[prop]=copy[prop];return keymap}function lookupKey(key,map,handle,context){var found=(map=getKeyMap(map)).call?map.call(key,context):map[key];if(!1===found)return"nothing";if("..."===found)return"multi";if(null!=found&&handle(found))return"handled";if(map.fallthrough){if("[object Array]"!=Object.prototype.toString.call(map.fallthrough))return lookupKey(key,map.fallthrough,handle,context);for(var i=0;i<map.fallthrough.length;i++){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result)return result}}}function isModifierKey(value){var name="string"==typeof value?value:keyNames[value.keyCode];return"Ctrl"==name||"Alt"==name||"Shift"==name||"Mod"==name}function addModifierNames(name,event,noShift){var base=name;return event.altKey&&"Alt"!=base&&(name="Alt-"+name),(flipCtrlCmd?event.metaKey:event.ctrlKey)&&"Ctrl"!=base&&(name="Ctrl-"+name),(flipCtrlCmd?event.ctrlKey:event.metaKey)&&"Mod"!=base&&(name="Cmd-"+name),!noShift&&event.shiftKey&&"Shift"!=base&&(name="Shift-"+name),name}function keyName(event,noShift){if(presto&&34==event.keyCode&&event.char)return!1;var name=keyNames[event.keyCode];return null!=name&&!event.altGraphKey&&(3==event.keyCode&&event.code&&(name=event.code),addModifierNames(name,event,noShift))}function getKeyMap(val){return"string"==typeof val?keyMap[val]:val}function deleteNearSelection(cm,compute){for(var ranges=cm.doc.sel.ranges,kill=[],i=0;i<ranges.length;i++){for(var toKill=compute(ranges[i]);kill.length&&cmp(toKill.from,lst(kill).to)<=0;){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;0<=i;i--)replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete");ensureCursorVisible(cm)})}function moveCharLogically(line,ch,dir){var target=skipExtendingChars(line.text,ch+dir,dir);return target<0||target>line.text.length?null:target}function moveLogically(line,start,dir){var ch=moveCharLogically(line,start.ch,dir);return null==ch?null:new Pos(start.line,ch,dir<0?"after":"before")}function endOfLine(visually,cm,lineObj,lineNo,dir){if(visually){"rtl"==cm.doc.direction&&(dir=-dir);var order=getOrder(lineObj,cm.doc.direction);if(order){var ch,part=dir<0?lst(order):order[0],sticky=dir<0==(1==part.level)?"after":"before";if(0<part.level||"rtl"==cm.doc.direction){var prep=prepareMeasureForLine(cm,lineObj);ch=dir<0?lineObj.text.length-1:0;var targetTop=measureCharPrepared(cm,prep,ch).top;ch=findFirst(function(ch){return measureCharPrepared(cm,prep,ch).top==targetTop},dir<0==(1==part.level)?part.from:part.to-1,ch),"before"==sticky&&(ch=moveCharLogically(lineObj,ch,1))}else ch=dir<0?part.to:part.from;return new Pos(lineNo,ch,sticky)}}return new Pos(lineNo,dir<0?lineObj.text.length:0,dir<0?"before":"after")}keyMap.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},keyMap.default=mac?keyMap.macDefault:keyMap.pcDefault;var commands={selectAll:selectAll,singleSelection:function(cm){return cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){return deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;return range.head.ch==len&&range.head.line<cm.lastLine()?{from:range.head,to:Pos(range.head.line+1,0)}:{from:range.head,to:Pos(range.head.line,len)}}return{from:range.from(),to:range.to()}})},deleteLine:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;return{from:cm.coordsChar({left:0,top:top},"div"),to:range.from()}})},delWrappedLineRight:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5,rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function(cm){return cm.undo()},redo:function(cm){return cm.redo()},undoSelection:function(cm){return cm.undoSelection()},redoSelection:function(cm){return cm.redoSelection()},goDocStart:function(cm){return cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){return cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){return cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){return cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){return cm.extendSelectionsBy(function(range){return function(cm,lineN){var line=getLine(cm.doc,lineN),visual=function(line){for(var merged;merged=collapsedSpanAtEnd(line);)line=merged.find(1,!0).line;return line}(line);visual!=line&&(lineN=lineNo(visual));return endOfLine(!0,cm,line,lineN,-1)}(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5,pos=cm.coordsChar({left:0,top:top},"div");return pos.ch<cm.getLine(pos.line).search(/\S/)?lineStartSmart(cm,range.head):pos},sel_move)},goLineUp:function(cm){return cm.moveV(-1,"line")},goLineDown:function(cm){return cm.moveV(1,"line")},goPageUp:function(cm){return cm.moveV(-1,"page")},goPageDown:function(cm){return cm.moveV(1,"page")},goCharLeft:function(cm){return cm.moveH(-1,"char")},goCharRight:function(cm){return cm.moveH(1,"char")},goColumnLeft:function(cm){return cm.moveH(-1,"column")},goColumnRight:function(cm){return cm.moveH(1,"column")},goWordLeft:function(cm){return cm.moveH(-1,"word")},goGroupRight:function(cm){return cm.moveH(1,"group")},goGroupLeft:function(cm){return cm.moveH(-1,"group")},goWordRight:function(cm){return cm.moveH(1,"word")},delCharBefore:function(cm){return cm.deleteH(-1,"codepoint")},delCharAfter:function(cm){return cm.deleteH(1,"char")},delWordBefore:function(cm){return cm.deleteH(-1,"word")},delWordAfter:function(cm){return cm.deleteH(1,"word")},delGroupBefore:function(cm){return cm.deleteH(-1,"group")},delGroupAfter:function(cm){return cm.deleteH(1,"group")},indentAuto:function(cm){return cm.indentSelection("smart")},indentMore:function(cm){return cm.indentSelection("add")},indentLess:function(cm){return cm.indentSelection("subtract")},insertTab:function(cm){return cm.replaceSelection("\t")},insertSoftTab:function(cm){for(var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize,i=0;i<ranges.length;i++){var pos=ranges[i].from(),col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-col%tabSize))}cm.replaceSelections(spaces)},defaultTab:function(cm){cm.somethingSelected()?cm.indentSelection("add"):cm.execCommand("insertTab")},transposeChars:function(cm){return runInOp(cm,function(){for(var ranges=cm.listSelections(),newSel=[],i=0;i<ranges.length;i++)if(ranges[i].empty()){var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line)if(cur.ch==line.length&&(cur=new Pos(cur.line,cur.ch-1)),0<cur.ch)cur=new Pos(cur.line,cur.ch+1),cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose");else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;prev&&(cur=new Pos(cur.line,1),cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),cur,"+transpose"))}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function(cm){return runInOp(cm,function(){for(var sels=cm.listSelections(),i=sels.length-1;0<=i;i--)cm.replaceRange(cm.doc.lineSeparator(),sels[i].anchor,sels[i].head,"+input");sels=cm.listSelections();for(var i$1=0;i$1<sels.length;i$1++)cm.indentLine(sels[i$1].from().line,null,!0);ensureCursorVisible(cm)})},openLine:function(cm){return cm.replaceSelection("\n","start")},toggleOverwrite:function(cm){return cm.toggleOverwrite()}};function lineStart(cm,lineN){var line=getLine(cm.doc,lineN),visual=visualLine(line);return visual!=line&&(lineN=lineNo(visual)),endOfLine(!0,cm,visual,lineN,1)}function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line),line=getLine(cm.doc,start.line),order=getOrder(line,cm.doc.direction);if(order&&0!=order[0].level)return start;var firstNonWS=Math.max(start.ch,line.text.search(/\S/)),inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS,start.sticky)}function doHandleBinding(cm,bound,dropShift){if("string"==typeof bound&&!(bound=commands[bound]))return!1;cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=!1;try{cm.isReadOnly()&&(cm.state.suppressEdits=!0),dropShift&&(cm.display.shift=!1),done=bound(cm)!=Pass}finally{cm.display.shift=prevShift,cm.state.suppressEdits=!1}return done}var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name))return"handled";if(/\'$/.test(name)?cm.state.keySeq=null:stopSeq.set(50,function(){cm.state.keySeq==seq&&(cm.state.keySeq=null,cm.display.input.reset())}),dispatchKeyInner(cm,seq+" "+name,e,handle))return!0}return dispatchKeyInner(cm,name,e,handle)}function dispatchKeyInner(cm,name,e,handle){var result=function(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result)return result}return cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm)||lookupKey(name,cm.options.keyMap,handle,cm)}(cm,name,handle);return"multi"==result&&(cm.state.keySeq=name),"handled"==result&&signalLater(cm,"keyHandled",cm,name,e),"handled"!=result&&"multi"!=result||(e_preventDefault(e),restartBlink(cm)),!!result}function handleKeyBinding(cm,e){var name=keyName(e,!0);return!!name&&(e.shiftKey&&!cm.state.keySeq?dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,!0)})||dispatchKey(cm,name,e,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return doHandleBinding(cm,b)}):dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)}))}var lastStoppedKey=null;function onKeyDown(e){var cm=this;if(!(e.target&&e.target!=cm.display.input.getField()||(cm.curOp.focus=activeElt(),signalDOMEvent(cm,e)))){ie&&ie_version<11&&27==e.keyCode&&(e.returnValue=!1);var code=e.keyCode;cm.display.shift=16==code||e.shiftKey;var handled=handleKeyBinding(cm,e);presto&&(lastStoppedKey=handled?code:null,!handled&&88==code&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)&&cm.replaceSelection("",null,"cut")),gecko&&!mac&&!handled&&46==code&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=code||/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)||function(cm){var lineDiv=cm.display.lineDiv;function up(e){18!=e.keyCode&&e.altKey||(rmClass(lineDiv,"CodeMirror-crosshair"),off(document,"keyup",up),off(document,"mouseover",up))}addClass(lineDiv,"CodeMirror-crosshair"),on(document,"keyup",up),on(document,"mouseover",up)}(cm)}}function onKeyUp(e){16==e.keyCode&&(this.doc.sel.shift=!1),signalDOMEvent(this,e)}function onKeyPress(e){var cm=this;if(!(e.target&&e.target!=cm.display.input.getField()||eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey)){var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey)return lastStoppedKey=null,void e_preventDefault(e);if(!presto||e.which&&!(e.which<10)||!handleKeyBinding(cm,e)){var ch=String.fromCharCode(null==charCode?keyCode:charCode);"\b"!=ch&&(function(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,!0)})}(cm,e,ch)||cm.display.input.onKeyPress(e))}}}var lastClick,lastDoubleClick,PastClick=function(time,pos,button){this.time=time,this.pos=pos,this.button=button};function onMouseDown(e){var cm=this,display=cm.display;if(!(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch()))if(display.input.ensurePolled(),display.shift=e.shiftKey,eventInWidget(display,e))webkit||(display.scroller.draggable=!1,setTimeout(function(){return display.scroller.draggable=!0},100));else if(!clickInGutter(cm,e)){var pos=posFromMouse(cm,e),button=e_button(e),repeat=pos?function(pos,button){var now=+new Date;return lastDoubleClick&&lastDoubleClick.compare(now,pos,button)?(lastClick=lastDoubleClick=null,"triple"):lastClick&&lastClick.compare(now,pos,button)?(lastDoubleClick=new PastClick(now,pos,button),lastClick=null,"double"):(lastClick=new PastClick(now,pos,button),lastDoubleClick=null,"single")}(pos,button):"single";window.focus(),1==button&&cm.state.selectingText&&cm.state.selectingText(e),pos&&function(cm,button,pos,repeat,event){var name="Click";"double"==repeat?name="Double"+name:"triple"==repeat&&(name="Triple"+name);return dispatchKey(cm,addModifierNames(name=(1==button?"Left":2==button?"Middle":"Right")+name,event),event,function(bound){if("string"==typeof bound&&(bound=commands[bound]),!bound)return!1;var done=!1;try{cm.isReadOnly()&&(cm.state.suppressEdits=!0),done=bound(cm,pos)!=Pass}finally{cm.state.suppressEdits=!1}return done})}(cm,button,pos,repeat,e)||(1==button?pos?function(cm,pos,repeat,event){ie?setTimeout(bind(ensureFocus,cm),0):cm.curOp.focus=activeElt();var contained,behavior=function(cm,repeat,event){var option=cm.getOption("configureMouse"),value=option?option(cm,repeat,event):{};if(null==value.unit){var rect=chromeOS?event.shiftKey&&event.metaKey:event.altKey;value.unit=rect?"rectangle":"single"==repeat?"char":"double"==repeat?"word":"line"}(null==value.extend||cm.doc.extend)&&(value.extend=cm.doc.extend||event.shiftKey);null==value.addNew&&(value.addNew=mac?event.metaKey:event.ctrlKey);null==value.moveOnDrag&&(value.moveOnDrag=!(mac?event.altKey:event.ctrlKey));return value}(cm,repeat,event),sel=cm.doc.sel;cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&"single"==repeat&&-1<(contained=sel.contains(pos))&&(cmp((contained=sel.ranges[contained]).from(),pos)<0||0<pos.xRel)&&(0<cmp(contained.to(),pos)||pos.xRel<0)?function(cm,event,pos,behavior){var display=cm.display,moved=!1,dragEnd=operation(cm,function(e){webkit&&(display.scroller.draggable=!1),cm.state.draggingText=!1,cm.state.delayingBlurEvent&&(cm.hasFocus()?cm.state.delayingBlurEvent=!1:delayBlurEvent(cm)),off(display.wrapper.ownerDocument,"mouseup",dragEnd),off(display.wrapper.ownerDocument,"mousemove",mouseMove),off(display.scroller,"dragstart",dragStart),off(display.scroller,"drop",dragEnd),moved||(e_preventDefault(e),behavior.addNew||extendSelection(cm.doc,pos,null,null,behavior.extend),webkit&&!safari||ie&&9==ie_version?setTimeout(function(){display.wrapper.ownerDocument.body.focus({preventScroll:!0}),display.input.focus()},20):display.input.focus())}),mouseMove=function(e2){moved=moved||10<=Math.abs(event.clientX-e2.clientX)+Math.abs(event.clientY-e2.clientY)},dragStart=function(){return moved=!0};webkit&&(display.scroller.draggable=!0);(cm.state.draggingText=dragEnd).copy=!behavior.moveOnDrag,on(display.wrapper.ownerDocument,"mouseup",dragEnd),on(display.wrapper.ownerDocument,"mousemove",mouseMove),on(display.scroller,"dragstart",dragStart),on(display.scroller,"drop",dragEnd),cm.state.delayingBlurEvent=!0,setTimeout(function(){return display.input.focus()},20),display.scroller.dragDrop&&display.scroller.dragDrop()}(cm,event,pos,behavior):function(cm,event,start,behavior){ie&&delayBlurEvent(cm);var display=cm.display,doc=cm.doc;e_preventDefault(event);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;behavior.addNew&&!behavior.extend?(ourIndex=doc.sel.contains(start),ourRange=-1<ourIndex?ranges[ourIndex]:new Range(start,start)):(ourRange=doc.sel.primary(),ourIndex=doc.sel.primIndex);if("rectangle"==behavior.unit)behavior.addNew||(ourRange=new Range(start,start)),start=posFromMouse(cm,event,!0,!0),ourIndex=-1;else{var range=rangeForUnit(cm,start,behavior.unit);ourRange=behavior.extend?extendRange(ourRange,range.anchor,range.head,behavior.extend):range}behavior.addNew?-1==ourIndex?(ourIndex=ranges.length,setSelection(doc,normalizeSelection(cm,ranges.concat([ourRange]),ourIndex),{scroll:!1,origin:"*mouse"})):1<ranges.length&&ranges[ourIndex].empty()&&"char"==behavior.unit&&!behavior.extend?(setSelection(doc,normalizeSelection(cm,ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:!1,origin:"*mouse"}),startSel=doc.sel):replaceOneSelection(doc,ourIndex,ourRange,sel_mouse):(setSelection(doc,new Selection([ourRange],ourIndex=0),sel_mouse),startSel=doc.sel);var lastPos=start;function extendTo(pos){if(0!=cmp(lastPos,pos))if(lastPos=pos,"rectangle"==behavior.unit){for(var ranges=[],tabSize=cm.options.tabSize,startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize),posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize),left=Math.min(startCol,posCol),right=Math.max(startCol,posCol),line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);left==right?ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos))):text.length>leftPos&&ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}ranges.length||ranges.push(new Range(start,start)),setSelection(doc,normalizeSelection(cm,startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:!1}),cm.scrollIntoView(pos)}else{var head,oldRange=ourRange,range=rangeForUnit(cm,pos,behavior.unit),anchor=oldRange.anchor;anchor=0<cmp(range.anchor,anchor)?(head=range.head,minPos(oldRange.from(),range.anchor)):(head=range.anchor,maxPos(oldRange.to(),range.head));var ranges$1=startSel.ranges.slice(0);ranges$1[ourIndex]=function(cm,range){var anchor=range.anchor,head=range.head,anchorLine=getLine(cm.doc,anchor.line);if(0==cmp(anchor,head)&&anchor.sticky==head.sticky)return range;var order=getOrder(anchorLine);if(!order)return range;var index=getBidiPartAt(order,anchor.ch,anchor.sticky),part=order[index];if(part.from!=anchor.ch&&part.to!=anchor.ch)return range;var leftSide,boundary=index+(part.from==anchor.ch==(1!=part.level)?0:1);if(0==boundary||boundary==order.length)return range;if(head.line!=anchor.line)leftSide=0<(head.line-anchor.line)*("ltr"==cm.doc.direction?1:-1);else{var headIndex=getBidiPartAt(order,head.ch,head.sticky),dir=headIndex-index||(head.ch-anchor.ch)*(1==part.level?-1:1);leftSide=headIndex==boundary-1||headIndex==boundary?dir<0:0<dir}var usePart=order[boundary+(leftSide?-1:0)],from=leftSide==(1==usePart.level),ch=from?usePart.from:usePart.to,sticky=from?"after":"before";return anchor.ch==ch&&anchor.sticky==sticky?range:new Range(new Pos(anchor.line,ch,sticky),head)}(cm,new Range(clipPos(doc,anchor),head)),setSelection(doc,normalizeSelection(cm,ranges$1,ourIndex),sel_mouse)}}var editorSize=display.wrapper.getBoundingClientRect(),counter=0;function done(e){cm.state.selectingText=!1,counter=1/0,e&&(e_preventDefault(e),display.input.focus()),off(display.wrapper.ownerDocument,"mousemove",move),off(display.wrapper.ownerDocument,"mouseup",up),doc.history.lastSelOrigin=null}var move=operation(cm,function(e){0!==e.buttons&&e_button(e)?function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,!0,"rectangle"==behavior.unit);if(!cur)return;if(0!=cmp(cur,lastPos)){cm.curOp.focus=activeElt(),extendTo(cur);var visible=visibleLines(display,doc);(cur.line>=visible.to||cur.line<visible.from)&&setTimeout(operation(cm,function(){counter==curCount&&extend(e)}),150)}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;outside&&setTimeout(operation(cm,function(){counter==curCount&&(display.scroller.scrollTop+=outside,extend(e))}),50)}}(e):done(e)}),up=operation(cm,done);cm.state.selectingText=up,on(display.wrapper.ownerDocument,"mousemove",move),on(display.wrapper.ownerDocument,"mouseup",up)}(cm,event,pos,behavior)}(cm,pos,repeat,e):e_target(e)==display.scroller&&e_preventDefault(e):2==button?(pos&&extendSelection(cm.doc,pos),setTimeout(function(){return display.input.focus()},20)):3==button&&(captureRightClick?cm.display.input.onContextMenu(e):delayBlurEvent(cm)))}}function rangeForUnit(cm,pos,unit){if("char"==unit)return new Range(pos,pos);if("word"==unit)return cm.findWordAt(pos);if("line"==unit)return new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)));var result=unit(cm,pos);return new Range(result.from,result.to)}function gutterEvent(cm,e,type,prevent){var mX,mY;if(e.touches)mX=e.touches[0].clientX,mY=e.touches[0].clientY;else try{mX=e.clientX,mY=e.clientY}catch(e$1){return!1}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right))return!1;prevent&&e_preventDefault(e);var display=cm.display,lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type))return e_defaultPrevented(e);mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.display.gutterSpecs.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX)return signal(cm,type,cm,lineAtHeight(cm.doc,mY),cm.display.gutterSpecs[i].className,e),e_defaultPrevented(e)}}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",!0)}function onContextMenu(cm,e){eventInWidget(cm.display,e)||function(cm,e){return!!hasHandler(cm,"gutterContextMenu")&&gutterEvent(cm,e,"gutterContextMenu",!1)}(cm,e)||signalDOMEvent(cm,e,"contextmenu")||captureRightClick||cm.display.input.onContextMenu(e)}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-"),clearCaches(cm)}PastClick.prototype.compare=function(time,pos,button){return this.time+400>time&&0==cmp(pos,this.pos)&&button==this.button};var Init={toString:function(){return"CodeMirror.Init"}},defaults={},optionHandlers={};function dragDropChanged(cm,value,old){if(!value!=!(old&&old!=Init)){var funcs=cm.display.dragFunctions,toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start),toggle(cm.display.scroller,"dragenter",funcs.enter),toggle(cm.display.scroller,"dragover",funcs.over),toggle(cm.display.scroller,"dragleave",funcs.leave),toggle(cm.display.scroller,"drop",funcs.drop)}}function wrappingChanged(cm){cm.options.lineWrapping?(addClass(cm.display.wrapper,"CodeMirror-wrap"),cm.display.sizer.style.minWidth="",cm.display.sizerWidth=null):(rmClass(cm.display.wrapper,"CodeMirror-wrap"),findMaxLine(cm)),estimateLineHeights(cm),regChange(cm),clearCaches(cm),setTimeout(function(){return updateScrollbars(cm)},100)}function CodeMirror(place,options){var this$1=this;if(!(this instanceof CodeMirror))return new CodeMirror(place,options);this.options=options=options?copyObj(options):{},copyObj(defaults,options,!1);var doc=options.value;"string"==typeof doc?doc=new Doc(doc,options.mode,null,options.lineSeparator,options.direction):options.mode&&(doc.modeOption=options.mode),this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this),display=this.display=new Display(place,doc,input,options);for(var opt in themeChanged(display.wrapper.CodeMirror=this),options.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),initScrollbars(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Delayed,keySeq:null,specialChars:null},options.autofocus&&!mobile&&display.input.focus(),ie&&ie_version<11&&setTimeout(function(){return this$1.display.input.reset(!0)},20),function(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown)),on(d.scroller,"dblclick",ie&&ie_version<11?operation(cm,function(e){if(!signalDOMEvent(cm,e)){var pos=posFromMouse(cm,e);if(pos&&!clickInGutter(cm,e)&&!eventInWidget(cm.display,e)){e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}}}):function(e){return signalDOMEvent(cm,e)||e_preventDefault(e)});on(d.scroller,"contextmenu",function(e){return onContextMenu(cm,e)}),on(d.input.getField(),"contextmenu",function(e){d.scroller.contains(e.target)||onContextMenu(cm,e)});var touchFinished,prevTouch={end:0};function finishTouch(){d.activeTouch&&(touchFinished=setTimeout(function(){return d.activeTouch=null},1e3),(prevTouch=d.activeTouch).end=+new Date)}function farAway(touch,other){if(null==other.left)return!0;var dx=other.left-touch.left,dy=other.top-touch.top;return 400<dx*dx+dy*dy}on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!function(e){if(1!=e.touches.length)return!1;var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}(e)&&!clickInGutter(cm,e)){d.input.ensurePolled(),clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:!1,prev:now-prevTouch.end<=300?prevTouch:null},1==e.touches.length&&(d.activeTouch.left=e.touches[0].pageX,d.activeTouch.top=e.touches[0].pageY)}}),on(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&null!=touch.left&&!touch.moved&&new Date-touch.start<300){var range,pos=cm.coordsChar(d.activeTouch,"page");range=!touch.prev||farAway(touch,touch.prev)?new Range(pos,pos):!touch.prev.prev||farAway(touch,touch.prev.prev)?cm.findWordAt(pos):new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0))),cm.setSelection(range.anchor,range.head),cm.focus(),e_preventDefault(e)}finishTouch()}),on(d.scroller,"touchcancel",finishTouch),on(d.scroller,"scroll",function(){d.scroller.clientHeight&&(updateScrollTop(cm,d.scroller.scrollTop),setScrollLeft(cm,d.scroller.scrollLeft,!0),signal(cm,"scroll",cm))}),on(d.scroller,"mousewheel",function(e){return onScrollWheel(cm,e)}),on(d.scroller,"DOMMouseScroll",function(e){return onScrollWheel(cm,e)}),on(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(e){signalDOMEvent(cm,e)||e_stop(e)},over:function(e){signalDOMEvent(cm,e)||(!function(cm,e){var pos=posFromMouse(cm,e);if(pos){var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag),cm.display.dragCursor||(cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv)),removeChildrenAndAdd(cm.display.dragCursor,frag)}}(cm,e),e_stop(e))},start:function(e){return function(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100))e_stop(e);else if(!signalDOMEvent(cm,e)&&!eventInWidget(cm.display,e)&&(e.dataTransfer.setData("Text",cm.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!safari)){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",presto&&(img.width=img.height=1,cm.display.wrapper.appendChild(img),img._top=img.offsetTop),e.dataTransfer.setDragImage(img,0,0),presto&&img.parentNode.removeChild(img)}}(cm,e)},drop:operation(cm,onDrop),leave:function(e){signalDOMEvent(cm,e)||clearDragCursor(cm)}};var inp=d.input.getField();on(inp,"keyup",function(e){return onKeyUp.call(cm,e)}),on(inp,"keydown",operation(cm,onKeyDown)),on(inp,"keypress",operation(cm,onKeyPress)),on(inp,"focus",function(e){return onFocus(cm,e)}),on(inp,"blur",function(e){return onBlur(cm,e)})}(this),ensureGlobalHandlers(),startOperation(this),this.curOp.forceUpdate=!0,attachDoc(this,doc),options.autofocus&&!mobile||this.hasFocus()?setTimeout(function(){this$1.hasFocus()&&!this$1.state.focused&&onFocus(this$1)},20):onBlur(this),optionHandlers)optionHandlers.hasOwnProperty(opt)&&optionHandlers[opt](this,options[opt],Init);maybeUpdateLineNumberWidth(this),options.finishInit&&options.finishInit(this);for(var i=0;i<initHooks.length;++i)initHooks[i](this);endOperation(this),webkit&&options.lineWrapping&&"optimizelegibility"==getComputedStyle(display.lineDiv).textRendering&&(display.lineDiv.style.textRendering="auto")}CodeMirror.defaults=defaults,CodeMirror.optionHandlers=optionHandlers;var initHooks=[];function indentLine(cm,n,how,aggressive){var state,doc=cm.doc;null==how&&(how="add"),"smart"==how&&(doc.mode.indent?state=getContextBefore(cm,n).state:how="prev");var tabSize=cm.options.tabSize,line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);line.stateAfter&&(line.stateAfter=null);var indentation,curSpaceString=line.text.match(/^\s*/)[0];if(aggressive||/\S/.test(line.text)){if("smart"==how&&((indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text))==Pass||150<indentation)){if(!aggressive)return;how="prev"}}else indentation=0,how="not";"prev"==how?indentation=n>doc.first?countColumn(getLine(doc,n-1).text,null,tabSize):0:"add"==how?indentation=curSpace+cm.options.indentUnit:"subtract"==how?indentation=curSpace-cm.options.indentUnit:"number"==typeof how&&(indentation=curSpace+how),indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs)for(var i=Math.floor(indentation/tabSize);i;--i)pos+=tabSize,indentString+="\t";if(pos<indentation&&(indentString+=spaceStr(indentation-pos)),indentString!=curSpaceString)return replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input"),!(line.stateAfter=null);for(var i$1=0;i$1<doc.sel.ranges.length;i$1++){var range=doc.sel.ranges[i$1];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos$1=Pos(n,curSpaceString.length);replaceOneSelection(doc,i$1,new Range(pos$1,pos$1));break}}}CodeMirror.defineInitHook=function(f){return initHooks.push(f)};var lastCopied=null;function setLastCopied(newLastCopied){lastCopied=newLastCopied}function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=!1,sel||(sel=doc.sel);var recent=+new Date-200,paste="paste"==origin||cm.state.pasteIncoming>recent,textLines=splitLinesAuto(inserted),multiPaste=null;if(paste&&1<sel.ranges.length)if(lastCopied&&lastCopied.text.join("\n")==inserted){if(sel.ranges.length%lastCopied.text.length==0){multiPaste=[];for(var i=0;i<lastCopied.text.length;i++)multiPaste.push(doc.splitLines(lastCopied.text[i]))}}else textLines.length==sel.ranges.length&&cm.options.pasteLinesPerSelection&&(multiPaste=map(textLines,function(l){return[l]}));for(var updateInput=cm.curOp.updateInput,i$1=sel.ranges.length-1;0<=i$1;i$1--){var range=sel.ranges[i$1],from=range.from(),to=range.to();range.empty()&&(deleted&&0<deleted?from=Pos(from.line,from.ch-deleted):cm.state.overwrite&&!paste?to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length)):paste&&lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==textLines.join("\n")&&(from=to=Pos(from.line,0)));var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i$1%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming>recent?"cut":"+input")};makeChange(cm.doc,changeEvent),signalLater(cm,"inputRead",cm,changeEvent)}inserted&&!paste&&triggerElectric(cm,inserted),ensureCursorVisible(cm),cm.curOp.updateInput<2&&(cm.curOp.updateInput=updateInput),cm.curOp.typing=!0,cm.state.pasteIncoming=cm.state.cutIncoming=-1}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted)return e.preventDefault(),cm.isReadOnly()||cm.options.disableInput||runInOp(cm,function(){return applyTextInput(cm,pasted,0,null,"paste")}),!0}function triggerElectric(cm,inserted){if(cm.options.electricChars&&cm.options.smartIndent)for(var sel=cm.doc.sel,i=sel.ranges.length-1;0<=i;i--){var range=sel.ranges[i];if(!(100<range.head.ch||i&&sel.ranges[i-1].head.line==range.head.line)){var mode=cm.getModeAt(range.head),indented=!1;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++)if(-1<inserted.indexOf(mode.electricChars.charAt(j))){indented=indentLine(cm,range.head.line,"smart");break}}else mode.electricInput&&mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch))&&(indented=indentLine(cm,range.head.line,"smart"));indented&&signalLater(cm,"electricInput",cm,range.head.line)}}}function copyableRanges(cm){for(var text=[],ranges=[],i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line,lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange),text.push(cm.getRange(lineRange.anchor,lineRange.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field,spellcheck,autocorrect,autocapitalize){field.setAttribute("autocorrect",autocorrect?"":"off"),field.setAttribute("autocapitalize",autocapitalize?"":"off"),field.setAttribute("spellcheck",!!spellcheck)}function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return webkit?te.style.width="1000px":te.setAttribute("wrap","off"),ios&&(te.style.border="1px solid black"),disableBrowserMagic(te),div}function findPosH(doc,pos,dir,unit,visually){var oldPos=pos,origDir=dir,lineObj=getLine(doc,pos.line),lineDir=visually&&"rtl"==doc.direction?-dir:dir;function moveOnce(boundToLine){var next,l;if("codepoint"==unit){var ch=lineObj.text.charCodeAt(pos.ch+(0<dir?0:-1));if(isNaN(ch))next=null;else{var astral=0<dir?55296<=ch&&ch<56320:56320<=ch&&ch<57343;next=new Pos(pos.line,Math.max(0,Math.min(lineObj.text.length,pos.ch+dir*(astral?2:1))),-dir)}}else next=visually?function(cm,line,start,dir){var bidi=getOrder(line,cm.doc.direction);if(!bidi)return moveLogically(line,start,dir);start.ch>=line.text.length?(start.ch=line.text.length,start.sticky="before"):start.ch<=0&&(start.ch=0,start.sticky="after");var partPos=getBidiPartAt(bidi,start.ch,start.sticky),part=bidi[partPos];if("ltr"==cm.doc.direction&&part.level%2==0&&(0<dir?part.to>start.ch:part.from<start.ch))return moveLogically(line,start,dir);var prep,mv=function(pos,dir){return moveCharLogically(line,pos instanceof Pos?pos.ch:pos,dir)},getWrappedLineExtent=function(ch){return cm.options.lineWrapping?(prep=prep||prepareMeasureForLine(cm,line),wrappedLineExtentChar(cm,line,prep,ch)):{begin:0,end:line.text.length}},wrappedLineExtent=getWrappedLineExtent("before"==start.sticky?mv(start,-1):start.ch);if("rtl"==cm.doc.direction||1==part.level){var moveInStorageOrder=1==part.level==dir<0,ch=mv(start,moveInStorageOrder?1:-1);if(null!=ch&&(moveInStorageOrder?ch<=part.to&&ch<=wrappedLineExtent.end:ch>=part.from&&ch>=wrappedLineExtent.begin)){var sticky=moveInStorageOrder?"before":"after";return new Pos(start.line,ch,sticky)}}var searchInVisualLine=function(partPos,dir,wrappedLineExtent){for(var getRes=function(ch,moveInStorageOrder){return moveInStorageOrder?new Pos(start.line,mv(ch,1),"before"):new Pos(start.line,ch,"after")};0<=partPos&&partPos<bidi.length;partPos+=dir){var part=bidi[partPos],moveInStorageOrder=0<dir==(1!=part.level),ch=moveInStorageOrder?wrappedLineExtent.begin:mv(wrappedLineExtent.end,-1);if(part.from<=ch&&ch<part.to)return getRes(ch,moveInStorageOrder);if(ch=moveInStorageOrder?part.from:mv(part.to,-1),wrappedLineExtent.begin<=ch&&ch<wrappedLineExtent.end)return getRes(ch,moveInStorageOrder)}},res=searchInVisualLine(partPos+dir,dir,wrappedLineExtent);if(res)return res;var nextCh=0<dir?wrappedLineExtent.end:mv(wrappedLineExtent.begin,-1);return null==nextCh||0<dir&&nextCh==line.text.length||!(res=searchInVisualLine(0<dir?0:bidi.length-1,dir,getWrappedLineExtent(nextCh)))?null:res}(doc.cm,lineObj,pos,dir):moveLogically(lineObj,pos,dir);if(null==next){if(boundToLine||(l=pos.line+lineDir)<doc.first||l>=doc.first+doc.size||(pos=new Pos(l,pos.ch,pos.sticky),!(lineObj=getLine(doc,l))))return!1;pos=endOfLine(visually,doc.cm,lineObj,pos.line,lineDir)}else pos=next;return!0}if("char"==unit||"codepoint"==unit)moveOnce();else if("column"==unit)moveOnce(!0);else if("word"==unit||"group"==unit)for(var sawType=null,group="group"==unit,helper=doc.cm&&doc.cm.getHelper(pos,"wordChars"),first=!0;!(dir<0)||moveOnce(!first);first=!1){var cur=lineObj.text.charAt(pos.ch)||"\n",type=isWordChar(cur,helper)?"w":group&&"\n"==cur?"n":!group||/\s/.test(cur)?null:"p";if(!group||first||type||(type="s"),sawType&&sawType!=type){dir<0&&(dir=1,moveOnce(),pos.sticky="after");break}if(type&&(sawType=type),0<dir&&!moveOnce(!first))break}var result=skipAtomic(doc,pos,oldPos,origDir,!0);return equalCursorPos(oldPos,result)&&(result.hitSide=!0),result}function findPosV(cm,pos,dir,unit){var y,target,doc=cm.doc,x=pos.left;if("page"==unit){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),moveAmount=Math.max(pageSize-.5*textHeight(cm.display),3);y=(0<dir?pos.bottom:pos.top)+dir*moveAmount}else"line"==unit&&(y=0<dir?pos.bottom+3:pos.top-3);for(;(target=coordsChar(cm,x,y)).outside;){if(dir<0?y<=0:y>=doc.height){target.hitSide=!0;break}y+=5*dir}return target}var ContentEditableInput=function(cm){this.cm=cm,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Delayed,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden)return null;var line=getLine(cm.doc,pos.line),info=mapFromLineView(view,line,pos.line),order=getOrder(line,cm.doc.direction),side="left";order&&(side=getBidiPartAt(order,pos.ch)%2?"right":"left");var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);return result.offset="right"==result.collapse?result.end:result.start,result}function badPos(pos,bad){return bad&&(pos.bad=!0),pos}function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){if(!(lineNode=cm.display.lineDiv.childNodes[offset]))return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),!0);node=null,offset=0}else for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv)return null;if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv)break}for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode)return locateNodeInLineView(lineView,node,offset)}}function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=!1;if(!node||!contains(wrapper,node))return badPos(Pos(lineNo(lineView.line),0),!0);if(node==wrapper&&(bad=!0,node=wrapper.childNodes[offset],offset=0,!node)){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}var textNode=3==node.nodeType?node:null,topNode=node;for(textNode||1!=node.childNodes.length||3!=node.firstChild.nodeType||(textNode=node.firstChild,offset&&(offset=textNode.nodeValue.length));topNode.parentNode!=wrapper;)topNode=topNode.parentNode;var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++)for(var map=i<0?measure.map:maps[i],j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]),ch=map[j]+offset;return(offset<0||curNode!=textNode)&&(ch=map[j+(offset?1:0)]),Pos(line,ch)}}}var found=find(textNode,topNode,offset);if(found)return badPos(found,bad);for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){if(found=find(after,after.firstChild,0))return badPos(Pos(found.line,found.ch-dist),bad);dist+=after.textContent.length}for(var before=topNode.previousSibling,dist$1=offset;before;before=before.previousSibling){if(found=find(before,before.firstChild,-1))return badPos(Pos(found.line,found.ch+dist$1),bad);dist$1+=before.textContent.length}}ContentEditableInput.prototype.init=function(display){var this$1=this,input=this,cm=input.cm,div=input.div=display.lineDiv;function belongsToInput(e){for(var t=e.target;t;t=t.parentNode){if(t==div)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function onCopyCut(e){if(belongsToInput(e)&&!signalDOMEvent(cm,e)){if(cm.somethingSelected())setLastCopied({lineWise:!1,text:cm.getSelections()}),"cut"==e.type&&cm.replaceSelection("",null,"cut");else{if(!cm.options.lineWiseCopyCut)return;var ranges=copyableRanges(cm);setLastCopied({lineWise:!0,text:ranges.text}),"cut"==e.type&&cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll),cm.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var content=lastCopied.text.join("\n");if(e.clipboardData.setData("Text",content),e.clipboardData.getData("Text")==content)return void e.preventDefault()}var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild),te.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(te),setTimeout(function(){cm.display.lineSpace.removeChild(kludge),hadFocus.focus(),hadFocus==div&&input.showPrimarySelection()},50)}}disableBrowserMagic(div,cm.options.spellcheck,cm.options.autocorrect,cm.options.autocapitalize),on(div,"paste",function(e){!belongsToInput(e)||signalDOMEvent(cm,e)||handlePaste(e,cm)||ie_version<=11&&setTimeout(operation(cm,function(){return this$1.updateFromDOM()}),20)}),on(div,"compositionstart",function(e){this$1.composing={data:e.data,done:!1}}),on(div,"compositionupdate",function(e){this$1.composing||(this$1.composing={data:e.data,done:!1})}),on(div,"compositionend",function(e){this$1.composing&&(e.data!=this$1.composing.data&&this$1.readFromDOMSoon(),this$1.composing.done=!0)}),on(div,"touchstart",function(){return input.forceCompositionEnd()}),on(div,"input",function(){this$1.composing||this$1.readFromDOMSoon()}),on(div,"copy",onCopyCut),on(div,"cut",onCopyCut)},ContentEditableInput.prototype.screenReaderLabelChanged=function(label){label?this.div.setAttribute("aria-label",label):this.div.removeAttribute("aria-label")},ContentEditableInput.prototype.prepareSelection=function(){var result=prepareSelection(this.cm,!1);return result.focus=document.activeElement==this.div,result},ContentEditableInput.prototype.showSelection=function(info,takeFocus){info&&this.cm.display.view.length&&((info.focus||takeFocus)&&this.showPrimarySelection(),this.showMultipleSelections(info))},ContentEditableInput.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ContentEditableInput.prototype.showPrimarySelection=function(){var sel=this.getSelection(),cm=this.cm,prim=cm.doc.sel.primary(),from=prim.from(),to=prim.to();if(cm.display.viewTo==cm.display.viewFrom||from.line>=cm.display.viewTo||to.line<cm.display.viewFrom)sel.removeAllRanges();else{var curAnchor=domToPos(cm,sel.anchorNode,sel.anchorOffset),curFocus=domToPos(cm,sel.focusNode,sel.focusOffset);if(!curAnchor||curAnchor.bad||!curFocus||curFocus.bad||0!=cmp(minPos(curAnchor,curFocus),from)||0!=cmp(maxPos(curAnchor,curFocus),to)){var view=cm.display.view,start=from.line>=cm.display.viewFrom&&posToDOM(cm,from)||{node:view[0].measure.map[2],offset:0},end=to.line<cm.display.viewTo&&posToDOM(cm,to);if(!end){var measure=view[view.length-1].measure,map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]}}if(start&&end){var rng,old=sel.rangeCount&&sel.getRangeAt(0);try{rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}rng&&(!gecko&&cm.state.focused?(sel.collapse(start.node,start.offset),rng.collapsed||(sel.removeAllRanges(),sel.addRange(rng))):(sel.removeAllRanges(),sel.addRange(rng)),old&&null==sel.anchorNode?sel.addRange(old):gecko&&this.startGracePeriod()),this.rememberSelection()}else sel.removeAllRanges()}}},ContentEditableInput.prototype.startGracePeriod=function(){var this$1=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){this$1.gracePeriod=!1,this$1.selectionChanged()&&this$1.cm.operation(function(){return this$1.cm.curOp.selectionChanged=!0})},20)},ContentEditableInput.prototype.showMultipleSelections=function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors),removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)},ContentEditableInput.prototype.rememberSelection=function(){var sel=this.getSelection();this.lastAnchorNode=sel.anchorNode,this.lastAnchorOffset=sel.anchorOffset,this.lastFocusNode=sel.focusNode,this.lastFocusOffset=sel.focusOffset},ContentEditableInput.prototype.selectionInEditor=function(){var sel=this.getSelection();if(!sel.rangeCount)return!1;var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)},ContentEditableInput.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ContentEditableInput.prototype.blur=function(){this.div.blur()},ContentEditableInput.prototype.getField=function(){return this.div},ContentEditableInput.prototype.supportsTouch=function(){return!0},ContentEditableInput.prototype.receivedFocus=function(){var input=this;this.selectionInEditor()?this.pollSelection():runInOp(this.cm,function(){return input.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function poll(){input.cm.state.focused&&(input.pollSelection(),input.polling.set(input.cm.options.pollInterval,poll))})},ContentEditableInput.prototype.selectionChanged=function(){var sel=this.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset},ContentEditableInput.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var sel=this.getSelection(),cm=this.cm;if(android&&chrome&&this.cm.display.gutterSpecs.length&&function(node){for(var scan=node;scan;scan=scan.parentNode)if(/CodeMirror-gutter-wrapper/.test(scan.className))return!0;return!1}(sel.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset),head=domToPos(cm,sel.focusNode,sel.focusOffset);anchor&&head&&runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll),(anchor.bad||head.bad)&&(cm.curOp.selectionChanged=!0)})}}},ContentEditableInput.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var fromIndex,fromLine,fromNode,cm=this.cm,display=cm.display,sel=cm.doc.sel.primary(),from=sel.from(),to=sel.to();if(0==from.ch&&from.line>cm.firstLine()&&(from=Pos(from.line-1,getLine(cm.doc,from.line-1).length)),to.ch==getLine(cm.doc,to.line).text.length&&to.line<cm.lastLine()&&(to=Pos(to.line+1,0)),from.line<display.viewFrom||to.line>display.viewTo-1)return!1;fromNode=from.line==display.viewFrom||0==(fromIndex=findViewIndex(cm,from.line))?(fromLine=lineNo(display.view[0].line),display.view[0].node):(fromLine=lineNo(display.view[fromIndex].line),display.view[fromIndex-1].node.nextSibling);var toLine,toNode,toIndex=findViewIndex(cm,to.line);if(toNode=toIndex==display.view.length-1?(toLine=display.viewTo-1,display.lineDiv.lastChild):(toLine=lineNo(display.view[toIndex+1].line)-1,display.view[toIndex+1].node.previousSibling),!fromNode)return!1;for(var newText=cm.doc.splitLines(function(cm,from,to,fromLine,toLine){var text="",closing=!1,lineSep=cm.doc.lineSeparator(),extraLinebreak=!1;function close(){closing&&(text+=lineSep,extraLinebreak&&(text+=lineSep),closing=extraLinebreak=!1)}function addText(str){str&&(close(),text+=str)}function walk(node){if(1==node.nodeType){var cmText=node.getAttribute("cm-text");if(cmText)return void addText(cmText);var range,markerID=node.getAttribute("cm-marker");if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),(id=+markerID,function(marker){return marker.id==id}));return void(found.length&&(range=found[0].find(0))&&addText(getBetween(cm.doc,range.from,range.to).join(lineSep)))}if("false"==node.getAttribute("contenteditable"))return;var isBlock=/^(pre|div|p|li|table|br)$/i.test(node.nodeName);if(!/^br$/i.test(node.nodeName)&&0==node.textContent.length)return;isBlock&&close();for(var i=0;i<node.childNodes.length;i++)walk(node.childNodes[i]);/^(pre|p)$/i.test(node.nodeName)&&(extraLinebreak=!0),isBlock&&(closing=!0)}else 3==node.nodeType&&addText(node.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var id}for(;walk(from),from!=to;)from=from.nextSibling,extraLinebreak=!1;return text}(cm,fromNode,toNode,fromLine,toLine)),oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));1<newText.length&&1<oldText.length;)if(lst(newText)==lst(oldText))newText.pop(),oldText.pop(),toLine--;else{if(newText[0]!=oldText[0])break;newText.shift(),oldText.shift(),fromLine++}for(var cutFront=0,cutEnd=0,newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront);)++cutFront;for(var newBot=lst(newText),oldBot=lst(oldText),maxCutEnd=Math.min(newBot.length-(1==newText.length?cutFront:0),oldBot.length-(1==oldText.length?cutFront:0));cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1);)++cutEnd;if(1==newText.length&&1==oldText.length&&fromLine==from.line)for(;cutFront&&cutFront>from.ch&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1);)cutFront--,cutEnd++;newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd).replace(/^\u200b+/,""),newText[0]=newText[0].slice(cutFront).replace(/\u200b+$/,"");var chFrom=Pos(fromLine,cutFront),chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);return 1<newText.length||newText[0]||cmp(chFrom,chTo)?(replaceRange(cm.doc,newText,chFrom,chTo,"+input"),!0):void 0},ContentEditableInput.prototype.ensurePolled=function(){this.forceCompositionEnd()},ContentEditableInput.prototype.reset=function(){this.forceCompositionEnd()},ContentEditableInput.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ContentEditableInput.prototype.readFromDOMSoon=function(){var this$1=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(this$1.readDOMTimeout=null,this$1.composing){if(!this$1.composing.done)return;this$1.composing=null}this$1.updateFromDOM()},80))},ContentEditableInput.prototype.updateFromDOM=function(){var this$1=this;!this.cm.isReadOnly()&&this.pollContent()||runInOp(this.cm,function(){return regChange(this$1.cm)})},ContentEditableInput.prototype.setUneditable=function(node){node.contentEditable="false"},ContentEditableInput.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},ContentEditableInput.prototype.readOnlyChanged=function(val){this.div.contentEditable=String("nocursor"!=val)},ContentEditableInput.prototype.onContextMenu=function(){},ContentEditableInput.prototype.resetPosition=function(){},ContentEditableInput.prototype.needsContentAttribute=!0;var TextareaInput=function(cm){this.cm=cm,this.prevInput="",this.pollingFast=!1,this.polling=new Delayed,this.hasSelection=!1,this.composing=null};TextareaInput.prototype.init=function(display){var this$1=this,input=this,cm=this.cm;this.createField(display);var te=this.textarea;function prepareCopyCut(e){if(!signalDOMEvent(cm,e)){if(cm.somethingSelected())setLastCopied({lineWise:!1,text:cm.getSelections()});else{if(!cm.options.lineWiseCopyCut)return;var ranges=copyableRanges(cm);setLastCopied({lineWise:!0,text:ranges.text}),"cut"==e.type?cm.setSelections(ranges.ranges,null,sel_dontScroll):(input.prevInput="",te.value=ranges.text.join("\n"),selectInput(te))}"cut"==e.type&&(cm.state.cutIncoming=+new Date)}}display.wrapper.insertBefore(this.wrapper,display.wrapper.firstChild),ios&&(te.style.width="0px"),on(te,"input",function(){ie&&9<=ie_version&&this$1.hasSelection&&(this$1.hasSelection=null),input.poll()}),on(te,"paste",function(e){signalDOMEvent(cm,e)||handlePaste(e,cm)||(cm.state.pasteIncoming=+new Date,input.fastPoll())}),on(te,"cut",prepareCopyCut),on(te,"copy",prepareCopyCut),on(display.scroller,"paste",function(e){if(!eventInWidget(display,e)&&!signalDOMEvent(cm,e)){if(!te.dispatchEvent)return cm.state.pasteIncoming=+new Date,void input.focus();var event=new Event("paste");event.clipboardData=e.clipboardData,te.dispatchEvent(event)}}),on(display.lineSpace,"selectstart",function(e){eventInWidget(display,e)||e_preventDefault(e)}),on(te,"compositionstart",function(){var start=cm.getCursor("from");input.composing&&input.composing.range.clear(),input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}}),on(te,"compositionend",function(){input.composing&&(input.poll(),input.composing.range.clear(),input.composing=null)})},TextareaInput.prototype.createField=function(_display){this.wrapper=hiddenTextarea(),this.textarea=this.wrapper.firstChild},TextareaInput.prototype.screenReaderLabelChanged=function(label){label?this.textarea.setAttribute("aria-label",label):this.textarea.removeAttribute("aria-label")},TextareaInput.prototype.prepareSelection=function(){var cm=this.cm,display=cm.display,doc=cm.doc,result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div"),wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top)),result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}return result},TextareaInput.prototype.showSelection=function(drawn){var display=this.cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors),removeChildrenAndAdd(display.selectionDiv,drawn.selection),null!=drawn.teTop&&(this.wrapper.style.top=drawn.teTop+"px",this.wrapper.style.left=drawn.teLeft+"px")},TextareaInput.prototype.reset=function(typing){if(!this.contextMenuPending&&!this.composing){var cm=this.cm;if(cm.somethingSelected()){this.prevInput="";var content=cm.getSelection();this.textarea.value=content,cm.state.focused&&selectInput(this.textarea),ie&&9<=ie_version&&(this.hasSelection=content)}else typing||(this.prevInput=this.textarea.value="",ie&&9<=ie_version&&(this.hasSelection=null))}},TextareaInput.prototype.getField=function(){return this.textarea},TextareaInput.prototype.supportsTouch=function(){return!1},TextareaInput.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!mobile||activeElt()!=this.textarea))try{this.textarea.focus()}catch(e){}},TextareaInput.prototype.blur=function(){this.textarea.blur()},TextareaInput.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},TextareaInput.prototype.receivedFocus=function(){this.slowPoll()},TextareaInput.prototype.slowPoll=function(){var this$1=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){this$1.poll(),this$1.cm.state.focused&&this$1.slowPoll()})},TextareaInput.prototype.fastPoll=function(){var missed=!1,input=this;input.pollingFast=!0,input.polling.set(20,function p(){input.poll()||missed?(input.pollingFast=!1,input.slowPoll()):(missed=!0,input.polling.set(60,p))})},TextareaInput.prototype.poll=function(){var this$1=this,cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||hasSelection(input)&&!prevInput&&!this.composing||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq)return!1;var text=input.value;if(text==prevInput&&!cm.somethingSelected())return!1;if(ie&&9<=ie_version&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text))return cm.display.input.reset(),!1;if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(8203!=first||prevInput||(prevInput="​"),8666==first)return this.reset(),this.cm.execCommand("undo")}for(var same=0,l=Math.min(prevInput.length,text.length);same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same);)++same;return runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,this$1.composing?"*compose":null),1e3<text.length||-1<text.indexOf("\n")?input.value=this$1.prevInput="":this$1.prevInput=text,this$1.composing&&(this$1.composing.range.clear(),this$1.composing.range=cm.markText(this$1.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},TextareaInput.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},TextareaInput.prototype.onKeyPress=function(){ie&&9<=ie_version&&(this.hasSelection=null),this.fastPoll()},TextareaInput.prototype.onContextMenu=function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;input.contextMenuPending&&input.contextMenuPending();var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(pos&&!presto){cm.options.resetSelectionOnContextMenu&&-1==cm.doc.sel.contains(pos)&&operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll);var oldScrollY,oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText,wrapperBox=input.wrapper.offsetParent.getBoundingClientRect();if(input.wrapper.style.cssText="position: static",te.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-wrapperBox.top-5)+"px; left: "+(e.clientX-wrapperBox.left-5)+"px;\n      z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",webkit&&(oldScrollY=window.scrollY),display.input.focus(),webkit&&window.scrollTo(null,oldScrollY),display.input.reset(),cm.somethingSelected()||(te.value=input.prevInput=" "),input.contextMenuPending=rehide,display.selForContextMenu=cm.doc.sel,clearTimeout(display.detectingSelectAll),ie&&9<=ie_version&&prepareSelectAllHack(),captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup),setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else setTimeout(rehide,50)}function prepareSelectAllHack(){if(null!=te.selectionStart){var selected=cm.somethingSelected(),extval="​"+(selected?te.value:"");te.value="⇚",te.value=extval,input.prevInput=selected?"":"​",te.selectionStart=1,te.selectionEnd=extval.length,display.selForContextMenu=cm.doc.sel}}function rehide(){if(input.contextMenuPending==rehide&&(input.contextMenuPending=!1,input.wrapper.style.cssText=oldWrapperCSS,te.style.cssText=oldCSS,ie&&ie_version<9&&display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos),null!=te.selectionStart)){(!ie||ie&&ie_version<9)&&prepareSelectAllHack();var i=0,poll=function(){display.selForContextMenu==cm.doc.sel&&0==te.selectionStart&&0<te.selectionEnd&&"​"==input.prevInput?operation(cm,selectAll)(cm):i++<10?display.detectingSelectAll=setTimeout(poll,500):(display.selForContextMenu=null,display.input.reset())};display.detectingSelectAll=setTimeout(poll,200)}}},TextareaInput.prototype.readOnlyChanged=function(val){val||this.reset(),this.textarea.disabled="nocursor"==val,this.textarea.readOnly=!!val},TextareaInput.prototype.setUneditable=function(){},TextareaInput.prototype.needsContentAttribute=!1,function(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt,handle&&(optionHandlers[name]=notOnInit?function(cm,val,old){old!=Init&&handle(cm,val,old)}:handle)}CodeMirror.defineOption=option,CodeMirror.Init=Init,option("value","",function(cm,val){return cm.setValue(val)},!0),option("mode",null,function(cm,val){cm.doc.modeOption=val,loadMode(cm)},!0),option("indentUnit",2,loadMode,!0),option("indentWithTabs",!1),option("smartIndent",!0),option("tabSize",4,function(cm){resetModeState(cm),clearCaches(cm),regChange(cm)},!0),option("lineSeparator",null,function(cm,val){if(cm.doc.lineSep=val){var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(-1==found)break;pos=found+val.length,newBreaks.push(Pos(lineNo,found))}lineNo++});for(var i=newBreaks.length-1;0<=i;i--)replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}}),option("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g"),old!=Init&&cm.refresh()}),option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){return cm.refresh()},!0),option("electricChars",!0),option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),option("spellcheck",!1,function(cm,val){return cm.getInputField().spellcheck=val},!0),option("autocorrect",!1,function(cm,val){return cm.getInputField().autocorrect=val},!0),option("autocapitalize",!1,function(cm,val){return cm.getInputField().autocapitalize=val},!0),option("rtlMoveVisually",!windows),option("wholeLineUpdateBefore",!0),option("theme","default",function(cm){themeChanged(cm),updateGutters(cm)},!0),option("keyMap","default",function(cm,val,old){var next=getKeyMap(val),prev=old!=Init&&getKeyMap(old);prev&&prev.detach&&prev.detach(cm,next),next.attach&&next.attach(cm,prev||null)}),option("extraKeys",null),option("configureMouse",null),option("lineWrapping",!1,wrappingChanged,!0),option("gutters",[],function(cm,val){cm.display.gutterSpecs=getGutters(val,cm.options.lineNumbers),updateGutters(cm)},!0),option("fixedGutter",!0,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0",cm.refresh()},!0),option("coverGutterNextToScrollbar",!1,function(cm){return updateScrollbars(cm)},!0),option("scrollbarStyle","native",function(cm){initScrollbars(cm),updateScrollbars(cm),cm.display.scrollbars.setScrollTop(cm.doc.scrollTop),cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},!0),option("lineNumbers",!1,function(cm,val){cm.display.gutterSpecs=getGutters(cm.options.gutters,val),updateGutters(cm)},!0),option("firstLineNumber",1,updateGutters,!0),option("lineNumberFormatter",function(integer){return integer},updateGutters,!0),option("showCursorWhenSelecting",!1,updateSelection,!0),option("resetSelectionOnContextMenu",!0),option("lineWiseCopyCut",!0),option("pasteLinesPerSelection",!0),option("selectionsMayTouch",!1),option("readOnly",!1,function(cm,val){"nocursor"==val&&(onBlur(cm),cm.display.input.blur()),cm.display.input.readOnlyChanged(val)}),option("screenReaderLabel",null,function(cm,val){val=""===val?null:val,cm.display.input.screenReaderLabelChanged(val)}),option("disableInput",!1,function(cm,val){val||cm.display.input.reset()},!0),option("dragDrop",!0,dragDropChanged),option("allowDropFileTypes",null),option("cursorBlinkRate",530),option("cursorScrollMargin",0),option("cursorHeight",1,updateSelection,!0),option("singleCursorHeightPerLine",!0,updateSelection,!0),option("workTime",100),option("workDelay",100),option("flattenSpans",!0,resetModeState,!0),option("addModeClass",!1,resetModeState,!0),option("pollInterval",100),option("undoDepth",200,function(cm,val){return cm.doc.history.undoDepth=val}),option("historyEventDelay",1250),option("viewportMargin",10,function(cm){return cm.refresh()},!0),option("maxHighlightLength",1e4,resetModeState,!0),option("moveInputWithCursor",!0,function(cm,val){val||cm.display.input.resetPosition()}),option("tabindex",null,function(cm,val){return cm.display.input.getField().tabIndex=val||""}),option("autofocus",null),option("direction","ltr",function(cm,val){return cm.doc.setDirection(val)},!0),option("phrases",null)}(CodeMirror),function(CodeMirror){var optionHandlers=CodeMirror.optionHandlers,helpers=CodeMirror.helpers={};CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus(),this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];options[option]==value&&"mode"!=option||(options[option]=value,optionHandlers.hasOwnProperty(option)&&operation(this,optionHandlers[option])(this,value,old),signal(this,"optionChange",this,option))},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map))},removeKeyMap:function(map){for(var maps=this.state.keyMaps,i=0;i<maps.length;++i)if(maps[i]==map||maps[i].name==map)return maps.splice(i,1),!0},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState)throw new Error("Overlays may not be stateful.");!function(array,value,score){for(var pos=0,priority=score(value);pos<array.length&&score(array[pos])<=priority;)pos++;array.splice(pos,0,value)}(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:options&&options.priority||0},function(overlay){return overlay.priority}),this.state.modeGen++,regChange(this)}),removeOverlay:methodOp(function(spec){for(var overlays=this.state.overlays,i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||"string"==typeof spec&&cur.name==spec)return overlays.splice(i,1),this.state.modeGen++,void regChange(this)}}),indentLine:methodOp(function(n,dir,aggressive){"string"!=typeof dir&&"number"!=typeof dir&&(dir=null==dir?this.options.smartIndent?"smart":"prev":dir?"add":"subtract"),isLine(this.doc,n)&&indentLine(this,n,dir,aggressive)}),indentSelection:methodOp(function(how){for(var ranges=this.doc.sel.ranges,end=-1,i=0;i<ranges.length;i++){var range=ranges[i];if(range.empty())range.head.line>end&&(indentLine(this,range.head.line,how,!0),end=range.head.line,i==this.doc.sel.primIndex&&ensureCursorVisible(this));else{var from=range.from(),to=range.to(),start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j)indentLine(this,j,how);var newRanges=this.doc.sel.ranges;0==from.ch&&ranges.length==newRanges.length&&0<newRanges[i].from().ch&&replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,!0)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var type,styles=getLineStyles(this,getLine(this.doc,pos.line)),before=0,after=(styles.length-1)/2,ch=pos.ch;if(0==ch)type=styles[2];else for(;;){var mid=before+after>>1;if((mid?styles[2*mid-1]:0)>=ch)after=mid;else{if(!(styles[2*mid+1]<ch)){type=styles[2*mid+2];break}before=mid+1}}var cut=type?type.indexOf("overlay "):-1;return cut<0?type:0==cut?null:type.slice(0,cut-1)},getModeAt:function(pos){var mode=this.doc.mode;return mode.innerMode?CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode:mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type))return found;var help=helpers[type],mode=this.getModeAt(pos);if("string"==typeof mode[type])help[mode[type]]&&found.push(help[mode[type]]);else if(mode[type])for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];val&&found.push(val)}else mode.helperType&&help[mode.helperType]?found.push(help[mode.helperType]):help[mode.name]&&found.push(help[mode.name]);for(var i$1=0;i$1<help._global.length;i$1++){var cur=help._global[i$1];cur.pred(mode,this)&&-1==indexOf(found,cur.val)&&found.push(cur.val)}return found},getStateAfter:function(line,precise){var doc=this.doc;return getContextBefore(this,(line=clipLine(doc,null==line?doc.first+doc.size-1:line))+1,precise).state},cursorCoords:function(start,mode){var range=this.doc.sel.primary();return cursorCoords(this,null==start?range.head:"object"==typeof start?clipPos(this.doc,start):start?range.from():range.to(),mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,mode){return coordsChar(this,(coords=fromCoordSystem(this,coords,mode||"page")).left,coords.top)},lineAtHeight:function(height,mode){return height=fromCoordSystem(this,{top:height,left:0},mode||"page").top,lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode,includeWidgets){var lineObj,end=!1;if("number"==typeof line){var last=this.doc.first+this.doc.size-1;line<this.doc.first?line=this.doc.first:last<line&&(line=last,end=!0),lineObj=getLine(this.doc,line)}else lineObj=line;return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page",includeWidgets||end).top+(end?this.doc.height-heightAtLine(lineObj):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var cm,rect,scrollPos,display=this.display,top=(pos=cursorCoords(this,clipPos(this.doc,pos))).bottom,left=pos.left;if(node.style.position="absolute",node.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(node),display.sizer.appendChild(node),"over"==vert)top=pos.top;else if("above"==vert||"near"==vert){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);("above"==vert||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight?top=pos.top-node.offsetHeight:pos.bottom+node.offsetHeight<=vspace&&(top=pos.bottom),left+node.offsetWidth>hspace&&(left=hspace-node.offsetWidth)}node.style.top=top+"px",node.style.left=node.style.right="","right"==horiz?(left=display.sizer.clientWidth-node.offsetWidth,node.style.right="0px"):("left"==horiz?left=0:"middle"==horiz&&(left=(display.sizer.clientWidth-node.offsetWidth)/2),node.style.left=left+"px"),scroll&&(cm=this,rect={left:left,top:top,right:left+node.offsetWidth,bottom:top+node.offsetHeight},null!=(scrollPos=calculateScrollPos(cm,rect)).scrollTop&&updateScrollTop(cm,scrollPos.scrollTop),null!=scrollPos.scrollLeft&&setScrollLeft(cm,scrollPos.scrollLeft))},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,triggerOnMouseDown:methodOp(onMouseDown),execCommand:function(cmd){if(commands.hasOwnProperty(cmd))return commands[cmd].call(null,this)},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var dir=1;amount<0&&(dir=-1,amount=-amount);for(var cur=clipPos(this.doc,from),i=0;i<amount&&!(cur=findPosH(this.doc,cur,dir,unit,visually)).hitSide;++i);return cur},moveH:methodOp(function(dir,unit){var this$1=this;this.extendSelectionsBy(function(range){return this$1.display.shift||this$1.doc.extend||range.empty()?findPosH(this$1.doc,range.head,dir,unit,this$1.options.rtlMoveVisually):dir<0?range.from():range.to()},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;sel.somethingSelected()?doc.replaceSelection("",null,"+delete"):deleteNearSelection(this,function(range){var other=findPosH(doc,range.head,dir,unit,!1);return dir<0?{from:other,to:range.head}:{from:range.head,to:other}})}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;amount<0&&(dir=-1,amount=-amount);for(var cur=clipPos(this.doc,from),i=0;i<amount;++i){var coords=cursorCoords(this,cur,"div");if(null==x?x=coords.left:coords.left=x,(cur=findPosV(this,coords,dir,unit)).hitSide)break}return cur},moveV:methodOp(function(dir,unit){var this$1=this,doc=this.doc,goals=[],collapse=!this.display.shift&&!doc.extend&&doc.sel.somethingSelected();if(doc.extendSelectionsBy(function(range){if(collapse)return dir<0?range.from():range.to();var headPos=cursorCoords(this$1,range.head,"div");null!=range.goalColumn&&(headPos.left=range.goalColumn),goals.push(headPos.left);var pos=findPosV(this$1,headPos,dir,unit);return"page"==unit&&range==doc.sel.primary()&&addToScrollTop(this$1,charCoords(this$1,pos,"div").top-headPos.top),pos},sel_move),goals.length)for(var i=0;i<doc.sel.ranges.length;i++)doc.sel.ranges[i].goalColumn=goals[i]}),findWordAt:function(pos){var line=getLine(this.doc,pos.line).text,start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");"before"!=pos.sticky&&end!=line.length||!start?++end:--start;for(var startChar=line.charAt(start),check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};0<start&&check(line.charAt(start-1));)--start;for(;end<line.length&&check(line.charAt(end));)++end}return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function(value){null!=value&&value==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?addClass(this.display.cursorDiv,"CodeMirror-overwrite"):rmClass(this.display.cursorDiv,"CodeMirror-overwrite"),signal(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:methodOp(function(x,y){scrollToCoords(this,x,y)}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range,margin){null==range?(range={from:this.doc.sel.primary().head,to:null},null==margin&&(margin=this.options.cursorScrollMargin)):"number"==typeof range?range={from:Pos(range,0),to:null}:null==range.from&&(range={from:range,to:null}),range.to||(range.to=range.from),range.margin=margin||0,null!=range.from.line?function(cm,range){resolveScrollToPos(cm),cm.curOp.scrollToPos=range}(this,range):scrollToCoordsRange(this,range.from,range.to,range.margin)}),setSize:methodOp(function(width,height){var this$1=this,interpret=function(val){return"number"==typeof val||/^\d+$/.test(String(val))?val+"px":val};null!=width&&(this.display.wrapper.style.width=interpret(width)),null!=height&&(this.display.wrapper.style.height=interpret(height)),this.options.lineWrapping&&clearLineMeasurementCache(this);var lineNo=this.display.viewFrom;this.doc.iter(lineNo,this.display.viewTo,function(line){if(line.widgets)for(var i=0;i<line.widgets.length;i++)if(line.widgets[i].noHScroll){regLineChange(this$1,lineNo,"widget");break}++lineNo}),this.curOp.forceUpdate=!0,signal(this,"refresh",this)}),operation:function(f){return runInOp(this,f)},startOperation:function(){return startOperation(this)},endOperation:function(){return endOperation(this)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this),this.curOp.forceUpdate=!0,clearCaches(this),scrollToCoords(this,this.doc.scrollLeft,this.doc.scrollTop),updateGutterSpace(this.display),(null==oldHeight||.5<Math.abs(oldHeight-textHeight(this.display))||this.options.lineWrapping)&&estimateLineHeights(this),signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;return old.cm=null,this.state.selectingText&&this.state.selectingText(),attachDoc(this,doc),clearCaches(this),this.display.input.reset(),scrollToCoords(this,doc.scrollLeft,doc.scrollTop),this.curOp.forceScroll=!0,signalLater(this,"swapDoc",this,old),old}),phrase:function(phraseText){var phrases=this.options.phrases;return phrases&&Object.prototype.hasOwnProperty.call(phrases,phraseText)?phrases[phraseText]:phraseText},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},eventMixin(CodeMirror),CodeMirror.registerHelper=function(type,name,value){helpers.hasOwnProperty(type)||(helpers[type]=CodeMirror[type]={_global:[]}),helpers[type][name]=value},CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value),helpers[type]._global.push({pred:predicate,val:value})}}(CodeMirror);var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype)Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0&&(CodeMirror.prototype[prop]=function(method){return function(){return method.apply(this.doc,arguments)}}(Doc.prototype[prop]));return eventMixin(Doc),CodeMirror.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput},CodeMirror.defineMode=function(name){CodeMirror.defaults.mode||"null"==name||(CodeMirror.defaults.mode=name),function(name,mode){2<arguments.length&&(mode.dependencies=Array.prototype.slice.call(arguments,2)),modes[name]=mode}.apply(this,arguments)},CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec},CodeMirror.defineMode("null",function(){return{token:function(stream){return stream.skipToEnd()}}}),CodeMirror.defineMIME("text/plain","null"),CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func},CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func},CodeMirror.fromTextArea=function(textarea,options){if((options=options?copyObj(options):{}).value=textarea.value,!options.tabindex&&textarea.tabIndex&&(options.tabindex=textarea.tabIndex),!options.placeholder&&textarea.placeholder&&(options.placeholder=textarea.placeholder),null==options.autofocus){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||null!=textarea.getAttribute("autofocus")&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}var realSubmit;if(textarea.form&&(on(textarea.form,"submit",save),!options.leaveSubmitMethodAlone)){var form=textarea.form;realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save(),form.submit=realSubmit,form.submit(),form.submit=wrappedSubmit}}catch(e){}}options.finishInit=function(cm){cm.save=save,cm.getTextArea=function(){return textarea},cm.toTextArea=function(){cm.toTextArea=isNaN,save(),textarea.parentNode.removeChild(cm.getWrapperElement()),textarea.style.display="",textarea.form&&(off(textarea.form,"submit",save),options.leaveSubmitMethodAlone||"function"!=typeof textarea.form.submit||(textarea.form.submit=realSubmit))}},textarea.style.display="none";var cm=CodeMirror(function(node){return textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm},function(CodeMirror){CodeMirror.off=off,CodeMirror.on=on,CodeMirror.wheelEventPixels=wheelEventPixels,CodeMirror.Doc=Doc,CodeMirror.splitLines=splitLinesAuto,CodeMirror.countColumn=countColumn,CodeMirror.findColumn=findColumn,CodeMirror.isWordChar=isWordCharBasic,CodeMirror.Pass=Pass,CodeMirror.signal=signal,CodeMirror.Line=Line,CodeMirror.changeEnd=changeEnd,CodeMirror.scrollbarModel=scrollbarModel,CodeMirror.Pos=Pos,CodeMirror.cmpPos=cmp,CodeMirror.modes=modes,CodeMirror.mimeModes=mimeModes,CodeMirror.resolveMode=resolveMode,CodeMirror.getMode=getMode,CodeMirror.modeExtensions=modeExtensions,CodeMirror.extendMode=extendMode,CodeMirror.copyState=copyState,CodeMirror.startState=startState,CodeMirror.innerMode=innerMode,CodeMirror.commands=commands,CodeMirror.keyMap=keyMap,CodeMirror.keyName=keyName,CodeMirror.isModifierKey=isModifierKey,CodeMirror.lookupKey=lookupKey,CodeMirror.normalizeKeyMap=normalizeKeyMap,CodeMirror.StringStream=StringStream,CodeMirror.SharedTextMarker=SharedTextMarker,CodeMirror.TextMarker=TextMarker,CodeMirror.LineWidget=LineWidget,CodeMirror.e_preventDefault=e_preventDefault,CodeMirror.e_stopPropagation=e_stopPropagation,CodeMirror.e_stop=e_stop,CodeMirror.addClass=addClass,CodeMirror.contains=contains,CodeMirror.rmClass=rmClass,CodeMirror.keyNames=keyNames}(CodeMirror),CodeMirror.version="5.59.4",CodeMirror});"use strict";function uiCodemirrorDirective($timeout,uiCodemirrorConfig){return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return postLink}};function postLink(scope,iElement,iAttrs,ngModel){var wrap="true"===scope.iframeScope.globalCodeMirrorWrap,codemirrorOptions=angular.extend({value:iElement.text(),theme:scope.iframeScope.globalCodeMirrorTheme,lineWrapping:wrap,indentUnit:4,tabSize:4,indentWithTabs:!0},uiCodemirrorConfig.codemirror||{},scope.$eval(iAttrs.uiCodemirror),scope.$eval(iAttrs.uiCodemirrorOpts)),codemirror=function(iElement,codemirrorOptions){var codemirrot;codemirrot="TEXTAREA"===iElement[0].tagName?window.CodeMirror.fromTextArea(iElement[0],codemirrorOptions):(iElement.html(""),new window.CodeMirror(function(cm_el){iElement.append(cm_el)},codemirrorOptions));return codemirrot}(iElement,codemirrorOptions);(function(codemirrot,uiCodemirrorAttr,scope){if(!uiCodemirrorAttr)return;var codemirrorDefaultsKeys=Object.keys(window.CodeMirror.defaults);scope.$watch(uiCodemirrorAttr,function(newValues,oldValue){if(!angular.isObject(newValues))return;codemirrorDefaultsKeys.forEach(function(key){if(newValues.hasOwnProperty(key)){if(oldValue&&newValues[key]===oldValue[key])return;codemirrot.setOption(key,newValues[key])}})},!0)})(scope.$parent.globalCodeMirror=codemirror,iAttrs.uiCodemirror||iAttrs.uiCodemirrorOpts,scope),function(codemirror,ngModel,scope){if(!ngModel)return;ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||null===value)return"";if(angular.isObject(value)||angular.isArray(value))throw new Error("ui-codemirror cannot use an object or an array as a model");return value}),ngModel.$render=function(){var safeViewValue=ngModel.$viewValue||"";codemirror.setValue(safeViewValue)},codemirror.on("change",function(instance){var newValue=instance.getValue();newValue!==ngModel.$viewValue&&scope.$evalAsync(function(){ngModel.$setViewValue(newValue)})})}(codemirror,ngModel,scope),function(codeMirror,uiRefreshAttr,scope){if(!uiRefreshAttr)return;scope.$watch(uiRefreshAttr,function(newVal,oldVal){newVal!==oldVal&&$timeout(function(){codeMirror.refresh()})})}(codemirror,iAttrs.uiRefresh,scope),scope.$on("CodeMirror",function(event,callback){if(!angular.isFunction(callback))throw new Error("the CodeMirror event requires a callback function");callback(codemirror)}),angular.isFunction(codemirrorOptions.onLoad)&&codemirrorOptions.onLoad(codemirror)}}angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],mod):mod(CodeMirror)}(function(CodeMirror){var defaultTags={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var attrRegexpCache={};function getAttrValue(stream,attr){for(var match,pos=stream.pos;0<=pos&&"<"!==stream.string.charAt(pos);)pos--;return pos<0?pos:(match=stream.string.slice(pos,stream.pos).match(function(attr){var regexp=attrRegexpCache[attr];return regexp||(attrRegexpCache[attr]=new RegExp("\\s+"+attr+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(attr)))?match[2]:""}function getTagRegexp(tagName,anchored){return new RegExp((anchored?"^":"")+"</s*"+tagName+"s*>","i")}function addTags(from,to){for(var tag in from)for(var dest=to[tag]||(to[tag]=[]),source=from[tag],i=source.length-1;0<=i;i--)dest.unshift(source[i])}CodeMirror.defineMode("htmlmixed",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,{name:"xml",htmlMode:!0,multilineTagIndentFactor:parserConfig.multilineTagIndentFactor,multilineTagIndentPastTag:parserConfig.multilineTagIndentPastTag}),tags={},configTags=parserConfig&&parserConfig.tags,configScript=parserConfig&&parserConfig.scriptTypes;if(addTags(defaultTags,tags),configTags&&addTags(configTags,tags),configScript)for(var i=configScript.length-1;0<=i;i--)tags.script.unshift(["type",configScript[i].matches,configScript[i].mode]);function html(stream,state){var modeSpec,tagName=state.htmlState.tagName&&state.htmlState.tagName.toLowerCase(),tagInfo=tagName&&tags.hasOwnProperty(tagName)&&tags[tagName],style=htmlMode.token(stream,state.htmlState);if(tagInfo&&/\btag\b/.test(style)&&">"===stream.current()&&(modeSpec=function(tagInfo,stream){for(var i=0;i<tagInfo.length;i++){var spec=tagInfo[i];if(!spec[0]||spec[1].test(getAttrValue(stream,spec[0])))return spec[2]}}(tagInfo,stream))){var mode=CodeMirror.getMode(config,modeSpec),endTagA=getTagRegexp(tagName,!0),endTag=getTagRegexp(tagName,!1);state.token=function(stream,state){return stream.match(endTagA,!1)?(state.token=html,state.localState=state.localMode=null,null):function(stream,pat,style){var cur=stream.current(),close=cur.search(pat);return-1<close?stream.backUp(cur.length-close):cur.match(/<\/?$/)&&(stream.backUp(cur.length),stream.match(pat,!1)||stream.match(cur)),style}(stream,endTag,state.localMode.token(stream,state.localState))},state.localMode=mode,state.localState=CodeMirror.startState(mode,htmlMode.indent(state.htmlState,""))}return style}return{startState:function(){return{token:html,localMode:null,localState:null,htmlState:htmlMode.startState()}},copyState:function(state){var local;return state.localState&&(local=CodeMirror.copyState(state.localMode,state.localState)),{token:state.token,localMode:state.localMode,localState:local,htmlState:CodeMirror.copyState(htmlMode,state.htmlState)}},token:function(stream,state){return state.token(stream,state)},indent:function(state,textAfter){return!state.localMode||/^\s*<\//.test(textAfter)?htmlMode.indent(state.htmlState,textAfter):state.localMode.indent?state.localMode.indent(state.localState,textAfter):CodeMirror.Pass},innerMode:function(state){return{state:state.localState||state.htmlState,mode:state.localMode||htmlMode}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed")}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){CodeMirror.defineMode("xml",function(config,parserConfig){var indentUnit=config.indentUnit,multilineTagIndentFactor=parserConfig.multilineTagIndentFactor||1,multilineTagIndentPastTag=parserConfig.multilineTagIndentPastTag;null==multilineTagIndentPastTag&&(multilineTagIndentPastTag=!0);var type,setStyle,Kludges=parserConfig.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},alignCDATA=parserConfig.alignCDATA;function inText(stream,state){function chain(parser){return(state.tokenize=parser)(stream,state)}var ch=stream.next();return"<"==ch?stream.eat("!")?stream.eat("[")?stream.match("CDATA[")?chain(inBlock("atom","]]>")):null:stream.match("--")?chain(inBlock("comment","--\x3e")):stream.match("DOCTYPE",!0,!0)?(stream.eatWhile(/[\w\._\-]/),chain(function doctype(depth){return function(stream,state){for(var ch;null!=(ch=stream.next());){if("<"==ch)return state.tokenize=doctype(depth+1),state.tokenize(stream,state);if(">"==ch){if(1!=depth)return state.tokenize=doctype(depth-1),state.tokenize(stream,state);state.tokenize=inText;break}}return"meta"}}(1))):null:stream.eat("?")?(stream.eatWhile(/[\w\._\-]/),state.tokenize=inBlock("meta","?>"),"meta"):(type=stream.eat("/")?"closeTag":"openTag",state.tokenize=inTag,"tag bracket"):"&"!=ch?(stream.eatWhile(/[^&<]/),null):(stream.eat("#")?stream.eat("x")?stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";"):stream.eatWhile(/[\d]/)&&stream.eat(";"):stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";"))?"atom":"error"}function inTag(stream,state){var ch=stream.next();if(">"==ch||"/"==ch&&stream.eat(">"))return state.tokenize=inText,type=">"==ch?"endTag":"selfcloseTag","tag bracket";if("="==ch)return type="equals",null;if("<"!=ch)return/[\'\"]/.test(ch)?(state.tokenize=(quote=ch,(closure=function(stream,state){for(;!stream.eol();)if(stream.next()==quote){state.tokenize=inTag;break}return"string"}).isInAttribute=!0,closure),state.stringStartCol=stream.column(),state.tokenize(stream,state)):(stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");state.tokenize=inText,state.state=baseState,state.tagName=state.tagStart=null;var quote,closure,next=state.tokenize(stream,state);return next?next+" tag error":"tag error"}function inBlock(style,terminator){return function(stream,state){for(;!stream.eol();){if(stream.match(terminator)){state.tokenize=inText;break}stream.next()}return style}}function Context(state,tagName,startOfLine){this.prev=state.context,this.tagName=tagName,this.indent=state.indented,this.startOfLine=startOfLine,(Kludges.doNotIndent.hasOwnProperty(tagName)||state.context&&state.context.noIndent)&&(this.noIndent=!0)}function popContext(state){state.context&&(state.context=state.context.prev)}function maybePopContext(state,nextTagName){for(var parentTagName;;){if(!state.context)return;if(parentTagName=state.context.tagName,!Kludges.contextGrabbers.hasOwnProperty(parentTagName)||!Kludges.contextGrabbers[parentTagName].hasOwnProperty(nextTagName))return;popContext(state)}}function baseState(type,stream,state){return"openTag"==type?(state.tagStart=stream.column(),tagNameState):"closeTag"==type?closeTagNameState:baseState}function tagNameState(type,stream,state){return"word"==type?(state.tagName=stream.current(),setStyle="tag",attrState):(setStyle="error",tagNameState)}function closeTagNameState(type,stream,state){if("word"!=type)return setStyle="error",closeStateErr;var tagName=stream.current();return state.context&&state.context.tagName!=tagName&&Kludges.implicitlyClosed.hasOwnProperty(state.context.tagName)&&popContext(state),state.context&&state.context.tagName==tagName?(setStyle="tag",closeState):(setStyle="tag error",closeStateErr)}function closeState(type,_stream,state){return"endTag"!=type?(setStyle="error",closeState):(popContext(state),baseState)}function closeStateErr(type,stream,state){return setStyle="error",closeState(type,0,state)}function attrState(type,_stream,state){if("word"==type)return setStyle="attribute",attrEqState;if("endTag"!=type&&"selfcloseTag"!=type)return setStyle="error",attrState;var tagName=state.tagName,tagStart=state.tagStart;return state.tagName=state.tagStart=null,"selfcloseTag"==type||Kludges.autoSelfClosers.hasOwnProperty(tagName)?maybePopContext(state,tagName):(maybePopContext(state,tagName),state.context=new Context(state,tagName,tagStart==state.indented)),baseState}function attrEqState(type,stream,state){return"equals"==type?attrValueState:(Kludges.allowMissing||(setStyle="error"),attrState(type,0,state))}function attrValueState(type,stream,state){return"string"==type?attrContinuedState:"word"==type&&Kludges.allowUnquoted?(setStyle="string",attrState):(setStyle="error",attrState(type,0,state))}function attrContinuedState(type,stream,state){return"string"==type?attrContinuedState:attrState(type,0,state)}return inText.isInText=!0,{startState:function(){return{tokenize:inText,state:baseState,indented:0,tagName:null,tagStart:null,context:null}},token:function(stream,state){if(!state.tagName&&stream.sol()&&(state.indented=stream.indentation()),stream.eatSpace())return null;type=null;var style=state.tokenize(stream,state);return(style||type)&&"comment"!=style&&(setStyle=null,state.state=state.state(type||style,stream,state),setStyle&&(style="error"==setStyle?style+" error":setStyle)),style},indent:function(state,textAfter,fullLine){var context=state.context;if(state.tokenize.isInAttribute)return state.tagStart==state.indented?state.stringStartCol+1:state.indented+indentUnit;if(context&&context.noIndent)return CodeMirror.Pass;if(state.tokenize!=inTag&&state.tokenize!=inText)return fullLine?fullLine.match(/^(\s*)/)[0].length:0;if(state.tagName)return multilineTagIndentPastTag?state.tagStart+state.tagName.length+2:state.tagStart+indentUnit*multilineTagIndentFactor;if(alignCDATA&&/<!\[CDATA\[/.test(textAfter))return 0;var tagAfter=textAfter&&/^<(\/)?([\w_:\.-]*)/.exec(textAfter);if(tagAfter&&tagAfter[1])for(;context;){if(context.tagName==tagAfter[2]){context=context.prev;break}if(!Kludges.implicitlyClosed.hasOwnProperty(context.tagName))break;context=context.prev}else if(tagAfter)for(;context;){var grabbers=Kludges.contextGrabbers[context.tagName];if(!grabbers||!grabbers.hasOwnProperty(tagAfter[2]))break;context=context.prev}for(;context&&!context.startOfLine;)context=context.prev;return context?context.indent+indentUnit:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:parserConfig.htmlMode?"html":"xml",helperType:parserConfig.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){CodeMirror.defineMode("javascript",function(config,parserConfig){var type,content,indentUnit=config.indentUnit,statementIndent=parserConfig.statementIndent,jsonldMode=parserConfig.jsonld,jsonMode=parserConfig.json||jsonldMode,isTS=parserConfig.typescript,wordRE=parserConfig.wordCharacters||/[\w$\xa1-\uffff]/,keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c"),operator=kw("operator"),atom={type:"atom",style:"atom"},jsKeywords={if:kw("if"),while:A,with:A,else:B,do:B,try:B,finally:B,return:C,break:C,continue:C,new:kw("new"),delete:C,throw:C,debugger:C,var:kw("var"),const:kw("var"),let:kw("var"),function:kw("function"),catch:kw("catch"),for:kw("for"),switch:kw("switch"),case:kw("case"),default:kw("default"),in:operator,typeof:operator,instanceof:operator,true:atom,false:atom,null:atom,undefined:atom,NaN:atom,Infinity:atom,this:kw("this"),class:kw("class"),super:kw("atom"),yield:C,export:kw("export"),import:kw("import"),extends:C};if(isTS){var type={type:"variable",style:"variable-3"},tsKeywords={interface:kw("class"),implements:C,namespace:C,module:kw("module"),enum:kw("module"),public:kw("modifier"),private:kw("modifier"),protected:kw("modifier"),abstract:kw("modifier"),as:operator,string:type,number:type,boolean:type,any:type};for(var attr in tsKeywords)jsKeywords[attr]=tsKeywords[attr]}return jsKeywords}(),isOperatorChar=/[+\-*&%=<>!?|~^]/,isJsonldKeyword=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ret(tp,style,cont){return type=tp,content=cont,style}function tokenBase(stream,state){var quote,ch=stream.next();if('"'==ch||"'"==ch)return state.tokenize=(quote=ch,function(stream,state){var next,escaped=!1;if(jsonldMode&&"@"==stream.peek()&&stream.match(isJsonldKeyword))return state.tokenize=tokenBase,ret("jsonld-keyword","meta");for(;null!=(next=stream.next())&&(next!=quote||escaped);)escaped=!escaped&&"\\"==next;return escaped||(state.tokenize=tokenBase),ret("string","string")}),state.tokenize(stream,state);if("."==ch&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/))return ret("number","number");if("."==ch&&stream.match(".."))return ret("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ch))return ret(ch);if("="==ch&&stream.eat(">"))return ret("=>","operator");if("0"==ch&&stream.eat(/x/i))return stream.eatWhile(/[\da-f]/i),ret("number","number");if("0"==ch&&stream.eat(/o/i))return stream.eatWhile(/[0-7]/i),ret("number","number");if("0"==ch&&stream.eat(/b/i))return stream.eatWhile(/[01]/i),ret("number","number");if(/\d/.test(ch))return stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),ret("number","number");if("/"==ch)return stream.eat("*")?(state.tokenize=tokenComment)(stream,state):stream.eat("/")?(stream.skipToEnd(),ret("comment","comment")):/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:])$/.test(state.lastType)||"quasi"==state.lastType&&/\{\s*$/.test(stream.string.slice(0,stream.pos-1))?(function(stream){for(var next,escaped=!1,inSet=!1;null!=(next=stream.next());){if(!escaped){if("/"==next&&!inSet)return;"["==next?inSet=!0:inSet&&"]"==next&&(inSet=!1)}escaped=!escaped&&"\\"==next}}(stream),stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),ret("regexp","string-2")):(stream.eatWhile(isOperatorChar),ret("operator","operator",stream.current()));if("`"==ch)return(state.tokenize=tokenQuasi)(stream,state);if("#"==ch)return stream.skipToEnd(),ret("error","error");if(isOperatorChar.test(ch))return stream.eatWhile(isOperatorChar),ret("operator","operator",stream.current());if(wordRE.test(ch)){stream.eatWhile(wordRE);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&"."!=state.lastType?ret(known.type,known.style,word):ret("variable","variable",word)}}function tokenComment(stream,state){for(var ch,maybeEnd=!1;ch=stream.next();){if("/"==ch&&maybeEnd){state.tokenize=tokenBase;break}maybeEnd="*"==ch}return ret("comment","comment")}function tokenQuasi(stream,state){for(var next,escaped=!1;null!=(next=stream.next());){if(!escaped&&("`"==next||"$"==next&&stream.eat("{"))){state.tokenize=tokenBase;break}escaped=!escaped&&"\\"==next}return ret("quasi","string-2",stream.current())}var brackets="([{}])";function findFatArrow(stream,state){state.fatArrowAt&&(state.fatArrowAt=null);var arrow=stream.string.indexOf("=>",stream.start);if(!(arrow<0)){for(var depth=0,sawSomething=!1,pos=arrow-1;0<=pos;--pos){var ch=stream.string.charAt(pos),bracket=brackets.indexOf(ch);if(0<=bracket&&bracket<3){if(!depth){++pos;break}if(0==--depth)break}else if(3<=bracket&&bracket<6)++depth;else if(wordRE.test(ch))sawSomething=!0;else{if(/["'\/]/.test(ch))return;if(sawSomething&&!depth){++pos;break}}}sawSomething&&!depth&&(state.fatArrowAt=pos)}}var atomicTypes={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function JSLexical(indented,column,type,align,prev,info){this.indented=indented,this.column=column,this.type=type,this.prev=prev,this.info=info,null!=align&&(this.align=align)}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return!0;for(var cx=state.context;cx;cx=cx.prev)for(v=cx.vars;v;v=v.next)if(v.name==varname)return!0}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;0<=i;i--)cx.cc.push(arguments[i])}function cont(){return pass.apply(null,arguments),!0}function register(varname){function inList(list){for(var v=list;v;v=v.next)if(v.name==varname)return!0;return!1}var state=cx.state;if(cx.marked="def",state.context){if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;parserConfig.globalVars&&(state.globalVars={name:varname,next:state.globalVars})}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars},cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars,cx.state.context=cx.state.context.prev}function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if("stat"==state.lexical.type)indent=state.lexical.indented;else for(var outer=state.lexical;outer&&")"==outer.type&&outer.align;outer=outer.prev)indent=outer.indented;state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info)};return result.lex=!0,result}function poplex(){var state=cx.state;state.lexical.prev&&(")"==state.lexical.type&&(state.indented=state.lexical.indented),state.lexical=state.lexical.prev)}function expect(wanted){return function exp(type){return type==wanted?cont():";"==wanted?pass():cont(exp)}}function statement(type,value){return"var"==type?cont(pushlex("vardef",value.length),vardef,expect(";"),poplex):"keyword a"==type?cont(pushlex("form"),expression,statement,poplex):"keyword b"==type?cont(pushlex("form"),statement,poplex):"{"==type?cont(pushlex("}"),block,poplex):";"==type?cont():"if"==type?("else"==cx.state.lexical.info&&cx.state.cc[cx.state.cc.length-1]==poplex&&cx.state.cc.pop()(),cont(pushlex("form"),expression,statement,poplex,maybeelse)):"function"==type?cont(functiondef):"for"==type?cont(pushlex("form"),forspec,statement,poplex):"variable"==type?cont(pushlex("stat"),maybelabel):"switch"==type?cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex):"case"==type?cont(expression,expect(":")):"default"==type?cont(expect(":")):"catch"==type?cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext):"class"==type?cont(pushlex("form"),className,poplex):"export"==type?cont(pushlex("stat"),afterExport,poplex):"import"==type?cont(pushlex("stat"),afterImport,poplex):"module"==type?cont(pushlex("form"),pattern,pushlex("}"),expect("{"),block,poplex,poplex):pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){return expressionInner(type,!1)}function expressionNoComma(type){return expressionInner(type,!0)}function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if("("==type)return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext);if("variable"==type)return pass(pushcontext,pattern,expect("=>"),body,popcontext)}var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;return atomicTypes.hasOwnProperty(type)?cont(maybeop):"function"==type?cont(functiondef,maybeop):"keyword c"==type?cont(noComma?maybeexpressionNoComma:maybeexpression):"("==type?cont(pushlex(")"),maybeexpression,comprehension,expect(")"),poplex,maybeop):"operator"==type||"spread"==type?cont(noComma?expressionNoComma:expression):"["==type?cont(pushlex("]"),arrayLiteral,poplex,maybeop):"{"==type?contCommasep(objprop,"}",null,maybeop):"quasi"==type?pass(quasi,maybeop):"new"==type?cont(function(noComma){return function(type){return"."==type?cont(noComma?targetNoComma:target):pass(noComma?expressionNoComma:expression)}}(noComma)):cont()}function maybeexpression(type){return type.match(/[;\}\)\],]/)?pass():pass(expression)}function maybeexpressionNoComma(type){return type.match(/[;\}\)\],]/)?pass():pass(expressionNoComma)}function maybeoperatorComma(type,value){return","==type?cont(expression):maybeoperatorNoComma(type,value,!1)}function maybeoperatorNoComma(type,value,noComma){var me=0==noComma?maybeoperatorComma:maybeoperatorNoComma,expr=0==noComma?expression:expressionNoComma;return"=>"==type?cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext):"operator"==type?/\+\+|--/.test(value)?cont(me):"?"==value?cont(expression,expect(":"),expr):cont(expr):"quasi"==type?pass(quasi,me):";"!=type?"("==type?contCommasep(expressionNoComma,")","call",me):"."==type?cont(property,me):"["==type?cont(pushlex("]"),maybeexpression,expect("]"),poplex,me):void 0:void 0}function quasi(type,value){return"quasi"!=type?pass():"${"!=value.slice(value.length-2)?cont(quasi):cont(expression,continueQuasi)}function continueQuasi(type){if("}"==type)return cx.marked="string-2",cx.state.tokenize=tokenQuasi,cont(quasi)}function arrowBody(type){return findFatArrow(cx.stream,cx.state),pass("{"==type?statement:expression)}function arrowBodyNoComma(type){return findFatArrow(cx.stream,cx.state),pass("{"==type?statement:expressionNoComma)}function target(_,value){if("target"==value)return cx.marked="keyword",cont(maybeoperatorComma)}function targetNoComma(_,value){if("target"==value)return cx.marked="keyword",cont(maybeoperatorNoComma)}function maybelabel(type){return":"==type?cont(poplex,statement):pass(maybeoperatorComma,expect(";"),poplex)}function property(type){if("variable"==type)return cx.marked="property",cont()}function objprop(type,value){return"variable"==type||"keyword"==cx.style?(cx.marked="property",cont("get"==value||"set"==value?getterSetter:afterprop)):"number"==type||"string"==type?(cx.marked=jsonldMode?"property":cx.style+" property",cont(afterprop)):"jsonld-keyword"==type?cont(afterprop):"modifier"==type?cont(objprop):"["==type?cont(expression,expect("]"),afterprop):"spread"==type?cont(expression):void 0}function getterSetter(type){return"variable"!=type?pass(afterprop):(cx.marked="property",cont(functiondef))}function afterprop(type){return":"==type?cont(expressionNoComma):"("==type?pass(functiondef):void 0}function commasep(what,end){function proceed(type){if(","!=type)return type==end?cont():cont(expect(end));var lex=cx.state.lexical;return"call"==lex.info&&(lex.pos=(lex.pos||0)+1),cont(what,proceed)}return function(type){return type==end?cont():pass(what,proceed)}}function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++)cx.cc.push(arguments[i]);return cont(pushlex(end,info),commasep(what,end),poplex)}function block(type){return"}"==type?cont():pass(statement,block)}function maybetype(type){if(isTS&&":"==type)return cont(typedef)}function maybedefault(_,value){if("="==value)return cont(expressionNoComma)}function typedef(type){if("variable"==type)return cx.marked="variable-3",cont()}function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}function pattern(type,value){return"modifier"==type?cont(pattern):"variable"==type?(register(value),cont()):"spread"==type?cont(pattern):"["==type?contCommasep(pattern,"]"):"{"==type?contCommasep(proppattern,"}"):void 0}function proppattern(type,value){return"variable"!=type||cx.stream.match(/^\s*:/,!1)?("variable"==type&&(cx.marked="property"),"spread"==type?cont(pattern):cont(expect(":"),pattern,maybeAssign)):(register(value),cont(maybeAssign))}function maybeAssign(_type,value){if("="==value)return cont(expressionNoComma)}function vardefCont(type){if(","==type)return cont(vardef)}function maybeelse(type,value){if("keyword b"==type&&"else"==value)return cont(pushlex("form","else"),statement,poplex)}function forspec(type){if("("==type)return cont(pushlex(")"),forspec1,expect(")"),poplex)}function forspec1(type){return"var"==type?cont(vardef,expect(";"),forspec2):";"==type?cont(forspec2):"variable"==type?cont(formaybeinof):pass(expression,expect(";"),forspec2)}function formaybeinof(_type,value){return"in"==value||"of"==value?(cx.marked="keyword",cont(expression)):cont(maybeoperatorComma,forspec2)}function forspec2(type,value){return";"==type?cont(forspec3):"in"==value||"of"==value?(cx.marked="keyword",cont(expression)):pass(expression,expect(";"),forspec3)}function forspec3(type){")"!=type&&cont(expression)}function functiondef(type,value){return"*"==value?(cx.marked="keyword",cont(functiondef)):"variable"==type?(register(value),cont(functiondef)):"("==type?cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,statement,popcontext):void 0}function funarg(type){return"spread"==type?cont(funarg):pass(pattern,maybetype,maybedefault)}function className(type,value){if("variable"==type)return register(value),cont(classNameAfter)}function classNameAfter(type,value){return"extends"==value?cont(expression,classNameAfter):"{"==type?cont(pushlex("}"),classBody,poplex):void 0}function classBody(type,value){return"variable"==type||"keyword"==cx.style?"static"==value?(cx.marked="keyword",cont(classBody)):(cx.marked="property","get"==value||"set"==value?cont(classGetterSetter,functiondef,classBody):cont(functiondef,classBody)):"*"==value?(cx.marked="keyword",cont(classBody)):";"==type?cont(classBody):"}"==type?cont():void 0}function classGetterSetter(type){return"variable"!=type?pass():(cx.marked="property",cont())}function afterExport(_type,value){return"*"==value?(cx.marked="keyword",cont(maybeFrom,expect(";"))):"default"==value?(cx.marked="keyword",cont(expression,expect(";"))):pass(statement)}function afterImport(type){return"string"==type?cont():pass(importSpec,maybeFrom)}function importSpec(type,value){return"{"==type?contCommasep(importSpec,"}"):("variable"==type&&register(value),"*"==value&&(cx.marked="keyword"),cont(maybeAs))}function maybeAs(_type,value){if("as"==value)return cx.marked="keyword",cont(importSpec)}function maybeFrom(_type,value){if("from"==value)return cx.marked="keyword",cont(expression)}function arrayLiteral(type){return"]"==type?cont():pass(expressionNoComma,maybeArrayComprehension)}function maybeArrayComprehension(type){return"for"==type?pass(comprehension,expect("]")):","==type?cont(commasep(maybeexpressionNoComma,"]")):pass(commasep(expressionNoComma,"]"))}function comprehension(type){return"for"==type?cont(forspec,comprehension):"if"==type?cont(expression,comprehension):void 0}return poplex.lex=!0,{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",!1),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:0};return parserConfig.globalVars&&"object"==typeof parserConfig.globalVars&&(state.globalVars=parserConfig.globalVars),state},token:function(stream,state){if(stream.sol()&&(state.lexical.hasOwnProperty("align")||(state.lexical.align=!1),state.indented=stream.indentation(),findFatArrow(stream,state)),state.tokenize!=tokenComment&&stream.eatSpace())return null;var style=state.tokenize(stream,state);return"comment"==type?style:(state.lastType="operator"!=type||"++"!=content&&"--"!=content?type:"incdec",function(state,style,type,content,stream){var cc=state.cc;for(cx.state=state,cx.stream=stream,cx.marked=null,cx.cc=cc,cx.style=style,state.lexical.hasOwnProperty("align")||(state.lexical.align=!0);;)if((cc.length?cc.pop():jsonMode?expression:statement)(type,content)){for(;cc.length&&cc[cc.length-1].lex;)cc.pop()();return cx.marked?cx.marked:"variable"==type&&inScope(state,content)?"variable-2":style}}(state,style,type,content,stream))},indent:function(state,textAfter){if(state.tokenize==tokenComment)return CodeMirror.Pass;if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;if(!/^\s*else\b/.test(textAfter))for(var i=state.cc.length-1;0<=i;--i){var c=state.cc[i];if(c==poplex)lexical=lexical.prev;else if(c!=maybeelse)break}"stat"==lexical.type&&"}"==firstChar&&(lexical=lexical.prev),statementIndent&&")"==lexical.type&&"stat"==lexical.prev.type&&(lexical=lexical.prev);var type=lexical.type,closing=firstChar==type;return"vardef"==type?lexical.indented+("operator"==state.lastType||","==state.lastType?lexical.info+1:0):"form"==type&&"{"==firstChar?lexical.indented:"form"==type?lexical.indented+indentUnit:"stat"==type?lexical.indented+(function(state,textAfter){return"operator"==state.lastType||","==state.lastType||isOperatorChar.test(textAfter.charAt(0))||/[,.]/.test(textAfter.charAt(0))}(state,textAfter)?statementIndent||indentUnit:0):"switch"!=lexical.info||closing||0==parserConfig.doubleIndentSwitch?lexical.align?lexical.column+(closing?0:1):lexical.indented+(closing?0:indentUnit):lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:jsonMode?"json":"javascript",jsonldMode:jsonldMode,jsonMode:jsonMode}}),CodeMirror.registerHelper("wordChars","javascript",/[\w$]/),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/x-javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){function keySet(array){for(var keys={},i=0;i<array.length;++i)keys[array[i]]=!0;return keys}CodeMirror.defineMode("css",function(config,parserConfig){var inline=parserConfig.inline;parserConfig.propertyKeywords||(parserConfig=CodeMirror.resolveMode("text/css"));var type,override,indentUnit=config.indentUnit,tokenHooks=parserConfig.tokenHooks,documentTypes=parserConfig.documentTypes||{},mediaTypes=parserConfig.mediaTypes||{},mediaFeatures=parserConfig.mediaFeatures||{},mediaValueKeywords=parserConfig.mediaValueKeywords||{},propertyKeywords=parserConfig.propertyKeywords||{},nonStandardPropertyKeywords=parserConfig.nonStandardPropertyKeywords||{},fontProperties=parserConfig.fontProperties||{},counterDescriptors=parserConfig.counterDescriptors||{},colorKeywords=parserConfig.colorKeywords||{},valueKeywords=parserConfig.valueKeywords||{},allowNested=parserConfig.allowNested,supportsAtComponent=!0===parserConfig.supportsAtComponent;function ret(style,tp){return type=tp,style}function tokenString(quote){return function(stream,state){for(var ch,escaped=!1;null!=(ch=stream.next());){if(ch==quote&&!escaped){")"==quote&&stream.backUp(1);break}escaped=!escaped&&"\\"==ch}return(ch==quote||!escaped&&")"!=quote)&&(state.tokenize=null),ret("string","string")}}function tokenParenthesized(stream,state){return stream.next(),stream.match(/\s*[\"\')]/,!1)?state.tokenize=null:state.tokenize=tokenString(")"),ret(null,"(")}function Context(type,indent,prev){this.type=type,this.indent=indent,this.prev=prev}function pushContext(state,stream,type,indent){return state.context=new Context(type,stream.indentation()+(!1===indent?0:indentUnit),state.context),type}function popContext(state){return state.context.prev&&(state.context=state.context.prev),state.context.type}function pass(type,stream,state){return states[state.context.type](type,stream,state)}function popAndPass(type,stream,state,n){for(var i=n||1;0<i;i--)state.context=state.context.prev;return pass(type,stream,state)}function wordAsValue(stream){var word=stream.current().toLowerCase();override=valueKeywords.hasOwnProperty(word)?"atom":colorKeywords.hasOwnProperty(word)?"keyword":"variable"}var states={top:function(type,stream,state){if("{"==type)return pushContext(state,stream,"block");if("}"==type&&state.context.prev)return popContext(state);if(supportsAtComponent&&/@component/.test(type))return pushContext(state,stream,"atComponentBlock");if(/^@(-moz-)?document$/.test(type))return pushContext(state,stream,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(type))return pushContext(state,stream,"atBlock");if(/^@(font-face|counter-style)/.test(type))return state.stateArg=type,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type))return"keyframes";if(type&&"@"==type.charAt(0))return pushContext(state,stream,"at");if("hash"==type)override="builtin";else if("word"==type)override="tag";else{if("variable-definition"==type)return"maybeprop";if("interpolation"==type)return pushContext(state,stream,"interpolation");if(":"==type)return"pseudo";if(allowNested&&"("==type)return pushContext(state,stream,"parens")}return state.context.type},block:function(type,stream,state){if("word"!=type)return"meta"==type?"block":allowNested||"hash"!=type&&"qualifier"!=type?states.top(type,stream,state):(override="error","block");var word=stream.current().toLowerCase();return propertyKeywords.hasOwnProperty(word)?(override="property","maybeprop"):nonStandardPropertyKeywords.hasOwnProperty(word)?(override="string-2","maybeprop"):allowNested?(override=stream.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(override+=" error","maybeprop")},maybeprop:function(type,stream,state){return":"==type?pushContext(state,stream,"prop"):pass(type,stream,state)},prop:function(type,stream,state){if(";"==type)return popContext(state);if("{"==type&&allowNested)return pushContext(state,stream,"propBlock");if("}"==type||"{"==type)return popAndPass(type,stream,state);if("("==type)return pushContext(state,stream,"parens");if("hash"!=type||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())){if("word"==type)wordAsValue(stream);else if("interpolation"==type)return pushContext(state,stream,"interpolation")}else override+=" error";return"prop"},propBlock:function(type,_stream,state){return"}"==type?popContext(state):"word"==type?(override="property","maybeprop"):state.context.type},parens:function(type,stream,state){return"{"==type||"}"==type?popAndPass(type,stream,state):")"==type?popContext(state):"("==type?pushContext(state,stream,"parens"):"interpolation"==type?pushContext(state,stream,"interpolation"):("word"==type&&wordAsValue(stream),"parens")},pseudo:function(type,stream,state){return"word"==type?(override="variable-3",state.context.type):pass(type,stream,state)},documentTypes:function(type,stream,state){return"word"==type&&documentTypes.hasOwnProperty(stream.current())?(override="tag",state.context.type):states.atBlock(type,stream,state)},atBlock:function(type,stream,state){if("("==type)return pushContext(state,stream,"atBlock_parens");if("}"==type||";"==type)return popAndPass(type,stream,state);if("{"==type)return popContext(state)&&pushContext(state,stream,allowNested?"block":"top");if("interpolation"==type)return pushContext(state,stream,"interpolation");if("word"==type){var word=stream.current().toLowerCase();override="only"==word||"not"==word||"and"==word||"or"==word?"keyword":mediaTypes.hasOwnProperty(word)?"attribute":mediaFeatures.hasOwnProperty(word)?"property":mediaValueKeywords.hasOwnProperty(word)?"keyword":propertyKeywords.hasOwnProperty(word)?"property":nonStandardPropertyKeywords.hasOwnProperty(word)?"string-2":valueKeywords.hasOwnProperty(word)?"atom":colorKeywords.hasOwnProperty(word)?"keyword":"error"}return state.context.type},atComponentBlock:function(type,stream,state){return"}"==type?popAndPass(type,stream,state):"{"==type?popContext(state)&&pushContext(state,stream,allowNested?"block":"top",!1):("word"==type&&(override="error"),state.context.type)},atBlock_parens:function(type,stream,state){return")"==type?popContext(state):"{"==type||"}"==type?popAndPass(type,stream,state,2):states.atBlock(type,stream,state)},restricted_atBlock_before:function(type,stream,state){return"{"==type?pushContext(state,stream,"restricted_atBlock"):"word"==type&&"@counter-style"==state.stateArg?(override="variable","restricted_atBlock_before"):pass(type,stream,state)},restricted_atBlock:function(type,stream,state){return"}"==type?(state.stateArg=null,popContext(state)):"word"==type?(override="@font-face"==state.stateArg&&!fontProperties.hasOwnProperty(stream.current().toLowerCase())||"@counter-style"==state.stateArg&&!counterDescriptors.hasOwnProperty(stream.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(type,stream,state){return"word"==type?(override="variable","keyframes"):"{"==type?pushContext(state,stream,"top"):pass(type,stream,state)},at:function(type,stream,state){return";"==type?popContext(state):"{"==type||"}"==type?popAndPass(type,stream,state):("word"==type?override="tag":"hash"==type&&(override="builtin"),"at")},interpolation:function(type,stream,state){return"}"==type?popContext(state):"{"==type||";"==type?popAndPass(type,stream,state):("word"==type?override="variable":"variable"!=type&&"("!=type&&")"!=type&&(override="error"),"interpolation")}};return{startState:function(base){return{tokenize:null,state:inline?"block":"top",stateArg:null,context:new Context(inline?"block":"top",base||0,null)}},token:function(stream,state){if(!state.tokenize&&stream.eatSpace())return null;var style=(state.tokenize||function(stream,state){var ch=stream.next();if(tokenHooks[ch]){var result=tokenHooks[ch](stream,state);if(!1!==result)return result}return"@"==ch?(stream.eatWhile(/[\w\\\-]/),ret("def",stream.current())):"="==ch||("~"==ch||"|"==ch)&&stream.eat("=")?ret(null,"compare"):'"'==ch||"'"==ch?(state.tokenize=tokenString(ch),state.tokenize(stream,state)):"#"==ch?(stream.eatWhile(/[\w\\\-]/),ret("atom","hash")):"!"==ch?(stream.match(/^\s*\w*/),ret("keyword","important")):/\d/.test(ch)||"."==ch&&stream.eat(/\d/)?(stream.eatWhile(/[\w.%]/),ret("number","unit")):"-"!==ch?/[,+>*\/]/.test(ch)?ret(null,"select-op"):"."==ch&&stream.match(/^-?[_a-z][_a-z0-9-]*/i)?ret("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(ch)?ret(null,ch):"u"==ch&&stream.match(/rl(-prefix)?\(/)||"d"==ch&&stream.match("omain(")||"r"==ch&&stream.match("egexp(")?(stream.backUp(1),state.tokenize=tokenParenthesized,ret("property","word")):/[\w\\\-]/.test(ch)?(stream.eatWhile(/[\w\\\-]/),ret("property","word")):ret(null,null):/[\d.]/.test(stream.peek())?(stream.eatWhile(/[\w.%]/),ret("number","unit")):stream.match(/^-[\w\\\-]+/)?(stream.eatWhile(/[\w\\\-]/),stream.match(/^\s*:/,!1)?ret("variable-2","variable-definition"):ret("variable-2","variable")):stream.match(/^\w+-/)?ret("meta","meta"):void 0})(stream,state);return style&&"object"==typeof style&&(type=style[1],style=style[0]),override=style,state.state=states[state.state](type,stream,state),override},indent:function(state,textAfter){var cx=state.context,ch=textAfter&&textAfter.charAt(0),indent=cx.indent;return"prop"!=cx.type||"}"!=ch&&")"!=ch||(cx=cx.prev),cx.prev&&("}"!=ch||"block"!=cx.type&&"top"!=cx.type&&"interpolation"!=cx.type&&"restricted_atBlock"!=cx.type?(")"!=ch||"parens"!=cx.type&&"atBlock_parens"!=cx.type)&&("{"!=ch||"at"!=cx.type&&"atBlock"!=cx.type)||(indent=Math.max(0,cx.indent-indentUnit),cx=cx.prev):indent=(cx=cx.prev).indent),indent},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var documentTypes_=["domain","regexp","url","url-prefix"],documentTypes=keySet(documentTypes_),mediaTypes_=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],mediaTypes=keySet(mediaTypes_),mediaFeatures_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],mediaFeatures=keySet(mediaFeatures_),mediaValueKeywords_=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],mediaValueKeywords=keySet(mediaValueKeywords_),propertyKeywords_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],propertyKeywords=keySet(propertyKeywords_),nonStandardPropertyKeywords_=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],nonStandardPropertyKeywords=keySet(nonStandardPropertyKeywords_),fontProperties=keySet(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),counterDescriptors=keySet(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),colorKeywords_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],colorKeywords=keySet(colorKeywords_),valueKeywords_=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],valueKeywords=keySet(valueKeywords_),allWords=documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);function tokenCComment(stream,state){for(var ch,maybeEnd=!1;null!=(ch=stream.next());){if(maybeEnd&&"/"==ch){state.tokenize=null;break}maybeEnd="*"==ch}return["comment","comment"]}CodeMirror.registerHelper("hintWords","css",allWords),CodeMirror.defineMIME("text/css",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,tokenHooks:{"/":function(stream,state){return!!stream.eat("*")&&(state.tokenize=tokenCComment)(stream,state)}},name:"css"}),CodeMirror.defineMIME("text/x-scss",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:!0,tokenHooks:{"/":function(stream,state){return stream.eat("/")?(stream.skipToEnd(),["comment","comment"]):stream.eat("*")?(state.tokenize=tokenCComment)(stream,state):["operator","operator"]},":":function(stream){return!!stream.match(/\s*\{/)&&[null,"{"]},$:function(stream){return stream.match(/^[\w-]+/),stream.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(stream){return!!stream.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),CodeMirror.defineMIME("text/x-less",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:!0,tokenHooks:{"/":function(stream,state){return stream.eat("/")?(stream.skipToEnd(),["comment","comment"]):stream.eat("*")?(state.tokenize=tokenCComment)(stream,state):["operator","operator"]},"@":function(stream){return stream.eat("{")?[null,"interpolation"]:!stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(stream.eatWhile(/[\w\\\-]/),stream.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),CodeMirror.defineMIME("text/x-gss",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,supportsAtComponent:!0,tokenHooks:{"/":function(stream,state){return!!stream.eat("*")&&(state.tokenize=tokenCComment)(stream,state)}},name:"css",helperType:"gss"})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){function Context(indented,column,type,info,align,prev){this.indented=indented,this.column=column,this.type=type,this.info=info,this.align=align,this.prev=prev}function pushContext(state,col,type,info){var indent=state.indented;return state.context&&"statement"==state.context.type&&"statement"!=type&&(indent=state.context.indented),state.context=new Context(indent,col,type,info,null,state.context)}function popContext(state){var t=state.context.type;return")"!=t&&"]"!=t&&"}"!=t||(state.indented=state.context.indented),state.context=state.context.prev}function typeBefore(stream,state,pos){return"variable"==state.prevToken||"variable-3"==state.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(stream.string.slice(0,pos))||(!(!state.typeAtEndOfLine||stream.column()!=stream.indentation())||void 0))}function isTopScope(context){for(;;){if(!context||"top"==context.type)return!0;if("}"==context.type&&"namespace"!=context.prev.info)return!1;context=context.prev}}function words(str){for(var obj={},words=str.split(" "),i=0;i<words.length;++i)obj[words[i]]=!0;return obj}function contains(words,word){return"function"==typeof words?words(word):words.propertyIsEnumerable(word)}CodeMirror.defineMode("clike",function(config,parserConfig){var curPunc,isDefKeyword,indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,dontAlignCalls=parserConfig.dontAlignCalls,keywords=parserConfig.keywords||{},types=parserConfig.types||{},builtin=parserConfig.builtin||{},blockKeywords=parserConfig.blockKeywords||{},defKeywords=parserConfig.defKeywords||{},atoms=parserConfig.atoms||{},hooks=parserConfig.hooks||{},multiLineStrings=parserConfig.multiLineStrings,indentStatements=!1!==parserConfig.indentStatements,indentSwitch=!1!==parserConfig.indentSwitch,namespaceSeparator=parserConfig.namespaceSeparator,isPunctuationChar=parserConfig.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,numberStart=parserConfig.numberStart||/[\d\.]/,number=parserConfig.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,isOperatorChar=parserConfig.isOperatorChar||/[+\-*&%=<>!?|\/]/;function tokenBase(stream,state){var quote,ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(!1!==result)return result}if('"'==ch||"'"==ch)return state.tokenize=(quote=ch,function(stream,state){for(var next,escaped=!1,end=!1;null!=(next=stream.next());){if(next==quote&&!escaped){end=!0;break}escaped=!escaped&&"\\"==next}return(end||!escaped&&!multiLineStrings)&&(state.tokenize=null),"string"}),state.tokenize(stream,state);if(isPunctuationChar.test(ch))return curPunc=ch,null;if(numberStart.test(ch)){if(stream.backUp(1),stream.match(number))return"number";stream.next()}if("/"==ch){if(stream.eat("*"))return(state.tokenize=tokenComment)(stream,state);if(stream.eat("/"))return stream.skipToEnd(),"comment"}if(isOperatorChar.test(ch)){for(;!stream.match(/^\/[\/*]/,!1)&&stream.eat(isOperatorChar););return"operator"}if(stream.eatWhile(/[\w\$_\xa1-\uffff]/),namespaceSeparator)for(;stream.match(namespaceSeparator);)stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current();return contains(keywords,cur)?(contains(blockKeywords,cur)&&(curPunc="newstatement"),contains(defKeywords,cur)&&(isDefKeyword=!0),"keyword"):contains(types,cur)?"variable-3":contains(builtin,cur)?(contains(blockKeywords,cur)&&(curPunc="newstatement"),"builtin"):contains(atoms,cur)?"atom":"variable"}function tokenComment(stream,state){for(var ch,maybeEnd=!1;ch=stream.next();){if("/"==ch&&maybeEnd){state.tokenize=null;break}maybeEnd="*"==ch}return"comment"}function maybeEOL(stream,state){parserConfig.typeFirstDefinitions&&stream.eol()&&isTopScope(state.context)&&(state.typeAtEndOfLine=typeBefore(stream,state,stream.pos))}return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(stream,state){var ctx=state.context;if(stream.sol()&&(null==ctx.align&&(ctx.align=!1),state.indented=stream.indentation(),state.startOfLine=!0),stream.eatSpace())return maybeEOL(stream,state),null;curPunc=isDefKeyword=null;var style=(state.tokenize||tokenBase)(stream,state);if("comment"==style||"meta"==style)return style;if(null==ctx.align&&(ctx.align=!0),";"==curPunc||":"==curPunc||","==curPunc&&stream.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==state.context.type;)popContext(state);else if("{"==curPunc)pushContext(state,stream.column(),"}");else if("["==curPunc)pushContext(state,stream.column(),"]");else if("("==curPunc)pushContext(state,stream.column(),")");else if("}"==curPunc){for(;"statement"==ctx.type;)ctx=popContext(state);for("}"==ctx.type&&(ctx=popContext(state));"statement"==ctx.type;)ctx=popContext(state)}else curPunc==ctx.type?popContext(state):indentStatements&&(("}"==ctx.type||"top"==ctx.type)&&";"!=curPunc||"statement"==ctx.type&&"newstatement"==curPunc)&&pushContext(state,stream.column(),"statement",stream.current());if("variable"==style&&("def"==state.prevToken||parserConfig.typeFirstDefinitions&&typeBefore(stream,state,stream.start)&&isTopScope(state.context)&&stream.match(/^\s*\(/,!1))&&(style="def"),hooks.token){var result=hooks.token(stream,state,style);void 0!==result&&(style=result)}return"def"==style&&!1===parserConfig.styleDefs&&(style="variable"),state.startOfLine=!1,state.prevToken=isDefKeyword?"def":style||curPunc,maybeEOL(stream,state),style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&null!=state.tokenize||state.typeAtEndOfLine)return CodeMirror.Pass;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if("statement"==ctx.type&&"}"==firstChar&&(ctx=ctx.prev),parserConfig.dontIndentStatements)for(;"statement"==ctx.type&&parserConfig.dontIndentStatements.test(ctx.info);)ctx=ctx.prev;if(hooks.indent){var hook=hooks.indent(state,ctx,textAfter);if("number"==typeof hook)return hook}var closing=firstChar==ctx.type,switchBlock=ctx.prev&&"switch"==ctx.prev.info;if(parserConfig.allmanIndentation&&/[{(]/.test(firstChar)){for(;"top"!=ctx.type&&"}"!=ctx.type;)ctx=ctx.prev;return ctx.indented}return"statement"==ctx.type?ctx.indented+("{"==firstChar?0:statementIndentUnit):!ctx.align||dontAlignCalls&&")"==ctx.type?")"!=ctx.type||closing?ctx.indented+(closing?0:indentUnit)+(closing||!switchBlock||/^(?:case|default)\b/.test(textAfter)?0:indentUnit):ctx.indented+statementIndentUnit:ctx.column+(closing?0:1)},electricInput:indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var cKeywords="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",cTypes="int long char short double float unsigned signed void size_t ptrdiff_t";function cppHook(stream,state){if(!state.startOfLine)return!1;for(var ch,next=null;ch=stream.peek();){if("\\"==ch&&stream.match(/^.$/)){next=cppHook;break}if("/"==ch&&stream.match(/^\/[\/\*]/,!1))break;stream.next()}return state.tokenize=next,"meta"}function pointerHook(_stream,state){return"variable-3"==state.prevToken&&"variable-3"}function cpp14Literal(stream){return stream.eatWhile(/[\w\.']/),"number"}function cpp11StringHook(stream,state){if(stream.backUp(1),stream.match(/(R|u8R|uR|UR|LR)/)){var match=stream.match(/"([^\s\\()]{0,16})\(/);return!!match&&(state.cpp11RawStringDelim=match[1],(state.tokenize=tokenRawString)(stream,state))}return stream.match(/(u8|u|U|L)/)?!!stream.match(/["']/,!1)&&"string":(stream.next(),!1)}function tokenAtString(stream,state){for(var next;null!=(next=stream.next());)if('"'==next&&!stream.eat('"')){state.tokenize=null;break}return"string"}function tokenRawString(stream,state){var delim=state.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return stream.match(new RegExp(".*?\\)"+delim+'"'))?state.tokenize=null:stream.skipToEnd(),"string"}function def(mimes,mode){"string"==typeof mimes&&(mimes=[mimes]);var words=[];function add(obj){if(obj)for(var prop in obj)obj.hasOwnProperty(prop)&&words.push(prop)}add(mode.keywords),add(mode.types),add(mode.builtin),add(mode.atoms),words.length&&(mode.helperType=mimes[0],CodeMirror.registerHelper("hintWords",mimes[0],words));for(var i=0;i<mimes.length;++i)CodeMirror.defineMIME(mimes[i],mode)}function tokenTripleString(stream,state){for(var escaped=!1;!stream.eol();){if(!escaped&&stream.match('"""')){state.tokenize=null;break}escaped="\\"==stream.next()&&!escaped}return"string"}def(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:words(cKeywords),types:words(cTypes+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:words("case do else for if switch while struct"),defKeywords:words("struct"),typeFirstDefinitions:!0,atoms:words("null true false"),hooks:{"#":cppHook,"*":pointerHook},modeProps:{fold:["brace","include"]}}),def(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:words(cKeywords+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:words(cTypes+" bool wchar_t"),blockKeywords:words("catch class do else finally for if struct switch try while"),defKeywords:words("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:words("true false null"),dontIndentStatements:/^template$/,hooks:{"#":cppHook,"*":pointerHook,u:cpp11StringHook,U:cpp11StringHook,L:cpp11StringHook,R:cpp11StringHook,0:cpp14Literal,1:cpp14Literal,2:cpp14Literal,3:cpp14Literal,4:cpp14Literal,5:cpp14Literal,6:cpp14Literal,7:cpp14Literal,8:cpp14Literal,9:cpp14Literal,token:function(stream,state,style){if("variable"==style&&"("==stream.peek()&&(";"==state.prevToken||null==state.prevToken||"}"==state.prevToken)&&(word=stream.current(),(lastTwo=/(\w+)::(\w+)$/.exec(word))&&lastTwo[1]==lastTwo[2]))return"def";var word,lastTwo}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),def("text/x-java",{name:"clike",keywords:words("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:words("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:words("catch class do else finally for if switch try while"),defKeywords:words("class interface package enum"),typeFirstDefinitions:!0,atoms:words("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(stream){return stream.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),def("text/x-csharp",{name:"clike",keywords:words("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:words("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:words("catch class do else finally for foreach if struct switch try while"),defKeywords:words("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"@":function(stream,state){return stream.eat('"')?(state.tokenize=tokenAtString)(stream,state):(stream.eatWhile(/[\w\$_]/),"meta")}}}),def("text/x-scala",{name:"clike",keywords:words("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:words("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:words("catch class do else finally for forSome if match switch try while"),defKeywords:words("class def object package trait type val var"),atoms:words("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(stream){return stream.eatWhile(/[\w\$_]/),"meta"},'"':function(stream,state){return!!stream.match('""')&&(state.tokenize=tokenTripleString,state.tokenize(stream,state))},"'":function(stream){return stream.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(stream,state){var cx=state.context;return!("}"!=cx.type||!cx.align||!stream.eat(">"))&&(state.context=new Context(cx.indented,cx.column,cx.type,cx.info,null,cx.prev),"operator")}},modeProps:{closeBrackets:{triples:'"'}}}),def("text/x-kotlin",{name:"clike",keywords:words("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix"),types:words("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,blockKeywords:words("catch class do else finally for if where try while enum"),defKeywords:words("class val var object package interface fun"),atoms:words("true false null this"),hooks:{'"':function(stream,state){var tripleString;return state.tokenize=(tripleString=stream.match('""'),function(stream,state){for(var next,escaped=!1,end=!1;!stream.eol();){if(!tripleString&&!escaped&&stream.match('"')){end=!0;break}if(tripleString&&stream.match('"""')){end=!0;break}next=stream.next(),!escaped&&"$"==next&&stream.match("{")&&stream.skipTo("}"),escaped=!escaped&&"\\"==next&&!tripleString}return!end&&tripleString||(state.tokenize=null),"string"}),state.tokenize(stream,state)}},modeProps:{closeBrackets:{triples:'"'}}}),def(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:words("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:words("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:words("for while do if else struct"),builtin:words("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:words("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}}),def("text/x-nesc",{name:"clike",keywords:words(cKeywords+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:words(cTypes),blockKeywords:words("case do else for if switch while struct"),atoms:words("null true false"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}}),def("text/x-objectivec",{name:"clike",keywords:words(cKeywords+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:words(cTypes),atoms:words("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(stream){return stream.eatWhile(/[\w\$]/),"keyword"},"#":cppHook,indent:function(_state,ctx,textAfter){if("statement"==ctx.type&&/^@\w/.test(textAfter))return ctx.indented}},modeProps:{fold:"brace"}}),def("text/x-squirrel",{name:"clike",keywords:words("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:words(cTypes),blockKeywords:words("case catch class else for foreach if switch try while"),defKeywords:words("function local class"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});var stringTokenizer=null;def("text/x-ceylon",{name:"clike",keywords:words("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(word){var first=word.charAt(0);return first===first.toUpperCase()&&first!==first.toLowerCase()},blockKeywords:words("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:words("class dynamic function interface module object package value"),builtin:words("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:words("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(stream){return stream.eatWhile(/[\w\$_]/),"meta"},'"':function(stream,state){return state.tokenize=function tokenCeylonString(type){return function(stream,state){for(var next,escaped=!1,end=!1;!stream.eol();){if(!escaped&&stream.match('"')&&("single"==type||stream.match('""'))){end=!0;break}if(!escaped&&stream.match("``")){stringTokenizer=tokenCeylonString(type),end=!0;break}next=stream.next(),escaped="single"==type&&!escaped&&"\\"==next}return end&&(state.tokenize=null),"string"}}(stream.match('""')?"triple":"single"),state.tokenize(stream,state)},"`":function(stream,state){return!(!stringTokenizer||!stream.match("`"))&&(state.tokenize=stringTokenizer,stringTokenizer=null,state.tokenize(stream,state))},"'":function(stream){return stream.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(_stream,state,style){if(("variable"==style||"variable-3"==style)&&"."==state.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],mod):mod(CodeMirror)}(function(CodeMirror){function keywords(str){for(var obj={},words=str.split(" "),i=0;i<words.length;++i)obj[words[i]]=!0;return obj}function matchSequence(list,end,escapes){return 0==list.length?phpString(end):function(stream,state){for(var patterns=list[0],i=0;i<patterns.length;i++)if(stream.match(patterns[i][0]))return state.tokenize=matchSequence(list.slice(1),end),patterns[i][1];return state.tokenize=phpString(end,escapes),"string"}}function phpString(closing,escapes){return function(stream,state){return function(stream,state,closing,escapes){if(!1!==escapes&&stream.match("${",!1)||stream.match("{$",!1))return state.tokenize=null,"string";if(!1!==escapes&&stream.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return stream.match("[",!1)&&(state.tokenize=matchSequence([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],closing,escapes)),stream.match(/\-\>\w/,!1)&&(state.tokenize=matchSequence([[["->",null]],[[/[\w]+/,"variable"]]],closing,escapes)),"variable-2";var escaped=!1;for(;!stream.eol()&&(escaped||!1===escapes||!stream.match("{$",!1)&&!stream.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!escaped&&stream.match(closing)){state.tokenize=null,state.tokStack.pop(),state.tokStack.pop();break}escaped="\\"==stream.next()&&!escaped}return"string"}(stream,state,closing,escapes)}}var phpKeywords="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",phpAtoms="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",phpBuiltin="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";CodeMirror.registerHelper("hintWords","php",[phpKeywords,phpAtoms,phpBuiltin].join(" ").split(" ")),CodeMirror.registerHelper("wordChars","php",/[\w$]/);var phpConfig={name:"clike",helperType:"php",keywords:keywords(phpKeywords),blockKeywords:keywords("catch do else elseif for foreach if switch try while finally"),defKeywords:keywords("class function interface namespace trait"),atoms:keywords(phpAtoms),builtin:keywords(phpBuiltin),multiLineStrings:!0,hooks:{$:function(stream){return stream.eatWhile(/[\w\$_]/),"variable-2"},"<":function(stream,state){var before;if(before=stream.match(/<<\s*/)){var quoted=stream.eat(/['"]/);stream.eatWhile(/[\w\.]/);var delim=stream.current().slice(before[0].length+(quoted?2:1));if(quoted&&stream.eat(quoted),delim)return(state.tokStack||(state.tokStack=[])).push(delim,0),state.tokenize=phpString(delim,"'"!=quoted),"string"}return!1},"#":function(stream){for(;!stream.eol()&&!stream.match("?>",!1);)stream.next();return"comment"},"/":function(stream){if(stream.eat("/")){for(;!stream.eol()&&!stream.match("?>",!1);)stream.next();return"comment"}return!1},'"':function(_stream,state){return(state.tokStack||(state.tokStack=[])).push('"',0),state.tokenize=phpString('"'),"string"},"{":function(_stream,state){return state.tokStack&&state.tokStack.length&&state.tokStack[state.tokStack.length-1]++,!1},"}":function(_stream,state){return state.tokStack&&0<state.tokStack.length&&!--state.tokStack[state.tokStack.length-1]&&(state.tokenize=phpString(state.tokStack[state.tokStack.length-2])),!1}}};CodeMirror.defineMode("php",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,"text/html"),phpMode=CodeMirror.getMode(config,phpConfig);return{startState:function(){var html=CodeMirror.startState(htmlMode),php=parserConfig.startOpen?CodeMirror.startState(phpMode):null;return{html:html,php:php,curMode:parserConfig.startOpen?phpMode:htmlMode,curState:parserConfig.startOpen?php:html,pending:null}},copyState:function(state){var cur,html=state.html,htmlNew=CodeMirror.copyState(htmlMode,html),php=state.php,phpNew=php&&CodeMirror.copyState(phpMode,php);return cur=state.curMode==htmlMode?htmlNew:phpNew,{html:htmlNew,php:phpNew,curMode:state.curMode,curState:cur,pending:state.pending}},token:function(stream,state){var isPHP=state.curMode==phpMode;if(stream.sol()&&state.pending&&'"'!=state.pending&&"'"!=state.pending&&(state.pending=null),isPHP)return isPHP&&null==state.php.tokenize&&stream.match("?>")?(state.curMode=htmlMode,state.curState=state.html,state.php.context.prev||(state.php=null),"meta"):phpMode.token(stream,state.curState);if(stream.match(/^<\?\w*/))return state.curMode=phpMode,state.php||(state.php=CodeMirror.startState(phpMode,htmlMode.indent(state.html,""))),state.curState=state.php,"meta";if('"'==state.pending||"'"==state.pending){for(;!stream.eol()&&stream.next()!=state.pending;);var style="string"}else style=state.pending&&stream.pos<state.pending.end?(stream.pos=state.pending.end,state.pending.style):htmlMode.token(stream,state.curState);state.pending&&(state.pending=null);var m,cur=stream.current(),openPHP=cur.search(/<\?/);return-1!=openPHP&&("string"==style&&(m=cur.match(/[\'\"]$/))&&!/\?>/.test(cur)?state.pending=m[0]:state.pending={end:stream.pos,style:style},stream.backUp(cur.length-openPHP)),style},indent:function(state,textAfter){return state.curMode!=phpMode&&/^\s*<\//.test(textAfter)||state.curMode==phpMode&&/^\?>/.test(textAfter)?htmlMode.indent(state.html,textAfter):state.curMode.indent(state.curState,textAfter)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(state){return{state:state.curState,mode:state.curMode}}}},"htmlmixed","clike"),CodeMirror.defineMIME("application/x-httpd-php","php"),CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),CodeMirror.defineMIME("text/x-php",phpConfig)}),function(dndLists){var MIME_TYPE="application/x-dnd",ALL_EFFECTS=["move","copy","link"];function filterEffects(effects,effectAllowed){return"all"==effectAllowed?effects:effects.filter(function(effect){return-1!=effectAllowed.toLowerCase().indexOf(effect)})}dndLists.directive("dndDraggable",["$parse","$timeout",function($parse,$timeout){return function(scope,element,attr){element.attr("draggable","true"),attr.dndDisableIf&&scope.$watch(attr.dndDisableIf,function(disabled){element.attr("draggable",!disabled)}),element.on("dragstart",function(event){if(event=event.originalEvent||event,"false"==element.attr("draggable"))return!0;dndState.isDragging=!0,dndState.itemType=attr.dndType&&scope.$eval(attr.dndType).toLowerCase(),dndState.dropEffect="none",dndState.effectAllowed=attr.dndEffectAllowed||ALL_EFFECTS[0],event.dataTransfer.effectAllowed=dndState.effectAllowed;var item=scope.$eval(attr.dndDraggable),mimeType=MIME_TYPE+(dndState.itemType?"-"+dndState.itemType:"");try{event.dataTransfer.setData(mimeType,angular.toJson(item))}catch(e){var data=angular.toJson({item:item,type:dndState.itemType});try{event.dataTransfer.setData("application/json",data)}catch(e){var effectsAllowed=filterEffects(ALL_EFFECTS,dndState.effectAllowed);event.dataTransfer.effectAllowed=effectsAllowed[0],event.dataTransfer.setData("Text",data)}}if(element.addClass("dndDragging"),$timeout(function(){element.addClass("dndDraggingSource")},0),event._dndHandle&&event.dataTransfer.setDragImage&&event.dataTransfer.setDragImage(element[0],0,0),$parse(attr.dndDragstart)(scope,{event:event}),attr.dndCallback){var callback=$parse(attr.dndCallback);dndState.callback=function(params){return callback(scope,params||{})}}event.stopPropagation()}),element.on("dragend",function(event){event=event.originalEvent||event,scope.$apply(function(){var dropEffect=dndState.dropEffect;$parse(attr[{copy:"dndCopied",link:"dndLinked",move:"dndMoved",none:"dndCanceled"}[dropEffect]])(scope,{event:event}),$parse(attr.dndDragend)(scope,{event:event,dropEffect:dropEffect})}),dndState.isDragging=!1,dndState.callback=void 0,element.removeClass("dndDragging"),element.removeClass("dndDraggingSource"),event.stopPropagation(),$timeout(function(){element.removeClass("dndDraggingSource")},0)}),element.on("click",function(event){attr.dndSelected&&(event=event.originalEvent||event,scope.$apply(function(){$parse(attr.dndSelected)(scope,{event:event})}),event.stopPropagation())}),element.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]),dndLists.directive("dndList",["$parse",function($parse){return function(scope,element,attr){var placeholder=function(){var placeholder;return angular.forEach(element.children(),function(childNode){var child=angular.element(childNode);child.hasClass("dndPlaceholder")&&(placeholder=child)}),placeholder||angular.element("<li class='dndPlaceholder'></li>")}();placeholder.remove();var placeholderNode=placeholder[0],listNode=element[0],listSettings={};function getMimeType(types){if(!types)return"Text";for(var i=0;i<types.length;i++)if("Text"==types[i]||"application/json"==types[i]||types[i].substr(0,MIME_TYPE.length)==MIME_TYPE)return types[i];return null}function getItemType(mimeType){return dndState.isDragging?dndState.itemType||void 0:"Text"==mimeType||"application/json"==mimeType?null:mimeType&&mimeType.substr(MIME_TYPE.length+1)||void 0}function isDropAllowed(itemType){return!listSettings.disabled&&(!(!listSettings.externalSources&&!dndState.isDragging)&&(!listSettings.allowedTypes||null===itemType||itemType&&-1!=listSettings.allowedTypes.indexOf(itemType)))}function getDropEffect(event,ignoreDataTransfer){var effects=ALL_EFFECTS;return ignoreDataTransfer||(effects=filterEffects(effects,event.dataTransfer.effectAllowed)),dndState.isDragging&&(effects=filterEffects(effects,dndState.effectAllowed)),attr.dndEffectAllowed&&(effects=filterEffects(effects,attr.dndEffectAllowed)),effects.length?event.ctrlKey&&-1!=effects.indexOf("copy")?"copy":event.altKey&&-1!=effects.indexOf("link")?"link":effects[0]:"none"}function stopDragover(){return placeholder.remove(),element.removeClass("dndDragover"),!0}function invokeCallback(expression,event,dropEffect,itemType,index,item){return $parse(expression)(scope,{callback:dndState.callback,dropEffect:dropEffect,event:event,external:!dndState.isDragging,index:void 0!==index?index:getPlaceholderIndex(),item:item||void 0,type:itemType})}function getPlaceholderIndex(){return Array.prototype.indexOf.call(listNode.children,placeholderNode)}element.on("dragenter",function(event){event=event.originalEvent||event;var types=attr.dndAllowedTypes&&scope.$eval(attr.dndAllowedTypes);listSettings={allowedTypes:angular.isArray(types)&&types.join("|").toLowerCase().split("|"),disabled:attr.dndDisableIf&&scope.$eval(attr.dndDisableIf),externalSources:attr.dndExternalSources&&scope.$eval(attr.dndExternalSources),horizontal:attr.dndHorizontalList&&scope.$eval(attr.dndHorizontalList)};var mimeType=getMimeType(event.dataTransfer.types);if(!mimeType||!isDropAllowed(getItemType(mimeType)))return!0;event.preventDefault()}),element.on("dragover",function(event){var mimeType=getMimeType((event=event.originalEvent||event).dataTransfer.types),itemType=getItemType(mimeType);if(!mimeType||!isDropAllowed(itemType))return!0;if(placeholderNode.parentNode!=listNode&&element.append(placeholder),event.target!=listNode){for(var listItemNode=event.target;listItemNode.parentNode!=listNode&&listItemNode.parentNode;)listItemNode=listItemNode.parentNode;if(listItemNode.parentNode==listNode&&listItemNode!=placeholderNode){var rect=listItemNode.getBoundingClientRect();if(listSettings.horizontal){var isFirstHalf=event.clientX<rect.left+rect.width/2;isFirstHalf=event.clientX<rect.left+10,window.lastpageX<event.pageX&&(window.direction=0),(window.lastpageX>event.pageX||1===window.direction)&&(window.direction=1,isFirstHalf=event.clientX<rect.left+rect.width-10),window.lastpageX=event.pageX}else isFirstHalf=event.clientY<rect.top+rect.height/2;listNode.insertBefore(placeholderNode,isFirstHalf?listItemNode:listItemNode.nextSibling)}}else{var listItemNodeChildren=(listItemNode=event.target).children,paras=document.getElementsByClassName("dndPlaceholder");for(paras[0].parentNode.removeChild(paras[0]),listItemNode.appendChild(placeholderNode),i=0;i<listItemNodeChildren.length;i++)if(!(listItemNodeChildren[i].classList.contains("dndPlaceholder")||listItemNodeChildren[i].classList.contains("dndDraggingCloneSource")||listItemNodeChildren[i].classList.contains("dndDraggingSource"))){rect=listItemNodeChildren[i].getBoundingClientRect();if(listSettings.horizontal){if(event.clientX<rect.left){listItemNode.insertBefore(placeholderNode,listItemNodeChildren[i]);break}}else if(event.clientY<rect.top){listItemNode.insertBefore(placeholderNode,listItemNodeChildren[i]);break}}}var ignoreDataTransfer="Text"==mimeType,dropEffect=getDropEffect(event,ignoreDataTransfer);return"none"==dropEffect?stopDragover():attr.dndDragover&&!invokeCallback(attr.dndDragover,event,dropEffect,itemType)?stopDragover():(event.preventDefault(),ignoreDataTransfer||(event.dataTransfer.dropEffect=dropEffect),element.addClass("dndDragover"),event.stopPropagation(),!1)}),element.on("drop",function(event){var mimeType=getMimeType((event=event.originalEvent||event).dataTransfer.types),itemType=getItemType(mimeType);if(!mimeType||!isDropAllowed(itemType))return!0;event.preventDefault();try{var data=JSON.parse(event.dataTransfer.getData(mimeType))}catch(e){return stopDragover()}if(("Text"==mimeType||"application/json"==mimeType)&&(itemType=data.type||void 0,data=data.item,!isDropAllowed(itemType)))return stopDragover();var ignoreDataTransfer="Text"==mimeType,dropEffect=getDropEffect(event,ignoreDataTransfer);if("none"==dropEffect)return stopDragover();var index=getPlaceholderIndex();return attr.dndDrop&&!(data=invokeCallback(attr.dndDrop,event,dropEffect,itemType,index,data))?stopDragover():(dndState.dropEffect=dropEffect,ignoreDataTransfer||(event.dataTransfer.dropEffect=dropEffect),!0!==data&&scope.$apply(function(){scope.$eval(attr.dndList).splice(index,0,data)}),invokeCallback(attr.dndInserted,event,dropEffect,itemType,index,data),stopDragover(),event.stopPropagation(),!1)}),element.on("dragleave",function(event){event=event.originalEvent||event;var newTarget=document.elementFromPoint(event.clientX,event.clientY);listNode.contains(newTarget)&&!event._dndPhShown?event._dndPhShown=!0:stopDragover()})}}]),dndLists.directive("dndNodrag",function(){return function(scope,element,attr){element.attr("draggable","true"),element.on("dragstart",function(event){(event=event.originalEvent||event)._dndHandle||(event.dataTransfer.types&&event.dataTransfer.types.length||event.preventDefault(),event.stopPropagation())}),element.on("dragend",function(event){(event=event.originalEvent||event)._dndHandle||event.stopPropagation()})}}),dndLists.directive("dndHandle",function(){return function(scope,element,attr){element.attr("draggable","true"),element.on("dragstart dragend",function(event){(event=event.originalEvent||event)._dndHandle=!0})}});var dndState={}}(angular.module("dndLists",[])),function(root){function inherits(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}function Diff(kind,path){Object.defineProperty(this,"kind",{value:kind,enumerable:!0}),path&&path.length&&Object.defineProperty(this,"path",{value:path,enumerable:!0})}function DiffEdit(path,origin,value){DiffEdit.super_.call(this,"EDIT",path),Object.defineProperty(this,"lhs",{value:origin,enumerable:!0}),Object.defineProperty(this,"rhs",{value:value,enumerable:!0})}function DiffNew(path,value){DiffNew.super_.call(this,"NEW",path),Object.defineProperty(this,"rhs",{value:value,enumerable:!0})}function DiffDeleted(path,value){DiffDeleted.super_.call(this,"DELETE",path),Object.defineProperty(this,"lhs",{value:value,enumerable:!0})}function DiffArray(path,index,item){DiffArray.super_.call(this,"ARRAY",path),Object.defineProperty(this,"index",{value:index,enumerable:!0}),Object.defineProperty(this,"item",{value:item,enumerable:!0})}function realTypeOf(subject){var type=typeof subject;return"object"!==type?type:subject===Math?"math":null===subject?"null":Array.isArray(subject)?"array":"[object Date]"===Object.prototype.toString.call(subject)?"date":"function"==typeof subject.toString&&/^\/.*\//.test(subject.toString())?"regexp":"object"}function hashThisString(string){var hash=0;if(0===string.length)return hash;for(var i=0;i<string.length;i++){hash=(hash<<5)-hash+string.charCodeAt(i),hash&=hash}return hash}function getOrderIndependentHash(object){var accum=0,type=realTypeOf(object);if("array"===type)return object.forEach(function(item){accum+=getOrderIndependentHash(item)}),accum+hashThisString("[type: array, hash: "+accum+"]");if("object"!==type)return accum+hashThisString("[ type: "+type+" ; value: "+object+"]");for(var key in object)if(object.hasOwnProperty(key)){var keyValueString="[ type: object, key: "+key+", value hash: "+getOrderIndependentHash(object[key])+"]";accum+=hashThisString(keyValueString)}return accum}function observableDiff(lhs,rhs,observer,prefilter,orderIndependent){var changes=[];if(function deepDiff(lhs,rhs,changes,prefilter,path,key,stack,orderIndependent){changes=changes||[],stack=stack||[];var currentPath=(path=path||[]).slice(0);if(null!=key){if(prefilter){if("function"==typeof prefilter&&prefilter(currentPath,key))return;if("object"==typeof prefilter){if(prefilter.prefilter&&prefilter.prefilter(currentPath,key))return;if(prefilter.normalize){var alt=prefilter.normalize(currentPath,key,lhs,rhs);alt&&(lhs=alt[0],rhs=alt[1])}}}currentPath.push(key)}"regexp"===realTypeOf(lhs)&&"regexp"===realTypeOf(rhs)&&(lhs=lhs.toString(),rhs=rhs.toString());var i,j,k,other,ltype=typeof lhs,rtype=typeof rhs,ldefined="undefined"!==ltype||stack&&0<stack.length&&stack[stack.length-1].lhs&&Object.getOwnPropertyDescriptor(stack[stack.length-1].lhs,key),rdefined="undefined"!==rtype||stack&&0<stack.length&&stack[stack.length-1].rhs&&Object.getOwnPropertyDescriptor(stack[stack.length-1].rhs,key);if(!ldefined&&rdefined)changes.push(new DiffNew(currentPath,rhs));else if(!rdefined&&ldefined)changes.push(new DiffDeleted(currentPath,lhs));else if(realTypeOf(lhs)!==realTypeOf(rhs))changes.push(new DiffEdit(currentPath,lhs,rhs));else if("date"===realTypeOf(lhs)&&lhs-rhs!=0)changes.push(new DiffEdit(currentPath,lhs,rhs));else if("object"===ltype&&null!==lhs&&null!==rhs){for(i=stack.length-1;-1<i;--i)if(stack[i].lhs===lhs){other=!0;break}if(other)lhs!==rhs&&changes.push(new DiffEdit(currentPath,lhs,rhs));else{if(stack.push({lhs:lhs,rhs:rhs}),Array.isArray(lhs)){for(orderIndependent&&(lhs.sort(function(a,b){return getOrderIndependentHash(a)-getOrderIndependentHash(b)}),rhs.sort(function(a,b){return getOrderIndependentHash(a)-getOrderIndependentHash(b)})),i=rhs.length-1,j=lhs.length-1;j<i;)changes.push(new DiffArray(currentPath,i,new DiffNew(void 0,rhs[i--])));for(;i<j;)changes.push(new DiffArray(currentPath,j,new DiffDeleted(void 0,lhs[j--])));for(;0<=i;--i)deepDiff(lhs[i],rhs[i],changes,prefilter,currentPath,i,stack,orderIndependent)}else{var akeys=Object.keys(lhs),pkeys=Object.keys(rhs);for(i=0;i<akeys.length;++i)k=akeys[i],0<=(other=pkeys.indexOf(k))?(deepDiff(lhs[k],rhs[k],changes,prefilter,currentPath,k,stack,orderIndependent),pkeys[other]=null):deepDiff(lhs[k],void 0,changes,prefilter,currentPath,k,stack,orderIndependent);for(i=0;i<pkeys.length;++i)(k=pkeys[i])&&deepDiff(void 0,rhs[k],changes,prefilter,currentPath,k,stack,orderIndependent)}stack.length=stack.length-1}}else lhs!==rhs&&("number"===ltype&&isNaN(lhs)&&isNaN(rhs)||changes.push(new DiffEdit(currentPath,lhs,rhs)))}(lhs,rhs,changes,prefilter,null,null,null,orderIndependent),observer)for(var i=0;i<changes.length;++i)observer(changes[i]);return changes}function accumulateDiff(lhs,rhs,prefilter,accum){var changes=observableDiff(lhs,rhs,accum?function(difference){difference&&accum.push(difference)}:void 0,prefilter);return accum||(changes.length?changes:void 0)}inherits(DiffEdit,Diff),inherits(DiffNew,Diff),inherits(DiffDeleted,Diff),inherits(DiffArray,Diff),Object.defineProperties(accumulateDiff,{diff:{value:accumulateDiff,enumerable:!0},observableDiff:{value:observableDiff,enumerable:!0},orderIndepHash:{value:getOrderIndependentHash,enumerable:!0}}),root.DeepDiff=accumulateDiff}(this),function(root){var toStr=Object.prototype.toString;function hasOwnProperty(obj,prop){return null!=obj&&Object.prototype.hasOwnProperty.call(obj,prop)}function isEmpty(value){if(!value)return!0;if(isArray(value)&&0===value.length)return!0;if("string"==typeof value)return!1;for(var i in value)if(hasOwnProperty(value,i))return!1;return!0}function toString(type){return toStr.call(type)}var isArray=Array.isArray||function(obj){return"[object Array]"===toStr.call(obj)};function getKey(key){var intKey=parseInt(key);return intKey.toString()===key?intKey:key}function factory(options){options=options||{};var objectPath=function(obj){return Object.keys(objectPath).reduce(function(proxy,prop){return"create"===prop||"function"==typeof objectPath[prop]&&(proxy[prop]=objectPath[prop].bind(objectPath,obj)),proxy},{})};function hasShallowProperty(obj,prop){return options.includeInheritedProps||"number"==typeof prop&&Array.isArray(obj)||hasOwnProperty(obj,prop)}function getShallowProperty(obj,prop){if(hasShallowProperty(obj,prop))return obj[prop]}function set(obj,path,value,doNotReplace){if("number"==typeof path&&(path=[path]),!path||0===path.length)return obj;if("string"==typeof path)return set(obj,path.split(".").map(getKey),value,doNotReplace);var currentPath=path[0],currentValue=getShallowProperty(obj,currentPath);return 1===path.length?(void 0!==currentValue&&doNotReplace||(obj[currentPath]=value),currentValue):(void 0===currentValue&&("number"==typeof path[1]?obj[currentPath]=[]:obj[currentPath]={}),set(obj[currentPath],path.slice(1),value,doNotReplace))}return objectPath.has=function(obj,path){if("number"==typeof path?path=[path]:"string"==typeof path&&(path=path.split(".")),!path||0===path.length)return!!obj;for(var i=0;i<path.length;i++){var j=getKey(path[i]);if(!("number"==typeof j&&isArray(obj)&&j<obj.length||(options.includeInheritedProps?j in Object(obj):hasOwnProperty(obj,j))))return!1;obj=obj[j]}return!0},objectPath.ensureExists=function(obj,path,value){return set(obj,path,value,!0)},objectPath.set=function(obj,path,value,doNotReplace){return set(obj,path,value,doNotReplace)},objectPath.insert=function(obj,path,value,at){var arr=objectPath.get(obj,path);at=~~at,isArray(arr)||(arr=[],objectPath.set(obj,path,arr)),arr.splice(at,0,value)},objectPath.empty=function(obj,path){var value,i;if(!isEmpty(path)&&(null!=obj&&(value=objectPath.get(obj,path)))){if("string"==typeof value)return objectPath.set(obj,path,"");if(function(obj){return"boolean"==typeof obj||"[object Boolean]"===toString(obj)}(value))return objectPath.set(obj,path,!1);if("number"==typeof value)return objectPath.set(obj,path,0);if(isArray(value))value.length=0;else{if(!function(obj){return"object"==typeof obj&&"[object Object]"===toString(obj)}(value))return objectPath.set(obj,path,null);for(i in value)hasShallowProperty(value,i)&&delete value[i]}}},objectPath.push=function(obj,path){var arr=objectPath.get(obj,path);isArray(arr)||(arr=[],objectPath.set(obj,path,arr)),arr.push.apply(arr,Array.prototype.slice.call(arguments,2))},objectPath.coalesce=function(obj,paths,defaultValue){for(var value,i=0,len=paths.length;i<len;i++)if(void 0!==(value=objectPath.get(obj,paths[i])))return value;return defaultValue},objectPath.get=function(obj,path,defaultValue){if("number"==typeof path&&(path=[path]),!path||0===path.length)return obj;if(null==obj)return defaultValue;if("string"==typeof path)return objectPath.get(obj,path.split("."),defaultValue);var currentPath=getKey(path[0]),nextObj=getShallowProperty(obj,currentPath);return void 0===nextObj?defaultValue:1===path.length?nextObj:objectPath.get(obj[currentPath],path.slice(1),defaultValue)},objectPath.del=function(obj,path){if("number"==typeof path&&(path=[path]),null==obj)return obj;if(isEmpty(path))return obj;if("string"==typeof path)return objectPath.del(obj,path.split("."));var currentPath=getKey(path[0]);return hasShallowProperty(obj,currentPath)?1!==path.length?objectPath.del(obj[currentPath],path.slice(1)):(isArray(obj)?obj.splice(currentPath,1):delete obj[currentPath],obj):obj},objectPath}var mod=factory();mod.create=factory,mod.withInheritedProps=factory({includeInheritedProps:!0}),root.objectPath=mod}(this),window.UndoManager=function(){var changeCallback,doCallback,commands=[],index=-1,limit=0,isExecuting=!1,execute=function(command,action){return command&&"function"==typeof command[action]&&(isExecuting=!0,command[action](),isExecuting=!1),this};return{add:function(command){return isExecuting||(commands.splice(index+1,commands.length-index),commands.push(command),limit&&commands.length>limit&&(commands=commands.slice(-limit)),index=commands.length-1,changeCallback&&changeCallback()),this},setChangeCallback:function(callback){changeCallback=callback},setDoCallback:function(callback){doCallback=callback},do:function(doIndex){if(doIndex!==index&&commands.length&&doIndex<commands.length&&"function"==typeof doCallback){var command=commands[doIndex];command&&(doCallback.call(this,command),index=doIndex,changeCallback&&changeCallback())}return this},undo:function(){var command=commands[index];return command&&(execute(command,"undo"),index-=1,changeCallback&&changeCallback()),this},redo:function(){var command=commands[index+1];return command&&(execute(command,"redo"),index+=1,changeCallback&&changeCallback()),this},clear:function(){var prev_size=commands.length;commands=[],index=-1,changeCallback&&0<prev_size&&changeCallback()},hasUndo:function(){return-1!==index},hasRedo:function(){return index<commands.length-1},getCommands:function(){return commands},getIndex:function(){return index},setIndex:function(i){index=i,changeCallback&&changeCallback()},setLimit:function(l){limit=l}}};
CTFrontendBuilder.controller("ComponentsTree",["$scope","$parentScope","$timeout","$interval",function(l,c,s,e){l.componentsTreeExample={name:"root",children:[{id:1,name:"section",options:{ct_parent:0,ct_id:1,original:{background:"#515151"},hover:{background:"#cccccc"}},children:[{id:2,name:"button",options:{ct_parent:1,ct_id:2,original:{value:"Click Me!"}}}]},{id:3,name:"section",options:{ct_parent:0,ct_id:1,original:{background:"#515151"},hover:{background:"#333333"},media:[{size:"748px",original:{background:"#929292"}}]},children:[{id:4,name:"headline",options:{ct_parent:3,ct_id:4,original:{tag:"h3",text:"I am a headline!"}}}]}]},l.componentsTree=[{id:0,name:"root",depth:0}],l.findComponentByName=function(e,n,t,o){var r;if(isBreak=!1,angular.forEach(e,function(e){isBreak||(e.name==n?(r=t(e.id,e,o),isBreak=!0):e.children&&(r=l.findComponentByName(e.children,n,t,o)))}),void 0!==r)return r},l.findComponentItem=function(e,n,t,o){var r;return l.log,isBreak=!1,0==n?void 0!==(r=t(n,l.componentsTree,o))&&r:(angular.forEach(e,function(e){isBreak||(e.id==n?(r=t(n,e,o),isBreak=!0):e.children&&(r=l.findComponentItem(e.children,n,t,o)))}),void 0!==r?r:void 0)},l.hasParent=function(e){return 0<l.findParentComponentItem(l.componentsTree,e,function(e){return e})},l.findParentComponentItem=function(n,t,o,r){var c;if(l.log,isBreak=!1,angular.forEach(n.children,function(e){isBreak||(e.id==t?(c=o(e.options.ct_parent,n,t,r),isBreak=!0):e.children&&(c=l.findParentComponentItem(e,t,o,r)))}),void 0!==c)return c},l.removeComponentFromTree=function(e,t,o,n){l.log&&console.log("removeComponentFromTree()",o),n&&"ct_span"==n.removeName&&"ct_link"==n.parentName&&(t.options.ct_content=t.options.ct_content.replace('<span id="ct-placeholder-'+n.parentId+'"></span>','<span id="ct-placeholder-'+n.removeId+'"></span>')),angular.forEach(t.children,function(e,n){e.id==o&&(t.children.splice(n,1),l.newComponentKey=n)}),0==t.children.length&&delete t.children,n&&"ct_span"==n.removeName&&"ct_link"==n.parentName&&l.rebuildDOM(t.id)},l.insertComponentToTree=function(e,n,t,o){l.log&&console.log("insertComponentToTree()",e,n,t),"object"!=typeof t&&(t=o);var r=l.getComponentById(e).attr("is-nestable");if(t.isBuiltIn&&"oxy_superbox"==n.name&&(r=!0),r||"ct_column"==t.name||"ct_span"==t.name||"ct_link"==t.name&&"ct_span"==t.currentName||"ct_div_block"==t.name&&"ct_new_columns"==n.name||"oxy_header_row"==t.name&&"oxy_header"==n.name||("oxy_header_left"==t.name||"oxy_header_center"==t.name||"oxy_header_right"==t.name)&&"oxy_header_row"==n.name){n.children||(n.children=[]);var c={id:t.id,name:t.name,options:{ct_id:t.id,ct_parent:e,selector:t.name.slice(3)+"-"+t.id+"-"+CtBuilderAjax.postId,original:{},nicename:iframeScope.calcDefaultComponentTitle(t)}};null==iframeScope.component.options[t.id]&&(iframeScope.component.options[t.id]={}),iframeScope.component.options[t.id].nicename=c.options.nicename,t.isShortcode&&(c.options.ct_shortcode="true"),t.isWidget&&(c.options.ct_widget="true"),t.isData&&(c.options.ct_data="true"),t.isSidebar&&(c.options.ct_sidebar="true"),t.isNavMenu&&(c.options.ct_nav_menu="true"),t.isBuiltIn&&(c.options.oxy_builtin="true"),"ct_link"==t.name&&"ct_span"==t.currentName&&(n.options.ct_content=n.options.ct_content.replace('<span id="ct-placeholder-'+t.currentId+'"></span>','<span id="ct-placeholder-'+t.id+'"></span>')),"ct_columns"==t.name&&(l.columns[t.id]=1);var a=l.calculateDepth(t,n);if(a&&(c.depth=a),t.index)for(e in l.idToInsert=t.index,n.children){"true"==n.children[e].options.oxy_builtin&&l.idToInsert++}if(0<=l.idToInsert&&!1!==l.idToInsert?(n.children.splice(l.idToInsert,0,c),l.idToInsert=-1):n.children.push(c),"ct_div_block"==t.name&&"ct_new_columns"==n.name&&l.updateColumnsOnAdd){var i=1<n.children.length?n.children.length-1:100,p=100/i;l.setOptionModel("width-unit","%",t.id,t.name);var m=!1;if(angular.forEach(n.children,function(e){var n={};l.findComponentItem(l.componentsTree.children,e.id,l.getComponentActiveSelector,n),n.activeselector&&(m=!0)}),m)return!1;angular.forEach(n.children,function(e){var n=100/i;n=(n/((100+p)/100)).toFixed(2),l.setOptionModel("width",n,e.id,"ct_div_block")}),l.checkColumnsWidthSum(n.children,"ct_div_block")}}else l.findParentComponentItem(l.componentsTree,e,l.insertComponentToTree,t)},l.insertComponentToParent=function(e,n,t){l.findComponentItem(l.componentsTree.children,n.options.ct_parent,l.insertComponentToTree,t)},l.insertComponentToChild=function(e,n,t){n.children&&0<n.children.length&&"ct_div_block"==n.children[0].name&&l.findComponentItem(l.componentsTree.children,n.children[0].id,l.insertComponentToTree,t)},l.insertComponentToGrandParent=function(e,n,t){l.findParentComponentItem(l.componentsTree,n.options.ct_parent,l.insertComponentToTree,t)},l.getComponentItem=function(e,n,t){return n},l.pasteComponentToTree=function(e,n,t){l.log&&console.log("pasteComponentToTree()",e,n,t,l.componentBuffer),l.componentBuffer.options.nicename=l.componentBuffer.options.nicename.includes("#")?l.calcDefaultComponentTitle(l.componentBuffer):l.componentBuffer.options.nicename;try{var o=l.getComponentById(l.componentBuffer.id);if(o instanceof jQuery&&o.hasClass("oxy-tabs-contents")?tabsContents=o:tabsContents=jQuery(o).find(".oxy-tabs-contents"),tabsContents.length)var r=s(function(){var e=tabsContents.attr("data-oxy-tabs-wrapper"),n=jQuery("#"+e),t=n.attr("data-oxy-tabs-active-tab-class");n.children("."+t).trigger("click"),s.cancel(r)},10,!1);if(jQuery("body").hasClass("ct_inner")&&(0===parseInt(e)||1e5<parseInt(e))&&0<jQuery(".ct-inner-content.ct-component").length&&(e=parseInt(jQuery(".ct-inner-content.ct-component").attr("ng-attr-component-id")),n=l.findComponentItem(l.componentsTree.children,e,l.getComponentItem),l.componentBuffer.options.ct_parent=parseInt(e)),"ct_inner_content"==n.name&&CtBuilderAjax.query&&CtBuilderAjax.query.post_type&&"ct_template"===CtBuilderAjax.query.post_type&&!jQuery("body").hasClass("ct_inner")){var c=n;e=parseInt(n.options.ct_parent),n=l.findComponentItem(l.componentsTree.children,e,l.getComponentItem),l.componentBuffer.options.ct_parent=parseInt(e),l.newComponentKey=_.indexOf(n.children,c)+1}if(!l.componentBuffer)return!1;if("ct_columns"==n.name)if(12==(m=n.children.length))return alert("Max number of columns is 12"),l.componentBuffer=!1;l.updateComponentDepth(l.componentBuffer,n),n.children?(0<=l.newComponentKey?n.children.splice(l.newComponentKey,0,l.componentBuffer):n.children.push(l.componentBuffer),l.newComponentKey++):(n.children=[],n.children.push(l.componentBuffer),l.newComponentKey=1);var a="ct_column";if("ct_div_block"==l.componentBuffer.name)a="ct_div_block";if(("ct_column"==l.componentBuffer.name||"ct_div_block"==l.componentBuffer.name&&"ct_new_columns"==n.name)&&!l.reorderSameParent){var i=!1;if(angular.forEach(n.children,function(e){var n={};l.findComponentItem(l.componentsTree.children,e.id,l.getComponentActiveSelector,n),n.activeselector&&(i=!0)}),i)return!1;var p=0,m=1<n.children.length?n.children.length-1:100;"ct_div_block"!=l.componentBuffer.name||l.componentBuffer.options.original&&l.componentBuffer.options.original.width?p=parseFloat(l.componentBuffer.options.original.width):(p=100/m,l.setOptionModel("width-unit","%",l.componentBuffer.id,l.componentBuffer.name)),angular.forEach(n.children,function(e){if("ct_div_block"!=l.componentBuffer.name||e.options.original&&e.options.original.width)n=parseFloat(e.options.original.width);else var n=100/m;n=(n/((100+p)/100)).toFixed(2),l.setOptionModel("width",n,e.id,a)}),l.checkColumnsWidthSum(n.children,a)}l.unsavedChanges()}catch(e){console.error(e);var d=e.toString();r=s(function(){l.showErrorModal(0,"There was an error. DO NOT SAVE THE PAGE. Please copy below error message and send to our support team.",d),l.$apply(),s.cancel(r)},10,!1)}},l.calculateDepth=function(e,n){return n.depth||"root"!=n.name||(n.depth=0),"ct_column"==e.name&&"ct_columns"==n.name?depth=parseInt(n.depth):"oxy_header_row"==e.name||"oxy_header_left"==e.name||"oxy_header_center"==e.name||"oxy_header_right"==e.name?depth=parseInt(n.depth):"ct_div_block"!=e.name&&"ct_nestable_shortcode"!=e.name||"ct_column"!=n.name&&"ct_new_columns"!=n.name?"ct_link"==e.name&&"ct_column"==n.name?depth=parseInt(n.depth):"ct_section"==e.name&&"ct_column"==n.name?depth=parseInt(n.depth):"ct_slide"==e.name?depth=parseInt(n.depth):"oxy_tab"==e.name&&"oxy_tabs"==n.name?depth=parseInt(n.depth):"oxy_tab_content"==e.name&&"oxy_tabs_contents"==n.name?depth=parseInt(n.depth):depth=parseInt(n.depth)+1:depth=parseInt(n.depth),depth},l.updateComponentDepth=function(n,e){var t=l.calculateDepth(n,e);t&&(n.depth=t),n.children&&angular.forEach(n.children,function(e){l.updateComponentDepth(e,n)})},l.updateNewComponentIds=function(n,e){if(l.log&&console.log("updateNewComponentIds()",n,e),n.options.selector=n.name.slice(3)+"-"+l.component.id+"-"+CtBuilderAjax.postId,e.options&&e.options.ct_content&&(e.options.ct_content=e.options.ct_content.replace('<span id="ct-placeholder-'+n.id+'"></span>','<span id="ct-placeholder-temporary-'+l.component.id+'"></span>')),n.id=l.component.id,n.options.ct_id=l.component.id,n.options.ct_parent=parseInt(e.id),n.options.nicename||(n.options.nicename=iframeScope.calcDefaultComponentTitle(n)),n.children&&angular.forEach(n.children,function(e){l.component.id++,iframeScope.activeSelectors[l.component.id]=iframeScope.activeSelectors[e.id],l.updateNewComponentIds(e,n)}),n.options&&n.options.ct_content&&(n.options.ct_content=n.options.ct_content.replace(new RegExp('<span id="ct-placeholder-[0-9]+"></span>',"g"),""),n.options.ct_content=n.options.ct_content.replace(new RegExp("ct-placeholder-temporary-","g"),"ct-placeholder-")),"oxy_tabs"!=n.name||l.tabsContentsItemToUpdate||(l.tabsItemToUpdate=n),"oxy_tabs_contents"==n.name&&l.tabsItemToUpdate){var t=n.options.selector,o=l.tabsItemToUpdate.options.ct_id;l.tabsItemToUpdate.options.original.tabs_contents_wrapper=t;var r=s(function(){l.rebuildDOM(o),s.cancel(r)},0,!1);l.tabsItemToUpdate=!1}else"oxy_tabs_contents"!=n.name||l.tabsItemToUpdate||(l.tabsContentsItemToUpdate=n);if("oxy_tabs"==n.name&&l.tabsContentsItemToUpdate){t=l.tabsContentsItemToUpdate.options.selector;n.options.original.tabs_contents_wrapper=t,l.tabsContentsItemToUpdate=!1}},l.copyComponentTreeNode=function(e,t,o){angular.forEach(t.children,function(e,n){if(e.id==o){if("ct_column"==e.name&&!l.reorderSameParent&&(columnsNumber=t.children.length,12==columnsNumber))return alert("Max number of columns is 12"),l.componentBuffer=!1;l.componentBuffer=angular.copy(e),l.updateNewComponentIds(l.componentBuffer,t),l.newComponentKey=n+1}})},l.cutComponentFromTree=function(e,o,r){l.log&&console.log("cutComponentFromTree()",o,r),l.idToInsert=-1,angular.forEach(o.children,function(e,n){if(e.id==r){var t=!1;"ct_column"!=e.name&&("ct_div_block"!=e.name||"ct_new_columns"!=o.name)||l.reorderSameParent||(newColumnsNumber=o.children.length-1,freeSpace=parseFloat(e.options.original.width),angular.forEach(o.children,function(e){var n={};l.findComponentItem(l.componentsTree.children,e.id,l.getComponentActiveSelector,n),n.activeselector&&(t=!0)}),t||angular.forEach(o.children,function(e){e.id!=r&&(columnWidth=parseFloat(e.options.original.width),columnWidth=(columnWidth+freeSpace/newColumnsNumber).toFixed(2),l.setOptionModel("width",columnWidth,e.id,"ct_column"))})),e.options.ct_parent=parseInt(l.componentInsertId),l.componentBuffer=angular.copy(e),o.children.splice(n,1),0==o.children.length&&delete o.children,"ct_column"!=e.name&&("ct_div_block"!=e.name||"ct_new_columns"!=o.name)||l.reorderSameParent||t||l.checkColumnsWidthSum(o.children,"ct_div_block"),l.idToInsert=n}})},l.updateComponentParentId=function(e,n){l.log&&console.log("updateComponentParentId()",e),n.options.ct_parent=parseInt(l.componentInsertId)},l.componentsReorderTree=function(e,n,t,o,r){n===t&&o<r&&r--,l.componentsReorder(angular.element(e),r,n,t)},l.componentsReorder=function(e,n,t,o,r,c){l.log&&console.log(e,n,t,o,r,c);try{var a=e[0].attributes["ng-attr-tree-id"]?"ng-attr-tree-id":"ng-attr-component-id",i=e[0].attributes[a].value,p=e.parent();jQuery("body").hasClass("ct_inner")&&(0===parseInt(o)||1e5<parseInt(o)||void 0===o)&&0<jQuery(".ct-inner-content.ct-component").length&&(o=parseInt(jQuery(".ct-inner-content.ct-component").attr("ng-attr-component-id"))),99999==o&&(o=c.attr("ng-attr-tree-actual-id"),n++),99999==t&&(t=r.attr("ng-attr-tree-actual-id")),l.componentInsertId=o,l.newComponentKey=n,l.reorderSameParent=t==o,l.findParentComponentItem(l.componentsTree,i,l.cutComponentFromTree),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree),l.findComponentItem(l.componentsTree.children,i,l.updateComponentParentId);c=l.getComponentById(o),r=l.getComponentById(t);c&&c.hasClass("ct-slider")&&l.rebuildDOM(o),!l.reorderSameParent&&r&&r.hasClass("ct-slider")&&l.rebuildDOM(t),c&&c.hasClass("ct-new-columns")&&t==o?l.rebuildDOM(o):(c&&c.hasClass("ct-new-columns")&&l.rebuildDOM(o),l.rebuildDOM(i,!0)),l.rebuildDOMChangeParent(o),l.rebuildDOMChangeParent(t),!(p=l.findComponentItem(l.componentsTree.children,t,l.getComponentItem)).children&&l.isAJAXElement(p.name)&&l.rebuildDOM(t),(p=l.findComponentItem(l.componentsTree.children,o,l.getComponentItem)).children&&1===p.children.length&&l.isAJAXElement(p.name)&&l.rebuildDOM(o),l.cancelDeleteUndo()}catch(e){console.error(e);var m=e.toString();l.showErrorModal(0,"There was an error. DO NOT SAVE THE PAGE. Please copy below error message and send to our support team.",m),l.$apply()}},l.wrapWith=function(e){l.isSelectableEnabled&&l.isDOMNodesSelected?(l.wrapSelectedComponentWith(e),l.isDOMNodesSelected=!1):l.wrapComponentWith(e)},l.wrapComponentWith=function(e,n,t){void 0===n&&(n=l.component.active.id),void 0===t&&(t=l.component.active.parent.id),l.log&&console.log("wrapComponentWith()",e,n,t);var o=l.component.id;return newComponent={id:o,name:e,currentId:l.component.active.id,currentName:l.component.active.name},l.componentInsertId=newComponent.id,l.findParentComponentItem(l.componentsTree,n,l.cutComponentFromTree),l.removeComponentFromDOM(n),l.findComponentItem(l.componentsTree.children,t,l.insertComponentToTree,newComponent),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree),l.findParentComponentItem(l.componentsTree,n,l.updateCurrentActiveParent),"ct_span"==newComponent.currentName?l.rebuildDOM(t):(l.rebuildDOM(newComponent.id),l.activateComponent(newComponent.id)),l.cancelDeleteUndo(),o},l.wrapSelectedComponentWith=function(e){var n=jQuery("#ct-dom-tree").find(".ct-selected-dom-node").first().parent().parent(),t=n.attr("ng-attr-tree-id"),o=n.children(".ct-dom-tree-node").has(".ct-selected-dom-node"),r=[];o.each(function(){r.push(jQuery(this).attr("ng-attr-tree-id"))}),newComponent={id:l.component.id,name:e,currentId:t},l.componentInsertId=newComponent.id,l.findComponentItem(l.componentsTree.children,t,l.insertComponentToTree,newComponent);for(var c,a=r.length-1;c=r[a],0<=a;a--)l.findParentComponentItem(l.componentsTree,c,l.cutComponentFromTree),l.removeComponentFromDOM(c),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree);l.cancelDeleteUndo(),l.rebuildDOM(t)},l.removeActiveParent=function(){l.log&&console.log("removeActiveParent"),componentId=l.component.active.id,parentId=l.component.active.parent.id,component={removeId:l.component.active.id,removeName:l.component.active.name,parentId:l.component.active.parent.id,parentName:l.component.active.parent.name},l.findParentComponentItem(l.componentsTree,parentId,l.updateCurrentActiveParent),l.componentInsertId=l.component.active.parent.id,l.findParentComponentItem(l.componentsTree,componentId,l.cutComponentFromTree),l.removeComponentFromDOM(componentId),l.findParentComponentItem(l.componentsTree,parentId,l.removeComponentFromTree,component),l.removeComponentFromDOM(parentId),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree),l.findParentComponentItem(l.componentsTree,componentId,l.updateCurrentActiveParent),l.cancelDeleteUndo(),l.rebuildDOM(componentId)},l.builderInit=function(e){if(l.log&&console.log("builderInit()",e),!1!==(l.componentsTree=e)){l.loadComponentsTemplates(),l.loadElementsPresets(),parent.document.getElementById("oxygen-ui").style.display="block",l.outputCSSOptions(),c.current_post_meta_keys=e.meta_keys,angular.element("body").hasClass("ct_inner")&&(l.outerTemplateData.edit_link=e.outerTemplateData.edit_link,l.outerTemplateData.template_name=e.outerTemplateData.template_name,angular.element("body").on("click",function(e){if(0<angular.element(".ct-inner-content-workarea").length&&angular.element(e.target).closest(".ct-inner-content-workarea").length<1&&angular.element(e.target).closest("#oxygen-resize-box").length<1&&!jQuery(this).hasClass("oxy-dragging-resize-box")){if(void 0!==l.choosingSelectorEnabled&&1==l.choosingSelectorEnabled)return;l.activateComponent(0),l.component.active.name="ct_template",l.component.active.parent.id=0;var n=s(function(){l.$apply(),s.cancel(n)},0,!1)}}));var n=s(function(){c.adjustStickyHeaders(window),"undefined"!=typeof oxygenVSBInitToggleState&&oxygenVSBInitToggleState(),s.cancel(n)},0,!1);if(void 0!==oxygenVSBInitTabs)var t=s(function(){oxygenVSBInitTabs(),s.cancel(t)},500,!1),o=s(function(){oxygenVSBInitTabs(),s.cancel(o)},1e3,!1);if(l.fixShortcodes)var r=s(function(){l.fixShortcodesFound?l.showNoticeModal("<p>Broken shortcodes found and fixed. See console log.</p>"):l.showNoticeModal("<p>Broken shortcodes NOT found.</p>"),l.$apply(),s.cancel(r)},5e3,!1)}else alert("Error occured while trying to build a page.")},l.findMedia=function(e,n){var t,o=!1;if(angular.forEach(e,function(e){o||(e.options.media&&e.options.media[n]&&e.options.media[n][l.currentState]?o=t=!0:e.children&&(t=l.findMedia(e.children,n)))}),void 0!==t)return t},l.calculateBuiltInOffset=function(e,n,t){var o=0;return n.children&&angular.forEach(n.children,function(e){e.options.oxy_builtin&&o++}),o},l.isBuiltinComponent=function(){var e=l.component.active.id;return l.builtinComponents[e]},l.updateTagsByName=function(e,n,t){angular.forEach(n.children,function(e){e.name==t.from&&l.updateTreeComponentTag(e.id,e,t.to),e.children&&l.updateTagsByName(e.id,e,t)})},l.getComponentActiveSelector=function(e,n,t){t.activeselector=n.options.activeselector},l.canBeChild=function(e,n){return null==l.componentsTemplates||(void 0===l.componentsTemplates[e]||void 0===l.componentsTemplates[e].onlyChild||l.componentsTemplates[e].onlyChild===n)&&(void 0===l.componentsTemplates[n]||void 0===l.componentsTemplates[n].onlyParent||l.componentsTemplates[n].onlyParent===e)},l.isAPIComponent=function(e){return void 0!==l.componentsTemplates&&void 0!==l.componentsTemplates[e]},l.getElementChildren=function(e,n){if(null==e&&(e=l.component.active.id,n=l.component.active.name),"oxy_posts_grid"==n){var t=l.getComponentById(e);if(t)return t.find(".oxy-posts > *").toArray()}if("oxy_gallery"==n){var o=l.getComponentById(e);if(o)return o.find(".oxy-gallery-item").toArray()}if("oxy_dynamic_list"==n){var r=l.getComponentById(e);if(r){var c=r.children().toArray();return c.splice(1,1),c}}var a=l.findComponentItem(l.componentsTree.children,e,l.getComponentItem);return a.children?a.children:[]}}]);
CTFrontendBuilder.controller("ComponentsStates",["$scope","$parentScope",function(s,n){s.currentState="original",s.switchState=function(e,t,o){if(s.log&&console.log("switchState()",e,t,o),s.currentState==e)return!1;null==o&&(o=s.component.active.id),t||(s.showClasses=!1),s.currentState=e,s.highlightSelector(!0,s.selectorToEdit),s.applyModelOptions(),s.showStates=!1,s.outputCSSOptions(o),n.checkTabs(),s.parentScope.activeForEditBgLayer=!1},s.addState=function(){var e=prompt("Pseudo-class name:");null!=e&&(0===e.indexOf(":")&&(e=e.substring(1,e.length)),0===e.indexOf(":")&&(e=e.substring(1,e.length)),s.switchState(e),s.findComponentItem(s.componentsTree.children,s.component.active.id,s.addStateToComponent,e)),s.unsavedChanges()},s.tryDeleteComponentState=function(e,t){if(s.cancelDeleteUndo(),t.stopPropagation(),!confirm('Remove "'+e+'" styles?'))return!1;s.deleteComponentState(e)},s.deleteComponentState=function(e,t){s.log&&console.log("deleteComponentState",e),void 0===t&&(t=s.component.active.id),s.isEditing("class")?s.removeStateFromClass(s.currentClass,e):s.isEditing("custom-selector")?s.removeStateFromCustomSelector(s.selectorToEdit,e):(s.findComponentItem(s.componentsTree.children,t,s.removeStateFromTree,e),s.isEditing("media")?s.component.options[t].media&&s.component.options[t].media[s.currentMedia]&&delete s.component.options[t].media[s.currentMedia]:s.component.options[t][e]&&delete s.component.options[t][e]),s.isCurrentState("original")&&s.outputCSSOptions(t),s.switchState("original"),s.unsavedChanges()},s.removeStateFromTree=function(e,t,o){if(s.log&&console.log("removeStateFromTree()",e,o,t),0==e)return!1;s.isEditing("media")?void 0!==t.options.media[s.currentMedia][o]&&delete t.options.media[s.currentMedia][o]:void 0!==t.options[o]&&delete t.options[o]},s.addStateToComponent=function(e,t,o){if(s.log&&console.log("addStateToComponent()",e,o,t),0==e)return!1;t.options[o]={},s.component.options[e][o]={}},s.removeStateFromClass=function(e,t){s.isEditing("media")?void 0!==s.classes[e].media[s.currentMedia][t]&&delete s.classes[e].media[s.currentMedia][t]:void 0!==s.classes[e][t]&&delete s.classes[e][t]},s.removeStateFromCustomSelector=function(e,t){s.isEditing("media")?void 0!==s.customSelectors[e].media[s.currentMedia][t]&&delete s.customSelectors[e].media[s.currentMedia][t]:void 0!==s.customSelectors[e][t]&&delete s.customSelectors[e][t]},s.isCurrentState=function(e){return s.currentState==e},s.isPseudoElement=function(e){return-1<e.indexOf("before")||-1<e.indexOf("after")||-1<e.indexOf("first-letter")||-1<e.indexOf("first-line")||-1<e.indexOf("selection")},s.getComponentStatesList=function(e){void 0===e&&(e=s.component.active.id);var t,o=["hover","before","after"];if(s.isEditing("id")?t=s.component.options[e]:s.isEditing("class")?t=s.classes[s.currentClass]:s.isEditing("custom-selector")&&(t=s.customSelectors[s.selectorToEdit]),t)for(var n in states=Object.keys(t),states){var i=states[n];"object"==typeof t[i]&&"media"!=i&&"model"!=i&&"original"!=i&&"hover"!=i&&"before"!=i&&"after"!=i&&"id"!=i&&o.push(i)}return o},s.isStateHasOptions=function(e){var t=s.component.active.id;return state=!1,s.isEditing("id")&&(s.isEditing("media")?s.component.options[t].media&&s.component.options[t].media[s.currentMedia]&&(state=s.component.options[t].media[s.currentMedia][e]):state=s.component.options[t][e]),s.isEditing("class")&&s.classes[s.currentClass]&&(s.isEditing("media")?s.classes[s.currentClass].media&&s.classes[s.currentClass].media[s.currentMedia]&&(state=s.classes[s.currentClass].media[s.currentMedia][e]):state=s.classes[s.currentClass][e]),s.isEditing("custom-selector")&&!s.isEditing("class")&&s.customSelectors[s.selectorToEdit]&&(s.isEditing("media")?s.customSelectors[s.selectorToEdit].media&&s.customSelectors[s.selectorToEdit].media[s.currentMedia]&&(state=s.customSelectors[s.selectorToEdit].media[s.currentMedia][e]):state=s.customSelectors[s.selectorToEdit][e]),!(!state||jQuery.isEmptyObject(state))},s.isStatesHasOptions=function(){var e=s.getComponentStatesList();for(var t in e){var o=e[t];if(s.isStateHasOptions(o))return!0}return!1}}]);
CTFrontendBuilder.controller("ControllerNavigation",["$scope","$parentScope","$http","$timeout",function(a,s,e,t){a.openFolders={},a.toggledNodes=[],a.calcDefaultComponentTitle=function(e,o){null==e&&(e=a.findComponentItem(a.componentsTree.children,a.component.active.id,a.getComponentItem));var t=a.niceNames[e.name];return"ct_reusable"==e.name?t+=" (post: "+e.options.view_id+")":"ct_woocommerce"==e.name&&(hookName=a.getWooCommerceHookNiceName(e.options.original.hook_name),t+=hookName),o||(t+=" (#"+e.id+")"),t},a.setComponentCategory=function(e,o,t){var r=a.findComponentItem(a.componentsTree.children,e,a.getComponentItem);r.options.ct_category===o?(delete r.options.ct_category,delete a.component.options[e].ct_category):(r.options.ct_category=o,a.component.options[e].ct_category=o),jQuery(t.target).closest(".ct-more-options-expanded").removeClass("ct-more-options-expanded")},a.openLoadFolder=function(e,o,t,r){a.experimental_components[o].fresh?(t&&angular.element(r.target).addClass("oxygen-small-progress"),a.getComponentsListFromSource(e,o,function(e){t&&(s.tabs.components=[],angular.element(r.target).removeClass("oxygen-small-progress")),a.openFolder(e,o),s.applyMenuAim()})):(t&&(s.tabs.components=[]),a.openFolder(e,o))},a.openFolder=function(e,o){a.closeAllFolders(),a.openFolders[e]=void 0===o||o,"categories-categories"===e&&(void 0!==a.libraryCategories&&null!==a.libraryCategories||(a.libraryCategories={},a.libraryPages={},a.getStuffFromSource(a.processLibraryStuff)));t(function(){jQuery(".oxygen-folder-"+e+" .ct-add-item-button-image",window.parent.document).each(function(){jQuery(this).attr("src",jQuery(this).data("src"))})},0,!1);s.applyMenuAim()},a.processLibraryStuff=function(e){var o=(e=JSON.parse(e)).items,t=(e.key,parseInt(e.next));if(o){var r=o.components;r&&_.each(r,function(e){var o=e.category;void 0===o&&(o="Other"),a.libraryCategories[o]=a.libraryCategories[o]||{},a.libraryCategories[o].slug=btoa(o).replace(/=/g,""),a.libraryCategories[o].contents=a.libraryCategories[o].contents||[],a.libraryCategories[o].contents.push(e)});var n=o.pages;n&&_.each(n,function(e){if("ct_template"!==e.type){var o=e.category;void 0===o&&(o="Other"),a.libraryPages[o]=a.libraryPages[o]||{},a.libraryPages[o].slug=btoa(o).replace(/=/g,""),a.libraryPages[o].contents=a.libraryPages[o].contents||[],a.libraryPages[o].contents.push(e)}})}a.getStuffFromSource(a.processLibraryStuff,t),s.applyMenuAim()},a.closeAllFolders=function(e){a.openFolders={}},a.isShowFolder=function(e){return!!a.openFolders[e]},a.hasOpenFolders=function(){return 0<Object.keys(a.openFolders).length}}]);
CTFrontendBuilder.controller("ControllerColumns",["$scope","$parentScope","$timeout",function(p,d,t){p.columns=[],p.emptyColumnsComponent=[],p.updateColumnsOnAdd=!0,p.setColumns=function(t,e){var n=e.children.length,o=p.columns[t]-n,i=e.children[n-1];if(0<o)for(var c=0;c<o;c++)p.addColumn(t);if(o<0)for(c=0;o<c;c--)p.removeColumn(i.id)},p.updateColumns=function(t){p.findComponentItem(p.componentsTree.children,t,p.setColumns)},p.addColumn=function(t){p.applyComponentDefaultOptions(p.component.id,"ct_column");var e="ct_column",n=p.getActiveComponent(),o=p.getComponentTemplate(e,p.component.id);column={id:p.component.id,name:e},p.findComponentItem(p.componentsTree.children,p.component.active.id,p.insertComponentToTree,column),p.updateColumnsOnAdd(n,o),p.component.id++,p.activateComponent(t,"ct_columns")},p.removeColumn=function(t){if(1==p.columns[p.component.active.parent.id])return alert("You can not delete the last column"),!1;p.columns[p.component.active.parent.id]--;var e=p.getComponentById(t),n=e.parent();p.updateColumnsOnRemove(n,e),p.findParentComponentItem(p.componentsTree,t,p.cutComponentFromTree)},p.updateColumnsOnRemove=function(t,e){p.log&&console.log("updateColumnsOnRemove()");var n=jQuery(t).children(".ct-div-block"),o="ct_div_block";if(0<n.length){var i=n.length-1,c=e[0].getAttribute("ng-attr-component-id"),l=parseFloat(p.getOption("width",c));e.remove();var a=!1;if(angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=parseFloat(p.getOption("width",e));if(!isNaN(n)){var o={};p.findComponentItem(p.componentsTree.children,e,p.getComponentActiveSelector,o),o.activeselector&&(a=!0)}}),a)return!1;angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=((n=parseFloat(p.getOption("width",e)))+l/i).toFixed(2);p.setOptionModel("width",n,e,o)}),p.cleanInsert(t)}p.checkColumnsWidthSum(jQuery(t).children(".ct-div-block"),o)},p.updateColumnsOnChange=function(n,t){if(!p.isEditing("class")){var e=p.getOption("width",n),o=t-parseFloat(e),i=p.getComponentById(n),c=i.parent(),l=c[0].querySelectorAll(".ct-column");if(!(100<parseFloat(e)||parseFloat(e)<0||""===e||isNaN(parseFloat(e)))){if(d.isActiveName("ct_div_block")){if(!d.isActiveParentName("ct_columns")&&!d.isActiveParentName("ct_new_columns"))return!1;l=jQuery(c).children(".ct-div-block"),componentName="ct_div_block"}else componentName="ct_column";p.log&&console.log("updateColumnsOnChange()",t,e);var a=i.next();if(a[0]||(a=i.prev()),!a[0])return!1;var r=a[0].getAttribute("ng-attr-component-id"),m=parseFloat(p.getOption("width",r));if(!isNaN(m)){if(o<0)if(m>Math.abs(o)){var u=(m+o).toFixed(2);p.setOptionModel("width",u,r,componentName)}else if(0<l.length){u=((100-e)/(l.length-1)).toFixed(2);angular.forEach(l,function(t){var e=t.getAttribute("ng-attr-component-id");e!=n&&p.setOptionModel("width",u,e,componentName)})}if(0<o){u=(m+o).toFixed(2);p.setOptionModel("width",u,r,componentName)}p.checkColumnsWidthSum(l,componentName,n)}}}},p.updateColumnsOnAdd=function(t,e){p.log&&console.log("updateColumnsOnAdd()");var n=t[0].querySelectorAll(".ct-column");if(0<n.length){var o=n.length,i=(angular.element(n[0]).parent()[0].offsetWidth,(100/(o+1)).toFixed(2)),c=!1;if(angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=parseFloat(p.getOption("width",e));if(!isNaN(n)){var o={};p.findComponentItem(p.componentsTree.children,e,p.getComponentActiveSelector,o),o.activeselector&&(c=!0)}}),c)return!1;angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=parseFloat(p.getOption("width",e));n=((100-i)/100*n).toFixed(2);p.setOptionModel("width",n,e,"ct_column")}),p.setOptionModel("width",i,p.component.id,"ct_column")}p.getInnerWrap(t).append(e),p.cleanInsert(t),p.checkColumnsWidthSum(t[0].querySelectorAll(".ct-column"))},p.checkColumnsWidthSum=function(t,e,n){if(void 0!==t&&!p.isEditing("class")&&(null==e&&(e="ct_column"),p.log&&console.log("checkColumnsWidthSum()",t,e),0<t.length)){var o=0;angular.forEach(t,function(t){var e;e=t.options?t.id:t.getAttribute("ng-attr-component-id");var n=parseFloat(p.getOption("width",e));isNaN(n)||(o+=n)});var i,c=parseFloat(100-o).toFixed(2);t[0]&&t[0].name==e?n==(i=jQuery(t).last()[0].id)&&(i=jQuery(t).last().prev()[0].id):n==(i=jQuery(t).last()[0].getAttribute("ng-attr-component-id"))&&(i=jQuery(t).last().prev()[0].getAttribute("ng-attr-component-id"));var l=parseFloat(p.getOption("width",i)),a=parseFloat(l)+parseFloat(c);if(isNaN(a))return;p.setOptionModel("width",a.toFixed(2),i,e)}},p.checkEmptyColumns=function(t){if(p.emptyColumnsComponent[t]=!1,p.findComponentItem(p.componentsTree.children,t,p.checkEmptyColumnsCallback),!p.emptyColumnsComponent[t])return"ct-columns-empty"},p.checkEmptyColumnsCallback=function(t,e,n){angular.forEach(e.children,function(t){t.children&&(p.emptyColumnsComponent[e.id]=!0)})}}]);
CTFrontendBuilder.controller("ControllerAJAX",["$scope","$parentScope","$http","$timeout",function(x,h,v,C){x.postsData=[],x.showErrorModal=function(e,t,o,a){var n="";n=e&&0<e?("string"==typeof t?"<h4>"+t+"</h4>":"")+"<p><strong>"+("string"==typeof o?o:"")+" "+e+"</strong></p><p>Your server returned a "+e+" error for the request to "+a+".</p><p><a href='http://oxygenbuilder.com/documentation/troubleshooting/troubleshooting-guide/' style='text-decoration: underline; color: #fff;' target='_blank'>Troubleshooting Guide &raquo;</a></p>":("string"==typeof t?"<h4>"+t+"</h4>":"")+"<p><strong>"+("string"==typeof o?o:"")+"</strong></p>",x.showNoticeModal("<div>"+n+"</div>")},x.savePage=function(n){if(x.haveNotRegisteredElements())x.showNoticeModal("<div>This design contains elements registered by another plugin that is no longer active. Please re-activate the appropriate plugins or remove the missing elements before saving.</div>","ct-notice");else{n||h.showLoadingOverlay("savePage()"),h.disableContentEdit();var e={classes:x.classes,custom_selectors:x.customSelectors,style_sets:x.styleSets,style_folders:x.styleFolders,style_sheets:x.styleSheets,page_settings:x.pageSettingsMeta,global_settings:x.globalSettings,easy_posts_templates:x.easyPostsCustomTemplates,comments_list_templates:x.commentsListCustomTemplates,typekit_fonts:x.typeKitFonts,global_colors:x.globalColorSets,element_presets:x.elementPresets,preview:(x.previewType,x.template.postData.permalink),codemirror_theme:x.globalCodeMirrorTheme,codemirror_wrap:x.globalCodeMirrorWrap};x.googleFontsCache||(e.google_fonts_cache=x.googleFontsList),angular.forEach(x.activeSelectors,function(e,t){x.skipChanges=!0,x.findComponentItem(x.componentsTree.children,t,x.updateComponentActiveSelector,e)}),x.watchIntervalCallback(),x.skipChanges=!1;var o={params:e,tree:x.componentsTree};o=angular.toJson(o),e={action:"ct_save_components_tree",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};(jQuery("body").hasClass("ct_inner")||jQuery("body",window.parent.document).hasClass("ct_inner"))&&(e.ct_inner=!0),v({url:x.getAJAXRequestURL(),method:"POST",params:e,data:o,transformResponse:!1}).then(function(t){try{if(n)0!=(t=JSON.parse(o)).post_saved&&x.allSaved();else 0===(t=JSON.parse(t.data))?x.showErrorModal(0,"YOUR PAGE WAS NOT SAVED BECAUSE YOU ARE NOT LOGGED IN. Open a new browser tab and log back in to WordPress. Then attempt to save the page again."):0==t.post_saved?(console.log(o),x.showErrorModal(0,"Error occurred while saving. Please contact support.")):x.allSaved(),h.hideLoadingOverlay("savePage()")}catch(e){console.log(o),console.log(e),n||x.showErrorModal(t.status,"Error occurred while saving",e)}}).catch(function(e,t,o,a){console.log(e,t),n||h.hideLoadingOverlay("savePage()")}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while saving",e.statusText,e.config.url)})}},x.updateComponentActiveSelector=function(e,t,o){t&&t.options&&(t.options.activeselector=o)},x.saveComponentAsView=function(o,e,a){var t={action:"ct_save_component_as_view",name:x.componentizeOptions.name,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,block:a},n=a?"Block":"Re-usable part";if(e.constructor===Array)var r=e;else r=[e];v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:t,data:{id:0,name:"root",depth:0,children:r}}).then(function(e){if(h.hideLoadingOverlay("saveComponentAsView()"),0!=e.data){var t=a?"Manage Blocks in the WordPress admin at Oxygen &gt; Block Library.":"";x.showNoticeModal("<div>"+n+" '"+x.componentizeOptions.name+"' created. "+t+"</div>","ct-notice"),a||x.replaceReusablePart(o,e.data)}else x.showErrorModal(0,'Error occurred while saving "'+n+'".')}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,'Error occurred while saving "'+n+'".',e.statusText,e.config.url)})},x.loadComponentsTree=function(o,a,n,r){x.log&&console.log("loadComponentsTree()",a,n,r),h.showLoadingOverlay("loadComponentsTree()"),void 0===a&&(a=CtBuilderAjax.postId);var e={action:"ct_get_components_tree",id:a,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};jQuery("body").hasClass("ct_inner")&&(e.ct_inner=!0),v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:e,transformResponse:!1}).then(function(t){try{t=JSON.parse(t.data);if(o(t,a,n,r),t.notRegisteredShortcodes){var e=Object.values(t.notRegisteredShortcodes);x.showErrorModal(0,"Shortcodes present in design but not registered in WordPress: <br/>"+e.join(", ")+". <br/><br/>Saving now will result in this design breaking. Please re-activate the plugins that supply the shortcodes listed above before saving this design.")}}catch(e){console.log(t.data,e),x.showErrorModal(0,"Error occurred while loading post: "+a,e)}h.hideLoadingOverlay("loadComponentsTree()")}).catch(function(e,t,o,a){console.log(e.data,t)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while loading post: "+a,e.statusText,e.config.url)})},x.renderInnerContent=function(a,e){var t=CtBuilderAjax.permalink,o={};t="term"===x.previewType?(o.term=x.template.postData.term,x.template.postData&&x.template.postData.permalink?x.template.postData.permalink:CtBuilderAjax.ajaxUrl):(o.post=x.template.postData,x.template.postData&&x.template.postData.permalink?o.post.permalink:CtBuilderAjax.ajaxUrl);var n={action:"ct_render_innercontent",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(t),method:"POST",params:n,transformResponse:!1}).then(function(e){if(0!==parseInt(e.data)){var t=x.getComponentById(a);t.html();var o=angular.element("<div>");o.html(e.data),t.append(o),x.adjustResizeBox()}}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while rendering innercontent",e.statusText,e.config.url)})},x.evalCondition=function(r){var e;if(void 0===r&&(r=x.component.active.id),0<(e=x.getComponentById(r).closest(".oxy-dynamic-list")).length){var t=e.attr("ng-attr-component-id");x.dynamicListAction(t,r)}else if(x.component.options[r].original&&x.component.options[r].original.conditions&&0<x.component.options[r].original.conditions.length){var o=CtBuilderAjax.permalink,a={};o="term"===x.previewType?(a.term=x.template.postData.term,x.template.postData&&x.template.postData.permalink?x.template.postData.permalink:CtBuilderAjax.permalink):(a.post=x.template.postData,x.template.postData&&x.template.postData.permalink?a.post.permalink:CtBuilderAjax.permalink);var n={action:"ct_eval_condition",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(o),method:"POST",params:n,data:JSON.stringify(x.component.options[r]),transformResponse:!1}).then(function(e,t,o,a){var n=JSON.parse(e.data);void 0!==n.result&&x.setOptionModel("conditionsresult",n.result,r,x.component.options[r].name)}).catch(function(e,t,o,a){console.log(e.data,t),x.adjustResizeBox()}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while evaluation condition",e.statusText,e.config.url)})}else delete iframeScope.component.options[r].model.conditionsresult},x.renderCustomAttributeDynamicData=function(s,i,l){var e=CtBuilderAjax.permalink;x.template.postData&&x.template.postData.permalink&&(e=x.template.postData.permalink);var d=i.match(/\[oxygen[^\]]*\]/gi),c=l.match(/\[oxygen[^\]]*\]/gi),t={action:"oxy_render_attribute_dyanmic_data",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};if(d)var o=i;else o=l;v({url:x.stripURLProtocol(e),method:"POST",params:t,data:o,transformResponse:!1}).then(function(e,t,o,a){var n=e.data;(d&&c&&x.renderCustomAttributeDynamicData(s,n,l),d&&!c)&&((r=x.getComponentById(s)).attr&&(RegExp("[^a-z-_]+","gi").test(n)?x.showNoticeModal("<div>"+x.component.options[s].nicename+" Custom Attribute rendered data '"+n+"' is not a valid attribute <b>name</b></div>"):r.attr(n,l),console.log(n,l)));if(!d&&c){var r;if(RegExp("[^a-z-_]+","gi").test(i))return void x.showNoticeModal("<div>"+x.component.options[s].nicename+" Custom Attribute rendered data '"+i+"' is not a valid attribute <b>name</b></div>");(r=x.getComponentById(s)).attr&&(r.attr(i,x.replaceSpecialChars(n)),console.log(i,n))}}).catch(function(e,t,o,a){console.log(e.data,t)})},x.renderShortcode=function(p,e,u,m){if(x.component.options[p]&&x.component.options[p].original&&"true"==x.component.options[p].original.dont_render){x.getComponentById(p).html("")}else{var g=CtBuilderAjax.permalink,h={};g="term"===x.previewType?(h.term=x.template.postData.term,x.template.postData&&x.template.postData.permalink?x.template.postData.permalink:CtBuilderAjax.permalink):(h.post=x.template.postData,x.template.postData&&x.template.postData.permalink?h.post.permalink:CtBuilderAjax.permalink);var y,f={action:"ct_render_shortcode",shortcode_name:e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce},t=x.getComponentById(p),o=!1,a=[];if(t)for(var n=t.parent().closest(".oxy-dynamic-list");n&&0<n.length;)o=parseInt(n.attr("ng-attr-component-id")),x.component.options[o].original.use_acf_repeater?(n=n.parent().closest(".oxy-dynamic-list"),a.push(x.component.options[o].original.acf_repeater)):x.component.options[o].original.use_metabox_clonable_group?(n=n.parent().closest(".oxy-dynamic-list"),a.push(x.component.options[o].original.metabox_group)):(o=parseInt(n.attr("ng-attr-component-id")),n=!1);if(o&&m){var r=x.component.options[o];m.queryOptions={query_args:r.original.query_args,wp_query:x.component.options[o].original.use_acf_repeater||x.component.options[o].original.use_metabox_clonable_group?"default":r.original.wp_query,query_post_ids:r.original.query_post_ids,query_post_types:r.original.query_post_types,query_taxonomies_any:r.original.query_taxonomies_any,query_taxonomies_all:r.original.query_taxonomies_all,query_authors:r.original.query_authors,query_order:r.original.query_order,query_order_by:r.original.query_order_by,query_all_posts:r.original.query_all_posts,query_ignore_sticky_posts:r.original.query_ignore_sticky_posts,query_count:r.original.query_count,wp_query_advanced:r.original.wp_query_advanced},y=JSON.stringify(m.queryOptions),0<a.length&&(x.component.options[o].original.use_acf_repeater&&(m.acfRepeaterFields=a.reverse()),x.component.options[o].original.use_metabox_clonable_group&&(m.metaboxGroupFields=a.reverse()),y+=JSON.stringify(m.repeaterFields))}if(u&&(x.oxygenShortcodesCache=x.oxygenShortcodesCache||[],m&&m.original&&m.original.full_shortcode&&-1<m.original.full_shortcode.indexOf("[oxygen"))){var s=_.findWhere(x.oxygenShortcodesCache,{id:f.post_id,url:g,full_shortcode:m.original.full_shortcode,queryOptions:y});if(s)return void u(m.original.full_shortcode,s.result,s.scripts)}v({url:x.stripURLProtocol(g),method:"POST",params:f,data:m?JSON.stringify(m):JSON.stringify(x.component.options[p]),transformResponse:!1}).then(function(e,t,o,a){if(e.data||""===e.data){var n=x.getComponentById(p),r=angular.element("<div>");if(r.html(e.data),u){x.oxygenShortcodesCache=x.oxygenShortcodesCache||[];var s=r.find("#ct-shortcode-links-scripts").html(),i=r.find("link, script");x.oxygenShortcodesCache.push({id:f.post_id,url:g,full_shortcode:m.original.full_shortcode,queryOptions:y,result:s,scripts:i}),u(m.original.full_shortcode,s,i)}else{n.html(r.find("#ct-shortcode-links-scripts").html());var l=n.closest("body");l.find('link[data-forId="'+p+'"], script[data-forId="'+p+'"]').remove(),r.find("link, script").each(function(){l.append(angular.element(this).attr("data-forId",p))});var d=C(function(){jQuery.ready(),C.cancel(d)},1e3,!1)}var c=new Event("oxygen-ajax-element-loaded");document.dispatchEvent(c)}else console.log(h,t),u&&u(m.original.full_shortcode,""),x.showErrorModal(0,"Error occurred while rendering shortcode");x.adjustResizeBox()}).catch(function(e,t,o,a){console.log(e.data,t),x.adjustResizeBox()}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while rendering shortcode",e.statusText,e.config.url)})}},x.getRepeaterOptions=function(e){var t,o=x.getComponentById(e),a=!1,n=[];if(o)for(var r=o.parent().closest(".oxy-dynamic-list");r&&0<r.length;)a=parseInt(r.attr("ng-attr-component-id")),x.component.options[a].original.use_acf_repeater?(r=r.parent().closest(".oxy-dynamic-list"),n.push(x.component.options[a].original.acf_repeater)):x.component.options[a].original.use_metabox_clonable_group?(r=r.parent().closest(".oxy-dynamic-list"),n.push(x.component.options[a].original.metabox_group)):(a=parseInt(r.attr("ng-attr-component-id")),r=!1);if(a){var s=x.component.options[a];t={query_args:s.original.query_args,wp_query:x.component.options[a].original.use_acf_repeater||x.component.options[a].original.use_metabox_clonable_group?"default":s.original.wp_query,query_post_ids:s.original.query_post_ids,query_post_types:s.original.query_post_types,query_taxonomies_any:s.original.query_taxonomies_any,query_taxonomies_all:s.original.query_taxonomies_all,query_authors:s.original.query_authors,query_order:s.original.query_order,query_order_by:s.original.query_order_by,query_all_posts:s.original.query_all_posts,query_ignore_sticky_posts:s.original.query_ignore_sticky_posts,query_count:s.original.query_count,wp_query_advanced:s.original.wp_query_advanced},t=JSON.stringify(t)}return t},x.evalConditionsViaAjax=function(e,n){var t=CtBuilderAjax.permalink,o={};t="term"===x.previewType?(o.term=x.template.postData.term,x.template.postData&&x.template.postData.permalink?x.template.postData.permalink:CtBuilderAjax.permalink):(o.post=x.template.postData,x.template.postData&&x.template.postData.permalink?o.post.permalink:CtBuilderAjax.permalink);var a={action:"ct_eval_conditions",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(t),method:"POST",params:a,data:JSON.stringify(e),transformResponse:!1}).then(function(e,t,o,a){e=JSON.parse(e.data),n&&n(e)}).catch(function(e,t,o,a){console.log(e.data,t)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while evaluating conditions",e.statusText,e.config.url)})},x.removeChromeModal=function(e){if(e.stopPropagation(),e.preventDefault(),jQuery(e.target).hasClass("ct-chrome-modal-bg")||jQuery(e.target).hasClass("ct-chrome-modal-hide")){var t={action:"ct_remove_chrome_modal",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:t,transformResponse:!1}).then(function(e){jQuery(".ct-chrome-modal-bg").remove()}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while dismissing the notice",e.statusText,e.config.url)})}},x.renderDataComponent=function(s,e){var t=CtBuilderAjax.permalink,o={};t="term"===x.previewType?(o.term=x.template.postData.term,x.template.postData&&x.template.postData.permalink?x.template.postData.permalink:CtBuilderAjax.ajaxUrl):(o.post=x.template.postData,x.template.postData&&x.template.postData.permalink?o.post.permalink:CtBuilderAjax.ajaxUrl);var i={action:"ct_render_data_component",component_name:e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(t),method:"POST",params:i,data:JSON.stringify(x.component.options[s]),transformResponse:!1}).then(function(e,t,o,a){var n=e.data;if(n||""===n){var r=x.getComponentById(s);switch(i.component_name){case"ct_data_featured_image":case"ct_data_author_avatar":n=JSON.parse(n),r[0].src=n.src;break;default:r.html(n)}}else console.log(n,e.status),x.showErrorModal(0,"Error occurred while rendering the component")}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while rendering the component",e.statusText,e.config.url)})},x.renderWidget=function(r,s){if("true"!=x.component.options[r].original.dont_render||s){x.log&&console.log("renderWidget()",r,s);var e=JSON.stringify({options:x.component.options[r]}),t=CtBuilderAjax.ajaxUrl,o={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};s?(o.action="ct_render_widget_form",h.cleanInsertUI("<span></span>","#ct-dialog-widget-content"),h.showSidebarLoader=!0):(o.action="ct_render_widget",h.showWidgetOverlay(r),t=x.getAJAXRequestURL()),v({url:x.stripURLProtocol(t),method:"POST",params:o,data:e,transformResponse:!1}).then(function(e){var t=x.getComponentById(r),o=e.data;if(o)if(s){var a=C(function(){h.cleanInsertUI('<form id="ct-widget-form" class="open">'+o+"</form>","#ct-dialog-widget-content"),window.parent.jQuery(window.parent.document).trigger("widget-added",[jQuery("#ct-widget-form",window.parent.document)]),C.cancel(a)},0,!1);h.showSidebarLoader=!1}else{void 0!==window.google&&void 0!==window.google.maps&&"sow-google-map"==x.component.options[r].id.id_base&&delete window.google.maps,t.html(o);a=C(function(){jQuery.ready(),C.cancel(a)},1e3,!1);h.hideWidgetOverlay(r),x.adjustResizeBox()}o&&""!==t.text()||s||t.html("<div class='ct-blank-widget'>Widget Content</div>");var n=new Event("oxygen-ajax-element-loaded");document.dispatchEvent(n)}).catch(function(e){x.getComponentById(r).html("<div class='ct-blank-widget'>Widget Content<div>")})}else{x.getComponentById(r).html("")}},x.renderSidebar=function(n,e){var t=JSON.stringify({options:x.component.options[n]}),o={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:"ct_render_sidebar"};v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:o,data:t,transformResponse:!1}).then(function(e){var t=x.getComponentById(n),o=e.data;o&&t.html(o),o&&""!==t.text()||t.html("<div class='ct-blank-widget'>Sidebar Content</div>");var a=new Event("oxygen-ajax-element-loaded");document.dispatchEvent(a)}).catch(function(e){x.getComponentById(n).html("<div class='ct-blank-widget'>Sidebar Content<div>")})},x.renderNavMenu=function(o){void 0===o&&(o=x.component.active.id),x.log&&console.log("renderNavMenu()",o),h.showWidgetOverlay(o);var e=JSON.stringify({options:x.component.options[o]}),t=x.getAJAXRequestURL();params={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:"oxy_render_nav_menu"},v({url:x.stripURLProtocol(t),method:"POST",params:params,data:e,transformResponse:!1}).then(function(e){var t=x.getComponentById(o);e.data?t.html(e.data):t.html("No menu found"),x.adjustResizeBox(),h.hideWidgetOverlay(o)}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while rendering menu",e.statusText,e.config.url)})},x.getDynamicDataFromQuery=function(o,e,a,n,t,r,s){void 0===o&&(o=x.component.active.id),x.log&&console.log("getDynamicListData()",action,o);var i=CtBuilderAjax.permalink;if(CtBuilderAjax.oxyTemplate&&!CtBuilderAjax.oxyReusable){if(!x.template.postData||!x.template.postData.permalink)return void x.showErrorModal(0,"Permalink not available for the current post/archive. If it is an archive for a custom post type , make sure that the parameter 'has_archive' for the post type is set to true.");i=x.template.postData.permalink+("/"==x.template.postData.permalink.substr(x.template.postData.permalink.length-1)?"":"/")}else CtBuilderAjax.oxyReusable&&CtBuilderAjax.ctSiteUrl&&(i=CtBuilderAjax.ctSiteUrl+"/");var l={options:x.component.options[o],models:e};if(t){var d=x.component.options[t];l.queryOptions={query_args:d.original.query_args,wp_query:d.original.wp_query,query_post_ids:d.original.query_post_ids,query_post_types:d.original.query_post_types,query_taxonomies_any:d.original.query_taxonomies_any,query_taxonomies_all:d.original.query_taxonomies_all,query_authors:d.original.query_authors,query_order:d.original.query_order,query_order_by:d.original.query_order_by,query_all_posts:d.original.query_all_posts,query_ignore_sticky_posts:d.original.query_ignore_sticky_posts,query_count:d.original.query_count,wp_query_advanced:d.original.wp_query_advanced}}r&&0<r.length&&(l.repeaterFields=r.reverse());l=JSON.stringify(l);var c={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:"oxy_get_dynamic_data_query"};h.showWidgetOverlay(o),v({url:x.stripURLProtocol(i),method:"POST",params:c,data:l,transformResponse:!1}).then(function(e){var t=e.data;t?(t=JSON.parse(t),a&&a(t.results,n,t.pagination?t.pagination:null)):component.html("No data received"),h.hideWidgetOverlay(o)}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred",e.statusText,e.config.url)})},x.renderComponentWithAJAX=function(a,n,e){void 0===n&&(n=x.component.active.id);var t=x.getComponentById(n);if(t){var o=t.parents(".oxy-product-builder").attr("ng-attr-component-id");x.log&&console.log("renderComponentWithAJAX()",a,n);var r=x.component.options[n];if(o){var s=x.getOption("oxy-product-builder_product_id",o);r.product_builder_id=s}var i={options:r,component:x.findComponentItem(x.componentsTree.children,n,x.getComponentItem)},l=x.getAJAXRequestURL(),d={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:a},c=x.getComponentById(n),p=!1,u=[];if(c)for(var m=c.parent().closest(".oxy-dynamic-list");m&&0<m.length;)p=parseInt(m.attr("ng-attr-component-id")),x.component.options[p].original.use_acf_repeater?(m=m.parent().closest(".oxy-dynamic-list"),u.push(x.component.options[p].original.acf_repeater)):x.component.options[p].original.use_metabox_clonable_group?(m=m.parent().closest(".oxy-dynamic-list"),u.push(x.component.options[p].original.metabox_group)):(p=parseInt(m.attr("ng-attr-component-id")),m=!1);if(p){var g=x.component.options[p];i.queryOptions={query_args:g.original.query_args,wp_query:x.component.options[p].original.use_acf_repeater||x.component.options[p].original.use_metabox_clonable_group?"default":g.original.wp_query,query_post_ids:g.original.query_post_ids,query_post_types:g.original.query_post_types,query_taxonomies_any:g.original.query_taxonomies_any,query_taxonomies_all:g.original.query_taxonomies_all,query_authors:g.original.query_authors,query_order:g.original.query_order,query_order_by:g.original.query_order_by,query_all_posts:g.original.query_all_posts,query_ignore_sticky_posts:g.original.query_ignore_sticky_posts,query_count:g.original.query_count,wp_query_advanced:g.original.wp_query_advanced},0<u.length&&(i.repeaterFields=u.reverse())}void 0!==e&&(i.repeaterListIndex=e),h.showWidgetOverlay(n),"oxy_render_easy_posts"==a&&jQuery(".oxygen-easy-posts-ajax-styles-"+n).remove(),v({url:x.stripURLProtocol(l),method:"POST",params:d,data:JSON.stringify(i),transformResponse:!1}).then(function(e){var t=x.getComponentById(n);if(t)if(e.data){t.removeClass("oxy-ajax-loading");var o=new Event("oxygen-ajax-element-loaded");document.dispatchEvent(o),t.html(e.data),"oxy_render_easy_posts"==a&&t.find(".oxygen-easy-posts-ajax-styles-"+n).prependTo("head"),x.outputCSSOptions()}else t.html("No data received");else x.showNoticeModal("<div>"+x.component.options[n].nicename+" loading error.</div>");x.adjustResizeBox(),h.hideWidgetOverlay(n)}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while rendering the component",e.statusText,e.config.url)})}},x.loadSVGIconSets=function(){var e={action:"ct_get_svg_icon_sets",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:e,transformResponse:!1}).then(function(e){try{var t=JSON.parse(e.data);x.SVGSets=t,x.currentSVGSet=Object.keys(t)[0]}catch(e){console.log(data),console.log(e),x.showErrorModal(0,"Error occurred while loading SVG icons")}}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while loading SVG icons",e.statusText,e.config.url)})},x.loadAttachmentSizes=function(e,a,n){var t={action:"ct_get_attachment_sizes",oxy_post_id:CtBuilderAjax.postId,oxy_attachment_id:e,nonce:CtBuilderAjax.nonce},o=x.getRepeaterOptions(n);v({url:x.getAJAXRequestURL(),method:"POST",params:t,data:o,transformResponse:!1}).then(function(e){var t=e.data;try{if((t=JSON.parse(t)).error){var o=x.component.options[n].nicename||"ID: "+n;x.showErrorModal(0,t.error+" "+o)}else a(t)}catch(e){console.log(t),console.log(e),x.showErrorModal(0,"Error occurred while loading attachment sizes")}}).catch(function(e){console.log(e.data,e.status)}).then(null,function(e){x.showErrorModal(e.status,"Error occurred while loading attachment sizes",e.statusText,e.config.url)})},x.loadTemplateData=function(e,t,o){o||h.showLoadingOverlay("loadTemplateData()");var a={action:"ct_get_template_data",template_id:CtBuilderAjax.postId,preview_post_id:t,preview_type:x.previewType,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:a,transformResponse:!1}).then(function(t){try{t=JSON.parse(t.data),e(t)}catch(e){console.log(t.data),console.log(e),x.showErrorModal(0,"Failed to load template data",e)}h.hideLoadingOverlay("loadTemplateData()")}).catch(function(e){console.log(e.data,e.status),h.hideLoadingOverlay("loadTemplateData()")}).then(null,function(e){x.showErrorModal(e.status,"Failed to load template data",e.statusText,e.config.url)})},x.loadComponentsTemplates=function(){h.showLoadingOverlay("loadComponentsTemplates()");var e={action:"oxy_get_components_templates",nonce:CtBuilderAjax.nonce,post_id:CtBuilderAjax.postId};v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:e,transformResponse:!1}).then(function(t){try{t=JSON.parse(t.data);x.componentsTemplates=t}catch(e){console.log(t.data),console.log(e),x.showErrorModal(0,"Failed to load templates",e),h.hideLoadingOverlay("loadComponentsTemplates()")}if(CtBuilderAjax.ctTemplate)x.loadTemplateData(x.setTemplateData,null,!0);else if(h.hideLoadingOverlay("loadComponentsTemplates()"),x.componentsTree.children){x.buildComponentsFromTree(x.componentsTree.children);!function e(t){t++,setTimeout(function(){0<x.buildingOxygenTreeCounter&&t<180?e(t):(x.classesCached=!1,x.outputCSSOptions(),x.component.id++),0<x.buildingOxygenTreeCounter&&180<=t&&console.log("Tree building timeout. Styles may not be fully applied and Structure panel is not updated.")},500)}(0)}x.waitOxygenTree(function(){x.$emit("oxygen_components_loaded",!0)})}).catch(function(e){console.log(e),CtBuilderAjax.ctTemplate?x.loadTemplateData(x.setTemplateData,null,!0):(h.hideLoadingOverlay("loadComponentsTemplates()"),x.componentsTree.children&&(x.buildComponentsFromTree(x.componentsTree.children),x.component.id++)),x.waitOxygenTree(function(){x.$emit("oxygen_components_loaded",!1)})}).then(null,function(e){var t=e.config?e.config.url:"";x.showErrorModal(e.status,"Failed to load templates",e.statusText,t)})},x.loadPostData=function(t,o,a){if(x.postsData[o])t(x.postsData[o],a);else{h.showLoadingOverlay("loadPostData()");var e={action:"ct_get_post_data",id:o,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,preview_post_id:x.template.postData.ID};v({url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),method:"POST",params:e,transformResponse:!1}).then(function(e){try{e=JSON.parse(e.data),t(e,a),x.postsData[o]=e}catch(e){console.log(data),console.log(e),x.showErrorModal(0,"Failed to load post data. ID: "+o,e)}h.hideLoadingOverlay("loadPostData()")}).catch(function(e){console.log(e.data,e.status),h.hideLoadingOverlay("loadPostData()")}).then(null,function(e){x.showErrorModal(e.status,"Failed to load post data. ID: "+o,e.statusText,e.config.url)})}},x.execCode=function(e,o,a){var t=x.getAJAXRequestURL(),n={code:x.b64EncodeUnicode(e),query:CtBuilderAjax.query};n=JSON.stringify(n),v({method:"POST",transformResponse:!1,url:x.stripURLProtocol(t),params:{action:"ct_exec_code",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce},data:n}).then(function(e){var t=e.data;0===t.trim().length&&(t=""),-1<t.indexOf("<html")&&(t=jQuery("<div>").append(t).find(".ct-code-block").html()),(t=jQuery("<div>").append(t)).find("script").remove(),t=t.html(),a(t,o)}).catch(function(e){console.log(e.data,e.status)})},x.getStuffFromSource=function(t,e){void 0===e&&setTimeout(function(){angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).addClass("oxygen-small-progress")},100);var o={action:"ct_new_style_api_call",call_type:"get_stuff_from_source",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};if(0===parseInt(e))return angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress"),!1;null!=e&&(o.next=e),v({method:"GET",transformResponse:!1,url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),params:o}).then(function(e){t(e.data)}).catch(function(e){console.log(e.data,e.status)})},x.getComponentsListFromSource=function(r,s,i){setTimeout(function(){angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).addClass("oxygen-small-progress")},200),v({method:"GET",transformResponse:!1,url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),params:{action:"ct_new_style_api_call",call_type:"get_items_from_source",name:s,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce}}).then(function(e){var t=!1,o=e.data;if(o&&""!=o.trim()||(t=!0),t||(o=JSON.parse(o)),t||!o.components)return x.showErrorModal(0,"Items not loaded. "+(o.error?o.error:"Try again!")),void angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress");if(angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress"),delete x.experimental_components[s].fresh,x.experimental_components[s].items={},_.each(o.components,function(e){var t=e.category;t&&(x.experimental_components[s].items[t]=x.experimental_components[s].items[t]||{},x.experimental_components[s].items[t].slug=btoa(t).replace(/=/g,""),x.experimental_components[s].items[t].contents=x.experimental_components[s].items[t].contents||[],x.experimental_components[s].items[t].contents.push(e))}),CtBuilderAjax.freeVersion&&_.each(x.experimental_components[s].items,function(e,t){var o=Math.round(e.contents.length/10);o<1?o=1:4<o&&(o=4);for(var a=0;a<e.contents.length;a++)e.contents[a].firstFew=a<o?1:0}),x.experimental_components[s].pages=x.experimental_components[s].pages||[],x.experimental_components[s].templates=x.experimental_components[s].templates||[],_.each(o.pages,function(e){"ct_template"===e.type?x.experimental_components[s].templates.push(e):x.experimental_components[s].pages.push(e)}),CtBuilderAjax.freeVersion){var a=Math.round(x.experimental_components[s].pages.length/10);a<1?a=1:4<a&&(a=4);for(var n=0;n<x.experimental_components[s].pages.length;n++)x.experimental_components[s].pages[n].firstFew=n<a?1:0;(a=Math.round(x.experimental_components[s].templates.length/10))<1?a=1:4<a&&(a=4);for(n=0;n<x.experimental_components[s].templates.length;n++)x.experimental_components[s].templates[n].firstFew=n<a?1:0}i(r),angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress")}).catch(function(e){console.log(e.data,e.status),angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress")})},x.getPageFromSource=function(e,t,o,a){h.showLoadingOverlay("getPageFromSource()"),v({method:"GET",transformResponse:!1,url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),params:{action:"ct_new_style_api_call",nonce:CtBuilderAjax.nonce,call_type:"get_page_from_source",id:e,post_id:CtBuilderAjax.postId,source:btoa(t)}}).then(function(e){a(e.data,t,o),h.hideLoadingOverlay()}).catch(function(e){h.hideLoadingOverlay(),console.log(e.data,e.status)})},x.getComponentFromSource=function(e,t,o,a,n){h.showLoadingOverlay("getComponentFromSource()"),v({method:"GET",transformResponse:!1,url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),params:{action:"ct_new_style_api_call",nonce:CtBuilderAjax.nonce,post_id:CtBuilderAjax.postId,call_type:"get_component_from_source",id:e,page:a,source:btoa(t)}}).then(function(e){h.hideLoadingOverlay(),n(e.data,!1,t,o)}).catch(function(e){h.hideLoadingOverlay(),console.log(e.data,e.status)})},x.loadedControllers=[],x.loadControlsWithAJAX=function(e){if(!x.loadedControllers[e]){x.loadedControllers[e]=!0,h.showSidebarLoader=!0;var t=CtBuilderAjax.ajaxUrl,o={action:"oxy_load_controls_"+e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({method:"POST",url:x.stripURLProtocol(t),params:o}).then(function(e){e.data&&h.compileInsertUI(e.data,"#oxygen-sidebar-control-panel-basic-styles",0),h.showSidebarLoader=!1}).catch(function(e){console.log(e.data,e.status),h.showSidebarLoader=!1})}},x.loadElementsPresets=function(e){x.elementPresets={},h.showLoadingOverlay("loadElementsPresets()");var t=CtBuilderAjax.ajaxUrl,o={action:"oxy_load_elements_presets",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({method:"POST",url:t,params:o}).then(function(e){e.data?x.elementPresets=e.data:console.log("No default presets loaded"),h.hideLoadingOverlay("loadElementsPresets()")}).catch(function(e){console.log(e.data,e.status),h.hideLoadingOverlay("loadElementsPresets()")})},x.getSoundCloudTrackID=function(e){h.showLoadingOverlay("getSoundCloudTrackID()");var t=CtBuilderAjax.ajaxUrl,o={action:"oxy_get_soundcloud_track_id",soundcloud_url:e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};v({method:"POST",url:x.stripURLProtocol(t),params:o}).then(function(e){e.data?x.setOptionModel("soundcloud_track_id",e.data):x.showErrorModal(0,"Error retrieving SoundCloud Track ID. Please check the URL you specified"),h.hideLoadingOverlay()}).catch(function(e){console.log(e.data,e.status),h.hideLoadingOverlay()})},x.loadConditionsOptions=function(t,e){var o=x.component.active.id,a=iframeScope.component.options[o].model.globalconditions[t].searchValue,n=CtBuilderAjax.ajaxUrl,r={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:e,search_value:a};jQuery(".oxygen-select-box-options",h.oxygenUIElement).css({opacity:"0.5",pointerEvents:"none"}),v({method:"POST",url:x.stripURLProtocol(n),params:r}).then(function(e){x.updateConditionOptions(t,e.data,a),jQuery(".oxygen-select-box-options",h.oxygenUIElement).css({opacity:"",pointerEvents:""})}).catch(function(e){console.log(e.data,e.status),jQuery(".oxygen-select-box-options",h.oxygenUIElement).css({opacity:"",pointerEvents:""})})},x.getAJAXRequestURL=function(){var e=CtBuilderAjax.permalink;return CtBuilderAjax.oxyTemplate&&(e=x.template.postData&&x.template.postData.permalink?x.addTrailingSlash(x.template.postData.permalink):CtBuilderAjax.oxyReusable?x.addTrailingSlash(CtBuilderAjax.ctSiteUrl)+"?post_id="+CtBuilderAjax.postId:CtBuilderAjax.ajaxUrl),e=e.replace("https:","").replace("http:","")},x.stripURLProtocol=function(e){return e.replace("https:","").replace("http:","")},x.addTrailingSlash=function(e){return(e=e.replace(/\/+$/,""))+"/"},x.setPostEditLockTransient=function(e){var t={action:"set_oxygen_edit_post_lock_transient",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};void 0!==e&&!1===e&&(t.action="unset_oxygen_edit_post_lock_transient"),v({method:"POST",url:x.stripURLProtocol(CtBuilderAjax.ajaxUrl),params:t}).catch(function(e,t,o,a){console.log(e,t)})},setInterval(function(){x.setPostEditLockTransient()},1e4)}]);
CTFrontendBuilder.controller("ControllerHeader",["$scope","$timeout",function(t,e){t.emptyHeaderRowComponent=[],t.checkEmptyHeaderRow=function(e){if(t.emptyHeaderRowComponent[e]=!1,t.findComponentItem(t.componentsTree.children,e,t.checkEmptyHeaderRowCallback),!t.emptyHeaderRowComponent[e])return"oxy-header-row-empty"},t.checkEmptyHeaderRowCallback=function(e,n,o){angular.forEach(n.children,function(e){e.children&&(t.emptyHeaderRowComponent[n.id]=!0)})},t.isLastRow=function(e){void 0===e&&(e=t.component.active.id);var n=t.getComponentById(e);return!!jQuery(n).hasClass("oxy-header-row")&&0===jQuery(n).siblings(".oxy-header-row").length},t.isBuiltIn=function(e){if(void 0===e&&(e=t.component.active.id),t.component.options[e].original&&"true"==t.component.options[e].original.oxy_builtin)return!0},t.isTemplateInnerContent=function(e){if(e&&"ct_inner_content"==e.name&&1e5<=e.id)return!0}}]);
CTFrontendBuilder.controller("ControllerClasses",["$scope","$parentScope","$timeout",function(i,t,s){i.currentClass=!1,i.activeSelectors={},i.componentsClasses=[],i.classes={},i.suggestedClasses=[],i.newcomponentclass={name:""},i.updateTreeComponentClasses=function(e,o,n){n?(index=o.options.classes.indexOf(n),-1<index&&o.options.classes.splice(index,1)):(o.options.classes||(o.options.classes=[]),o.options.classes.push(i.currentClass))},i.setCurrentClass=function(e,o){i.log&&console.log("setCurrentClass()",e),i.switchState("original"),!1!==(i.currentClass=e)&&(i.activeSelectors=i.activeSelectors||{},i.activeSelectors[i.component.active.id]=e),i.showClasses=!1,o||(i.applyModelOptions(),i.outputCSSOptions(i.component.active.id),t.checkTabs())},i.removeComponentClass=function(e,o){if(i.log&&console.log("removeComponentClass()",e,o),i.switchEditToId(),void 0===o&&(o=i.component.active.id),i.componentsClasses[o]?key=i.componentsClasses[o].indexOf(e):key=-1,-1<key){i.componentsClasses[o].splice(key,1);var n=e}i.activeSelectors[o]===e&&(i.activeSelectors[o]=!1,i.switchEditToId()),i.findComponentItem(i.componentsTree.children,o,i.updateTreeComponentClasses,n),i.unsavedChanges();var s=iframeScope.getComponentById(o).closest(".oxy-dynamic-list");0<s.length&&iframeScope.dynamicListAction(s.attr("ng-attr-component-id"),o)},i.tryAddClassToComponent=function(e){i.cancelDeleteUndo();var o=i.newcomponentclass.name;if(void 0!==o&&""!==o.trim()||(o=prompt("Class name:")),null!=o){if(!i.validateClassName(o))return alert("Wrong selector name. Name must begin with an underscore (_), a hyphen (-), or a letter(a–z), followed by any number of hyphens, underscores or letters."),!1;i.addClassToComponent(e,o),i.newcomponentclass.name="";var n=iframeScope.getComponentById(e).closest(".oxy-dynamic-list");0<n.length&&iframeScope.dynamicListAction(n.attr("ng-attr-component-id"),e)}},i.processClassNameInput=function(e,o){if(13===e.keyCode){i.tryAddClassToComponent(o);var n=s(function(){jQuery(".oxygen-select",t.oxygenUIElement).trigger("click"),s.cancel(n)},0,!1)}},i.onSelectorDropdown=function(){t.ctSelectBoxFocus=!0},i.isNotSelectedYet=function(e){return(!i.activeSelectors||void 0===i.activeSelectors[e])&&!!(i.justaddedcomponents&&-1<i.justaddedcomponents.indexOf(e))},i.addClassToComponent=function(e,o,n){i.log&&console.log("addClassToComponent()",e,o),void 0===n&&(n=!0),i.componentsClasses[e]?key=i.componentsClasses[e].indexOf(o):(i.componentsClasses[e]=[],key=-1);var s=!1;if(i.classes[o]||(i.classes[o]={},i.classes[o].original={},s=!0),-1<key)return n&&i.setCurrentClass(o),!1;i.componentsClasses[e].push(o),n&&i.setCurrentClass(o),s&&e==i.component.active.id&&t.isActiveName("ct_div_block")&&t.isActiveParentName("ct_new_columns")&&i.setOptionModel("width-unit","%",e,"ct_div_block"),i.findComponentItem(i.componentsTree.children,e,i.updateTreeComponentClasses),i.unsavedChanges()},i.addClassToComponentSafe=function(e,o){i.currentClass=o,i.addClassToComponent(e,o,!1),i.currentClass=!1},i.isComponentHasClass=function(e,o){return!!i.componentsClasses[e]&&(key=i.componentsClasses[e].indexOf(o),-1<key)},i.isComponentHasClasses=function(e){return void 0===e&&(e=i.component.active.id),!!(i.componentsClasses[e]&&0<i.componentsClasses[e].length)},i.tryDeleteClass=function(e){if(i.cancelDeleteUndo(),!confirm('Delete "'+e+'" from install? (Changes will take effect on Save)'))return!1;i.deleteClass(e)},i.deleteClass=function(s){i.log&&console.log("deleteClass()",s),delete i.classes[s],i.selectorToEdit=!1,i.currentClass=!1,angular.forEach(i.componentsClasses,function(e,o){var n=e.indexOf(s);-1<n&&(e.splice(n,1),i.findComponentItem(i.componentsTree.children,o,i.updateTreeComponentClasses,s))}),-1==i.component.active.id&&i.activateComponent(0,"root"),delete i.cache.classStyles[i.currentClass],i.outputCSSOptions(),i.unsavedChanges()},i.getGlobalConditionsClass=function(e){var o=iframeScope.component.options[e].model.globalConditionsResult;return!1===o&&void 0!==o?" ct_hidden_by_conditional_logic":""},i.getComponentsClasses=function(e,o){var n="ct-component "+o,s=iframeScope.component.options[e].model.conditionsresult;if(1!==s&&void 0!==s&&(n+=" ct_hidden_by_conditional_logic"),n+=i.getGlobalConditionsClass(e),"ct_section"!=o&&"ct_columns"!=o&&"ct_column"!=o&&(n+=" "+o.replace(new RegExp("_","g"),"-")),i.componentsClasses[e]){var t=angular.copy(i.componentsClasses[e]);for(var a in t)if(t.hasOwnProperty(a)){var l=t[a];l&&0<l.indexOf("-tab-active")&&0===l.indexOf("tabs")&&(t[a]=null),l&&0<l.indexOf("-expanded")&&0===l.indexOf("toggle-")&&(t[a]=null)}n+=" "+t.join(" ")}return"ct_svg_icon"==o&&(n+=" ct-"+i.component.options[e].model["icon-id"]),"ct_link"!=o&&"ct_link_text"!=o&&"ct_link_button"!=o||(n+=" ct-links"),"ct_section"==o&&i.component.options[e].model.video_background&&(n+=" oxy-video-background"),"oxy_header"==o&&"yes"==i.component.options[e].model.sticky_header&&(n+=" oxy-sticky-header"),"oxy_header"==o&&i.component.options[e].model["overlay-header-above"]&&"never"!=i.component.options[e].model["overlay-header-above"]&&(n+=" oxy-overlay-header"),"oxy_header_row"==o&&"yes"==i.component.options[e].model.hide_in_sticky&&(n+=" oxygen-hide-in-sticky"),"oxy_header_row"==o&&"yes"==i.component.options[e].model.show_in_sticky_only&&(n+=" oxygen-show-in-sticky-only"),"oxy_header_row"==o&&"only_show_in_overlay"==i.component.options[e].model.overlay_display&&(n+=" oxygen-only-show-in-overlay"),"oxy_header_row"==o&&"hide_in_overlay"==i.component.options[e].model.overlay_display&&(n+=" oxygen-hide-in-overlay"),"oxy_nav_menu"==o&&"on"==i.component.options[e].model.dropdowns&&(n+=" oxy-nav-menu-dropdowns"),"oxy_nav_menu"==o&&"on"==i.component.options[e].model.menu_dropdown_arrow&&(n+=" oxy-nav-menu-dropdown-arrow"),"oxy_nav_menu"==o&&"on"==i.component.options[e].model.menu_responsive_dropdowns&&(n+=" oxy-nav-menu-responsive-dropdowns"),"oxy_nav_menu"==o&&"column"==i.component.options[e].model["menu_flex-direction"]&&(n+=" oxy-nav-menu-vertical"),"oxy_gallery"==o&&("masonry"==i.component.options[e].model.layout?n+=" oxy-gallery-masonry":"grid"==i.component.options[e].model.display?n+=" oxy-gallery-grid":n+=" oxy-gallery-flex","yes"==i.component.options[e].model.gallery_captions&&(n+=" oxy-gallery-captions")),"true"==i.component.options[e].model.dont_render&&(n+=" oxy-placeholder-element"),"oxy_testimonial"==o&&("vertical"==i.component.options[e].model.testimonial_layout?n+=" oxy-testimonial-vertical":n+=" oxy-testimonial-horizontal"),"oxy_superbox"==o&&"live"!=i.component.options[e].model.superbox_editing_mode&&(n+=" oxy-superbox-editing-"+i.component.options[e].model.superbox_editing_mode),n},i.addClass=function(e){return!i.classes[e]&&(i.classes[e]={},i.classes[e].original={},!0)},i.validateClassName=function(e){return/^[a-z_-][a-z\d_-]*$/i.test(e)},i.checkComponentClasses=function(e){if(0===e||"0"===e)return!1;var o=i.activeSelectors[e];if(o&&void 0===i.classes[o]&&(i.activeSelectors[e]=!1),i.componentsClasses[e]){var n=angular.copy(i.componentsClasses[e]);for(var s in n)if(n.hasOwnProperty(s)){var t=n[s];void 0===i.classes[t]&&i.removeComponentClass(t,e)}}},i.updateSuggestedClasses=function(){var t=i.newcomponentclass.name;if(i.suggestedClasses=[],t){var e=Object.keys(i.classes);if(e.length){var o=e.filter(function(e){return-1!==e.indexOf(t)});if(i.componentsClasses&&i.component.active.id){var n=i.componentsClasses[i.component.active.id];n&&(o=o.filter(function(e){return 0==n.includes(e)}))}o.sort(function(e,o){var n=e.indexOf(t),s=o.indexOf(t);return s<n?1:n<s?-1:0});var s=parseInt(i.globalSettings.classSuggestionsLimit);s&&o.length>s&&(o=o.slice(0,s)),i.suggestedClasses=o}}},i.addSuggestedClassToComponent=function(e){i.newcomponentclass.name=e,i.suggestedClasses=[],i.tryAddClassToComponent(i.component.active.id)},i.updateClassSuggestionsLimit=function(){var e=parseInt(i.globalSettings.classSuggestionsLimit);(!e||e<0)&&(i.globalSettings.classSuggestionsLimit=i.globalSettingsDefaults.classSuggestionsLimit),i.suggestedClasses.length&&i.updateSuggestedClasses()},i.isSelectorLocked=function(e){return!(!i.classes[e]||!i.classes[e].original||"true"!=i.classes[e].original["selector-locked"])}}]);
CTFrontendBuilder.controller("ControllerOptions",["$scope","$parentScope","$timeout",function(y,b,_){y.changesToApply=[],y.optionsHierarchy={background:{color:["background-color"],image:["background","background-image","overlay-color","video_background","video_background_overlay","background-blend-mode"],size:["background-size","background-repeat","background-attachment","background-position-left","background-position-top","background-size-width","background-size-height","background-clip"]},position:{margin_padding:["container-padding-top","container-padding-right","container-padding-bottom","container-padding-left","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","container-padding-top-unit","container-padding-right-unit","container-padding-bottom-unit","container-padding-left-unit","padding-top-unit","padding-right-unit","padding-bottom-unit","padding-left-unit","margin-top-unit","margin-right-unit","margin-bottom-unit","margin-left-unit"],size:["width","min-width","max-width","height","min-height","max-height","section-width","header-width","header-row-width","width-unit","min-width-unit","max-width-unit","height-unit","min-height-unit","max-height-unit"]},layout:{position:["display","float","visibility","z-index","clear","overflow","position","top","right","bottom","left","flex-direction","align-items","justify-content","flex-wrap","flex-reverse","align-content","order"]},typography:{typography:["font-family","font-size","font-weight","color","text-align","line-height","letter-spacing","text-decoration","font-style","text-transform","-webkit-font-smoothing"]},borders:{border:["border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width"],radius:["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","border-radius"]},effects:{opacity:["opacity"],transform:["transform"],transition:["transition-duration","transition-duration-unit","transition-timing-function","transition-delay","transition-delay-unit","transition-property"],"box-shadow":["box-shadow-inset","box-shadow-color","box-shadow-horizontal-offset","box-shadow-vertical-offset","box-shadow-blur","box-shadow-spread"],"text-shadow":["text-shadow-color","text-shadow-horizontal-offset","text-shadow-vertical-offset","text-shadow-blur"],"css-filter":["filter","filter-amount-blur","filter-amount-brightness","filter-amount-contrast","filter-amount-grayscale","filter-amount-hue-rotate","filter-amount-invert","filter-amount-saturate","filter-amount-sepia"],"animation-on-scroll":["aos-enable","aos-type","aos-easing","aos-duration","aos-offset","aos-delay","aos-anchor","aos-anchor-placement","aos-once"]},cssjs:{css:["custom-css"],js:["custom-js"]},"code-php":{"code-php":["code-php"]},"code-css":{"code-css":["code-css"]},"code-js":{"code-js":["code-js"]},"custom-attributes":{"custom-attributes":["custom-attributes"]}},y.builtinComponents={},y.lastSetEasyPostsTemplate=[],y.addNewColor=function(e,o,t){if(y.log&&console.log("addNewColor()",e,o,t),CtBuilderAjax.freeVersion)return b.hideAddNewColorDialog(),b.showDialogWindow(),void(b.dialogForms.showProGlobalColorEditDialog=!0);if("latest"==t&&(t=b.addNewColorDialogValue),void 0===t||""==t)return y.showErrorModal(0,"Color value is not defined"),b.hideAddNewColorDialog(),!1;if(void 0===e||""==e)return y.showErrorModal(0,"Color name is not defined"),b.hideAddNewColorDialog(),!1;var n=y.getGlobalColorSet(o);if(y.getGlobalColorbyName(e,n.name))return y.showErrorModal(0,"'"+e+"' already exist in '"+n.name+"' set"),b.newGlobalSettingsColorName="",b.hideAddNewColorDialog(),!1;void 0!==o&&""!==o||(o=0),y.globalColorSets.colorsIncrement++,y.globalColorSets.colors.push({id:y.globalColorSets.colorsIncrement,name:e,value:t,set:o}),y.parentScope.setGlobalColor(y.globalColorSets.colorsIncrement),b.hideAddNewColorDialog(),b.newGlobalColorName="",b.newGlobalColorValue="",b.newGlobalSettingsColorName="",b.showAddGlobalColorPanel=!1},y.addNewColorSet=function(e){return y.log&&console.log("addNewColorSet()",e),CtBuilderAjax.freeVersion?(b.showDialogWindow(),void(b.dialogForms.showProGlobalColorEditDialog=!0)):null==e||""==e?(y.showErrorModal(0,"Color Set name is not defined"),!1):y.getGlobalColorSetbyName(e)?(y.showErrorModal(0,"'"+e+"' name is already taken"),!1):(y.globalColorSets.setsIncrement++,y.globalColorSets.sets.push({id:y.globalColorSets.setsIncrement,name:e}),b.newGlobalColorSetName="",void(b.addGlobalColorSetPanel=!1))},y.isGlobalColorValue=function(e){return 0===e.indexOf("color(")},y.getGlobalColorID=function(e){if(y.log&&console.log("getGlobalColorID()",e),!e||"string"!=typeof e)return!1;if(0!==e.indexOf("color("))return!1;var o=/\(([^)]+)\)/.exec(e);return null!=o&&o[1]},y.getGlobalColorValue=function(e){y.log&&console.log("getGlobalColorValue()",e);var o=y.getGlobalColorID(e);if(!1===o)return e;var t=y.globalColorSets.colors.find(function(e){return e.id==o});return void 0===t||void 0===t.value?e:t.value},y.getGlobalColorNiceName=function(e){y.log&&console.log("getGlobalColorValue()",e);var o=y.getGlobalColorID(e);if(!1===o)return!1;var t=y.globalColorSets.colors.find(function(e){return e.id==o});if(void 0===t||void 0===t.value)return!1;var n=y.getGlobalColorSet(t.set);return void 0!==n&&void 0!==n.name&&n.name+" - "+t.name},y.getGlobalColor=function(o){return y.log&&console.log("getGlobalColor()",o),y.globalColorSets.colors.find(function(e){return e.id==o})},y.getGlobalColorbyName=function(o,e){y.log&&console.log("getGlobalColorbyName()",o,e);var t=y.getGlobalColorSetbyName(e);return y.globalColorSets.colors.find(function(e){return e.name==o&&e.set==t.id})},y.getGlobalColorSet=function(o){return y.log&&console.log("getGlobalColorSet()",o,y.globalColorSets.sets),y.globalColorSets.sets.find(function(e){return e.id==o})},y.getGlobalColorSetbyName=function(o){return y.log&&console.log("getGlobalColorSet()",o,y.globalColorSets.sets),y.globalColorSets.sets.find(function(e){return e.name==o})},y.deleteGlobalColorSet=function(o,e){if(!confirm("Are you sure to delete this set?"))return!1;var t=y.globalColorSets.sets.findIndex(function(e){return e.id==o});for(var t in y.globalColorSets.sets.splice(t,1),y.globalColorSets.colors){if(y.globalColorSets.colors.hasOwnProperty(t))y.globalColorSets.colors[t].set===o&&(y.globalColorSets.colors[t]=null)}y.globalColorSets.colors=y.globalColorSets.colors.filter(function(e){return null!==e}),!0===e&&(b.toggleSettingsPanel(!0),b.switchTab("settings","colors")),y.unsavedChanges()},y.deleteGlobalColor=function(o,e){var t=y.globalColorSets.colors.findIndex(function(e){return e.id==o});y.globalColorSets.colors.splice(t,1),y.unsavedChanges()},y.globalColorSetHasColors=function(o){return y.globalColorSets.colors.find(function(e){return e.set==o})},y.replaceGlobalColors=function(e){return void 0===e?e:e.replace(/color\(\d+\)/g,function(e){return y.getGlobalColorValue(e)})},y.replaceGlobalWooSettings=function(e){return void 0===e?e:(e=e.replace(/%%ASSETS_PATH%%/g,CtBuilderAjax.wooAssetsPath)).replace(/var\(.*?\)/g,function(e){if(e=(e=e.replace("var(","")).replace(")",""),y.globalSettings.woo&&y.globalSettings.woo[e]){var o="";y.globalSettings.woo[e+"-unit"]&&(o=y.globalSettings.woo[e+"-unit"]),e=y.globalSettings.woo[e]+o}return e=y.getGlobalColorValue(e)})},y.parseAPIOptions=function(e,o,t){return y.log&&console.log("replaceComponentOptions()",e,o,t),void 0!==e&&void 0!==o&&e&&o?e.replace(/%%\S+%%/g,function(e){return"%%ELEMENT_ID%%"===e?y.component.options[o].selector:(e=e.replace(/%%/g,""),"{{component.options["+o+"]['model']['"+e+"']}}")}):e},y.replaceComponentOptions=function(e,o,t){return y.log&&console.log("replaceComponentOptions()",e,o,t),void 0!==e&&void 0!==o&&e&&o?e.replace(/%%\S+%%/g,function(e){return"%%ELEMENT_ID%%"===e?y.component.options[o].selector:(e=e.replace(/%%/g,""),y.APIPresets.typography&&-1<y.APIPresets.typography.indexOf(e)?y.generateTypographyCSS(t,e):t?t[e]?t[e]+y.getOptionUnit(e):"":y.getOption(e,o)+y.getOptionUnit(e))}):e},y.updateTreeComponentOptions=function(e,o,t){y.log&&console.log("updateTreeComponentOptions()",e,o,t);var n=y.defaultOptions[o.name];y.currentState;n.ct_content&&(o.options.ct_content=n.ct_content)},y.updateTreeComponentOption=function(e,o,t){y.log&&console.log("updateTreeComponentOption()",e,o,t);var n=y.defaultOptions[o.name],i=y.currentState,s=t.optionName,a="";if(-1===y.optionsWhiteList.indexOf(s)&&-1===y.optionsWhiteListNoMedia.indexOf(s)&&(i="original"),0<=t.optionName.indexOf("fake_")&&0<=t.optionName.indexOf("hover_")&&(i="hover",s=s.replace("fake_","")),a="selector"==s?y.component.options[t.id][s]:!y.isEditing("id")||y.isEditing("state")||y.isEditing("media")?y.component.options[t.id].model[s]:y.component.options[t.id].id[s],0<=t.optionName.indexOf("fake_")&&0<=t.optionName.indexOf("hover_")&&(s=s.replace("hover_","")),"ct_column"==t.tag&&"width"==s)return(!o.options[i]||Array.isArray(o.options[i])&&0===o.options[i].length)&&(o.options[i]={}),o.options[i][s]=a,y.component.options[t.id][i][s]=a,!0;if(y.isEditing("class")&&(0<=y.optionsWhiteList.indexOf(s)||0<=y.optionsWhiteListNoMedia.indexOf(s)||"icon-style"==s||"button-style"==s||"gradient"==s))y.classes[y.currentClass]&&(y.cache.classStyles[y.currentClass]="","icon-style"==s||"button-style"==s?y.classes[y.currentClass].original[s]=a:"selector"==s||"ct_id"==s||"ct_parent"==s||"ct_content"==s||"classes"==s||"url"==s&&t.isShortcode||(!y.isEditing("media")||0<=y.optionsWhiteListNoMedia.indexOf(s)?((!y.classes[y.currentClass][i]||Array.isArray(y.classes[y.currentClass][i])&&0===y.classes[y.currentClass][i].length)&&(y.classes[y.currentClass][i]={}),""==a?delete y.classes[y.currentClass][i][s]:y.classes[y.currentClass][i][s]=angular.copy(a)):(y.classes[y.currentClass].media||(y.classes[y.currentClass].media={}),y.classes[y.currentClass].media[y.currentMedia]||(y.classes[y.currentClass].media[y.currentMedia]={}),y.classes[y.currentClass].media[y.currentMedia][i]||(y.classes[y.currentClass].media[y.currentMedia][i]={}),""==a?delete y.classes[y.currentClass].media[y.currentMedia][i][s]:y.classes[y.currentClass].media[y.currentMedia][i][s]=a)));else if(y.isEditing("media")&&0<=y.optionsWhiteList.indexOf(s)&&"selector"!=s&&"ct_id"!=s&&"ct_parent"!=s)y.setMediaParameter(t.id,s,a,i),(!o.options.media||Array.isArray(o.options.media)&&0===o.options.media.length)&&(o.options.media={}),(!o.options.media[y.currentMedia]||Array.isArray(o.options.media[y.currentMedia])&&0===o.options.media[y.currentMedia].length)&&(o.options.media[y.currentMedia]={}),(!o.options.media[y.currentMedia][i]||Array.isArray(o.options.media[y.currentMedia][i])&&0===o.options.media[y.currentMedia][i].length)&&(o.options.media[y.currentMedia][i]={}),""==a||null==a?(delete o.options.media[y.currentMedia][i][s],delete y.component.options[t.id].media[y.currentMedia][i][s],y.isObjectEmpty(o.options.media[y.currentMedia][i])&&delete o.options.media[y.currentMedia][i],y.isObjectEmpty(o.options.media[y.currentMedia])&&delete o.options.media[y.currentMedia],y.isObjectEmpty(o.options.media)&&delete o.options.media):o.options.media[y.currentMedia][i][s]=a;else if(y.component.options[t.id][i]||(y.component.options[t.id][i]={}),(!o.options[i]||Array.isArray(o.options[i])&&0===o.options[i].length)&&(o.options[i]={}),-1<y.allowedEmptyOptions.indexOf(s)&&"original"==i?y.component.options[t.id][i][s]=a:void 0===a&&"original"==i?y.component.options[t.id][i][s]=n[s]:""===a?delete y.component.options[t.id][i][s]:y.component.options[t.id][i][s]=a,0<s.indexOf("-unit")){var r=s.replace("-unit","");y.component.options[t.id][i][s]!=n[s]||y.component.options[t.id][i][r]!=n[r]||y.component.options[t.id].id[r]?y.component.options[t.id][i][s]==n[s]?delete o.options[i][s]:(o.options[i][s]=a,o.options[i][r]=y.component.options[t.id][i][r]):(delete o.options[i][s],delete o.options[i][r])}else if(void 0!==n[s+"-unit"]&&n[s+"-unit"]!==y.component.options[t.id][i][s+"-unit"])""!=a&&null!=a?o.options[i][s]=a:(delete o.options[i][s],delete y.component.options[t.id][i][s],"original"==i&&(y.component.options[t.id][i][s]=n[s]));else if("ct_content"==s){var l=y.getComponentById(t.id),c=!1;if(l&&(c=l.attr("contenteditable")),c){var d=angular.element("<span>"+a+"</span>"),p=!1;angular.forEach(d.find("*"),function(e){var o=angular.element(e),t=o.attr("ng-attr-component-id");t&&(o.replaceWith('<span id="ct-placeholder-'+t+'"></span>'),p=!0)}),o.options[s]=p?d.prop("innerHTML"):a}else o.options[s]=a}else"selector"==s||"ct_id"==s||"ct_parent"==s||"classes"==s||"url"==s&&t.isShortcode?o.options[s]=a:i&&(""!==a&&void 0!==a||-1!==y.allowedEmptyOptions.indexOf(s)?o.options[i][s]=a:delete o.options[i][s])},y.updateTreeComponentTag=function(e,o,t){"ct_shortcode"==(o.name=t)&&(o.options.ct_shortcode=!0),y.component.active.id==e&&(y.component.active.name=t),y.component.options[e].nicename&&""!==y.component.options[e].nicename.trim()&&(y.component.options[o.id].nicename=y.calcDefaultComponentTitle(o),o.options.nicename=y.component.options[o.id].nicename,y.updateBreadcrumbs(o.id));var n=_(function(){y.rebuildDOM(e),_.cancel(n)},0,!1)},y.applyComponentDefaultOptions=function(e,o,t){for(var n in y.log&&console.log("applyComponentDefaultOptions()",e,o),y.component.options[e]||(y.component.options[e]={}),y.component.options[e].original||(y.component.options[e].original={}),y.component.options[e].id||(y.component.options[e].id={}),y.defaultOptions[o])if(y.defaultOptions[o].hasOwnProperty(n)){var i=y.defaultOptions[o][n];y.component.options[e].original[n]=i,("font-family"==n||-1<n.indexOf("font-family"))&&y.loadWebFont(i)}y.component.options[e].selector||(y.component.options[e].selector=o.slice(3)+"-"+e+"-"+CtBuilderAjax.postId),t&&!y.component.options[e].source_id&&(y.component.options[e].source_id=t.source_id),y.component.options[e].name||(y.component.options[e].name=o),t&&t.options&&t.options.ct_category&&(y.component.options[e].ct_category=t.options.ct_category),y.component.options[e].model=angular.copy(y.component.options[e].original)},y.applyComponentSavedOptions=function(e,o){for(var t in y.log&&console.log("applyComponentSavedOptions()",e,o),y.checkGlobalFont(o.options),o.options)if(o.options.hasOwnProperty(t)){var n=o.options[t];if("object"==typeof n&&"classes"!=t){for(var i in y.component.options[e][t]||(y.component.options[e][t]={}),n)if(n.hasOwnProperty(i)){var s=n[i];"original"==t&&(y.component.options[e].id[i]=s),y.component.options[e][t][i]=s,y.log,("font-family"==i||-1<i.indexOf("font-family"))&&y.loadWebFont(s)}}else"object"!=typeof n&&("selector"==t?y.component.options[e][t]=n:y.component.options[e].original[t]=n)}y.component.options[e].model=angular.copy(y.component.options[e].original),o.options.oxy_builtin&&(y.builtinComponents[e]=!0)},y.haveNotRegisteredElements=function(){for(var e in y.notRegisteredElements)if(y.notRegisteredElements.hasOwnProperty(e)&&y.getComponentById(e)&&e<1e5)return!0;return!1},y.applyModelOptions=function(s,e){if(void 0===s&&(s=y.component.active.id),void 0===e&&(e=y.component.active.name),y.log&&console.log("applyModelOptions()",s,e),0!==s&&"0"!==s){if(y.component.options[s]||(y.component.options[s]={}),y.component.options[s].model={},e&&(y.defaultOptions[e]&&!y.defaultOptions[e]["not-registered"]||(y.component.options[s].model["not-registered"]=!0,y.defaultOptions[e]={},y.defaultOptions[e]["not-registered"]=!0,y.notRegisteredElements[s]=!0)),angular.extend(y.component.options[s].model,y.component.options[s].original),y.isEditing("id")&&(y.isEditing("media")?(y.component.options[s].model={},y.component.options[s].media&&y.component.options[s].media[y.currentMedia]&&(y.component.options[s].model=angular.copy(y.component.options[s].media[y.currentMedia][y.currentState]||{}))):y.isEditing("state")&&(y.component.options[s].model=angular.copy(y.component.options[s][y.currentState]||{}))),y.isEditing("class")&&"object"==typeof y.classes[y.currentClass])if(y.component.options[s].model=angular.copy(y.classes[y.currentClass].original||{}),y.isEditing("media"))for(var o in y.component.options[s].model={},y.classes[y.currentClass].media&&y.classes[y.currentClass].media[y.currentMedia]&&(y.component.options[s].model=angular.copy(y.classes[y.currentClass].media[y.currentMedia][y.currentState]||{})),y.classes[y.currentClass][y.currentState])y.classes[y.currentClass][y.currentState].hasOwnProperty(o)&&-1<y.optionsWhiteListNoMedia.indexOf(o)&&(y.component.options[s].model[o]=y.classes[y.currentClass][y.currentState][o]);else y.component.options[s].model={},y.classes[y.currentClass]&&y.classes[y.currentClass][y.currentState]&&(y.component.options[s].model=angular.copy(y.classes[y.currentClass][y.currentState]||{}));for(var t in y.isEditing("custom-selector")&&!y.isEditing("class")&&y.customSelectors[y.selectorToEdit]&&(y.isEditing("media")?(y.component.options[s].model={},y.customSelectors[y.selectorToEdit].media&&y.customSelectors[y.selectorToEdit].media[y.currentMedia]&&(y.component.options[s].model=angular.copy(y.customSelectors[y.selectorToEdit].media[y.currentMedia][y.currentState]||{}))):(y.component.options[s].model={},y.customSelectors[y.selectorToEdit]&&y.customSelectors[y.selectorToEdit][y.currentState]&&(y.component.options[s].model=angular.copy(y.customSelectors[y.selectorToEdit][y.currentState]||{})))),y.component.options[s].model)(y.component.options[s].model.hasOwnProperty(t)&&"font-family"==t||-1<t.indexOf("font-family"))&&y.loadWebFont(y.component.options[s].model[t]);for(var t in y.component.options[s].model)y.component.options[s].model.hasOwnProperty(t)&&y.component.options[s].model[t+"-unit"]&&(!y.isEditing("id")||y.isEditing("media")||y.isEditing("state")||y.component.options[s].model[t+"-unit"]==y.defaultOptions[e][t+"-unit"]||y.component.options[s].id[t]||delete y.component.options[s].model[t]);if(!y.isEditing("custom-selector"))for(var o in y.component.options[s].original)y.component.options[s].original.hasOwnProperty(o)&&-1===y.optionsWhiteList.indexOf(o)&&(!y.isEditing("class")||"icon-style"!=o&&"button-style"!=o&&"gradient"!=o?y.isEditing("class")&&-1<y.optionsWhiteListNoMedia.indexOf(o)||(y.component.options[s].model[o]=y.component.options[s].original[o]):null!=y.classes[y.currentClass].original&&(y.component.options[s].model[o]=angular.copy(y.classes[y.currentClass].original[o])));if(y.isEditing("id")){for(var n in c(y.component.options[s]),y.component.options[s].media){if(y.component.options[s].media.hasOwnProperty(n))c(y.component.options[s].media[n])}if(y.isEditing("media"))for(var o in y.component.options[s][y.currentState])if(y.component.options[s][y.currentState].hasOwnProperty(o)){var i=y.component.options[s][y.currentState][o];""!==y.component.options[s].model[o]&&void 0!==y.component.options[s].model[o]||(y.component.options[s].model[o]=i)}}if(y.isEditing("class")){for(var n in c(y.component.options[y.classes[y.currentClass]]),y.classes[y.currentClass].media){if(y.classes[y.currentClass].media.hasOwnProperty(n))c(y.classes[y.currentClass].media[n])}if(y.isEditing("media")&&y.classes[y.currentClass][y.currentState])for(var o in y.classes[y.currentClass][y.currentState])if(y.classes[y.currentClass][y.currentState].hasOwnProperty(o)){i=y.classes[y.currentClass][y.currentState][o];""!==y.component.options[s].model[o]&&void 0!==y.component.options[s].model[o]||(y.component.options[s].model[o]=i)}}if(y.isEditing("custom-selector")&&!y.isEditing("class")&&void 0!==y.customSelectors[y.selectorToEdit]){for(var n in c(y.customSelectors[y.selectorToEdit]),y.customSelectors[y.selectorToEdit].media){if(y.customSelectors[y.selectorToEdit].media.hasOwnProperty(n))c(y.customSelectors[y.selectorToEdit].media[n])}if(y.isEditing("media")&&y.customSelectors[y.selectorToEdit][y.currentState])for(var o in y.customSelectors[y.selectorToEdit][y.currentState])if(y.customSelectors[y.selectorToEdit][y.currentState].hasOwnProperty(o)){i=y.customSelectors[y.selectorToEdit][y.currentState][o];""!==y.component.options[s].model[o]&&void 0!==y.component.options[s].model[o]||(y.component.options[s].model[o]=i)}}if("ct_section"==e){var a=["container-padding-top","container-padding-top-unit","container-padding-bottom","container-padding-bottom-unit","container-padding-left","container-padding-left-unit","container-padding-right","container-padding-right-unit"];for(var r in a)a.hasOwnProperty(r)&&(o=a[r],null!=y.component.options[s].model[o]&&""!=y.component.options[s].model[o]||(y.component.options[s].model[o]=y.globalSettings.sections[o]))}if(y.isEditing("class")){var l=["grid-column-count","grid-columns-auto-fit","grid-column-min-width","grid-column-max-width","grid-column-gap","grid-justify-items","grid-match-height-of-tallest-child","grid-row-behavior","grid-row-count","grid-row-min-height","grid-row-max-height","grid-row-gap","grid-align-items"];for(var r in l)l.hasOwnProperty(r)&&(o=l[r],null!=y.component.options[s].model[o]&&""!=y.component.options[s].model[o]||(y.component.options[s].model[o]=y.defaultOptions[e][o]||y.defaultOptions.all[o]))}}function c(e){for(var o in e)if(e.hasOwnProperty(o)){var t=e[o];for(var n in t)if(t.hasOwnProperty(n)){var i=y.component.options[s].model[n];""!==i&&void 0!==i||(y.component.options[s].model[n]=y.getClosestBreakpointValue(n))}}}},y.setOption=function(t,o,e,n,i){("wp_query_advanced"==e&&y.parentScope.dialogForms.advancedquery&&(y.component.options[y.component.active.id].model.wp_query_advanced_preset="Custom Settings",y.setOption(y.component.active.id,y.component.active.name,"wp_query_advanced_preset")),y.cancelDeleteUndo(),y.log&&(console.log("setOption() '"+e+"' for '"+o+"' id:"+t+" tag to '"+y.component.options[t].model[e]+"'"),y.functionStart("setOption()")),null==y.component.options[t].model[e]&&(y.component.options[t].model[e]=""),y.adjustResizeBox(),b.disableSelectorDetectorMode&&b.disableSelectorDetectorMode(),e&&0===e.indexOf("aos-")&&"aos-enable"!==e&&"aos-type"!==e)&&(s=y.getComponentById(t)).attr("data-"+e,y.component.options[t].model[e]);if("aos-type"==e){var s=y.getComponentById(t),a=y.getOption("aos-type",t)||y.pageSettingsMeta.aos.type||y.pageSettings.aos.type||y.globalSettings.aos.type;a?s.attr("data-aos",a):s.removeAttr("data-aos")}if(!y.isEditing("id")||y.isEditing("media")||y.isEditing("state")||(void 0!==y.component.options[t].model[e]?(y.component.options[t].id||(y.component.options[t].id={}),y.component.options[t].id[e]=angular.copy(y.component.options[t].model[e])):""==y.component.options[t].model[e]&&(-1===y.allowedEmptyOptions.indexOf(e)?(delete y.component.options[t].id[e],y.component.options[t].model[e+"-unit"]?y.component.options[t].model[e+"-unit"]==y.defaultOptions[o][e+"-unit"]&&(y.component.options[t].model[e]=y.defaultOptions[o][e],y.component.options[t].original[e]=y.defaultOptions[o][e]):"ct_content"!=e&&(y.component.options[t].model[e]=y.defaultOptions[o][e],y.component.options[t].original[e]=y.defaultOptions[o][e])):(y.component.options[t].id||(y.component.options[t].id={}),y.component.options[t].id[e]=y.component.options[t].model[e]))),y.isEditing("class")&&""==y.currentClass)return alert("Please choose the class from the list or set a new one."),y.functionEnd("setOption()"),!1;if("ct_column"==o&&"width"==e&&(100<y.component.options[t].model[e]&&(y.component.options[t].model[e]=100),y.component.options[t].model[e]<0&&(y.component.options[t].model[e]=0)),e&&"custom-css"==e){var r=y.component.options[t].model[e],l=!0,c="";if(0<r.length&&(-1<r.indexOf("{")||-1<r.indexOf("}")?(l=!1,c="The Custom CSS field contains one or more curly braces. The CSS will not be saved until all curly braces are removed."):-1==r.indexOf(":")&&(l=!1,c="The Custom CSS field contains invalid CSS. The CSS will not be saved until this is corrected."),!l))return jQuery(".oxygen-code-error-container",b.oxygenUIElement).show().html(c),!1;jQuery(".oxygen-code-error-container",b.oxygenUIElement).hide().html("")}if(e&&-1<e.indexOf("border-all")&&($newOptValue=y.component.options[t].model[e],y.setOptionModel(e.replace("-all-","-top-"),$newOptValue,void 0,void 0,!1,!0),y.setOptionModel(e.replace("-all-","-right-"),$newOptValue,void 0,void 0,!1,!0),y.setOptionModel(e.replace("-all-","-bottom-"),$newOptValue,void 0,void 0,!1,!0),y.setOptionModel(e.replace("-all-","-left-"),$newOptValue,void 0,void 0,!1,!0),y.component.options[t].model[e]=$newOptValue,y.classesCached=!1,y.functionEnd("setOption()")),"flex-direction"==e&&("column"==y.component.options[t].model[e]||"row"==y.component.options[t].model[e]))var d=_(function(){y.setOptionModel("display","flex",t,o),_.cancel(d)},0,!1);if("display"==e&&""!=y.component.options[t].model[e]&&"flex"!=y.component.options[t].model[e])d=_(function(){y.setOptionModel("flex-direction","",t,o),_.cancel(d)},0,!1);if("display"==e&&"oxy_gallery"==o&&"grid"===y.component.options[t].model[e])d=_(function(){y.setOptionModel("grid","true",t,o),y.setOptionModel("layout","false",t,o),_.cancel(d)},0,!1);if("display"==e&&"oxy_gallery"==o&&""!=y.component.options[t].model[e]&&"grid"!==y.component.options[t].model[e]&&y.unsetOptions(["layout","grid"]),"layout"==e&&("flex"==y.component.options[t].model[e]||"masonry"==y.component.options[t].model[e])&&"grid"==y.component.options[t].model.display)d=_(function(){y.unsetOptions(["display"]),_.cancel(d)},0,!1);if(0<=["container-padding-top","container-padding-bottom","container-padding-left","container-padding-right"].indexOf(e)&&""==y.component.options[t].model[e])d=_(function(){y.applyModelOptions(t,o),y.parentScope.safeApply(),_.cancel(d)},0,!1);if(-1<["layout","link","lightbox","image_aspect_ratio","images_per_row","space_around_image","image_min_width","gallery_captions","caption_color","caption_background_color","gallery_captions_only_hover","hide_captions_below","image_opacity_hover","image_opacity","transition_duration","gallery_thumbnail_size","set_image_fit_to_cover"].indexOf(e)&&"oxy_gallery"==o)d=_(function(){y.renderComponentWithAJAX("oxy_render_gallery"),_.cancel(d)},0,!1);if(void 0!==y.componentsTemplates&&y.componentsTemplates[o]&&(componentTemplate=y.componentsTemplates[o],componentTemplate.rebuildTriggerOptions&&-1<componentTemplate.rebuildTriggerOptions.indexOf(e)))d=_(function(){y.renderComponentWithAJAX("oxy_render_"+o,t),_.cancel(d)},0,!1);if("selector"==e&&"oxy_tabs_contents"==o)d=_(function(){var e=jQuery(y.getComponentById(t)).data("oxy-tabs-wrapper"),o=jQuery("#"+e).attr("ng-attr-component-id");y.setOptionModel("tabs_contents_wrapper",y.component.options[t].selector,o,"oxy_tabs"),y.$apply(),_.cancel(d)},0,!1);if("selector"==e&&"oxy_tabs"==o)d=_(function(){var e=jQuery(y.getComponentById(t)).data("oxy-tabs-contents-wrapper"),o=jQuery("#"+e).attr("ng-attr-component-id");y.setOptionModel("tabs_wrapper",y.component.options[t].selector,o,"oxy_tabs_contents"),y.$apply(),_.cancel(d)},0,!1);if("dont_render"==e&&"ct_widget"==o)d=_(function(){y.renderWidget(t,!1),_.cancel(d)},0,!1);if("oxy_social_icons"==o&&e&&0<=y.socialIcons.networks.indexOf(e.replace("icon-",""))&&(""==y.component.options[t].model[e]||""!=y.component.options[t].model[e]&&""==y.component.options[t].original[e]))d=_(function(){y.rebuildDOM(t),_.cancel(d)},0,!1);if(-1<["progress_bar_animation_stripes","progress_bar_animate_width","progress_bar_animation_stripes_duration","progress_bar_animation_width_duration"].indexOf(e))d=_(function(){y.rebuildDOM(t),_.cancel(d)},0,!1);"soundcloud_url"==e&&y.getSoundCloudTrackID(y.component.options[t].model[e]),"hide_in_sticky"==e&&"yes"==y.component.options[t].model[e]&&"yes"==y.getOption("show_in_sticky_only",t)&&y.setOptionModel("show_in_sticky_only","",t,o),"show_in_sticky_only"==e&&"yes"==y.component.options[t].model[e]&&"yes"==y.getOption("hide_in_sticky",t)&&y.setOptionModel("hide_in_sticky","",t,o);var p={id:t,tag:o,optionName:e,isShortcode:n,isData:0===o.lastIndexOf("ct_data",0)};if(y.isEditing("custom-selector")){var m=p.optionName,u=y.component.options[p.id].model[m];if(!("selector"==m||"ct_id"==m||"ct_parent"==m||"ct_content"==m||"classes"==m||"url"==m&&p.isShortcode))return y.updateCustomSelectorValue(m,u),delete y.cache.classStyles[y.currentClass],y.outputCSSOptions(),y.unsavedChanges(),void y.functionEnd("setOption()")}else void 0!==e?(y.findComponentItem(y.componentsTree.children,t,y.updateTreeComponentOption,p),0<=e.indexOf("hover_")&&"oxy_posts_grid"!=o&&(p.optionName="fake_"+p.optionName,y.findComponentItem(y.componentsTree.children,t,y.updateTreeComponentOption,p))):y.findComponentItem(y.componentsTree.children,t,y.updateTreeComponentOptions,p);if(y.unsavedChanges(),void 0!==e&&0===e.indexOf("aos-")){if("undefined"!=typeof AOS)d=_(function(){AOS.refreshHard(),_.cancel(d)},0,!1)}else if("undefined"!=typeof AOS)d=_(function(){AOS.refresh(),_.cancel(d)},0,!1);if("aos-type"==e)var g=y.getComponentById(t),f=_(function(){g.css("transitionDuration","0s").removeClass("aos-animate"),_.cancel(f)},100,!1),h=_(function(){g.css("transitionDuration","").addClass("aos-animate"),_.cancel(h)},200,!1);if(n&&y.renderShortcode(t,o),p.isData&&y.renderDataComponent(t,o),"ct_content"==e||i)y.functionEnd("setOption()");else{if("ct_video"===o&&"src"===e)if(-1!==y.component.options[t].model[e].indexOf("[oxygen")){y.applyShortcodeResults(t,y.component.options[t].model[e],function(e){y.setOptionModel("embed_src",y.getYoutubeVimeoEmbedUrl(e.trim()),t,o)})}else y.setOptionModel("embed_src",y.getYoutubeVimeoEmbedUrl(y.component.options[t].model[e]),t,o);if("background-image"===e||"ct_image"===o&&"src"===e)if(-1!==y.component.options[t].model[e].indexOf("[oxygen"))y.component.options[t].model[e+"dynamic"]=!0,y.setOption(t,o,e+"dynamic",!1,!0);else if(!0===y.component.options[t].original[e+"dynamic"]&&-1===y.component.options[t].model[e].indexOf("[oxygen")){y.component.options[t].model[e+"dynamic"]=!1,y.setOption(t,o,e+"dynamic",!1,!0);var v=(p=y.getComponentById(t)).closest(".oxy-dynamic-list");0<v.length&&!v.hasClass("oxy-dynamic-list-edit")?y.updateRepeaterQuery(parseInt(v.attr("ng-attr-component-id"))):y.rebuildDOM(t)}e&&y.isEditing("media")&&(y.defaultOptions.all[e+"-unit"]||e.indexOf(!1))&&y.applyModelOptions(t,o),y.outputCSSOptions(t),y.isNotSelectedYet(t)&&void 0!==e&&y.switchEditToId(!0),y.functionEnd("setOption()")}},y.setOptionModel=function(e,o,t,n,i,s){void 0===t&&(t=y.component.active.id),void 0===n&&(n=y.component.active.name),void 0===s&&(s=!1),y.classesCached=s,y.log&&(console.log("setOptionModel()",e,o,t,n,i),y.functionStart("setOptionModel()")),-1<e.indexOf(".")?(2==(e=e.split(".")).length&&(y.component.options[t].model[e[0]]||(y.component.options[t].model[e[0]]={}),console.log(e[0],e[1]),y.component.options[t].model[e[0]][e[1]]=o),3==e.length&&(y.component.options[t].model[e[0]]||(y.component.options[t].model[e[0]]={},y.component.options[t].model[e[0]][e[1]]={}),y.component.options[t].model[e[0]][e[1]]||(y.component.options[t].model[e[0]][e[1]]={}),y.component.options[t].model[e[0]][e[1]][e[2]]=o),y.setOption(t,n,e[0],!1,i)):(y.component.options[t].model[e]=o,y.setOption(t,n,e,!1,i)),y.functionEnd("setOptionModel()")},y.getOption=function(e,o){return void 0===o&&(o=y.component.active.id),-1<e.indexOf(".")?2==(e=e.split(".")).length&&y.component.options[o].model[e[0]]&&y.component.options[o].model[e[0]][e[1]]?y.component.options[o].model[e[0]][e[1]]:3==e.length&&y.component.options[o].model[e[0]]&&y.component.options[o].model[e[0]][e[1]]&&y.component.options[o].model[e[0]][e[1]][e[2]]?y.component.options[o].model[e[0]][e[1]][e[2]]:void 0:y.component.options[o]&&y.component.options[o].model&&void 0!==y.component.options[o].model[e]?y.component.options[o].model[e]:""},y.getCSSOptions=function(e,o,t,n){y.defaultOptions[n]||(y.defaultOptions[n]={},y.defaultOptions[n]["not-registered"]=!0);var i={};if(t)i=angular.copy(t);else{if(void 0===e)return{};void 0===o&&(o=y.currentState),y.component.options[e]&&(i=angular.copy(y.component.options[e][o]))}for(var s in i=i||{},y.log&&console.log("getCSSOptions()",e,o,i),i)if(i.hasOwnProperty(s)&&("ct_video"!=n||"padding-bottom"!=s))if(s.indexOf("-unit")<0){if(n||(n=e&&0<e?y.component.options[e].name:"all"),null==y.defaultOptions[n][s+"-unit"])continue;if("container-padding-top"==s||"container-padding-bottom"==s||"container-padding-left"==s||"container-padding-right"==s){var a=i[s+"-unit"]?i[s+"-unit"]:y.globalSettings.sections[s+"-unit"];i[s]&&(i[s]+=a)}else if("auto"==i[s+"-unit"])i[s]="auto";else{a=i[s+"-unit"]?i[s+"-unit"]:y.defaultOptions[n][s+"-unit"];i[s]&&(i[s]+=a)}delete i[s+"-unit"]}else"auto"==i[s]&&(i[s.replace("-unit","")]="auto");for(var s in i)i.hasOwnProperty(s)&&0<s.indexOf("-unit")&&delete i[s];if(i["background-position-top"]||i["background-position-left"]){var r=i["background-position-top"]||"0%",l=i["background-position-left"]||"0%";i["background-position"]=l,i["background-position"]+=" "+r}if(i["background-position-top"]=null,i["background-position-left"]=null,"manual"==i["background-size"]){var c=i["background-size-width"]||"auto",d=i["background-size-height"]||"auto";i["background-size"]=c,i["background-size"]+=" "+d}for(var s in i["background-size-width"]=null,i["background-size-height"]=null,i)i.hasOwnProperty(s)&&-1<s.indexOf("font-family")&&"global"==i[s][0]&&(i[s]=t?y.getGlobalFont(i[s][1]):y.getComponentFont(e,!1,o));return i},y.checkOptionChanged=function(e,o){if(y.log,y.isEditing("custom-selector"))return!1;var t=!1,n=!1;if(y.isEditing("state")&&y.isEditing("id")){if(y.component.options[e][y.currentState]&&(n=y.component.options[e][y.currentState][o]),!n)return!1;if(t=y.component.options[e].original[o],"font-family"==o&&n&&"global"==n[0]&&"global"==t[0]&&n[1]==t[1])return!1;if(t&&n!=t)return"ct-option-different"}else if(y.classes[y.currentClass]&&y.classes[y.currentClass][y.currentState]&&y.classes[y.currentClass][y.currentState][o])return"ct-option-different"},y.isEditing=function(e){switch(e){case"id":return!1===y.currentClass&&0<=y.component.active.id;case"class":return!1!==y.currentClass;case"state":return"original"!=y.currentState;case"pseudo-element":return!!y.isPseudoElement(y.currentState);case"custom-selector":return!1!==y.selectorToEdit;case"style-sheet":return!1!==y.stylesheetToEdit&&void 0!==y.stylesheetToEdit;case"media":return"default"!==y.currentMedia;default:return!1}},y.switchEditToId=function(e){y.log&&console.log("switchEditToId()",y.component.active.id);var o=y.isEditing("id");if(!0!==e&&y.setCustomSelectorToEdit(!1),y.activeSelectors[y.component.active.id]||!0===e||y.setCurrentClass(!1),void 0!==e&&!0===e&&(y.activeSelectors=y.activeSelectors||{},y.activeSelectors[y.component.active.id]=!1,y.setCurrentClass(!1)),y.switchState("original"),y.showClasses=!1,o)return!1},y.setEditingStateToDefault=function(e){y.log&&console.log("setEditingStateToDefault()"),y.switchEditToId(!0),e||y.setCurrentMedia("default");var o=_(function(){y.$apply(),_.cancel(o)},0,!1)},y.pageSettingsUpdate=function(){var e=y.getPageWidth();y.mediaList["page-width"]={maxSize:e+"px",title:"Page container ("+e+"px) and below"},y.mediaListAbove["page-width"]={minSize:e+1+"px",title:"Above page container ("+e+"px)"},y.getPageSetting("overlay-header-above")&&"never"!=y.getPageSetting("overlay-header-above")?jQuery("body").addClass("oxy-overlay-header"):jQuery("body").removeClass("oxy-overlay-header"),y.updateAllComponentsCacheStyles(),y.outputCSSOptions(),y.outputPageSettingsCSS(),b.adjustViewportContainer(),y.unsavedChanges()},y.pagePageWidthUpdate=function(){if(""!==y.pageSettingsMeta["max-width"]){var e=parseInt(y.pageSettingsMeta["max-width"])||0,o=y.getBreakPointWidth("tablet")+1;if(e<o)return y.showNoticeModal("<div>Page width value must be greater than or equal to "+o+"</div>"),void(y.pageSettingsMeta["max-width"]=y.previousBreakPointsValues["page-width"].page)}y.previousBreakPointsValues["page-width"].page=y.pageSettingsMeta["max-width"],y.pageSettingsUpdate()},y.globalPageWidthUpdate=function(){var e=parseInt(y.globalSettings["max-width"])||0,o=y.getBreakPointWidth("tablet")+1;if(e<o)return y.showNoticeModal("<div>Page width value must be greater than or equal to "+o+"</div>"),void(y.globalSettings["max-width"]=y.previousBreakPointsValues["page-width"].global);y.previousBreakPointsValues["page-width"].global=y.globalSettings["max-width"],y.pageSettingsUpdate()},y.breakPointsUpdate=function(e){var o,t,n,i=y.getBreakPointWidth(e),s=!0,a=!1;switch(e){case"tablet":o=y.getBreakPointWidth("phone-landscape")+1,t=y.getPageWidth()-1,n="Tablet";break;case"phone-landscape":o=y.getBreakPointWidth("phone-portrait")+1,t=y.getBreakPointWidth("tablet")-1,n="Landscape";break;case"phone-portrait":o=320,t=y.getBreakPointWidth("phone-landscape")-1,n="Portrait";break;default:s=!1}if(s){if(i<o?a="<div>"+n+" value must be greater than or equal to "+o+"</div>":t<i&&(a="<div>"+n+" value must be less than or equal to "+t+"</div>"),a)return y.globalSettings.breakpoints[e]=y.previousBreakPointsValues[e],void y.showNoticeModal(a);y.previousBreakPointsValues[e]=y.globalSettings.breakpoints[e]}y.mediaList[e]={maxSize:i-1+"px",title:"Less than "+i+"px"},y.mediaListAbove[e]={minSize:i+"px",title:"At or above "+i+"px"},y.updateAllComponentsCacheStyles(),y.outputCSSOptions(),y.outputPageSettingsCSS(),b.adjustViewportContainer(),y.unsavedChanges()},y.$watch("globalSettings.scripts",function(){y.updateScriptsSettings()},!0),y.$watch("pageSettingsMeta.scripts",function(){y.updateScriptsSettings()},!0),y.updateScriptsSettings=function(){var e=!1;y.pageSettingsMeta.scripts&&"true"==y.pageSettingsMeta.scripts.scroll_to_hash?(e=y.pageSettingsMeta.scripts,""===y.pageSettingsMeta.scripts.scroll_to_hash_time&&(e.scroll_to_hash_time=y.pageSettings.scripts.scroll_to_hash_time)):e=y.pageSettings.scripts&&"true"==y.pageSettings.scripts.scroll_to_hash?y.pageSettings.scripts:y.globalSettings.scripts;var o=e.scroll_to_hash_offset;o||(o=y.globalSettings.scripts.scroll_to_hash_offset),e&&"true"==e.scroll_to_hash?(jQuery("body").addClass("oxygen-scroll-to-hash-links"),jQuery("body").attr("data-oxygen-scroll-to-hash-links",e.scroll_to_hash_time),jQuery("body").attr("data-oxygen-scroll-to-hash-links-offset",o)):jQuery("body").removeClass("oxygen-scroll-to-hash-links")},y.getPageSetting=function(e,o){return void 0!==y.pageSettingsMeta[e]&&""!==y.pageSettingsMeta[e]?y.pageSettingsMeta[e]:void 0!==y.pageSettings[e]&&""!==y.pageSettings[e]?y.pageSettings[e]:1==o&&void 0!==y.globalSettings[e]&&""!==y.globalSettings[e]?y.globalSettings[e]:""},y.setOptionUnit=function(e,o,t){var n=e+"-unit",i=y.component.active.id,s=y.component.active.name;-1<n.indexOf(".")?(2==(n=n.split(".")).length&&y.component.options[i].model[n[0]]&&(y.component.options[i].model[n[0]][n[1]]=o),3==n.length&&y.component.options[i].model[n[0]]&&y.component.options[i].model[n[0]][n[1]]&&(y.component.options[i].model[n[0]][n[1]][n[2]]=o),y.setOption(i,s,n[0],!1,t)):(y.component.options[i].model[n]=o,y.setOption(i,s,n,!1,t)),y.applyModelOptions()},y.getOptionUnit=function(e){var o=e+"-unit",t=y.component.active.id;if(-1<o.indexOf(".")){if(2==(o=o.split(".")).length)return y.component.options[t].model[o[0]]&&y.component.options[t].model[o[0]][o[1]]?y.component.options[t].model[o[0]][o[1]]:y.defaultOptions.all[o[1]];if(3==o.length)return y.component.options[t].model[o[0]]&&y.component.options[t].model[o[0]][o[1]]&&y.component.options[t].model[o[0]][o[1]][o[2]]?y.component.options[t].model[o[0]][o[1]][o[2]]:y.defaultOptions.all[o[2]]}else{if(y.component.options[t].model&&y.component.options[t].model[o])return y.component.options[t].model[o];if(y.defaultOptions.all[o])return y.defaultOptions.all[o]}return""},y.getUnitLabel=function(e){var o=e;return" "==e&&(o="–"),o},y.getOptionUnitLabel=function(e){var o=y.getOptionUnit(e);return y.getUnitLabel(o)},y.setGlobalOptionUnit=function(e,o,t){var n=o+"-unit",i="page"==e?y.pageSettingsMeta:y.globalSettings;objectPath.set(i,n,t),"page"==e?y.outputPageSettingsCSS():y.updateGlobalSettingsCSS(),y.unsavedChanges()},y.getGlobalOptionUnit=function(e,o){var t=o+"-unit",n="page"==e?y.pageSettingsMeta:y.globalSettings;return objectPath.get(n,t,"")},y.getGlobalOptionUnitLabel=function(e,o){var t=y.getGlobalOptionUnit(e,o);return y.getUnitLabel(t)},y.getComponentSelector=function(e){return null==e&&(e=y.component.active.id),y.component.options[e].selector},y.applyComponentJS=function(e,o,t){if(y.applyingComponentJS=!0,jQuery(".oxygen-code-error-container",b.oxygenUIElement).hide().html(""),y.log&&console.log("applyComponentJS()",e,o),null==e&&(e=y.component.active.id),null==o&&(o=y.component.active.name),y.defaultOptions[o]){null==t&&(t=!0),t&&y.setOption(e,o,"custom-js",!1,!1);var n=y.getOption("custom-js",e);y.defaultOptions[o]["custom-js"]!==n&&y.outputJSScript("ct_custom_js_",e,n),y.applyingComponentJS=!1}},y.isInherited=function(e,o,t){if(void 0===t&&(t=y.getOption(o,e)),y.getOption(o,e)!=t)return!1;if(Array.isArray(t)&&0===t.length)return!0;if(y.isEditing("id")&&!y.isEditing("media")&&!y.isEditing("state")&&(void 0===y.component.options[e].id||y.component.options[e].id[o]==t||angular.equals(t,y.component.options[e].id[o])))return!1;if(y.isEditing("id")&&!y.isEditing("media")&&y.isEditing("state")&&y.component.options[e][y.currentState]&&y.component.options[e][y.currentState][o]==t)return!1;if(y.isEditing("id")&&y.isEditing("media")&&y.component.options[e].media&&y.component.options[e].media[y.currentMedia]&&y.component.options[e].media[y.currentMedia][y.currentState]&&y.component.options[e].media[y.currentMedia][y.currentState][o]==t)return!1;if(y.isEditing("class")&&!y.isEditing("media")&&y.classes[y.currentClass]&&y.classes[y.currentClass][y.currentState]&&y.classes[y.currentClass][y.currentState][o]==t)return!1;if(y.isEditing("class")&&y.isEditing("media")&&y.classes[y.currentClass]&&y.classes[y.currentClass].media&&y.classes[y.currentClass].media[y.currentMedia]&&y.classes[y.currentClass].media[y.currentMedia][y.currentState]&&y.classes[y.currentClass].media[y.currentMedia][y.currentState][o]==t)return!1;if(y.isEditing("custom-selector")&&!y.isEditing("class"))if(y.isEditing("media")){if(y.customSelectors[y.selectorToEdit]&&y.customSelectors[y.selectorToEdit].media&&y.customSelectors[y.selectorToEdit].media[y.currentMedia]&&y.customSelectors[y.selectorToEdit].media[y.currentMedia][y.currentState]&&y.customSelectors[y.selectorToEdit].media[y.currentMedia][y.currentState][o]==t)return!1}else if(y.customSelectors[y.selectorToEdit]&&y.customSelectors[y.selectorToEdit][y.currentState]&&y.customSelectors[y.selectorToEdit][y.currentState][o]==t)return!1;return!0},y.isBorderHasStyles=function(e){var o=y.isInherited(y.component.active.id,"border-"+e+"-width");return style=y.isInherited(y.component.active.id,"border-"+e+"-style"),color=y.isInherited(y.component.active.id,"border-"+e+"-color"),!(o&&style&&color)},y.isTabHasOptions=function(e,o){if(void 0===e){for(var e in y.optionsHierarchy)if(y.optionsHierarchy.hasOwnProperty(e))for(var t in y.optionsHierarchy[e])if(y.optionsHierarchy[e].hasOwnProperty(t)){var n=y.optionsHierarchy[e][t];for(var i in n){var s=n[i];if(!1===y.isInherited(y.component.active.id,s)&&""!=y.getOption(s,y.component.active.id))return!0}}}else if(void 0===o){for(var t in y.optionsHierarchy[e])if(y.optionsHierarchy[e].hasOwnProperty(t)){n=y.optionsHierarchy[e][t];for(var i in n){s=n[i];if(!1===y.isInherited(y.component.active.id,s)&&""!=y.getOption(s,y.component.active.id))return!0}}}else{if(!y.optionsHierarchy[e][o])return!1;n=y.optionsHierarchy[e][o];for(var i in n){s=n[i];if(!1===y.isInherited(y.component.active.id,s)&&""!=y.getOption(s,y.component.active.id))return!0}}},y.checkGlobalOptions=function(o){try{o=JSON.parse(o)}catch(e){return void console.log(o)}void 0!==o.display&&void 0!==o.text&&(y.globalSettings.fonts.Display==o.display&&y.globalSettings.fonts.Text==o.text||confirm("This Design Set's recommended fonts are:\rDisplay: "+o.display+"\rText: "+o.text+"\rWould you like to change your fonts to the recommended fonts?")&&(y.setGlobalFont("Display",o.display),y.setGlobalFont("Text",o.text)));void 0!==o["page-width"]&&(y.getPageWidth()!=o["page-width"]&&confirm("This Design Set's recommended page width is "+o["page-width"]+"px, but the width of this page is "+y.getPageWidth()+"px. Would you like to change your page width to "+o["page-width"]+"px?")&&(y.pageSettings["max-width"]=o["page-width"],y.pageSettingsUpdate()))},y.resetGlobalStylesToDefault=function(){confirm("Are you sure you wish to reset your Global Settings to the defaults?")&&(angular.copy(y.globalSettingsDefaults.fonts,y.globalSettings.fonts),angular.copy(y.globalSettingsDefaults.headings,y.globalSettings.headings),angular.copy(y.globalSettingsDefaults.body_text,y.globalSettings.body_text),angular.copy(y.globalSettingsDefaults.links,y.globalSettings.links),angular.copy(y.globalSettingsDefaults.sections,y.globalSettings.sections),y.globalSettings["max-width"]=y.globalSettingsDefaults["max-width"],y.pageSettingsUpdate())},y.setFirstTimeOptions=function(e,o){"ct_slider"==o&&(y.setOptionModel("slider-arrow-color","darker",e,o),y.setOptionModel("slider-dot-color","#ffffff",e,o),y.setOptionModel("slider-show-arrows","yes",e,o),y.setOptionModel("slider-show-dots","yes",e,o),y.setOptionModel("slider-autoplay","no",e,o),y.setOptionModel("slider-autoplay-delay","3000",e,o),y.setOptionModel("slider-infinite","no",e,o),y.setOptionModel("slider-animation","horizontal",e,o),y.setOptionModel("slider-animation-speed","750",e,o)),"oxy_nav_menu"==o&&(y.setOptionModel("menu_responsive","page-width",e,o),y.setOptionModel("menu_responsive_padding_size","0",e,o),y.setOptionModel("menu_responsive_icon_size","40",e,o),y.setOptionModel("menu_responsive_icon_margin","10",e,o),y.setOptionModel("dropdowns","on",e,o),y.setOptionModel("menu_dropdown_arrow","on",e,o),y.setOptionModel("menu_padding-top","20",e,o),y.setOptionModel("menu_padding-left","20",e,o),y.setOptionModel("menu_padding-right","20",e,o),y.setOptionModel("menu_padding-bottom","20",e,o),y.setOptionModel("menu_hover_background-color","#eee",e,o),y.setOptionModel("menu_hover_border-top-width","3",e,o),y.setOptionModel("menu_flex-direction","row",e,o)),"oxy_social_icons"==o&&(y.setOptionModel("icon-facebook","https://facebook.com"),y.setOptionModel("icon-instagram","https://instagram.com"),y.setOptionModel("icon-twitter","https://twitter.com")),"oxy_header"==o&&(y.setOptionModel("sticky-media","page-width"),y.setOptionModel("sticky_scroll_distance","300")),"oxy_soundcloud"==o&&(y.setOptionModel("height","300"),y.setOptionModel("height-unit","px"),y.setOptionModel("width","100"),y.setOptionModel("width-unit","%"),y.setOptionModel("soundcloud_url","https://soundcloud.com/nathaniel-eliason/13-learning-spanish-and-more"),y.setOptionModel("soundcloud_track_id","331837379")),"oxy_superbox"==o&&(y.setOptionModel("superbox_secondary_opacity_start","0"),y.setOptionModel("superbox_secondary_opacity_finish","1")),"oxy_posts_grid"==o&&y.applyElementPreset(0),"oxy_comments"==o&&y.applyElementPreset(0),(o="ct_image")&&(y.setOptionModel("image_type","2"),y.setOptionModel("attachment_size","full"))},y.isFlexPossible=function(e){return null==e&&(e=y.component.active.name),-1<["ct_div_block","ct_section","ct_link"].indexOf(e)},y.setTextAlign=function(){var o=_(function(){var e=y.component.active.id;if("column"==y.component.options[e].model["flex-direction"])switch(y.component.options[e].model["align-items"]){case"flex-start":y.setOptionModel("text-align","left");break;case"center":y.setOptionModel("text-align","center");break;case"flex-end":y.setOptionModel("text-align","right");break;case"stretch":y.setOptionModel("text-align","justify");break;default:y.setOptionModel("text-align","")}if("row"==y.component.options[e].model["flex-direction"])switch(y.component.options[e].model["justify-content"]){case"flex-start":y.setOptionModel("text-align","left");break;case"center":y.setOptionModel("text-align","center");break;case"flex-end":y.setOptionModel("text-align","right");break;case"space-between":case"space-around":y.setOptionModel("text-align","justify");break;default:y.setOptionModel("text-align","")}_.cancel(o)},11,!1)},y.setEasyPostsTemplate=function(e,o){if(void 0===o&&(o=!0),o&&!confirm("Current settings for this element will be overwritten. Are you sure?"))return!1;y.setOptionModel("code-php",e.code_php),y.setOption(y.component.active.id,y.component.active.name,"code-php"),y.setOptionModel("code-css",e.code_css),y.setOption(y.component.active.id,y.component.active.name,"code-css");var t=["title_size","title_size-unit","title_color","title_hover_color","meta_size","meta_size-unit","meta_color","content_size","content_size-unit","content_color","read_more_display_as","read_more_size","read_more_size-unit","read_more_text_color","read_more_text_hover_color","read_more_button_color","read_more_button_hover_color","paginate_color","paginate_alignment","paginate_link_color","paginate_link_hover_color","posts_per_page","posts_5050_below","posts_100_below"];for(var n in t){var i=t[n];y.setOptionModel(i,e[i])}y.lastSetEasyPostsTemplate[y.component.active.id]=e.name,y.renderComponentWithAJAX("oxy_render_easy_posts")},y.addEasyPostsTemplate=function(){if(y.newEasyPostsTemplate&&""!==y.newEasyPostsTemplate){var e={name:y.newEasyPostsTemplate,code_php:y.getOption("code-php"),code_css:y.getOption("code-css")},o=["title_size","title_size-unit","title_color","title_hover_color","meta_size","meta_size-unit","meta_color","content_size","content_size-unit","content_color","read_more_display_as","read_more_size","read_more_size-unit","read_more_text_color","read_more_text_hover_color","read_more_button_color","read_more_button_hover_color","paginate_color","paginate_alignment","paginate_link_color","paginate_link_hover_color","posts_per_page","posts_5050_below","posts_100_below"];for(var t in o){var n=o[t];e[n]=y.getOption(n)}y.easyPostsCustomTemplates.push(e),y.newEasyPostsTemplate="",alert("Your preset was saved successfully"),y.unsavedChanges()}else alert("Please set the preset name")},y.deleteEasyPostsTemplate=function(e,o){void 0!==o&&o.stopPropagation(),y.easyPostsCustomTemplates.splice(e,1)},y.setCommentsListTemplate=function(e){y.setOptionModel("code-php",e.code_php),y.setOption(y.component.active.id,y.component.active.name,"code-php"),y.setOptionModel("code-css",e.code_css),y.setOption(y.component.active.id,y.component.active.name,"code-css"),y.lastSetCommentsListTemplate=e.name,y.renderComponentWithAJAX("oxy_render_comments_list")},y.addCommentsListTemplate=function(){y.newCommentsListTemplate&&""!==y.newCommentsListTemplate?(y.commentsListCustomTemplates.push({name:y.newCommentsListTemplate,code_php:y.getOption("code-php"),code_css:y.getOption("code-css")}),y.newCommentsListTemplate="",alert("Your preset was saved successfully"),y.unsavedChanges()):alert("Please set the preset name")},y.deleteCommentsListTemplate=function(e,o){void 0!==o&&o.stopPropagation(),y.commentsListCustomTemplates.splice(e,1)},y.getPageWidth=function(e){return e||void 0===y.getPageSetting("max-width")||""==y.getPageSetting("max-width")?parseInt(y.globalSettings["max-width"]):parseInt(y.getPageSetting("max-width"))},y.getBreakPointWidth=function(e){return parseInt(y.globalSettings.breakpoints[e])||parseInt(y.globalSettingsDefaults.breakpoints[e])},y.reEnablePricingBoxText=function(){""==y.getOption("pricing_box_package_regular")&&y.setOptionModel("pricing_box_package_regular","monthly $399"),""==y.getOption("pricing_box_package_subtitle")&&y.setOptionModel("pricing_box_package_subtitle","for small business"),""!=y.getOption("pricing_box_content")&&"<br>"!=y.getOption("pricing_box_content")||y.setOptionModel("pricing_box_content","my features<br />another feature<br />my last feature<br />")},y.getSuperBoxEditingModeTitle=function(){switch(y.getOption("superbox_editing_mode")){case"primary_only":return"Show Primary Only";case"secondary_only":return"Show Secondary Only";case"as_hovered":return"As If Hovered";case"as_not_hovered":return"As If Not Hovered";default:return"Live"}},y.unsetAllBorders=function(e,o){null==e&&(e="");y.component.active.id;if(void 0===o)o=["border-all-width","border-all-width-unit","border-all-style","border-all-color"];for(var t in o){var n=o[t];y.setOptionModel(e+n,null)}},y.unsetOptions=function(e){for(var o in e){var t=e[o],n=y.defaultOptions[y.component.active.name][t];y.setOptionModel(t,null),y.component.options[y.component.active.id].id[t]=null,y.component.options[y.component.active.id].model[t]=n,y.component.options[y.component.active.id].original[t]=n}},y.addComponentTransform=function(){var e=y.objectToArrayObject(y.getOption("transform")),o=typeof e;"string"!==o&&"undefined"!==o||(e=[]),e.push({"transform-type":"rotate"}),y.setOptionModel("transform",e)},y.removeComponentTransform=function(e,o){var t=y.objectToArrayObject(y.getOption("transform"));t.splice(o,1),y.setOptionModel("transform",t)},y.addGridChildRule=function(e){e+=1;var o=y.getOption("grid-child-rules"),t=typeof o;"string"!==t&&"undefined"!==t||(o=[]),null!==o[e]&&void 0!==o[e]&&void 0!==o[e]["child-index"]||(o[e]={"child-index":e,"column-span":"","row-span":""}),y.setOptionModel("grid-child-rules",o)},y.resetGridChildRules=function(){!0===confirm("All Grid Childrens rules will be deleted. Are you sure?")&&y.setOptionModel("grid-child-rules",[])},y.isAJAXElement=function(e){return!!y.componentsTemplates[e]&&!(!y.componentsTemplates[e].phpCallback||"true"!=y.componentsTemplates[e].phpCallback)},y.isRepeaterGeneratedElement=function(e){return void 0===e&&(e=y.component.active.id),void 0!==y.component.options[e].source_id},y.saveElementPreset=function(){if(void 0!==y.newPresetName){if(/^[a-z\s_-][a-z\d\s_-]*$/i.test(y.newPresetName)){var e=y.component.active.id,o=y.component.active.name;if(y.isEditing("id")){var t=y.findComponentItem(y.componentsTree.children,e,y.getComponentItem),n=angular.copy(t.options),i=["activeselector","classes","ct_id","ct_content","ct_parent","selector","source_id"];for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];n[a]=null,delete n[a]}}else{if(!y.isEditing("class"))return void y.showNoticeModal("<div>Cannot save preset. Use class or ID selector</div>");n=angular.copy(y.classes[y.currentClass])}y.elementPresets&&null!=y.elementPresets||(y.elementPresets={}),y.elementPresets[o]&&null!=y.elementPresets[o]||(y.elementPresets[o]=[]);var r=y.elementPresets[o].push({name:y.newPresetName,options:angular.copy(n)});y.newPresetName="",y.currentPresetKey=r-1,console.log(y.elementPresets)}else alert("Bad Preset name. Should start with letters. Special characters are not allowed")}else y.showNoticeModal("<div>No preset name defined</div>")},y.applyElementPreset=function(e,o){if(void 0!==e){var t=y.component.active.id,n=y.component.active.name;if(void 0!==o);else{if(void 0===y.elementPresets[n]||void 0===y.elementPresets[n][e])return void y.showNoticeModal("<div>Preset doesn't exist</div>");o=y.elementPresets[n][e].options}if(y.isEditing("id")){var i=y.findComponentItem(y.componentsTree.children,t,y.getComponentItem),s=["activeselector","classes","ct_id","ct_content","ct_parent","selector","source_id","name","nicename"];for(var a in i.options)i.options.hasOwnProperty(a)&&-1===s.indexOf(a)&&(i.options[a]=null,delete i.options[a]);for(var a in y.component.options[t])y.component.options[t].hasOwnProperty(a)&&-1===s.indexOf(a)&&(y.component.options[t][a]=null,delete y.component.options[t][a]);jQuery.isEmptyObject(o)||angular.extend(i.options,angular.copy(o)),y.applyComponentDefaultOptions(t,n),y.applyComponentSavedOptions(t,i),y.applyModelOptions(t,n)}y.isEditing("class")&&(y.classes[y.currentClass]=angular.copy(o),y.classesCached=!1),y.currentPresetKey=e,y.rebuildDOM(t),y.outputCSSOptions(t,!0)}else y.showNoticeModal("<div>No preset key defined</div>")},y.deleteElementPreset=function(e,o){if(void 0!==o&&o.stopPropagation(),void 0!==e){var t=y.component.active.name;if(void 0!==y.elementPresets[t]&&void 0!==y.elementPresets[t][e]){if(void 0!==y.elementPresets[t][e])!0===confirm('"'+y.elementPresets[t][e].name+'" will be deleted forever from '+t+" presets. Are you sure?")&&y.elementPresets[t].splice(e,1)}else y.showNoticeModal("<div>No preset exist</div>")}else y.showNoticeModal("<div>No preset defined</div>")},y.isDefaultPreset=function(e,o){return void 0!==y.elementPresets[e]&&void 0!==y.elementPresets[e][o]&&void 0!==y.elementPresets[e][o].slug},y.deleteCurrentElementPreset=function(){y.deleteElementPreset(y.currentPresetKey),y.currentPresetKey=!1},y.getCurrentPresetName=function(){return y.getPresetName(y.currentPresetKey)},y.getPresetName=function(e){var o=y.getPreset(e);return null==o?"":o.name},y.getPreset=function(e){return null==e||null==y.elementPresets||null==y.elementPresets[y.component.active.name]?{}:y.elementPresets[y.component.active.name][e]},y.exportCurrentPreset=function(){var e=y.getPreset(y.currentPresetKey);y.parentScope.showPresetsDialog=!0,y.presetExportJSON=angular.toJson(e)},y.copyPresetExportJSON=function(){var e=document.createElement("textarea");e.value=y.presetExportJSON,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},y.importPreset=function(){var e=prompt("Enter preset JSON code");if(e){e=e.trim();var o=angular.fromJson(e),t=y.component.active.name;y.elementPresets&&null!=y.elementPresets||(y.elementPresets={}),y.elementPresets[t]&&null!=y.elementPresets[t]||(y.elementPresets[t]=[]),y.elementPresets[t].push(o)}},y.clearCurrentElementStyles=function(){!0===confirm("All element's styles will be deleted for "+y.component.options[y.component.active.id].nicename+". Are you sure?")&&y.applyElementPreset(!1,{})},y.getGlobalCondition=function(e){var o=y.component.active.id;return null!=y.component.options[o].model.globalconditions&&null!=y.component.options[o].model.globalconditions[e]&&null!=y.component.options[o].model.globalconditions[e].name&&y.globalConditions[y.component.options[o].model.globalconditions[e].name]},y.getConditionValue=function(e,o){var t=y.getGlobalCondition(e);return null==t||null==t.values?"":t.values.keys&&t.values.options[o.value]?t.values.options[o.value]:o.value},y.getConditionPlaceholder=function(e){var o=y.getGlobalCondition(e);return null==o||null==o.values?"Custom Value...":o.values.placeholder?o.values.placeholder:"Custom Value..."},y.isCustomCondition=function(e){var o=y.getGlobalCondition(e);return null!=o&&null!=o.values&&o.values.custom},y.isAJAXCondition=function(e){var o=y.getGlobalCondition(e);return null!=o&&null!=o.values&&o.values.ajax},y.updateConditionOptions=function(e,o,t){if(null!=e&&null!=o){if(""!==t){var n=!1;for(var i in o)if(o.hasOwnProperty(i)&&o[i]==t){y.setConditionValue(e,i,t),n=!0;break}n||y.setConditionValue(e,-1,t)}var s=y.getGlobalCondition(e);null!=s?s.values.options=o:console.log("No global condition found with index: "+e)}},y.getConditionName=function(e){var o=y.component.active.id;return y.component.options[o].model.globalconditions&&y.component.options[o].model.globalconditions[e]&&y.component.options[o].model.globalconditions[e].name?y.component.options[o].model.globalconditions[e].name:""},y.isKeysCondition=function(e){var o=y.getConditionName(e);return!!(y.globalConditions[o]&&y.globalConditions[o].values&&y.globalConditions[o].values.keys)},y.setConditionValue=function(e,o,t){var n=y.component.active.id;y.isKeysCondition(e)&&void 0!==o?y.component.options[n].model.globalconditions[e].value=o:y.component.options[n].model.globalconditions[e].value=t,y.component.options[n].model.globalconditions[e].searchValue=t,y.setOptionModel("globalconditions",y.component.options[n].model.globalconditions)},y.validateCustomAttributeName=function(e){var o=y.component.active.id,t=y.getOption("custom-attributes",o);if(void 0!==t[e]){var n=t[e].name;if(void 0!==n){var i=RegExp("[^a-z-_]+","gi");i.test(n)&&(t[e].name=n.replace(i,""),y.setOptionModel("custom-attributes",t,o),y.showNoticeModal("<div>Name may only contain underscores (_), hyphens (-) and letters (a–z and A-Z).</div>"))}}},y.validateCustomTag=function(e){var o=y.component.active.id,t=y.getOption(e,o);if(!y.regexTestCustomTag(t)){var n=RegExp("[a-z]+[a-z0-9-]*","gi"),i=t.match(n);t=i&&i[0]?i[0]:"",y.setOptionModel(e,t,o),y.showNoticeModal("<div>Tag must begin with a letter and may only contain letters (a-z and A-Z) and numbers (0-9).</div>")}},y.regexTestCustomTag=function(e){if(!e)return!1;var o=RegExp("[a-z]+[a-z0-9-]*","gi");return!(!e.match(o)||e.match(o)[0]!=e)},y.filterCustomTag=function(e){if(!e)return"div";var o=RegExp("[a-z]+[a-z0-9]*","gi"),t=e.match(o);return t&&t[0]?t[0]:"div"},y.validateCustomAttributeValue=function(e){var o=y.component.active.id,t=y.getOption("custom-attributes",o);if(void 0!==t[e]){var n=t[e].value;if(void 0!==n){var i=y.replaceSpecialChars(n);i!==n&&(t[e].value=i,y.setOptionModel("custom-attributes",t,o),y.showNoticeModal("<div>Value may NOT contain quotes and '&lt;', '&gt;' characters. These were auto converted to corresponding HTML enteties.</div>"))}}},y.validateHTMLAttributeValue=function(e){var o=y.component.active.id,t=y.getOption(e,o);if(void 0!==t){var n=y.replaceSpecialChars(t);n!==t&&(y.setOptionModel(e,n,o),y.showNoticeModal("<div>Value may NOT contain quotes and '&lt;', '&gt;' characters. These were auto converted to corresponding HTML enteties.</div>"))}},y.replaceSpecialChars=function(e){return void 0===e||void 0===e.replace?e:e=e.replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&apos;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;")},y.applyCustomAttributes=function(e){var o=y.getOption("custom-attributes",e);for(var t in o)if(o.hasOwnProperty(t)){var n=o[t];if(!n||!n.name)continue;var i=n.name.match(/\[oxygen[^\]]*\]/gi),s=n.value.match(/\[oxygen[^\]]*\]/gi);if((i||s)&&y.renderCustomAttributeDynamicData(e,n.name,n.value),!i&&!s){var a=y.getComponentById(e);a.attr&&n.name&&a.attr(n.name,n.value)}}},y.isIDLocked=function(e){return null==e&&(e=y.component.active.id),!(!y.component.options[e]||!y.component.options[e].id||"true"!=y.component.options[e].id["selector-locked"])}}]);
CTFrontendBuilder.controller("ControllerPresets",["$scope","$parentScope","$timeout",function(s,r,e){s.saveElementPreset=function(){if(void 0!==s.newPresetName){if(/^[a-z\s_-][a-z\d\s_-]*$/i.test(s.newPresetName)){var e=s.getCurrentSelectorOptions();if(!1!==e){var t=s.component.active.name;s.elementPresets&&null!=s.elementPresets||(s.elementPresets={}),s.elementPresets[t]&&null!=s.elementPresets[t]||(s.elementPresets[t]=[]);var n=s.elementPresets[t].push({name:s.newPresetName,options:angular.copy(e)});s.newPresetName="",s.currentPresetKey=n-1}else s.showNoticeModal("<div>Cannot save preset. Use class or ID selector</div>")}else alert("Bad Preset name. Should start with letters. Special characters are not allowed")}else s.showNoticeModal("<div>No preset name defined</div>")},s.getCurrentSelectorOptions=function(){var e,t=s.component.active.id;if(s.isEditing("id")){var n=s.findComponentItem(s.componentsTree.children,t,s.getComponentItem);e=angular.copy(n.options)}else e=!!s.isEditing("class")&&angular.copy(s.classes[s.currentClass]);return s.clearPresetPrivateOptions(e),e},s.getIDOptionsToCopy=function(e){var t=s.findComponentItem(s.componentsTree.children,e,s.getComponentItem);if(t){var n=angular.copy(t.options);return s.clearPresetPrivateOptions(n),n}},s.getClassOptionsToCopy=function(e){var t=angular.copy(s.classes[e]);if(t)return s.clearPresetPrivateOptions(t),t},s.clearPresetPrivateOptions=function(e){for(var t in e)e.hasOwnProperty(t)&&(s.isPrivateOption(t)?(e[t]=null,delete e[t]):"object"!=typeof e[t]||Array.isArray(e[t])||s.clearPresetPrivateOptions(e[t]))},s.clearOptionsAndKeepPrivate=function(e){for(var t in e)e.hasOwnProperty(t)&&(s.isPrivateOption(t)||("object"!=typeof e[t]||Array.isArray(e[t])||"before"===t||"after"===t?(e[t]=null,delete e[t]):s.clearOptionsAndKeepPrivate(e[t])))},s.isPrivateOption=function(e){return-1<["activeselector","classes","ct_id","ct_content","ct_parent","selector","source_id","name","nicename","ct_shortcode","ct_widget","ct_data","ct_sidebar","ct_nav_menu","oxy_builtin","custom-attributes","custom-js","tabs_contents_wrapper","active_tab_class","image_ids","acf_field","woo_product_id","menu_id","icon-id"].indexOf(e)},s.applyElementPreset=function(e,t){if(void 0!==e){var n=s.component.active.id,r=s.component.active.name;if(void 0!==t);else{if(void 0===s.elementPresets[r]||void 0===s.elementPresets[r][e])return void s.showNoticeModal("<div>Preset doesn't exist</div>");t=s.elementPresets[r][e].options}if(s.isEditing("id")){var o=s.findComponentItem(s.componentsTree.children,n,s.getComponentItem);s.clearOptionsAndKeepPrivate(o.options),s.clearOptionsAndKeepPrivate(s.component.options[n]),jQuery.isEmptyObject(t)||jQuery.extend(!0,o.options,angular.copy(t)),s.applyComponentDefaultOptions(n,r),s.applyComponentSavedOptions(n,o),s.applyModelOptions(n,r)}s.isEditing("class")&&(s.classes[s.currentClass]=angular.copy(t),s.classesCached=!1),s.currentPresetKey=e,s.rebuildDOM(n),s.outputCSSOptions(n,!0)}else s.showNoticeModal("<div>No preset key defined</div>")},s.deleteElementPreset=function(e,t){if(void 0!==t&&t.stopPropagation(),void 0!==e){var n=s.component.active.name;if(void 0!==s.elementPresets[n]&&void 0!==s.elementPresets[n][e]){if(void 0!==s.elementPresets[n][e])!0===confirm('"'+s.elementPresets[n][e].name+'" will be deleted forever from '+n+" presets. Are you sure?")&&s.elementPresets[n].splice(e,1)}else s.showNoticeModal("<div>No preset exist</div>")}else s.showNoticeModal("<div>No preset defined</div>")},s.isDefaultPreset=function(e,t){return void 0!==s.elementPresets&&void 0!==s.elementPresets[e]&&void 0!==s.elementPresets[e][t]&&void 0!==s.elementPresets[e][t].slug},s.deleteCurrentElementPreset=function(){s.deleteElementPreset(s.currentPresetKey),s.currentPresetKey=!1},s.getCurrentPresetName=function(){return s.getPresetName(s.currentPresetKey)},s.getPresetName=function(e){var t=s.getPreset(e);return null==t?"":t.name},s.getPreset=function(e){return null==e||null==s.elementPresets||null==s.elementPresets[s.component.active.name]?{}:s.elementPresets[s.component.active.name][e]},s.exportCurrentPreset=function(){var e=s.getPreset(s.currentPresetKey);s.parentScope.showPresetsDialog=!0,s.presetExportJSON=angular.toJson(e)},s.copyPresetExportJSON=function(){var e=document.createElement("textarea");e.value=s.presetExportJSON,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},s.importPreset=function(){var e=prompt("Enter preset JSON code");if(e){e=e.trim();var t=angular.fromJson(e),n=s.component.active.name;s.elementPresets&&null!=s.elementPresets||(s.elementPresets={}),s.elementPresets[n]&&null!=s.elementPresets[n]||(s.elementPresets[n]=[]),s.elementPresets[n].push(t)}},s.clearCurrentSelectorOptions=function(e){if(!0===e)t=!0;else var t=confirm("Current selector styles will be deleted for "+s.component.options[s.component.active.id].nicename+". Are you sure?");!0===t&&(s.applyElementPreset(!1,{}),s.setFirstTimeOptions(s.component.active.id,s.component.active.name))},s.clearSelectorOptions=function(e){if(!0===(void 0!==e?confirm('"'+e+'" styles will be deleted. Are you sure?'):confirm("ID styles will be deleted for "+s.component.options[s.component.active.id].nicename+". Are you sure?"))){var t=!!s.currentClass&&s.currentClass;void 0!==e?s.setCurrentClass(e):s.switchEditToId(!0),s.applyElementPreset(!1,{}),s.setFirstTimeOptions(s.component.active.id,s.component.active.name),t?s.setCurrentClass(t):s.switchEditToId(!0)}},s.copySelectorOptions=function(e){var t;if(r.copySelectorFromID)t=s.getIDOptionsToCopy(r.copySelectorFromID);else{if(!r.copySelectorFromClass)return void s.showNoticeModal("<div>Nothing to copy from</div>");t=s.getClassOptionsToCopy(r.copySelectorFromClass)}var n=!!s.currentClass&&s.currentClass;void 0!==e?s.setCurrentClass(e):s.switchEditToId(!0),s.applyElementPreset(!1,t),n?s.setCurrentClass(n):s.copySelectorFromClass&&s.switchEditToId(!0),r.copySelectorFromID=!1,r.copySelectorFromClass=!1}}]);
CTFrontendBuilder.controller("ControllerConditions",["$scope","$parentScope","$timeout",function(a,o,n){a.getGlobalCondition=function(o){var n=a.component.active.id;return null!=a.component.options[n].model.globalconditions&&null!=a.component.options[n].model.globalconditions[o]&&null!=a.component.options[n].model.globalconditions[o].name&&a.globalConditions[a.component.options[n].model.globalconditions[o].name]},a.getConditionValue=function(o,n){var l=a.getGlobalCondition(o);return null==l||null==l.values?"":l.values.keys&&l.values.options[n.value]?l.values.options[n.value]:n.value},a.getConditionPlaceholder=function(o){var n=a.getGlobalCondition(o);return null==n||null==n.values?"Custom Value...":n.values.placeholder?n.values.placeholder:"Custom Value..."},a.isCustomCondition=function(o){var n=a.getGlobalCondition(o);return null!=n&&null!=n.values&&n.values.custom},a.isAJAXCondition=function(o){var n=a.getGlobalCondition(o);return null!=n&&null!=n.values&&n.values.ajax},a.updateConditionOptions=function(o,n,l){if(null!=o&&null!=n){if(""!==l){var i=!1;for(var t in n)if(n.hasOwnProperty(t)&&n[t]==l){a.setConditionValue(o,t,l),i=!0;break}i||a.setConditionValue(o,-1,l)}var e=a.getGlobalCondition(o);null!=e?e.values.options=n:console.log("No global condition found with index: "+o)}},a.getConditionName=function(o){var n=a.component.active.id;return a.component.options[n].model.globalconditions&&a.component.options[n].model.globalconditions[o]&&a.component.options[n].model.globalconditions[o].name?a.component.options[n].model.globalconditions[o].name:""},a.isKeysCondition=function(o){var n=a.getConditionName(o);return!!(a.globalConditions[n]&&a.globalConditions[n].values&&a.globalConditions[n].values.keys)},a.setConditionValue=function(o,n,l){var i=a.component.active.id;a.isKeysCondition(o)&&void 0!==n?a.component.options[i].model.globalconditions[o].value=n:a.component.options[i].model.globalconditions[o].value=l,a.component.options[i].model.globalconditions[o].searchValue=l,a.setOptionModel("globalconditions",a.component.options[i].model.globalconditions)}}]);
CTFrontendBuilder.controller("ControllerFonts",["$scope","$http","$timeout",function(s,n,o){s.APIKey="AIzaSyBlDz9OGMf_5_-QxgHPTjjmvYVzEauwcQE",s.WebFontsUrl="https://www.googleapis.com/webfonts/v1/webfonts",s.webSafeFonts=["Georgia, serif","Times New Roman, Times, serif","Arial, Helvetica, sans-serif","Arial Black, Gadget, sans-serif","Tahoma, Geneva, sans-serif","Verdana, Geneva, sans-serif","Courier New, Courier, monospace"],s.showFonts=[],s.loadedFonts=[],s.googleFontsList=[],s.getWebFontsList=function(){if(s.googleFontsCache){var o={action:"oxy_get_google_fonts",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};n({method:"GET",url:CtBuilderAjax.ajaxUrl,params:o,transformResponse:!1}).then(function(o){fonts=JSON.parse(o.data),fonts||(fonts=[]),s.googleFontsList=fonts,s.loadSavedGlobalFonts()}).catch(function(o){console.log(o)})}else n({method:"GET",url:s.WebFontsUrl,params:{key:s.APIKey,sort:"popularity"}}).then(function(o){var n=o.data;angular.forEach(n.items,function(o){s.googleFontsList.push({family:o.family,variants:o.variants})}),s.loadSavedGlobalFonts()}).catch(function(o,n,t,e){console.log(o)})},s.getGoogleFont=function(n){var o=s.googleFontsList.find(function(o){return o.family===n});return void 0!==o&&o},s.setComponentFont=function(o,n,t,e){void 0===e&&(e="font-family"),s.loadWebFont(t),s.component.options[o].model[e]=t,s.setOption(o,n,e),s.showFonts=[],s.fontsFilter=""},s.getComponentFont=function(o,n,t,e){if(0==o)return"";if(t||(t="model"),null==e&&(e="font-family"),o||(o=s.component.active.id),s.component.options[o]&&void 0!==s.component.options[o][t])var a=s.component.options[o][t][e];return a?"global"==a[0]?!0===n?a[1]+" ("+s.getGlobalFont(a[1])+")":s.getGlobalFont(a[1]):a:void 0},s.setGlobalFont=function(o,n){s.globalSettings.fonts[o]=n,s.fontsFilter="",s.loadWebFont(["global",o]),s.classesCached=!1,s.updateAllComponentsCacheStyles(),s.outputCSSOptions(),s.unsavedChanges()},s.getGlobalFont=function(o){return s.globalSettings.fonts[o]},s.addGlobalFont=function(){var o=prompt("Custom global font name (i.e 'My Font'):");if(null!=o)return s.globalSettings.fonts[o]="Open Sans";s.unsavedChanges()},s.deleteGlobalFont=function(t){if(!confirm('Are you sure to delete "'+t+'" font?'))return!1;delete s.globalSettings.fonts[t],angular.forEach(s.classes,function(o,n){angular.forEach(o,function(o,n){o["font-family"]&&o["font-family"][1]==t&&delete o["font-family"]})}),s.unsavedChanges()},s.checkGlobalFont=function(o){angular.forEach(o,function(e,a){"object"==typeof e&&angular.forEach(e,function(o,n){if("object"==typeof o&&"media"==a)s.checkGlobalFont(o);else{var t=!0;"font-family"==n&&"global"==o[0]&&(t=s.getGlobalFont(o[1])),"string"==typeof n&&-1<n.indexOf("font-family")&&"global"==o[0]&&(t=s.getGlobalFont(o[1])),null==t&&delete e[n]}})})},s.loadWebFont=function(o,n){if("true"!=s.disableGoogleFonts){if("Inherit"==o)return!1;var t=":100,200,300,400,500,600,700,800,900";if("global"==o[0]){if(name=s.getGlobalFont(o[1]),!1===s.getGoogleFont(name))return!1;if(s.globalSettings.fontsOptions&&s.globalSettings.fontsOptions[o[1]]){for(var e in t=":",s.globalSettings.fontsOptions[o[1]])"true"==s.globalSettings.fontsOptions[o[1]][e]&&(t+=e+",");":"==t&&(t=":100,200,300,400,500,600,700,800,900")}}else name=o;if(-1<s.webSafeFonts.indexOf(name))return!1;if(s.elegantCustomFonts&&-1<s.elegantCustomFonts.indexOf(name))return!1;if(s.typeKitFonts)for(var a=0,l=s.typeKitFonts.length;a<l;a++)if(s.typeKitFonts[a].slug===name)return!1;if(-1<s.loadedFonts.indexOf(name)&&!0!==n)return!1;s.loadedFonts.push(name),name&&""!==name&&(name+=t,WebFont.load({google:{families:[name]}}))}},s.loadSavedGlobalFonts=function(){angular.forEach(s.globalSettings.fonts,function(o,n){s.loadWebFont(["global",n])})},s.globalFontExist=function(t){var e=!1;return angular.forEach(s.globalSettings.fonts,function(o,n){t==o&&(e=!0)}),e}}]);
CTFrontendBuilder.controller("ControllerSVGIcons",["$scope","$http","$timeout",function(i,t,n){i.setCurrentSVGSet=function(t){i.currentSVGSet=t,i.showSVGSets=!1},i.setSVGIcon=function(t,n,o){void 0===o&&(o="icon-id");var e=i.component.active.id,c=i.component.active.name;t=i.currentSVGSet.split(" ").join("")+t,i.component.options[e].model[o]=t,i.setOption(e,c,o),i.iconFilter.title=n,i.parentScope.switchActionTab("SVGIcons")}}]);
CTFrontendBuilder.controller("ControllerCSS",["$scope","$parentScope","$http","$timeout",function(Qe,s,e,t){var o,n;Qe.idStylesContainer=document.getElementById("ct-id-styles"),Qe.classStylesContainer=document.getElementById("ct-class-styles"),Qe.customSelectorsExample={"#my-custom-id":{original:{color:"red","font-size":"24px"}}},Qe.selectedCSSFolder=null,Qe.expandedFolder=[],Qe.expandedSelectorFolder=[],Qe.expandedStylesets=[],Qe.selectedSelectorFolder=null,Qe.selectedNodeType=null,Qe.selectedStyleSet=null,Qe.selectorDetector={mode:!1},Qe.cssFolderMenuOpen=!1,Qe.selectorFolderMenuOpen=!1,Qe.componentSelector={},Qe.selectorToEdit=!1,Qe.selectorHighlighted=!0,Qe.expandedStyleSets=[],Qe.APIElementsDefaultCSS=[],Qe.excludeProperties=["ct_content","ct_id","ct_parent","tag","url","src","alt","target","icon-id","section-width","custom-width","header-width","header-custom-width","header-row-width","header-row-custom-width","container-padding-top","container-padding-right","container-padding-bottom","container-padding-left","background-position-top","background-position-left","background-size-width","background-size-height","video-padding-bottom","use-custom","custom-code","embed-src","button-style","button-size","button-color","button-text-color","gradient","background","overlay-color","icon-size","icon-style","icon-color","icon-background-color","use-acf-repeater","acf-repeater","background-imagedynamic","srcdynamic","urldynamic","globalConditionsResult","conditionspreview","conditionstype","custom-js","border-all-width","border-all-style","border-all-color","function_name","full_shortcode","gutter","code-css","code-php","code-js","class_name","id_base","pretty_name","friendly_name","separator","date_format","size","meta_key","hover_color","flex-reverse","stack-columns-vertically","reverse-column-order","set-columns-width-50","menu_id","video_background","video_background_media","video_background_hide","aos-type","aos-duration","aos-easing","aos-offset","aos-delay","aos-anchor","aos-anchor-placement","aos-once","aos-enable","transform","grid-match-height-of-tallest-child","grid-column-count","grid-column-min-width","grid-column-max-width","grid-column-gap","grid-row-count","grid-row-behavior","grid-row-min-height","grid-row-max-height","grid-row-gap","grid-justify-items","grid-align-items","image-type","attachment-size"],Qe.cache.idCSS="",Qe.cache.idStyles={},Qe.cache.classCSS="",Qe.cache.classStyles={},Qe.cache.selectorCSS="",Qe.cache.selectorStyles={},Qe.cache.mediaCSS="",Qe.cache.mediaStyles={},Qe.contentAdded=[],Qe.socialIcons=[],Qe.socialIcons.networks=["facebook","instagram","twitter","linkedin","rss","youtube"],Qe.socialIcons.networkColors={facebook:"#3b5998",instagram:"#c32aa3",twitter:"#00b6f1",linkedin:"#007bb6",rss:"#ee802f",youtube:"#ff0000"},Qe.socialIcons.networkHoverColors={facebook:"#5b79b8",instagram:"#e34ac3",twitter:"#20d6ff",linkedin:"#209bd6",rss:"#ffa04f",youtube:"#ff4444"},Qe.mappedSelectors={},Qe.filterStylesheets=function(t){var e=Qe.styleSheets.filter(function(e){return e.id==t.parent});return!(0<e.length&&0===e[0].status)&&-1!==parseInt(t.parent)},Qe.setSelectedSelectorFolder=function(e){Qe.setSelectedNodeType("selectorfolder"),Qe.selectedSelectorFolder=e},Qe.getCSSFolder=function(e){return Qe.styleSheets.find(function(e){return e.id===iframeScope.selectedCSSFolder})},Qe.setSelectedCSSFolder=function(e){Qe.selectedCSSFolder=e},Qe.setActiveCSSFolder=function(e){Qe.setSelectedNodeType("cssfolder")},Qe.setSelectedNodeType=function(e){"stylesheet"!==e&&s.toggleSidebar(!0),Qe.selectedNodeType=e},Qe.greaterThan=function(t,o){return function(e){return e[t]>o}},Qe.equalsTo=function(t,o){return function(e){return e[t]===o}},Qe.toggleCSSFolder=function(e){Qe.cssFolderMenuOpen=null,e.status=1==e.status?0:1},Qe.toggleSelectorFolder=function(e){e.status=1==e.status?0:1},Qe.checkNewCustomSelector=function(e){void 0===Qe.customSelectors[e]&&(Qe.customSelectors[e]={set_name:"Uncategorized Custom Selectors",original:{}}),void 0===Qe.customSelectors[e].set_name&&(Qe.customSelectors[e].set_name="Uncategorized Custom Selectors"),void 0===Qe.customSelectors[e].original&&(Qe.customSelectors[e].original={})},Qe.setCustomSelectorToEdit=function(e){if(Qe.styleSetActive=!1,0<Qe.component.active.id&&(Qe.activeSelectors[Qe.component.active.id]=void 0!==Qe.activeSelectors[Qe.component.active.id]?Qe.activeSelectors[Qe.component.active.id]:Qe.component.options[Qe.component.active.id].model.activeselector,Qe.activeSelectors[Qe.component.active.id]&&Qe.setCurrentClass(!!Qe.activeSelectors[Qe.component.active.id]&&Qe.activeSelectors[Qe.component.active.id])),Qe.log&&console.log("setCustomSelectorToEdit()",e),"string"==typeof(Qe.selectorToEdit=e)){Qe.activateComponent(-1,"ct_selector");var t=e.substr(1);Qe.classes[t]?(Qe.setCurrentClass(t),Qe.populateSelectorFolderDropdown(!0),Qe.setSelectedNodeType("class")):(Qe.setCurrentClass(!1),Qe.populateSelectorFolderDropdown(),Qe.setSelectedNodeType("selector")),Qe.customSelectors[e]&&(Qe.expandedStyleSets[Qe.customSelectors[e].set_name]=!0)}Qe.highlightSelector(!0,e),s.cleanEmptySelectors&&""!==e&&s.cleanEmptySelectors()},Qe.setStyleSetActive=function(){Qe.setSelectedNodeType("styleset"),Qe.styleSetActive=!0,Qe.selectorToEdit=!1,Qe.currentClass=!1},Qe.populateSelectorFolderDropdown=function(e){var t,o="";e?(t=Qe.classes[Qe.currentClass])&&(o=t.parent):Qe.selectedStyleSet?o=Qe.styleSets[Qe.selectedStyleSet].parent:(t=Qe.customSelectors[Qe.selectorToEdit])&&(o=t.parent);Qe.currentActiveFolder=o},Qe.setStyleSheetToEdit=function(e){var t=_.findWhere(Qe.styleSheets,{id:e.parent});Qe.currentActiveStylesheetFolder=t?t.name:"",Qe.cancelDeleteUndo(),Qe.log&&console.log("setStyleSheetToEdit()",e),Qe.activateComponent(0),Qe.stylesheetToEdit=e,Qe.parentScope.switchActionTab("styleSheet"),Qe.setSelectedNodeType("stylesheet"),Qe.parentScope.expandSidebar()},Qe.highlightSelector=function(e,t,o){if(Qe.log&&console.log("highlightSelector()",e,t),!1===t)return Qe.outputCSSStyles("ct-selector-highlight",""),!1;o&&o.stopPropagation();var r="";if(void 0===t&&(t=Qe.selectorToEdit),Qe.selectorHighlighted=void 0===e?!Qe.selectorHighlighted:e,Qe.selectorHighlighted){var a=[];try{a=t.indexOf(".")<0&&t.indexOf("#")<0&&t.indexOf("body")<0?angular.element(t,".oxygen-body"):angular.element(t)}catch(e){console.log(e)}if(0==a.length)return Qe.selectorHighlighted=!1,Qe.outputCSSStyles("ct-selector-highlight",""),!1}var i="";i="original"==Qe.currentState||"hover"==Qe.currentState||"active"==Qe.currentState||"focus"==Qe.currentState?"":":"+Qe.currentState,Qe.selectorHighlighted&&(r=t+i+"{outline: 1px dashed rgb(19, 187, 38); outline-offset: 0px;}",t.indexOf(".")<0&&t.indexOf("#")<0&&t.indexOf("body")<0&&(r=".oxygen-body "+r)),Qe.outputCSSStyles("ct-selector-highlight",r)},Qe.deleteSelectorFolder=function(t){if(Qe.styleFolders.hasOwnProperty(t)){if((_.findWhere(Qe.styleSets,{parent:t})||_.findWhere(Qe.classes,{parent:t}))&&!confirm("Are you sure you wish to delete this folder and all classes and selectors inside it?"))return!1;angular.forEach(iframeScope.styleSets,function(e){e.parent===t&&delete iframeScope.styleSets[e.key]}),angular.forEach(iframeScope.classes,function(e){e.parent===t&&delete iframeScope.classes[e.key]}),delete Qe.styleFolders[t]}},Qe.toggleUncategorizedFolderContents=function(e){e?(_.each(_.filter(Qe.styleSets,function(e){return void 0===e.parent||null===e.parent}),function(e){e.parent=-1}),_.each(_.filter(Qe.classes,function(e){return void 0===e.parent||null===e.parent}),function(e){e.parent=-1})):(_.each(_.filter(Qe.styleSets,function(e){return-1===e.parent||"-1"===e.parent}),function(e){delete e.parent}),_.each(_.filter(Qe.classes,function(e){return-1===e.parent||"-1"===e.parent}),function(e){delete e.parent}))},Qe.toggleUncategorizedStyleSheets=function(e){e?_.each(_.filter(Qe.styleSheets,function(e){return void 0===e.parent||null===e.parent||0===parseInt(e.parent)}),function(e){e.parent=-1}):_.each(_.filter(Qe.styleSheets,function(e){return-1===e.parent||"-1"===e.parent}),function(e){e.parent=0})},Qe.addSelectorFolder=function(){Qe.cancelDeleteUndo();var e=prompt("Provide a name for the folder").trim();/^[a-z_-][a-z\d_-]*$/i.test(e)?Qe.styleFolders.hasOwnProperty(e)?alert("'"+e+"' already exist."):Qe.styleFolders[e]={status:1}:alert("Bad folder name. Special characters and spaces are not allowed")},Qe.addSelectorItem=function(){Qe.cancelDeleteUndo();var e=prompt("Type a valid CSS selector").trim();try{document.querySelector(e)}catch(e){return alert("Not a valid selector"),!1}if(Qe.customSelectors.hasOwnProperty(e))alert("'"+e+"' already exist.");else{Qe.customSelectors[e]={set_name:"Uncategorized Custom Selectors",original:{}},Qe.selectedSelectorFolder&&Qe.styleFolders.hasOwnProperty(Qe.selectedSelectorFolder)&&(Qe.customSelectors[e].parent=Qe.selectedSelectorFolder),Qe.setCustomSelectorToEdit(e),Qe.selectedStyleSet=e,Qe.expandedStyleSets["Uncategorized Custom Selectors"]=!0;var t=Qe.styleSets["Uncategorized Custom Selectors"].parent;void 0===t?iframeScope.expandedSelectorFolder[0]=!0:-1===t?iframeScope.expandedSelectorFolder.uncategorized=!0:iframeScope.expandedSelectorFolder[t]=!0}},Qe.addStyleSheet=function(e){Qe.cancelDeleteUndo();var t=prompt("Enter a name for the "+(e?"Folder":"Stylesheet"));if(t){t=t.trim();if(/^[a-z_-][a-z\d_-]*$/i.test(t))if(0<Qe.styleSheets.filter(function(e){return e.name==t}).length)alert("'"+t+"' already exist. Please choose another name.");else{var o=1;if(0<Qe.styleSheets.length&&(o=_.max(Qe.styleSheets,function(e){return e.id}).id+1),e)Qe.styleSheets.push({id:o,name:t,status:1,folder:1});else{var r=-1===Qe.selectedCSSFolder||null===Qe.selectedCSSFolder?0:Qe.selectedCSSFolder,a={id:o,name:t,css:"",parent:r};for(key in Qe.styleSheets.push(a),iframeScope.expandedFolder)iframeScope.expandedFolder[key]=!1;iframeScope.expandedFolder[r]=!0,iframeScope.setStyleSheetToEdit(a)}}else alert("Bad stylesheet name. Special characters and spaces are not allowed")}},Qe.deleteStyleSheet=function(t){if(Qe.cancelDeleteUndo(),t.folder){if(!confirm("Are you sure you wish to delete this folder and all stylesheets inside it?"))return!1}else if(!confirm('Delete "'+t.name+'" stylesheet from install? (Changes will take effect on Save).'))return!1;Qe.log&&console.log("deleteStyleSheet()",selector),Qe.styleSheets.splice(Qe.styleSheets.indexOf(t),1),t.folder&&(Qe.styleSheets=Qe.styleSheets.filter(function(e){return e.parent!=t.id})),angular.element(document.getElementById("ct-style-sheet-"+t.name)).remove(),Qe.stylesheetToEdit===t&&(Qe.stylesheetToEdit=!1,s.actionTabs.styleSheet=!1,s.toggleSidebar(!0)),Qe.selectedNodeType=null},Qe.deleteCustomSelector=function(e){return Qe.cancelDeleteUndo(),"Uncategorized Custom Selector"===e?(alert("Sorry, you can't delete the Style Set named Uncategorized Custom Selectors"),!1):!!confirm('Are you sure to delete "'+e+'" selector?')&&(Qe.log&&console.log("deleteCustomSelector()",e),delete Qe.customSelectors[e],Qe.selectorToEdit=!1,-1==Qe.component.active.id&&Qe.activateComponent(0,"root"),Qe.classesCached=!1,Qe.outputCSSOptions(),void Qe.unsavedChanges())},Qe.updateCustomSelectorValue=function(e,t){if(Qe.cancelDeleteUndo(),Qe.log&&console.log("updateCustomSelectorValue()",e,t),""===Qe.selectorToEdit)return!1;var o=Qe.currentState,r=Qe.selectorToEdit.substr(1);Qe.classes[r]?Qe.isEditing("media")?(Qe.classes[Qe.currentClass].media||(Qe.classes[Qe.currentClass].media={}),Qe.classes[Qe.currentClass].media[Qe.currentMedia]||(Qe.classes[Qe.currentClass].media[Qe.currentMedia]={}),Qe.classes[Qe.currentClass].media[Qe.currentMedia][o]||(Qe.classes[Qe.currentClass].media[Qe.currentMedia][o]={}),""==t?delete Qe.classes[Qe.currentClass].media[Qe.currentMedia][o][e]:Qe.classes[Qe.currentClass].media[Qe.currentMedia][o][e]=t):(Qe.classes[r][o]||(Qe.classes[r][o]={}),""==t?delete Qe.classes[r][o][e]:Qe.classes[r][o][e]=t):Qe.isEditing("media")?(Qe.customSelectors[Qe.selectorToEdit].media||(Qe.customSelectors[Qe.selectorToEdit].media={}),Qe.customSelectors[Qe.selectorToEdit].media[Qe.currentMedia]||(Qe.customSelectors[Qe.selectorToEdit].media[Qe.currentMedia]={}),Qe.customSelectors[Qe.selectorToEdit].media[Qe.currentMedia][o]||(Qe.customSelectors[Qe.selectorToEdit].media[Qe.currentMedia][o]={}),""==t?delete Qe.customSelectors[Qe.selectorToEdit].media[Qe.currentMedia][o][e]:Qe.customSelectors[Qe.selectorToEdit].media[Qe.currentMedia][o][e]=t):(Qe.customSelectors[Qe.selectorToEdit]||(Qe.customSelectors[Qe.selectorToEdit]={set_name:"Uncategorized Custom Selectors"}),Qe.customSelectors[Qe.selectorToEdit][o]||(Qe.customSelectors[Qe.selectorToEdit][o]={}),""==t?delete Qe.customSelectors[Qe.selectorToEdit][o][e]:Qe.customSelectors[Qe.selectorToEdit][o][e]=t)},Qe.outputCSSStyles=function(e,t){var o=document.getElementById(e),r="";r='<style id="'+e+'">',r+=t,r+="</style>",o?o.innerHTML=t:angular.element("head").append(r)},Qe.deleteCSSStyles=function(e){var t=document.getElementById(e);t&&angular.element(t).remove()},Qe.generateDynamicBackgrounds=function(o,e,r,a,t){void 0===t&&(t=Qe.componentsTree),Qe.dynamicBackgrounds=Qe.dynamicBackgrounds||{};var i={lock:!0};"id"===r?(Qe.dynamicBackgrounds[o]=Qe.dynamicBackgrounds[o]||{},Qe.dynamicBackgrounds[o]=i):"class"===r?(Qe.dynamicBackgrounds.classes=Qe.dynamicBackgrounds.classes||{},Qe.dynamicBackgrounds.classes[o]=Qe.dynamicBackgrounds.classes[o]||{},Qe.dynamicBackgrounds.classes[o]=i):"selector"===r&&(Qe.dynamicBackgrounds.selectors=Qe.dynamicBackgrounds.selectors||{},Qe.dynamicBackgrounds.selectors[o]=Qe.dynamicBackgrounds.selectors[o]||{},Qe.dynamicBackgrounds.selectors[o]=i);var n={};if("id"===r){var s=Qe.findComponentItem(t.children,o,Qe.getComponentItem);n=s?s.options:{}}else"class"===r?n=Qe.classes[o]||{}:"selector"===r&&(n=Qe.customSelectors[o]||{});var l=0;for(key in n)if(!(-1<["ct_id","ct_parent","set_name","parent","key","status","friendly_name","selector","activeselector","classes","nicename"].indexOf(key)))if("media"===key){i.media={};var c=n.media;for(bpKey in c)for(stateKey in i.media[bpKey]={},c[bpKey])"id"===r&&c[bpKey][stateKey]["background-image"]&&-1<c[bpKey][stateKey]["background-image"].indexOf("[oxygen")&&(i.media[bpKey][stateKey]=c[bpKey][stateKey]["background-image"],l++)}else"id"===r&&n[key]&&n[key]["background-image"]&&-1<n[key]["background-image"].indexOf("[oxygen")&&(i[key]=n[key]["background-image"],l++);for(key in i)if("lock"!==key)if("media"===key){c=i.media;for(bpKey in c)for(stateKey in c[bpKey])Qe.applyShortcodeResults(o,i.media[bpKey][stateKey],function(e,t){if("selector"===r?Qe.dynamicBackgrounds.selectors[o].media[t.bpKey][t.stateKey]=e.trim():"class"===r?Qe.dynamicBackgrounds.classes[o].media[t.bpKey][t.stateKey]=e.trim():"id"===r&&(Qe.dynamicBackgrounds[o].media[t.bpKey][t.stateKey]=e.trim()),0===--l)return delete i.lock,void a()},{id:o,bpKey:bpKey,stateKey:stateKey})}else Qe.applyShortcodeResults(o,i[key],function(e,t){if("selector"===r?Qe.dynamicBackgrounds.selectors[o][t.key]=e.trim():"class"===r?Qe.dynamicBackgrounds.classes[o][t.key]=e.trim():"id"===r&&(Qe.dynamicBackgrounds[o][t.key]=e.trim()),0===--l)return delete i.lock,void a()},{id:o,key:key});0===l&&(delete i.lock,a())},Qe.outputCSSOptions=function(e,r,t){Qe.APIElementsDefaultCSS=[],Qe.log&&(console.log("outputCSSOptions()",e),Qe.functionStart("outputCSSOptions()"));if(Qe.bufferedOutputStyles=Qe.bufferedOutputStyles||{},Qe.bufferedOutputStyles.keys=Qe.bufferedOutputStyles.keys||[],(Qe.isEditing("class")||Qe.isEditing("id")||1==r)&&Qe.bufferedOutputStyles.keys.indexOf("id")<0&&Qe.bufferedOutputStyles.keys.push("id"),!Qe.isEditing("class")&&Qe.classesCached||Qe.bufferedOutputStyles.keys.indexOf("classes")<0&&Qe.bufferedOutputStyles.keys.push("classes"),Qe.bufferedOutputStyles.keys.indexOf("selectors")<0&&Qe.bufferedOutputStyles.keys.push("selectors"),(Qe.isEditing("class")||Qe.isEditing("id")||1==r)&&(void 0!==e&&0<e?Qe.updateComponentCacheStyles(e,function(){Qe.cache.idCSS="",Object.keys(Qe.cache.idStyles).map(function(e,t){Qe.cache.idCSS+=Qe.cache.idStyles[e]}),Qe.outputCSSStylesAfterWait("id",Qe.cache.idCSS)}):(Object.keys(Qe.cache.idStyles).map(function(e,t){Qe.cache.idCSS+=Qe.cache.idStyles[e]}),Qe.outputCSSStylesAfterWait("id",Qe.cache.idCSS))),Qe.isEditing("class")||!Qe.classesCached)if(Qe.classesCached)void 0!==Qe.classes[Qe.currentClass]&&void 0!==Qe.classes[Qe.currentClass].parent&&void 0!==Qe.styleFolders[Qe.classes[Qe.currentClass].parent]&&1!==Qe.styleFolders[Qe.classes[Qe.currentClass].parent].status||-1!==parseInt(Qe.classes[Qe.currentClass].parent)&&(Qe.cache.classStyles[Qe.currentClass]=Qe.getSingleClassCSS(Qe.currentClass)),Qe.cache.classCSS="",Object.keys(Qe.cache.classStyles).map(function(e,t){Qe.cache.classCSS+=Qe.cache.classStyles[e]}),Qe.outputCSSStylesAfterWait("classes",Qe.cache.classCSS),"";else{Qe.cache.classStyles=[];var a=Object.keys(Qe.classes),i=function(e){var t=function(){0<a.length?i(a.shift()):(Qe.cache.classCSS="",Object.keys(Qe.cache.classStyles).map(function(e,t){Qe.cache.classCSS+=Qe.cache.classStyles[e]}),Qe.outputCSSStylesAfterWait("classes",Qe.cache.classCSS),"",Qe.classesCached=!0)};if(Qe.classes.hasOwnProperty(e)){var o=Qe.classes[e];Qe.cache.classStyles[e]="",(void 0===Qe.classes[e].parent||void 0===Qe.styleFolders[Qe.classes[e].parent]||1===Qe.styleFolders[Qe.classes[e].parent].status)&&-1!==parseInt(Qe.classes[e].parent)?Qe.generateDynamicBackgrounds(e,r,"class",function(){Qe.cache.classStyles[e]=Qe.getSingleClassCSS(e,o),t()}):t()}else t()};0<a.length?i(a.shift()):(Qe.cache.classCSS="",Qe.outputCSSStylesAfterWait("classes",Qe.cache.classCSS),Qe.classesCached=!0)}Qe.cache.selectorStyles=[],Qe.cache.selectorCSS="";var n=Object.keys(Qe.customSelectors),s=function(e){var t=function(){0<n.length?s(n.shift()):(Qe.cache.selectorCSS="",Object.keys(Qe.cache.selectorStyles).map(function(e,t){Qe.cache.selectorCSS+=Qe.cache.selectorStyles[e]}),Qe.outputCSSStylesAfterWait("selectors",Qe.cache.selectorCSS))};if(Qe.customSelectors.hasOwnProperty(e)){var o=Qe.customSelectors[e];Qe.cache.selectorStyles[e]="",!(void 0!==Qe.customSelectors[e].set_name&&void 0!==Qe.styleSets[Qe.customSelectors[e].set_name]&&void 0!==Qe.styleSets[Qe.customSelectors[e].set_name].parent&&void 0!==Qe.styleFolders[Qe.styleSets[Qe.customSelectors[e].set_name].parent]&&void 0!==Qe.styleFolders[Qe.styleSets[Qe.customSelectors[e].set_name].parent].status&&1!==Qe.styleFolders[Qe.styleSets[Qe.customSelectors[e].set_name].parent].status||void 0!==Qe.styleSets[Qe.customSelectors[e].set_name]&&-1===parseInt(Qe.styleSets[Qe.customSelectors[e].set_name].parent))?Qe.generateDynamicBackgrounds(e,r,"selector",function(){Qe.cache.selectorStyles[e]=Qe.getSingleSelectorCSS(e,o),t()}):t()}else t()};0<n.length?s(n.shift()):Qe.outputCSSStylesAfterWait("selectors",Qe.cache.selectorCSS),Qe.functionEnd("outputCSSOptions()")},Qe.outputCSSStylesAfterWait=function(e,t){"id"===e&&(Qe.idStylesContainer.innerHTML=t),"classes"===e&&(Qe.classStylesContainer.innerHTML=t),"selectors"===e&&Qe.outputCSSStyles("ct-custom-selectors",t)},Qe.updateComponentCacheStyles=function(e,t,o){Qe.contentAdded=[],Qe.log&&console.log("updateComponentCacheStyles()",e,Qe.component.options[e]),Qe.generateDynamicBackgrounds(e,!1,"id",function(){Qe.cache.idStyles[e]=Qe.getSingleComponentCSS(Qe.component.options[e],e,null,null,o),t&&t()})},Qe.updateAllComponentsCacheStyles=function(){for(var e in Qe.APIElementsDefaultCSS=[],Qe.functionStart("updateAllComponentsCacheStyles()"),Qe.component.options)Qe.component.options.hasOwnProperty(e)&&Qe.updateComponentCacheStyles(e,function(){Qe.cache.idCSS="",Object.keys(Qe.cache.idStyles).map(function(e,t){Qe.cache.idCSS+=Qe.cache.idStyles[e]}),Qe.outputCSSStylesAfterWait("id",Qe.cache.idCSS)});Qe.functionEnd("updateAllComponentsCacheStyles()")},Qe.removeComponentCacheStyles=function(e){delete Qe.cache.idStyles[e]},Qe.getDynamicBackground=function(e,t){var o;return"id"===e&&Qe.dynamicBackgrounds[t.id]?o=Qe.dynamicBackgrounds[t.id]:"class"===e&&Qe.dynamicBackgrounds.classes[t.id]?o=Qe.dynamicBackgrounds.classes[t.id]:"selector"===e&&Qe.dynamicBackgrounds.selectors[t.id]&&(o=Qe.dynamicBackgrounds.selectors[t.id]),t.media?o.media[t.media]["id"===t.stateName?"original":t.stateName]:o["id"===t.stateName?"original":t.stateName]},Qe.getSingleComponentCSS=function(e,t,o,r,a){if("ct_reusable"==e.name&&e.original){Qe.reusableCSS={},Qe.reusableCSS.styles="  ";var i=e.original.view_id;return Qe.postsData[i]&&(Qe.generateTreeCSS(Qe.postsData[i].post_tree,Qe.reusableCSS),Qe.outputCSSStyles("ct-re-usable-styles-"+i,Qe.reusableCSS.styles)),""}Qe.log&&(console.log("getSingleComponentCSS()",t,e,o),Qe.functionStart("getSingleComponentCSS()"));var n="",s="",l="",c=Qe.defaultOptions[e.name];for(var p in null==e.original&&(e.original=[]),e)if(e.hasOwnProperty(p)){var d=e[p];if("original"==p&&!o)continue;if(0!=t&&"object"==typeof d&&"model"!=p&&"classes"!=p&&"media"!=p){var g,m,u,_,y,h,b,x=angular.copy(e[p]),S=Qe.getCSSOptions(t,p,x,e.name);if(mergedOriginalOptions=angular.copy(e.original),originalOptions=Qe.getCSSOptions(t,"original",mergedOriginalOptions,e.name),l="id"==p||o&&"original"==p||p==Qe.currentState&&t==Qe.component.active.id&&Qe.isEditing("id")&&("hover"==p||"active"==p||"focus"==p)?"":":"+p,s="ct_paragraph"==e.name?" p":"",a){n+="#"+e.selector+'[ng-attr-component-id="'+t+'"]'+s+l+"{",n+=Qe.getBackgroundLayersCSS(S,e.name,"id",t,r,p)||"",n+="}";continue}if("ct_columns"==e.name){var f=Qe.getWidth(e.original.gutter);n+="#"+e.selector+" .ct-column"+l+"{",n+="margin-right:"+f.value/2+f.unit+";",n+="margin-left:"+f.value/2+f.unit+";",n+="}"}if("true"==e.original.dont_render&&(n+="#"+e.selector+"{",e.original["placeholder-width"]&&(n+="width:"+e.original["placeholder-width"]+(e.original["placeholder-width-unit"]||c["placeholder-width-unit"])+";"),e.original["placeholder-height"]&&(n+="height:"+e.original["placeholder-height"]+(e.original["placeholder-height-unit"]||c["placeholder-height-unit"])+";"),n+="}"),"ct_section"==e.name){n+="#"+e.selector+">.ct-section-inner-wrap"+l+"{",null==S["section-width"]&&(S["section-width"]=c["section-width"]),S["section-width"],"custom"==S["section-width"]&&S["custom-width"]&&(n+="max-width:"+S["custom-width"]+";"),"full-width"==S["section-width"]&&(n+="max-width:100%;"),S["container-padding-top"]&&(n+="padding-top:"+S["container-padding-top"]+";"),S["container-padding-right"]&&(n+="padding-right:"+S["container-padding-right"]+";"),S["container-padding-bottom"]&&(n+="padding-bottom:"+S["container-padding-bottom"]+";"),S["container-padding-left"]&&(n+="padding-left:"+S["container-padding-left"]+";"),S.display&&"grid"!=S["flex-direction"]&&(n+="display:"+S.display+";");var v="reverse"==S["flex-reverse"]?"-reverse":"";S["flex-direction"]&&"grid"!=S["flex-direction"]&&(n+="flex-direction:"+S["flex-direction"]+v+";"),S["justify-content"]&&(n+="justify-content:"+S["justify-content"]+";"),S["align-content"]&&(n+="align-content:"+S["align-content"]+";"),S["align-items"]&&(n+="align-items:"+S["align-items"]+";"),S["flex-wrap"]&&(n+="flex-wrap:"+S["flex-wrap"]+";"),S.gap&&(n+="gap:"+S.gap+";"),n+=Qe.getGridCSS(S,e.name)||"",n+="}",n+=Qe.getGridChildCSS(S,e.selector,l,"> .ct-section-inner-wrap"),e.original.video_background_hide&&(n+="@media (max-width: "+Qe.getMediaMaxSize(e.original.video_background_hide)+") {",n+="#"+e.selector+" .oxy-video-container { display: none; }",n+="}"),e.original.video_background_overlay&&(n+="#"+e.selector+" .oxy-video-overlay { background-color: "+e.original.video_background_overlay+"; }")}if("ct_section"==e.name&&(n+=Qe.getGridChildCSS(S,e.selector,l,!1)),"oxy_posts_grid"==e.name){var C=Qe.getGridCSS(S,e.name,"!important")||"";C&&(n+="#"+e.selector+"> .oxy-posts"+l+"{",n+=C,n+="}",n+="#"+e.selector+l+"{",n+="flex-direction: column",n+="}",n+=Qe.getGridChildCSS(S,e.selector,l,"> .oxy-posts"))}if("ct_section"!=e.name&&"oxy_posts_grid"!=e.name&&"oxy_dynamic_list"!=e.name&&(n+=Qe.getGridChildCSS(S,e.selector,l)),"oxy_dynamic_list"==e.name&&(n+=Qe.getGridChildCSS(S,e.selector,l,"",!1,"is repeater"),Qe.mapCSSProperty("paginate_size","font-size",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_color","color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_alignment","justify-content",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_wrap_alignment","justify-content",".oxy-repeater-pages-wrap"),Qe.mapCSSProperty("paginate_link_color","color",".oxy-repeater-pages a.page-numbers"),Qe.mapCSSProperty("paginate_link_hover_color","color",".oxy-repeater-pages a.page-numbers:hover"),Qe.mapCSSProperty("paginate_padding_top","padding-top",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_padding_left","padding-left",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_padding_right","padding-right",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_padding_bottom","padding-bottom",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_margin_top","margin-top",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_margin_left","margin-left",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_margin_right","margin-right",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_margin_bottom","margin-bottom",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_width","width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_min_width","min-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_max_width","max-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_height","height",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_min_height","min-height",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_max_height","max-height",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_flex_direction","flex-direction",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_flex_wrap","flex-wrap",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_all_color","border-color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_top_color","border-top-color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_left_color","border-left-color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_bottom_color","border-bottom-color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_right_color","border-right-color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_all_width","border-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_top_width","border-top-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_left_width","border-left-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_bottom_width","border-bottom-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_right_width","border-right-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_all_style","border-style",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_top_style","border-top-style",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_left_style","border-left-style",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_bottom_style","border-bottom-style",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_right_style","border-right-style",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_radius","border-radius",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_top_left_radius","border-top-left-radius",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_top_right_radius","border-top-right-radius",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_bottom_right_radius","border-bottom-right-radius",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_border_bottom_left_radius","border-bottom-left-radius",".oxy-repeater-pages"),Qe.mapCSSProperty("paginatelink_border_all_color","border-color",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_top_color","border-top-color",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_left_color","border-left-color",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_bottom_color","border-bottom-color",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_right_color","border-right-color",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_all_width","border-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_top_width","border-top-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_left_width","border-left-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_bottom_width","border-bottom-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_right_width","border-right-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_all_style","border-style",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_top_style","border-top-style",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_left_style","border-left-style",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_bottom_style","border-bottom-style",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_right_style","border-right-style",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_radius","border-radius",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_top_left_radius","border-top-left-radius",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_top_right_radius","border-top-right-radius",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_bottom_right_radius","border-bottom-right-radius",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_border_bottom_left_radius","border-bottom-left-radius",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelinkactive_border_all_color","border-color",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_top_color","border-top-color",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_left_color","border-left-color",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_bottom_color","border-bottom-color",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_right_color","border-right-color",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_all_width","border-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_top_width","border-top-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_left_width","border-left-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_bottom_width","border-bottom-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_right_width","border-right-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_all_style","border-style",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_top_style","border-top-style",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_left_style","border-left-style",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_bottom_style","border-bottom-style",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_right_style","border-right-style",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_radius","border-radius",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_top_left_radius","border-top-left-radius",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_top_right_radius","border-top-right-radius",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_bottom_right_radius","border-bottom-right-radius",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_border_bottom_left_radius","border-bottom-left-radius",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginate_background_color","background-color",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_background_image","background-image",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_background_size","background-size",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_background_size_width","background-size-width",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_background_size_height","background-size-height",".oxy-repeater-pages"),Qe.mapCSSProperty("paginate_background_repeat","background-repeat",".oxy-repeater-pages"),Qe.mapCSSProperty("paginatelink_background_color","background-color",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_background_image","background-image",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_background_size","background-size",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_background_size_width","background-size-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_background_size_height","background-size-height",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_background_repeat","background-repeat",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelinkactive_background_color","background-color",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_background_image","background-image",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_background_size","background-size",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_background_size_width","background-size-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_background_size_height","background-size-height",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_background_repeat","background-repeat",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelink_padding_top","padding-top",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_padding_left","padding-left",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_padding_right","padding-right",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_padding_bottom","padding-bottom",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_margin_top","margin-top",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_margin_left","margin-left",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_margin_right","margin-right",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_margin_bottom","margin-bottom",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_width","width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_min_width","min-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_max_width","max-width",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_height","height",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_min_height","min-height",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelink_max_height","max-height",".oxy-repeater-pages a"),Qe.mapCSSProperty("paginatelinkactive_padding_top","padding-top",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_padding_left","padding-left",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_padding_right","padding-right",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_padding_bottom","padding-bottom",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_margin_top","margin-top",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_margin_left","margin-left",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_margin_right","margin-right",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_margin_bottom","margin-bottom",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_width","width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_min_width","min-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_max_width","max-width",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_height","height",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_min_height","min-height",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkactive_max_height","max-height",".oxy-repeater-pages span.current"),Qe.mapCSSProperty("paginatelinkhover_background_color","background-color",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_background_image","background-image",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_background_size","background-size",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_background_size_width","background-size-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_background_size_height","background-size-height",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_background_repeat","background-repeat",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkactivehover_background_color","background-color",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_background_image","background-image",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_background_size","background-size",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_background_size_width","background-size-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_background_size_height","background-size-height",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_background_repeat","background-repeat",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkhover_padding_top","padding-top",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_padding_left","padding-left",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_padding_right","padding-right",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_padding_bottom","padding-bottom",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_margin_top","margin-top",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_margin_left","margin-left",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_margin_right","margin-right",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_margin_bottom","margin-bottom",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_width","width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_min_width","min-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_max_width","max-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_height","height",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_min_height","min-height",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_max_height","max-height",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkactivehover_padding_top","padding-top",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_padding_left","padding-left",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_padding_right","padding-right",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_padding_bottom","padding-bottom",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_margin_top","margin-top",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_margin_left","margin-left",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_margin_right","margin-right",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_margin_bottom","margin-bottom",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_width","width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_min_width","min-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_max_width","max-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_height","height",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_min_height","min-height",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_max_height","max-height",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkhover_border_all_color","border-color",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_top_color","border-top-color",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_left_color","border-left-color",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_bottom_color","border-bottom-color",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_right_color","border-right-color",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_all_width","border-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_top_width","border-top-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_left_width","border-left-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_bottom_width","border-bottom-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_right_width","border-right-width",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_all_style","border-style",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_top_style","border-top-style",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_left_style","border-left-style",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_bottom_style","border-bottom-style",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_right_style","border-right-style",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_radius","border-radius",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_top_left_radius","border-top-left-radius",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_top_right_radius","border-top-right-radius",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_bottom_right_radius","border-bottom-right-radius",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkhover_border_bottom_left_radius","border-bottom-left-radius",".oxy-repeater-pages a:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_all_color","border-color",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_top_color","border-top-color",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_left_color","border-left-color",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_bottom_color","border-bottom-color",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_right_color","border-right-color",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_all_width","border-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_top_width","border-top-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_left_width","border-left-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_bottom_width","border-bottom-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_right_width","border-right-width",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_all_style","border-style",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_top_style","border-top-style",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_left_style","border-left-style",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_bottom_style","border-bottom-style",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_right_style","border-right-style",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_radius","border-radius",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_top_left_radius","border-top-left-radius",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_top_right_radius","border-top-right-radius",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_bottom_right_radius","border-bottom-right-radius",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginatelinkactivehover_border_bottom_left_radius","border-bottom-left-radius",".oxy-repeater-pages span.current:hover"),Qe.mapCSSProperty("paginate_link_transition","transition",".oxy-repeater-pages > *")),"oxy_posts_grid"==e.name&&(Qe.mapCSSProperty("title_size","font-size",".oxy-post-title"),Qe.mapCSSProperty("title_color","color",".oxy-post-title"),Qe.mapCSSProperty("title_hover_color","color",".oxy-post-title:hover"),Qe.mapCSSProperty("meta_size","font-size",".oxy-post-meta"),Qe.mapCSSProperty("meta_color","color",".oxy-post-meta"),Qe.mapCSSProperty("content_size","font-size",".oxy-post-content"),Qe.mapCSSProperty("content_color","color",".oxy-post-content"),Qe.mapCSSProperty("read_more_size","font-size",".oxy-read-more"),Qe.mapCSSProperty("read_more_text_color","color",".oxy-read-more"),Qe.mapCSSProperty("read_more_button_color","background-color",".oxy-read-more"),Qe.mapCSSProperty("read_more_text_hover_color","color",".oxy-read-more:hover"),Qe.mapCSSProperty("read_more_button_hover_color","background-color",".oxy-read-more:hover"),Qe.mapCSSProperty("paginate_color","color",".oxy-easy-posts-pages"),Qe.mapCSSProperty("paginate_alignment","text-align",".oxy-easy-posts-pages"),Qe.mapCSSProperty("paginate_link_color","color",".oxy-easy-posts-pages a.page-numbers"),Qe.mapCSSProperty("paginate_link_hover_color","color",".oxy-easy-posts-pages a.page-numbers:hover"),"button"==e.original.read_more_display_as?(n+="#"+e.selector+" .oxy-read-more {",n+="text-decoration:none;",n+="padding:0.75em 1.5em;",n+="line-height:1;",n+="border-radius:3px;",n+="display:inline-block;",n+="}"):(Qe.unmapCSSProperty("background-color",".oxy-read-more"),Qe.unmapCSSProperty("background-color",".oxy-read-more:hover")),n+="@media (max-width: "+Qe.getMediaMaxSize(e.original.posts_5050_below)+") {",n+="#"+e.selector+" .oxy-post { width: 50% !important; }",n+="}",n+="@media (max-width: "+Qe.getMediaMaxSize(e.original.posts_100_below)+") {",n+="#"+e.selector+" .oxy-post { width: 100% !important; }",n+="}"),"oxy_comment_form"==e.name&&(Qe.mapCSSProperty("form_field_border_color","border-color","input, textarea"),Qe.mapCSSProperty("form_field_text_color","color","input, textarea"),Qe.mapCSSProperty("field_border_radius","border-radius","input, textarea"),Qe.mapCSSProperty("submit_button_background_color","background-color","#submit"),Qe.mapCSSProperty("submit_button_text_color","color","#submit")),"oxy_login_form"==e.name&&(Qe.mapCSSProperty("form_field_border_color","border-color","input, textarea"),Qe.mapCSSProperty("form_field_text_color","color","input, textarea"),Qe.mapCSSProperty("field_border_radius","border-radius","input, textarea"),Qe.mapCSSProperty("submit_button_background_color","background-color","input[type=submit]"),Qe.mapCSSProperty("submit_button_text_color","color","input[type=submit]")),"oxy_search_form"==e.name&&(Qe.mapCSSProperty("form_field_border_color","border-color","input, textarea"),Qe.mapCSSProperty("form_field_text_color","color","input, textarea"),Qe.mapCSSProperty("field_border_radius","border-radius","input, textarea"),Qe.mapCSSProperty("submit_button_background_color","background-color","input[type=submit]"),Qe.mapCSSProperty("submit_button_text_color","color","input[type=submit]")),"ct_video"==e.name){n=n+"#"+e.selector+">.oxygen-vsb-responsive-video-wrapper"+l+"{";var w=e.original["video-padding-bottom"]||c["video-padding-bottom"];w&&(n+="padding-bottom:"+w+";"),n+="}"}if("ct_new_columns"==e.name&&(g=e.original),"ct_new_columns"==e.name&&g["set-columns-width-50"]&&"never"!=g["set-columns-width-50"]&&(n+="@media (max-width: "+Qe.getMediaMaxSize(g["set-columns-width-50"])+") {",n+="#"+e.selector+"> .ct-div-block {width: 50% !important;}",n+="}"),"ct_new_columns"==e.name){var k=parseInt(Qe.getMediaMaxSize(g["reverse-column-order"]))||0,P=parseInt(Qe.getMediaMaxSize(g["stack-columns-vertically"]))||0,O="",z="";"always"==g["reverse-column-order"]&&(k=9999999999),g["stack-columns-vertically"]&&"never"!=g["stack-columns-vertically"]&&(z+="@media (max-width: "+Qe.getMediaMaxSize(g["stack-columns-vertically"])+") {",z+="#"+e.selector+"> .ct-div-block {",z+="width: 100% !important;",z+="}",z+="#"+e.selector+"{",z+=k<P?"flex-direction: column;":"flex-direction: column-reverse;",z+="}",z+="}"),g["reverse-column-order"]&&"never"!=g["reverse-column-order"]&&"always"!=g["reverse-column-order"]&&(O+="@media (max-width: "+Qe.getMediaMaxSize(g["reverse-column-order"])+") {",O+="#"+e.selector+"{",O+=P<k?"flex-direction: row-reverse;":"flex-direction: column-reverse;",O+="}",O+="}"),"always"==g["reverse-column-order"]&&(n+="#"+e.selector+"{flex-direction: row-reverse;}"),P<k?(n+=O,n+=z):(n+=z,n+=O)}if("oxy_header"==e.name){n+="#"+e.selector+" .oxy-header-container"+l+"{",null==S["header-width"]&&(S["header-width"]=c["header-width"]),"custom"==S["header-width"]&&S["header-custom-width"]&&(n+="max-width:"+S["header-custom-width"]+";"),"full-width"==S["header-width"]&&(n+="max-width:100%;"),n+="}",e.original["overlay-header-above"]&&"never"!=e.original["overlay-header-above"]&&("always"!=e.original["overlay-header-above"]&&(n+="@media (min-width: "+Qe.getMediaMinSize(e.original["overlay-header-above"])+") {"),n+="#"+e.selector+".oxy-header.oxy-overlay-header {position: absolute;left: 0;right: 0;z-index: 20;}#"+e.selector+".oxy-header.oxy-overlay-header:not(.oxy-sticky-header-active) .oxy-header-row,#"+e.selector+".oxy-header.oxy-overlay-header:not(.oxy-sticky-header-active){background-color: initial !important;}#"+e.selector+".oxy-header.oxy-overlay-header .oxygen-hide-in-overlay{display: none}#"+e.selector+".oxy-header.oxy-overlay-header .oxygen-only-show-in-overlay{display: block}","always"!=e.original["overlay-header-above"]&&(n+="}"));var T="";if(e.original["sticky-media"]&&"never"!=e.original["sticky-media"])"always"!=e.original["sticky-media"]&&(T+="@media (min-width: "+Qe.getMediaMinSize(e.original["sticky-media"])+") {"),T+="#"+e.selector+".oxy-header-wrapper.oxy-header.oxy-sticky-header.oxy-sticky-header-active {",T+="position: fixed; top: 0; left: 0; right: 0; z-index: "+(e.original.sticky_zindex||"2147483640")+";",T+=e.original["sticky-background-color"]?"background-color:"+Qe.getGlobalColorValue(e.original["sticky-background-color"])+";":"",T+="box-shadow:"+(e.original["sticky-box-shadow"]||c["sticky-box-shadow"])+";",T+="}",T+="#"+e.selector+".oxy-header.oxy-sticky-header-active .oxygen-hide-in-sticky {",T+="display:none;",T+="}",T+="#"+e.selector+".oxy-header.oxy-header .oxygen-show-in-sticky-only {",T+="display: none;",T+="}","always"!=e.original["sticky-media"]&&(T+="}");T&&(n+=T),e.original.sticky_header_fade_in_speed&&(n+="#"+e.selector+".oxy-sticky-header-active {animation-duration: "+e.original.sticky_header_fade_in_speed+"s;}")}if("oxy_header"==e.name||"oxy_header_row"==e.name){var G="";e.original["stack-header-vertically"]&&"never"!=e.original["stack-header-vertically"]&&(G+="@media (max-width: "+Qe.getMediaMaxSize(e.original["stack-header-vertically"])+") {",G+="#"+e.selector+" .oxy-header-container {",G+="flex-direction: column;",G+="}",G+="#"+e.selector+" .oxy-header-container > div{",G+="justify-content: center;",G+="}",G+="}"),G&&(n+=G)}if("oxy_header_row"==e.name){n+="#"+e.selector+".oxy-header-row .oxy-header-container"+l+"{",null==S["header-row-width"]&&(S["header-row-width"]=c["header-row-width"]),"custom"==S["header-row-width"]&&S["header-row-custom-width"]&&(n+="max-width:"+S["header-row-custom-width"]+";"),"full-width"==S["header-row-width"]&&(n+="max-width:100%;"),"page-width"==S["header-row-width"]&&(n+="max-width:"+Qe.getPageWidth()+"px;"),n+="}";var M="",V="";e.original["hide-row"]&&"never"!=e.original["hide-row"]&&(M+="@media (max-width: "+Qe.getMediaMaxSize(e.original["hide-row"])+") {",M+="#"+e.selector+" {",M+="display: none;",M+="}",M+="}"),M&&(n+=M);var A=S.display||"block";V+=".oxy-header.oxy-sticky-header-active > #"+e.selector+".oxygen-show-in-sticky-only {",V+="display: "+A+";",n+=V+="}"}if("ct_slider"==e.name&&(o||"id"!=p||(S["slider-arrow-color"]&&"lighter"==S["slider-arrow-color"]&&(n+="#"+e.selector+" .unslider-arrow {",n+="background-color: rgba(255,255,255,0.2); ",n+="}"),S["slider-dot-color"]&&(n+="#"+e.selector+" .unslider-nav ol li {",n+="border-color: "+Qe.getGlobalColorValue(S["slider-dot-color"])+"; ",n+="}",n+="#"+e.selector+" .unslider-nav ol li.unslider-active {",n+="background-color: "+Qe.getGlobalColorValue(S["slider-dot-color"])+"; ",n+="}"),S["slider-remove-padding"]&&"yes"==S["slider-remove-padding"]&&(n+="#"+e.selector+" .unslider {",n+="padding: 0px; ",n+="}",n+="#"+e.selector+" .unslider-wrap.unslider-carousel > li {",n+="padding: 0px; ",n+="}",n+="#"+e.selector+" .unslider-arrow.next {",n+="right: 10px; ",n+="z-index: 100; ",n+="}",n+="#"+e.selector+" .unslider-arrow.prev {",n+="left: 10px; ",n+="z-index: 100; ",n+="}"),S["slider-dots-overlay"]&&"yes"==S["slider-dots-overlay"]&&(n+="#"+e.selector+" .unslider .unslider-nav {",n+="position: absolute; bottom: 0; left: 0; right: 0; z-index:100",n+="}"),S["slider-stretch-slides"]&&"yes"==S["slider-stretch-slides"]&&(n+="#"+e.selector+" .unslider-wrap {",n+="display: flex;",n+="}",n+="#"+e.selector+" .ct-slide {",n+="height: 100%;",n+="}",n+="#"+e.selector+" .unslider,",n+="#"+e.selector+" .oxygen-unslider-container,",n+="#"+e.selector+" .unslider-wrap,",n+="#"+e.selector+" .unslider-wrap li {",n+="height: 100%;",n+="}"),S["slider-stretch-slides"]&&"yes"==S["slider-stretch-slides"]&&S["slider-animation"]&&"fade"==S["slider-animation"]&&(n+="#"+e.selector+" .unslider-fade ul li.unslider-active {",n+="width: 100%;",n+="}"),S["slider-slide-padding"]&&(n+="#"+e.selector+" .ct-slide {",n+="padding: "+S["slider-slide-padding"],n+="}"))),"ct_link_button"==e.name){if(o||"id"!=p)I=!!Qe.component.options[t]&&Qe.component.options[t].original["button-style"],E=Qe.getGlobalColorValue(S["button-color"]),F=S["button-size"],N=Qe.getGlobalColorValue(S["button-text-color"]);else var I=originalOptions["button-style"]||c["button-style"],E=Qe.getGlobalColorValue(S["button-color"]),F=S["button-size"],N=Qe.getGlobalColorValue(S["button-text-color"]);if(n=n+"#"+e.selector+l+"{",1==I&&E&&(n+="background-color: "+Qe.getGlobalColorValue(E)+";",n+="border: 1px solid "+E+";",N&&(n+="color: "+Qe.getGlobalColorValue(N)+";")),2==I&&(n+="background-color: transparent;",E?(n+="border: 1px solid "+Qe.getGlobalColorValue(E)+";",n+="color: "+Qe.getGlobalColorValue(E)+";"):n+="color: "+Qe.getGlobalColorValue(c["button-color"])+";"),F){var j=2==I?1:0;n+="padding: "+(parseInt(F)-j)+"px "+(1.6*parseInt(F)-j)+"px;"}n+="}"}if("ct_fancy_icon"==e.name){if(o||"id"!=p)K=!!Qe.component.options[t]&&Qe.component.options[t].original["icon-style"],B=Qe.getGlobalColorValue(S["icon-color"]),D=Qe.getGlobalColorValue(S["icon-background-color"]),H=S["icon-padding"],X=S["icon-size"];else var K=originalOptions["icon-style"]||c["icon-style"],B=Qe.getGlobalColorValue(S["icon-color"]),D=Qe.getGlobalColorValue(S["icon-background-color"])||c["icon-background-color"],H=S["icon-padding"]||c["icon-padding"]+c["icon-padding-unit"],X=S["icon-size"];n=n+"#"+e.selector+l+"{",1==K&&(n+="border: 1px solid;"),2==K&&D&&(n+="background-color: "+Qe.getGlobalColorValue(D)+";",n+="border: 1px solid "+Qe.getGlobalColorValue(D)+";"),1!=K&&2!=K||H&&(n+="padding:"+H+";"),B&&(n+="color:"+Qe.getGlobalColorValue(B)+";"),n+="}",X&&(n=n+"#"+e.selector+l+">svg {",n+="width: "+X+";",n+="height: "+X+";",n+="}")}if("oxy_social_icons"==e.name){K=e.original["icon-style"]||c["icon-style"];var Y=Qe.getGlobalColorValue(e.original["icon-use-brand-colors"])||c["icon-use-brand-colors"];if(n+="#"+e.selector+".oxy-social-icons {",n+="flex-direction: "+(e.original["icon-layout"]||c["icon-layout"])+";",n+="margin-right: -"+(e.original["icon-space-between-icons"]||c["icon-space-between-icons"])+"px;",n+="margin-bottom: -"+(e.original["icon-space-between-icons"]||c["icon-space-between-icons"])+"px;",n+="}",n+="#"+e.selector+".oxy-social-icons a {",n+="font-size: "+(e.original["icon-size"]||c["icon-size"])+"px; ",n+="margin-right: "+(e.original["icon-space-between-icons"]||c["icon-space-between-icons"])+"px;",n+="margin-bottom: "+(e.original["icon-space-between-icons"]||c["icon-space-between-icons"])+"px;","circle"==K?n+="border-radius: 50%;":"square"==K&&(n+="border-radius: 0%;"),"blank"!=K&&(n+="background-color: "+(Qe.getGlobalColorValue(e.original["icon-background-color"])||c["icon-background-color"])+";"),n+="}",n+="#"+e.selector+".oxy-social-icons a:hover {","blank"!=K&&(n+="background-color: "+(Qe.getGlobalColorValue(e.original["icon-background-hover-color"])||c["icon-background-hover-color"])+";"),n+="}","yes"==Y)for(var W in Qe.socialIcons.networks)if(Qe.socialIcons.networks.hasOwnProperty(W)){var L=Qe.socialIcons.networks[W],U=Qe.socialIcons.networkColors[L],$=Qe.socialIcons.networkHoverColors[L];"blank"!=K?(n+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+L+" {",n+="background-color: "+U+";",n+="}",n+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+L+":hover {",n+="background-color: "+$+";",n+="}",e.original["icon-color"]="#ffffff",e.original["icon-hover-color"]="#ffffff"):(n+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+L+" svg {",n+="color: "+U+";",n+="}",n+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+L+":hover svg {",n+="color: "+$+";",n+="}")}n+="#"+e.selector+".oxy-social-icons a svg {",n+="blank"!=K?"width: 0.5em; height: 0.5em;":"width: 1em; height: 1em;",n+="color: "+(Qe.getGlobalColorValue(e.original["icon-color"])||c["icon-color"])+"; ",n+="}",n+="#"+e.selector+".oxy-social-icons a:hover svg {",n+="color: "+(Qe.getGlobalColorValue(e.original["icon-hover-color"])||c["icon-hover-color"])+"; ",n+="}"}if("oxy_testimonial"==e.name){var Z,Q,q,R,J,ee="",te=S.testimonial_image_spacing;if("vertical"==S.testimonial_layout?(ee="margin:0;",te=S.testimonial_image_spacing||c.testimonial_image_spacing+c["testimonial_image_spacing-unit"],"bottom"==S.testimonial_image_position?ee+="margin-top":ee+="margin-bottom"):"bottom"==S.testimonial_image_position?(ee="margin:0;",te=S.testimonial_image_spacing||c.testimonial_image_spacing+c["testimonial_image_spacing-unit"],ee+="margin-left"):ee+="margin-right",ee+=": "+te+";","left"==S.testimonial_content_alignment?(Z="flex-start",Q="left"):"center"==S.testimonial_content_alignment?Q=Z="center":"right"==S.testimonial_content_alignment&&(Z="flex-end",Q="right"),"left"==e.original.testimonial_mobile_content_alignment?(q="flex-start",R="left"):"center"==e.original.testimonial_mobile_content_alignment?R=q="center":"right"==e.original.testimonial_mobile_content_alignment&&(q="flex-end",R="right"),"vertical"==S.testimonial_layout?n+="#"+e.selector+" {flex-direction: column;}":"horizontal"==S.testimonial_layout&&(n+="#"+e.selector+" {flex-direction: row;align-items: center;}"),"top"==S.testimonial_image_position?n+="#"+e.selector+" .oxy-testimonial-photo-wrap {order: 1;}":"bottom"==S.testimonial_image_position&&(n+="#"+e.selector+" .oxy-testimonial-photo-wrap {order: 3;}"),n+="#"+e.selector+" .oxy-testimonial-photo {width:"+S.testimonial_image_size+";height:"+S.testimonial_image_size+";"+ee+"}",n+="#"+e.selector+" .oxy-testimonial-photo-wrap,#"+e.selector+" .oxy-testimonial-author-wrap,#"+e.selector+" .oxy-testimonial-content-wrap {align-items:"+Z+";text-align:"+Q+";}",n+="#"+e.selector+" .oxy-testimonial-text {margin-bottom:"+S.testimonial_text_space_below+";"+Qe.generateTypographyCSS(S,"testimonial_text_typography")+"}",n+="#"+e.selector+" .oxy-testimonial-author {margin-bottom:"+S.testimonial_author_space_below+";"+Qe.generateTypographyCSS(S,"testimonial_author_typography")+"}",n+="#"+e.selector+" .oxy-testimonial-author-info {margin-bottom:"+S.testimonial_author_info_space_below+";"+Qe.generateTypographyCSS(S,"testimonial_author_info_typography")+"}",maxSize=Qe.getMediaMaxSize(e.original.testimonial_vertical_layout_below),maxSize)J="bottom"==S.testimonial_image_position?"top":"bottom",n+="@media (max-width: "+maxSize+"){#"+e.selector+" {flex-direction: column !important;}#"+e.selector+" .oxy-testimonial-photo {margin: 0;margin-"+J+":"+S.testimonial_image_spacing+";}#"+e.selector+" .oxy-testimonial-photo-wrap, #"+e.selector+" .oxy-testimonial-author-wrap, #"+e.selector+" .oxy-testimonial-content-wrap {align-items:"+q+";text-align:"+R+";}}"}if("oxy_icon_box"==e.name){var oe,re,ae,ie,ne;if("top"==S.icon_box_icon_position?oe="column":"left"==S.icon_box_icon_position?oe="row":"right"==S.icon_box_icon_position?oe="row-reverse":"bottom"==S.icon_box_icon_position&&(oe="column-reverse"),"left"==S.icon_box_icon_position||"right"==S.icon_box_icon_position){var se=S.icon_box_icon_space_before||c.icon_box_icon_space_before+c["icon_box_icon_space_before-unit"];right=S.icon_box_icon_space_after||c.icon_box_icon_space_after+c["icon_box_icon_space_after-unit"],ae="margin-left: "+se+";\n",ae+="margin-right: "+right+";\n",ae+="margin-bottom: 0; margin-top: 0;"}else ae="margin-top: "+S.icon_box_icon_space_before+";\n",ae+="margin-bottom: "+S.icon_box_icon_space_after+";\n";"left"==S.icon_box_icon_position||"right"==S.icon_box_icon_position?re=S.icon_box_icon_vertical_alignment:"left"==S.icon_box_content_alignment?re="flex-start":"center"==S.icon_box_content_alignment?re="center":"right"==S.icon_box_content_alignment&&(re="flex-end"),ne="left"==S.icon_box_mobile_content_alignment?(ie="flex-start","left"):"center"==S.icon_box_mobile_content_alignment?ie="center":"right"==S.icon_box_mobile_content_alignment?(ie="flex-end","right"):(ie="flex-start","left"),n+="#"+e.selector+" {text-align: "+S.icon_box_content_alignment+";flex-direction: "+oe+";}",n+="#"+e.selector+" .oxy-icon-box-icon {"+ae+"align-self: "+re+";}",n+="#"+e.selector+" .oxy-icon-box-heading {"+Qe.generateTypographyCSS(S,"icon_box_heading_typography")+"margin-top: "+S.icon_box_heading_space_above+";margin-bottom: "+S.icon_box_heading_space_below+";}",n+="#"+e.selector+" .oxy-icon-box-text {"+Qe.generateTypographyCSS(S,"icon_box_text_typography")+"margin-top: "+S.icon_box_text_space_above+";margin-bottom: "+S.icon_box_text_space_below+";align-self: "+re+";}",n+="#"+e.selector+" .oxy-icon-box-link {margin-top: "+S.icon_box_link_space_above+";margin-bottom: "+S.icon_box_link_space_below+";}",maxSize=Qe.getMediaMaxSize(S.icon_box_vertical_layout_below),maxSize&&!o&&(n+="@media (max-width: "+maxSize+"){#"+e.selector+".oxy-icon-box {flex-direction: column !important;text-align: "+ne+";}#"+e.selector+" .oxy-icon-box-icon {margin-left: 0;margin-right: 0;margin-top: "+S.icon_box_icon_space_before+";margin-bottom: "+S.icon_box_icon_space_after+";}#"+e.selector+" .oxy-icon-box-icon, .oxy-icon-box-text {align-self: "+ie+";}}")}if("oxy_pricing_box"==e.name)"vertical"==S.pricing_box_price_layout?(u="column","left"==S.pricing_box_price_alignment?m="flex-start":"center"==S.pricing_box_price_alignment?m="center":"right"==S.pricing_box_price_alignment&&(m="flex-end")):"horizontal"==S.pricing_box_price_layout&&(u="row"),"horizontal"==S.pricing_box_price_layout&&("left"==S.pricing_box_price_alignment?_="flex-start":"center"==S.pricing_box_price_alignment?_="center":"right"==S.pricing_box_price_alignment&&(_="flex-end")),"left"==S.pricing_box_global_alignment?y="flex-start":"center"==S.pricing_box_global_alignment?y="center":"right"==S.pricing_box_global_alignment&&(y="flex-end"),"left"==S.pricing_box_graphic_alignment?h="flex-start":"center"==S.pricing_box_graphic_alignment?h="center":"right"==S.pricing_box_graphic_alignment?h="flex-end":y&&(iamge_justify_content=y),"left"==S.pricing_box_cta_alignment?b="flex-start":"center"==S.pricing_box_cta_alignment?b="center":"right"==S.pricing_box_cta_alignment?b="flex-end":y&&(b=y),n+="#"+e.selector+" .oxy-pricing-box-section {"+Qe.generateArrayOptionsCSS(S,"pricing_box_global")+"text-align:"+S.pricing_box_global_alignment+";}",n+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-price {justify-content:"+y+";}",n+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-graphic {"+Qe.generateArrayOptionsCSS(S,"pricing_box_graphic")+"background-color:"+Qe.getGlobalColorValue(S.pricing_box_graphic_background)+";text-align:"+S.pricing_box_graphic_alignment+";justify-content:"+h+";}",n+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-title {"+Qe.generateArrayOptionsCSS(S,"pricing_box_title")+"text-align:"+S.pricing_box_title_alignment+";background-color:"+Qe.getGlobalColorValue(S.pricing_box_title_background)+";}",n+="#"+e.selector+" .oxy-pricing-box-title-title {"+Qe.generateTypographyCSS(S,"pricing_box_title_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-title-subtitle {"+Qe.generateTypographyCSS(S,"pricing_box_subtitle_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-price {"+Qe.generateArrayOptionsCSS(S,"pricing_box_price")+"text-align:"+S.pricing_box_price_alignment+";background-color:"+Qe.getGlobalColorValue(S.pricing_box_price_background)+";flex-direction:"+u+";justify-content:"+_+";align-items:"+m+";}",n+="#"+e.selector+" .oxy-pricing-box-currency {"+Qe.generateTypographyCSS(S,"pricing_box_price_amount_currency_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-amount-main {"+Qe.generateTypographyCSS(S,"pricing_box_price_amount_main_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-amount-decimal {"+Qe.generateTypographyCSS(S,"pricing_box_price_amount_decimal_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-term {"+Qe.generateTypographyCSS(S,"pricing_box_price_amount_term_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-sale-price {"+Qe.generateTypographyCSS(S,"pricing_box_price_sale_typography")+"margin-bottom:"+S.pricing_box_price_sale_space_below+";}",n+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-content {background-color:"+Qe.getGlobalColorValue(S.pricing_box_content_background)+";text-align:"+S.pricing_box_content_alignment+";"+Qe.generateTypographyCSS(S,"pricing_box_content_typography")+"}",n+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-cta {"+Qe.generateArrayOptionsCSS(S,"pricing_box_cta")+"background-color:"+Qe.getGlobalColorValue(S.pricing_box_cta_background)+";text-align:"+S.pricing_box_cta_alignment+";justify-content:"+b+";}";if("oxy_progress_bar"==e.name){var le="",ce=[];if("true"==S.progress_bar_stripes&&(le="background-image: linear-gradient(-45deg,rgba(255,255,255,.12) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.12) 50%,rgba(255,255,255,.12) 75%,transparent 75%,transparent);"),"false"==S.progress_bar_stripes&&(le="background-image:none;"),"true"==S.progress_bar_animation_stripes){var pe=S.progress_bar_animation_stripes_duration||c.progress_bar_animation_stripes_duration;ce.stripes="oxy_progress_bar_stripes "+pe+" linear infinite"}if("false"==S.progress_bar_animation_stripes&&(ce.stripes="none 0s paused"),"true"==S.progress_bar_animate_width){var de=S.progress_bar_animation_width_duration||c.progress_bar_animation_width_duration;ce.width="oxy_progress_bar_width "+de+" ease-out 1"}"false"==S.progress_bar_animate_width&&(ce.width="none 0s paused");var ge=[];for(var W in ce)ge.push(ce[W]);n+="#"+e.selector+l+" .oxy-progress-bar-background {background-color:"+Qe.getGlobalColorValue(S.progress_bar_background_color)+";"+le,ce.stripes&&(n+="animation:"+ce.stripes+";"),n+="}",n+="#"+e.selector+l+" .oxy-progress-bar-progress-wrap {width:"+S.progress_bar_progress+";}",n+="#"+e.selector+l+" .oxy-progress-bar-progress {background-color:"+Qe.getGlobalColorValue(S.progress_bar_bar_color)+";padding:"+S.progress_bar_bar_padding+";"+le+"animation:"+ge.join()+";}",n+="#"+e.selector+l+" .oxy-progress-bar-overlay-text {"+Qe.generateTypographyCSS(S,"progress_bar_left_text_typography")+"}",n+="#"+e.selector+l+" .oxy-progress-bar-overlay-percent {"+Qe.generateTypographyCSS(S,"progress_bar_right_text_typography")+"}"}if("oxy_toggle"==e.name&&(n+="#"+e.selector+l+" .oxy-expand-collapse-icon {font-size:"+S.toggle_icon_size+";}",n+="#"+e.selector+l+" .oxy-expand-collapse-icon::before,#"+e.selector+l+" .oxy-expand-collapse-icon::after {background-color:"+Qe.getGlobalColorValue(S.toggle_icon_color)+";}"),"oxy_superbox"==e.name){var me,ue,_e,ye,he,be=S.superbox_secondary_scale_start,xe=S.superbox_secondary_scale_finish,Se=S.superbox_primary_scale_start,fe=S.superbox_primary_scale_finish,ve="",Ce="",we="",ke="",Pe=":hover";"as_hovered"==e.original.superbox_editing_mode&&(Pe=""),void 0!==be&&(ue="transform: scale("+be+");"),void 0!==xe&&(_e="transform: scale("+xe+");"),void 0!==Se&&(ye="transform: scale("+Se+");"),void 0!==fe&&(he="transform: scale("+fe+");"),S.superbox_secondary_slide_direction&&(me=Qe.slide_position(S.superbox_secondary_slide_direction,(S.superbox_secondary_slide_distance||"")+"px"),"in"==S.superbox_secondary_slide_inorout?(ve=me.out_css,Ce=me.in_css):"out"==S.superbox_secondary_slide_inorout&&(ve=me.in_css,Ce=me.out_css)),S.superbox_primary_slide_direction&&(me=Qe.slide_position(S.superbox_primary_slide_direction,(S.superbox_primary_slide_distance||"")+"px"),"in"==S.superbox_primary_slide_inorout?(we=me.out_css,ke=me.in_css):"out"==S.superbox_primary_slide_inorout&&(we=me.in_css,ke=me.out_css));var Oe=S.superbox_transition_duration;n+="#"+e.selector+" .oxy-superbox-secondary, #"+e.selector+" .oxy-superbox-primary {transition-duration:"+Oe+";}",n+="#"+e.selector+" .oxy-superbox-secondary {opacity:"+S.superbox_secondary_opacity_start+";"+ve+ue+"}","as_not_hovered"!==e.original.superbox_editing_mode&&(n+="#"+e.selector+Pe+" .oxy-superbox-secondary {opacity:"+S.superbox_secondary_opacity_finish+";z-index: 2147483642;"+Ce+_e+"}"),n+="#"+e.selector+" .oxy-superbox-primary {opacity:"+S.superbox_primary_opacity_start+";"+we+ye+"}","as_not_hovered"!==e.original.superbox_editing_mode&&(n+="#"+e.selector+Pe+" .oxy-superbox-primary {opacity:"+S.superbox_primary_opacity_finish+";"+ke+he+"}")}if("oxy_nav_menu"==e.name){oxyNavMenuStyle="#"+e.selector+" .oxy-nav-menu-list"+l+"{",oxyNavMenuStyleItem="#"+e.selector+" .menu-item"+l+" a {",oxyNavMenuStyleActive="#"+e.selector+" .current-menu-item a"+l+"{",oxyNavMenuStyleDropdowns="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .sub-menu"+l+"{",oxyNavMenuStyleDropdownsItem="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .sub-menu .menu-item a"+l+"{",oxyNavMenuStyleNotOpenItem="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .menu-item a"+l+"{",oxyNavMenuStyleDropdownsItemHover="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .oxy-nav-menu-list .sub-menu .menu-item a:hover{",e.original["menu_dropdowns_background-color"]||(oxyNavMenuStyleDropdowns+="background-color:"+Qe.getGlobalColorValue(e.original["menu_hover_background-color"])+";"),oxyNavMenuStyleDropdownsItem+="border: 0;","row"==e.original["menu_flex-direction"]?(oxyNavMenuStyleDropdownsItem+="padding-top:"+e.original["menu_padding-top"]+"px;",oxyNavMenuStyleDropdownsItem+="padding-bottom:"+e.original["menu_padding-bottom"]+"px;"):(oxyNavMenuStyleDropdownsItem+="padding-left:"+e.original["menu_padding-top"]+"px;",oxyNavMenuStyleDropdownsItem+="padding-rigth:"+e.original["menu_padding-bottom"]+"px;"),e.original["menu_justify-content"]&&(oxyNavMenuStyleNotOpenItem+="justify-content:"+e.original["menu_justify-content"]+";"),"never"!=e.original.menu_responsive&&("always"!=e.original.menu_responsive&&(n+="@media (max-width: "+Qe.getMediaMaxSize(e.original.menu_responsive)+") {"),n+="#"+e.selector+" .oxy-nav-menu-list {display: none;}",n+="#"+e.selector+" .oxy-menu-toggle {display: initial;}",n+="#"+e.selector+".oxy-nav-menu.oxy-nav-menu-open .oxy-nav-menu-list {display: initial;}","always"!=e.original.menu_responsive&&(n+="}"));var ze=parseInt(e.original.menu_responsive_icon_size||40),Te=parseInt(e.original.menu_responsive_icon_size||40)+2*parseInt(e.original.menu_responsive_padding_size||0),Ge=parseInt(.8*ze),Me=parseInt(.15*ze),Ve=Ge/2-Me/2;o||"id"!=p||(n+="#"+e.selector+".oxy-nav-menu.oxy-nav-menu-open {background-color:"+Qe.getGlobalColorValue(e.original.menu_responsive_background_color)+";margin-top: 0 !important;margin-right: 0 !important;margin-left: 0 !important;margin-bottom: 0 !important;} #"+e.selector+".oxy-nav-menu.oxy-nav-menu-open .menu-item a {color:"+Qe.getGlobalColorValue(e.original.menu_responsive_link_color)+";padding-top:"+(e.original.menu_responsive_padding_top||e.original["menu_padding-top"])+"px;padding-right:"+(e.original.menu_responsive_padding_right||e.original["menu_padding-right"])+"px;padding-bottom:"+(e.original.menu_responsive_padding_bottom||e.original["menu_padding-bottom"])+"px;padding-left:"+(e.original.menu_responsive_padding_left||e.original["menu_padding-left"])+"px;} #"+e.selector+".oxy-nav-menu.oxy-nav-menu-open .menu-item a:hover {color:"+Qe.getGlobalColorValue(e.original.menu_responsive_hover_link_color)+"} #"+e.selector+".oxy-nav-menu .menu-item a:hover {text-decoration:"+e.original["menu_text-decoration"]+"} #"+e.selector+" .oxy-nav-menu-hamburger-wrap {width:"+Te+"px;height:"+Te+"px;margin-top:"+e.original.menu_responsive_icon_margin+"px;margin-bottom:"+e.original.menu_responsive_icon_margin+"px;background-color:"+Qe.getGlobalColorValue(e.original.menu_responsive_padding_color)+";} #"+e.selector+" .oxy-nav-menu-hamburger-wrap:hover {background-color:"+Qe.getGlobalColorValue(e.original.menu_responsive_padding_hover_color)+";} #"+e.selector+" .oxy-nav-menu-hamburger {width:"+ze+"px;height:"+Ge+"px;} #"+e.selector+" .oxy-nav-menu-hamburger .oxy-nav-menu-hamburger-line {height:"+Me+"px;background-color:"+Qe.getGlobalColorValue(e.original.menu_responsive_icon_color)+";} #"+e.selector+" .oxy-nav-menu-hamburger-wrap:hover  .oxy-nav-menu-hamburger-line {background-color:"+Qe.getGlobalColorValue(e.original.menu_responsive_icon_hover_color)+";} #"+e.selector+".oxy-nav-menu-open .oxy-nav-menu-hamburger .oxy-nav-menu-hamburger-line:first-child {top:"+Ve+"px;} #"+e.selector+".oxy-nav-menu-open .oxy-nav-menu-hamburger .oxy-nav-menu-hamburger-line:last-child {top:-"+Ve+"px;}",n+="#"+e.selector+" .menu-item > .sub-menu {transition-duration:"+e.original["menu_transition-duration"]+"s; }")}if("oxy_nav_menu"==e.name&&e.original.menu_color&&(n+="#"+e.selector+" .oxy-nav-menu-hamburger-line{",n+="background-color:"+Qe.getGlobalColorValue(e.original.menu_color)+";",n+="}"),"oxy_header"!=e.name&&"oxy_header_row"!=e.name||!e.original["background-color"]||(n+="#"+e.selector+" .oxy-nav-menu-open,",n+="#"+e.selector+" .oxy-nav-menu:not(.oxy-nav-menu-open) .sub-menu{",n+="background-color:"+Qe.getGlobalColorValue(e.original["background-color"])+";",n+="}"),S["box-shadow-color"]){var Ae="inset"==S["box-shadow-inset"]?S["box-shadow-inset"]+" ":"",Ie=S["box-shadow-horizontal-offset"]?S["box-shadow-horizontal-offset"]+"px ":"",Ee=S["box-shadow-vertical-offset"]?S["box-shadow-vertical-offset"]+"px ":"",Fe=S["box-shadow-blur"]?S["box-shadow-blur"]+"px ":"0px ",Ne=S["box-shadow-spread"]?S["box-shadow-spread"]+"px ":"";S["box-shadow"]=Ae+Ie+Ee+Fe+Ne+Qe.getGlobalColorValue(S["box-shadow-color"])}if(S["text-shadow-color"]){Ie=S["text-shadow-horizontal-offset"]?S["text-shadow-horizontal-offset"]+"px ":"",Ee=S["text-shadow-vertical-offset"]?S["text-shadow-vertical-offset"]+"px ":"",Fe=S["text-shadow-blur"]?S["text-shadow-blur"]+"px ":"0px ";S["text-shadow"]=Ie+Ee+Fe+Qe.getGlobalColorValue(S["text-shadow-color"])}if(n+="#"+e.selector+s+l+"{",Qe.component.options[t]&&Qe.component.options[t].selector!==e.selector&&!e.original);else if("object"==typeof S)for(var je in n+=Qe.getBackgroundLayersCSS(S,e.name,"id",t,r,p)||"",n+=Qe.getTransformCSS(S)||"","ct_section"!=e.name&&"oxy_posts_grid"!=e.name&&(n+=Qe.getGridCSS(S,e.name)||"","grid"==S["flex-direction"]&&(S.display="",S["flex-direction"]="")),S)if(!(0<=je.indexOf("hover_"))&&!(0<=je.indexOf("responsive"))&&!(0<=je.indexOf("slider"))&&!(0<=je.indexOf("icon"))&&!(0<=je.indexOf("soundcloud"))&&"background-size"!=je&&"background"!=je&&S.hasOwnProperty(je)){var Ke=S[je];if("custom-css"==je)continue;if("ct_fancy_icon"==e.name&&("background"==je||"icon-background-color"==je||"icon-color"==je||"padding"==je||"icon-size"==je))continue;if(0<=["display","flex-direction","flex-wrap","align-items","align-content","justify-content","gap"].indexOf(je)&&"ct_section"==e.name)continue;if(("font-family"==je||-1<je.indexOf("font-family"))&&(Qe.loadWebFont(Ke),-1===Ke.indexOf(",")&&"inherit"!==Ke.toLowerCase()&&(Ke="'"+Ke+"'")),Ke=Qe.getGlobalColorValue(Ke),"content"==je.trim().toLowerCase()&&(Ke='"'+Ke.replace('"','\\"')+'"',Qe.contentAdded["#"+e.selector+s+l]=!0),"flex-direction"==je){n+=je+":"+Ke+(v="reverse"==S["flex-reverse"]?"-reverse":"")+";";continue}if("filter"==je&&S["filter-amount-"+Ke])Ke+="("+S["filter-amount-"+Ke]+")";else if("filter"==je)continue;if("oxy_nav_menu"==e.name&&0===je.indexOf("menu_dropdowns_"))"menu_dropdowns_background-color"==je&&"hover"!==p?oxyNavMenuStyleDropdowns+=je.replace("menu_dropdowns_","")+":"+Ke+";":Ke&&Qe.excludeProperties.indexOf(je)<0&&je&&(oxyNavMenuStyleDropdownsItem+=je.replace("menu_dropdowns_","")+":"+Ke+";"),0==je.indexOf("menu_dropdowns_padding")&&(oxyNavMenuStyleDropdownsItemHover+=je.replace("menu_dropdowns_","")+":"+Ke+";");else if("oxy_nav_menu"==e.name&&0===je.indexOf("menu_active_")){if("menu_active_border-bottom-width"==je&&void 0!==e.original["menu_padding-bottom"])De=0<(De=parseInt(e.original["menu_padding-bottom"])-parseInt(S["menu_active_border-bottom-width"]))?De:0,oxyNavMenuStyleActive+="padding-bottom:"+De+"px;";if("menu_active_border-top-width"==je&&void 0!==e.original["menu_padding-top"])De=0<(De=parseInt(e.original["menu_padding-top"])-parseInt(S["menu_active_border-top-width"]))?De:0,oxyNavMenuStyleActive+="padding-top:"+De+"px;";Ke&&Qe.excludeProperties.indexOf(je)<0&&je&&(oxyNavMenuStyleActive+=je.replace("menu_active_","")+":"+Ke+";")}else if("oxy_nav_menu"==e.name&&0===je.indexOf("menu_")){if("menu_flex-direction"==je){oxyNavMenuStyle+="flex-direction:"+Ke;continue}if("menu_justify-content"==je||"menu_dropdown_arrow"==je)continue;if("menu_border-bottom-width"==je&&"hover"==p&&void 0!==e.original["menu_padding-bottom"]){if(De=0<(De=parseInt(e.original["menu_padding-bottom"])-parseInt(S["menu_border-bottom-width"]))?De:0,"row"==e.original["menu_flex-direction"])var Be="padding-bottom:";else{Be="padding-right:";je="border-right-width"}oxyNavMenuStyleItem+=Be+De+"px;"}if("menu_border-top-width"==je&&"hover"==p&&void 0!==e.original["menu_padding-top"]){var De;if(De=0<(De=parseInt(e.original["menu_padding-top"])-parseInt(S["menu_border-top-width"]))?De:0,"row"==e.original["menu_flex-direction"])Be="padding-top:";else{Be="padding-left:";je="border-left-width"}oxyNavMenuStyleItem+=Be+De+"px;"}"menu_-webkit-font-smoothing"==je&&(oxyNavMenuStyleItem+="-moz-osx-font-smoothing:"+("antialiased"===Ke?"grayscale":"unset")+";"),"menu_transition-duration"==je&&(Ke+="s"),Ke&&Qe.excludeProperties.indexOf(je)<0&&je&&(oxyNavMenuStyleItem+=je.replace("menu_","")+":"+Ke+";")}else{if("background-image"==je)continue;Ke&&Qe.excludeProperties.indexOf(je)<0&&"background-layers"!==je&&(void 0===Qe.notCSSOptions[e.name]||Qe.notCSSOptions[e.name].indexOf(je)<0)&&(n+=je+":"+Ke+";"),"-webkit-font-smoothing"==je&&(n+="-moz-osx-font-smoothing:"+("antialiased"===Ke?"grayscale":"unset")+";")}}"before"!=p&&"after"!=p||Qe.contentAdded["#"+e.selector+s+l]||(n+='content:"";',Qe.contentAdded["#"+e.selector+s+l]=!0),S["custom-css"]&&(n+=Qe.replaceGlobalColors(S["custom-css"])),n+="}","oxy_nav_menu"==e.name&&(n+=oxyNavMenuStyle+"}"+oxyNavMenuStyleItem+"}"+oxyNavMenuStyleActive+"}"+oxyNavMenuStyleDropdowns+"}"+oxyNavMenuStyleNotOpenItem+"}"+oxyNavMenuStyleDropdownsItem+"}"+oxyNavMenuStyleDropdownsItemHover+"}")}if(void 0!==Qe.componentsTemplates&&Qe.componentsTemplates[e.name]&&Qe.componentsTemplates[e.name].pageCSS&&!0!==Qe.APIElementsDefaultCSS[e.name]){var He=Qe.componentsTemplates[e.name].pageCSS;He=Qe.replaceGlobalWooSettings(He),Qe.APIElementsDefaultCSS[e.name]=!0,n+=He}if(void 0!==Qe.componentsTemplates&&Qe.componentsTemplates[e.name]&&Qe.componentsTemplates[e.name].registeredSelectors&&(n+=Qe.generateAPISelectorsCSS(e.name,e.selector,S)),S&&void 0!==Qe.componentsTemplates&&Qe.componentsTemplates[e.name]){var Xe=Qe.componentsTemplates[e.name].valuesCSS;for(var Ye in Xe)if(Xe.hasOwnProperty(Ye)&&Xe[Ye][S[Ye]]){var We=Xe[Ye][S[Ye]];n+=Qe.prefixCSSSelectors(We,e.selector)}}}if(n+=Qe.getMappedCSS(e.selector,e.original),e.media){var Le=angular.copy(e.media),Ue=Qe.sortedMediaList();for(var $e in Ue){var Ze=Ue[$e];Le[Ze]&&(Le[Ze].name=e.name,Le[Ze].selector=e.selector,n+="@media (max-width: "+Qe.mediaList[Ze].maxSize+") {",n+=Qe.getSingleComponentCSS(Le[Ze],t,!0,Ze),n+="}")}}return Qe.functionEnd("getSingleComponentCSS()"),n},Qe.prefixCSSSelectors=function(e,t,o){if(void 0===e||void 0===t)return e;var r=e.split("}");for(var a in r)if(r.hasOwnProperty(a)){var i=r[a],n=i.split("{");if(3==i.split("{").length){var s=n[0]+"{";n[0]=n[1];var l=!0}var c=n[0].split(",");for(var p in c)c[p]=(o?".":"#")+t+" "+c[p];3==i.split("{").length?r[a]=s+"\n"+c.join(", ")+"{"+n[2]:i[0]&&0!==i[0].length||!l?n[1]&&(r[a]=c.join(", ")+"{"+n[1]):(l=!1,r[a]=c.join(", ")+"{"+n[2]+"}\n")}return e=r.join("}\n")},Qe.getGridCSS=function(e,t,o){var r="";if(null==t&&(t="all"),e.display&&"grid"==e.display||e["flex-direction"]&&"grid"==e["flex-direction"]){o&&(r+="display: grid !important;");var a=e["grid-column-count"]?e["grid-column-count"]:Qe.defaultOptions[t]["grid-column-count"]||Qe.defaultOptions.all["grid-column-count"],i=e["grid-column-min-width"]?e["grid-column-min-width"]:Qe.defaultOptions[t]["grid-column-min-width"],n=e["grid-column-min-width"]?"":Qe.defaultOptions[t]["grid-column-min-width-unit"],s=e["grid-column-max-width"]?e["grid-column-max-width"]:Qe.defaultOptions[t]["grid-column-max-width"];max_width_unit=e["grid-column-max-width"]?"":Qe.defaultOptions[t]["grid-column-max-width-unit"],"true"==e["grid-columns-auto-fit"]&&(a="auto-fit"),e["grid-justify-items"]?r+="justify-items: "+e["grid-justify-items"]+";":r+="justify-items: stretch;",e["grid-align-items"]&&(r+="align-items: "+e["grid-align-items"]+";"),void 0!==a&&void 0!==i&&void 0!==s&&(r+="grid-template-columns: repeat("+a+", minmax("+i+n+", "+s+max_width_unit+"));");var l=e["grid-column-gap"]?e["grid-column-gap"]:Qe.defaultOptions[t]["grid-column-gap"];if(gap_unit=e["grid-column-gap"]?"":Qe.defaultOptions[t]["grid-column-gap-unit"],r+="grid-column-gap: "+l+gap_unit+";",e["grid-row-behavior"]&&"Explicit"==e["grid-row-behavior"]){var c=e["grid-row-count"]?e["grid-row-count"]:Qe.defaultOptions[t]["grid-row-count"],p=e["grid-row-min-height"]?e["grid-row-min-height"]:Qe.defaultOptions[t]["grid-row-min-height"],d=e["grid-row-min-height"]?"":Qe.defaultOptions[t]["grid-row-min-height-unit"],g=e["grid-row-max-height"]?e["grid-row-max-height"]:Qe.defaultOptions[t]["grid-row-max-height"];max_height_unit=e["grid-row-max-height"]?"":Qe.defaultOptions[t]["grid-row-max-height-unit"],null!=c&&null!=p&&null!=g&&(r+="grid-template-rows: repeat("+c+", minmax("+p+d+", "+g+max_height_unit+"));")}l=e["grid-row-gap"]?e["grid-row-gap"]:Qe.defaultOptions[t]["grid-row-gap"],gap_unit=e["grid-row-gap"]?"":Qe.defaultOptions[t]["grid-row-gap-unit"],r+="grid-row-gap: "+l+gap_unit+";","true"==e["grid-match-height-of-tallest-child"]&&(r+="grid-auto-rows: minmax(min-content,1fr);")}return r},Qe.getGridChildCSS=function(e,t,o,r,a,i,n){var s="";if(void 0===r&&(r=""),(e["flex-direction"]&&"grid"==e["flex-direction"]||e.display&&"grid"==e.display)&&e["grid-all-children-rule"]&&(s+=Qe.getGridSingleChildCSS(e["grid-all-children-rule"],"*",t,o,r,a)),(e["flex-direction"]&&"grid"==e["flex-direction"]||e.display&&"grid"==e.display)&&e["grid-child-rules"])for(var l in e["grid-child-rules"]){var c="",p=e["grid-child-rules"][l];if(p&&void 0!==p["child-index"]){var d=parseInt(p["child-index"]);if(i&&1<d?d++:!n&&"true"==e.grid&&d&&(d+=3),c+=p["column-span"]?"grid-column: span "+p["column-span"]+";":"",c+=p["row-span"]?"grid-row: span "+p["row-span"]+";":"",p["row-span"]&&1!=p["row-span"]&&(c+="height: 100%;"),""==c)continue;var g=0==d?":last-child":":nth-child("+d+")";a?o&&"original"!=o?(s+="."+t+":not(.ct-section):not(.oxy-easy-posts):"+o+",\r\n",Qe.isPseudoElement(o)?(s+="."+t+".ct-section .ct-section-inner-wrap:"+o+" > "+g+",\r\n",s+="."+t+".oxy-easy-posts .oxy-posts:"+o+" > "+g+"{\r\n"):(s+="."+t+".ct-section:"+o+" .ct-section-inner-wrap > "+g+",\r\n",s+="."+t+".oxy-easy-posts:"+o+" .oxy-posts > "+g+"{\r\n")):(s+="."+t+":not(.ct-section):not(.oxy-easy-posts) > "+g+",\r\n",s+="."+t+".ct-section .ct-section-inner-wrap > "+g+",\r\n",s+="."+t+".oxy-easy-posts .oxy-posts > "+g+"{\r\n"):s+=o&&"original"!=o?"#"+t+" "+r+":"+o+"> "+g+"{\r\n":"#"+t+" "+r+"> "+g+"{\r\n",s+=c,s+="}\r\n"}}return s},Qe.getGridSingleChildCSS=function(e,t,o,r,a,i){var n="";return pre_styles=e["column-span"]?"grid-column: span "+e["column-span"]+";":"",pre_styles+=e["row-span"]?"grid-row: span "+e["row-span"]+";":"",e["row-span"]&&1!=e["row-span"]&&(pre_styles+="height: 100%;"),""!=pre_styles&&(i?r&&"original"!=r?(n+="."+o+":not(.ct-section):not(.oxy-easy-posts):"+r+",\r\n",Qe.isPseudoElement(r)?(n+="."+o+".ct-section .ct-section-inner-wrap:"+r+" > "+t+",\r\n",n+="."+o+".oxy-easy-posts .oxy-posts:"+r+" > "+t+"{\r\n"):(n+="."+o+".ct-section:"+r+" .ct-section-inner-wrap > "+t+",\r\n",n+="."+o+".oxy-easy-posts:"+r+" .oxy-posts > "+t+"{\r\n")):(n+="."+o+":not(.ct-section):not(.oxy-easy-posts) > "+t+",\r\n",n+="."+o+".ct-section .ct-section-inner-wrap > "+t+",\r\n",n+="."+o+".oxy-easy-posts .oxy-posts > "+t+"{\r\n"):n+=r&&"original"!=r?"#"+o+" "+a+":"+r+"> "+t+"{\r\n":"#"+o+" "+a+"> "+t+"{\r\n",n+=pre_styles,n+="}\r\n"),n},Qe.getTransformCSS=function(e){if(e.transform){var t=Qe.objectToArrayObject(e.transform),o="";for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];"skew"==a["transform-type"]&&(a.skewX&&a.skewY?o+=a["transform-type"]+"("+a.skewX+"deg,"+a.skewY+"deg)":a.skewX&&(o+=a["transform-type"]+"("+a.skewX+"deg)")),"translate"==a["transform-type"]&&(a.translateX&&a.translateY&&a.translateZ?o+="translate3d("+a.translateX+(a["translateX-unit"]||Qe.defaultOptions.all["translateX-unit"])+","+a.translateY+(a["translateY-unit"]||Qe.defaultOptions.all["translateY-unit"])+","+a.translateZ+(a["translateZ-unit"]||Qe.defaultOptions.all["translateZ-unit"])+")":a.translateX&&a.translateY?o+=a["transform-type"]+"("+a.translateX+(a["translateX-unit"]||Qe.defaultOptions.all["translateX-unit"])+","+a.translateY+(a["translateY-unit"]||Qe.defaultOptions.all["translateY-unit"])+")":a.translateX?o+=a["transform-type"]+"("+a.translateX+(a["translateX-unit"]||Qe.defaultOptions.all["translateX-unit"])+")":a.translateY&&(o+="translateY("+a.translateY+(a["translateY-unit"]||Qe.defaultOptions.all["translateY-unit"])+")")),"rotate"==a["transform-type"]&&a.rotateAngle&&(o+=a["transform-type"]+"("+a.rotateAngle+"deg)"),"rotateX"==a["transform-type"]&&a.rotateXAngle&&(o+=a["transform-type"]+"("+a.rotateXAngle+"deg)"),"rotateY"==a["transform-type"]&&a.rotateYAngle&&(o+=a["transform-type"]+"("+a.rotateYAngle+"deg)"),"perspective"==a["transform-type"]&&a.perspective&&(o+=a["transform-type"]+"("+a.perspective+(a["perspective-unit"]||Qe.defaultOptions.all["perspective-unit"])+")"),"rotate3d"==a["transform-type"]&&a.rotate3dX&&a.rotate3dY&&a.rotate3dZ&&a.rotate3dAngle&&(o+=a["transform-type"]+"("+a.rotate3dX+","+a.rotate3dY+","+a.rotate3dZ+","+a.rotate3dAngle+"deg)"),"scale"==a["transform-type"]&&(a.scaleX&&a.scaleY&&a.scaleZ?o+="scale3d("+a.scaleX+","+a.scaleY+","+a.scaleZ+")":a.scaleX&&a.scaleY?o+=a["transform-type"]+"("+a.scaleX+","+a.scaleY+")":(a.scaleX&&(o+=" scaleX("+a.scaleX+")"),a.scaleY&&(o+=" scaleY("+a.scaleY+")"),a.scaleZ&&(o+=" scaleZ("+a.scaleZ+")"))),r<t.length-1?o+=" ":o+=";"}return""!==o&&(o="transform:"+o),o}},Qe.getBackgroundLayersCSS=function(e,t,o,r,a,i){Qe.getGlobalColorValue(e["background-color"]);var n=[],s=[],l=[];e.gradient&&e.gradient.colors&&(l=e.gradient.colors);var c="";if(l=_.map(l,function(e){return e}),l=_.filter(l,function(e){return e.value}),0<(l=_.map(l,function(e){return e.value=Qe.getGlobalColorValue(e.value),e})).length){if("radial"===e.gradient["gradient-type"]){c+=" radial-gradient(";var p="";e.gradient["radial-shape"]&&(p+=" "+e.gradient["radial-shape"]),e.gradient["radial-size"]&&(p+=" "+e.gradient["radial-size"]),e.gradient["radial-position-left"]&&(p+=" at "+e.gradient["radial-position-left"]+(e.gradient["radial-position-left-unit"]||"px"),e.gradient["radial-position-top"]&&(p+=" "+e.gradient["radial-position-top"]+(e.gradient["radial-position-top-unit"]||"px"))),0<p.length&&(c+=p+", ")}else c+=" linear-gradient(",e.gradient["linear-angle"]&&(c+=e.gradient["linear-angle"]+"deg, ");if(l){var d=_.filter(l,function(e){return e.value&&0<e.value.length}),g=_.map(d,function(e){return e.value+(e.position?" "+e.position+e["position-unit"]:"")});1===g.length&&g.push(g[0]),c+=g.join(", ")}0<(c+=")").length&&(n.push(c),s.push("auto"))}if(e["overlay-color"]&&(n.push("linear-gradient("+Qe.getGlobalColorValue(e["overlay-color"])+", "+Qe.getGlobalColorValue(e["overlay-color"])+")"),s.push("auto")),e["background-size"]&&0<e["background-size"].trim().length?(c="","manual"===e["background-size"]?(e["background-size-width"]&&0<e["background-size-width"].trim().length?c+=" "+e["background-size-width"].trim()+e["background-size-width-unit"].trim():c+=" 0%",e["background-size-height"]&&0<e["background-size-height"].trim().length?c+=" "+e["background-size-height"].trim()+e["background-size-height-unit"].trim():c+=" 0%"):c+=" "+e["background-size"],0<c.length&&s.push(c)):s=[],e.background&&n.push("url("+e.background+")"),e["background-image"]){var m=e["background-image"];-1<m.indexOf("[")&&Qe.dynamicBackgrounds&&(m=Qe.getDynamicBackground(o?"id"===o?"id":"selector":"class",{id:r,media:a,stateName:i})),n.push("url("+m+")")}var u=n.join(", ").trim(),y="";return""!==u&&(y="background-image:"+u+";"),0<s.length&&(y+="background-size:"+s.join(", ")+";"),y},Qe.generateTypographyCSS=function(e,t){var o="";for(var r in e)if(-1<r.indexOf(t)){var a=r.replace(t+"_",""),i=e[r];"color"==a&&(i=Qe.getGlobalColorValue(i)),o+=a+":"+Qe.addFontFamilyQuotes(a,i)+";"}return o},Qe.addFontFamilyQuotes=function(e,t){return("font-family"==e||-1<e.indexOf("font-family"))&&(Qe.loadWebFont(t),-1===t.indexOf(",")&&"inherit"!==t.toLowerCase()&&(t="'"+t+"'")),t},Qe.generateBoxShadowCSS=function(e,t){return null!=t?t+="_":t="",e[t+"box-shadow-color"]?"box-shadow:"+("inset"==e[t+"box-shadow-inset"]?e[t+"box-shadow-inset"]+" ":"")+(e[t+"box-shadow-horizontal-offset"]?e[t+"box-shadow-horizontal-offset"]+" ":"")+(e[t+"box-shadow-vertical-offset"]?e[t+"box-shadow-vertical-offset"]+" ":"")+(e[t+"box-shadow-blur"]?e[t+"box-shadow-blur"]+" ":"0px ")+(e[t+"box-shadow-spread"]?e[t+"box-shadow-spread"]+" ":"")+Qe.getGlobalColorValue(e[t+"box-shadow-color"])+";":""},Qe.generateArrayOptionsCSS=function(e,t){var o="";for(var r in e)-1<r.indexOf(t)&&(o+=r.replace(t+"_","")+":"+e[r]+";");return o},Qe.getSingleClassCSS=function(e,t){Qe.log&&(console.log("getSingleClassCSS()",e),Qe.functionStart("getSingleClassCSS()")),void 0===t&&(t=Qe.classes[e]),Qe.contentAdded=[];var o=Qe.getSelectorStyles(e,t);if(Qe.classes[e].media){var r=Qe.sortedMediaList(!1,!0);for(var a in r){var i=r[a];if(Qe.classes[e].media[i]){if("page-width"==i)var n=Qe.getPageWidth("global")+"px";else n=Qe.mediaList[i].maxSize;t=Qe.classes[e].media[i],o+="@media (max-width: "+n+") {",o+=Qe.getSelectorStyles(e,t,!1,i),o+="}"}}}return Qe.functionEnd("getSingleClassCSS()"),o},Qe.getSingleSelectorCSS=function(e,t){Qe.log&&(console.log("getSingleSelectorCSS()",e),Qe.functionStart("getSingleSelectorCSS()")),void 0===t&&(t=Qe.customSelectors[e]),Qe.contentAdded=[];var o=Qe.getSelectorStyles(e,t,!0);if(Qe.customSelectors[e].media){var r=Qe.sortedMediaList();for(var a in r){var i=r[a];Qe.customSelectors[e].media[i]&&(t=Qe.customSelectors[e].media[i],o+="@media (max-width: "+Qe.mediaList[i].maxSize+") {",o+=Qe.getSelectorStyles(e,t,!0,i),o+="}")}}return Qe.functionEnd("getSingleSelectorCSS()"),o},Qe.getSelectorStyles=function(e,t,o,r){if(""===e||!o&&void 0===Qe.classes[e]||o&&void 0===Qe.customSelectors[e])return"";var a,i="";for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];if("media"==n||"set_name"==n||"key"==n||"parent"==n||"status"==n||"friendly_name"==n)continue;a=("original"==n||e==Qe.selectorToEdit&&n==Qe.currentState||e==Qe.currentClass&&n==Qe.currentState)&&("original"==n||"hover"==n||"active"==n||"focus"==n)?"":":"+n;var l=Qe.getCSSOptions(null,null,s);if(i+=Qe.generateAllAPISelectorsCSS(e,l,"class"),(void 0!==l["icon-style"]||void 0!==l["icon-color"]||void 0!==l["icon-background-color"]||void 0!==l["icon-padding"]||void 0!==l["icon-size"])&&!o){if(r||"original"!=n)c=Qe.classes[e].original["icon-style"]||Qe.defaultOptions.ct_fancy_icon["icon-style"],p=Qe.getGlobalColorValue(l["icon-color"]),d=Qe.getGlobalColorValue(l["icon-background-color"]),g=l["icon-padding"],m=l["icon-size"];else var c=l["icon-style"]||Qe.defaultOptions.ct_fancy_icon["icon-style"],p=Qe.getGlobalColorValue(l["icon-color"])||Qe.defaultOptions.ct_fancy_icon["icon-color"],d=Qe.getGlobalColorValue(l["icon-background-color"])||Qe.defaultOptions.ct_fancy_icon["icon-background-color"],g=l["icon-padding"]||Qe.defaultOptions.ct_fancy_icon["icon-padding"]+Qe.defaultOptions.ct_fancy_icon["icon-padding-unit"],m=l["icon-size"]||Qe.defaultOptions.ct_fancy_icon["icon-size"]+Qe.defaultOptions.ct_fancy_icon["icon-size-unit"];i+="."+e+a+"{",1==c&&(i+="border: 1px solid;"),2==c&&d&&(i+="background-color: "+Qe.getGlobalColorValue(d)+";",i+="border: 1px solid "+Qe.getGlobalColorValue(d)+";"),1!=c&&2!=c||(i+="padding:"+g+";"),p&&(i+="color:"+Qe.getGlobalColorValue(p)+";"),i+="}",m&&(i+="."+e+a+">svg {",i+="width: "+m+";",i+="height: "+m+";",i+="}")}if((void 0!==l["button-style"]||void 0!==l["button-color"]||void 0!==l["button-size"]||void 0!==l["button-text-color"])&&!o){if(r||"original"!=n)u=Qe.classes[e].original["button-style"]||Qe.defaultOptions.ct_link_button["button-style"],_=Qe.getGlobalColorValue(l["button-color"]),y=l["button-size"],h=Qe.getGlobalColorValue(l["button-text-color"]);else var u=l["button-style"]||Qe.defaultOptions.ct_link_button["button-style"],_=Qe.getGlobalColorValue(l["button-color"])||Qe.defaultOptions.ct_link_button["button-color"],y=l["button-size"]||Qe.defaultOptions.ct_link_button["button-size"]+Qe.defaultOptions.ct_link_button["button-size-unit"],h=Qe.getGlobalColorValue(l["button-text-color"])||Qe.defaultOptions.ct_link_button["button-text-color"];if(i+="."+e+a+"{",1==u&&_&&(i+="background-color: "+Qe.getGlobalColorValue(_)+";",i+="border: 1px solid "+Qe.getGlobalColorValue(_)+";",h&&(i+="color: "+Qe.getGlobalColorValue(h)+";")),2==u&&(i+="background-color: transparent;",_&&(i+="border: 1px solid "+Qe.getGlobalColorValue(_)+";",i+="color: "+Qe.getGlobalColorValue(_)+";")),y){var b=2==u?1:0;i+="padding: "+(parseInt(y)-b)+"px "+(1.6*parseInt(y)-b)+"px;"}i+="}"}var x=!1;if(Qe.classes[e])for(paramName in Qe.classes[e].original)0===paramName.indexOf("testimonial_")&&(x=!0);if(!o&&x){x=!1;var S,f,v,C,w="",k=l.testimonial_image_spacing;if("vertical"==l.testimonial_layout?(w="margin:0;",k=l.testimonial_image_spacing||Qe.defaultOptions.oxy_testimonial.testimonial_image_spacing+Qe.defaultOptions.oxy_testimonial["testimonial_image_spacing-unit"],"bottom"==l.testimonial_image_position?w+="margin-top":w+="margin-bottom"):"bottom"==l.testimonial_image_position?(w="margin:0;",k=l.testimonial_image_spacing||Qe.defaultOptions.oxy_testimonial.testimonial_image_spacing+Qe.defaultOptions.oxy_testimonial["testimonial_image_spacing-unit"],w+="margin-left"):w+="margin-right",w+=": "+k+";","left"==l.testimonial_content_alignment?(S="flex-start",f="left"):"center"==l.testimonial_content_alignment?f=S="center":"right"==l.testimonial_content_alignment&&(S="flex-end",f="right"),"left"==Qe.classes[e].original.testimonial_mobile_content_alignment?(v="flex-start",C="left"):"center"==Qe.classes[e].original.testimonial_mobile_content_alignment?C=v="center":"right"==Qe.classes[e].original.testimonial_mobile_content_alignment&&(v="flex-end",C="right"),"vertical"==l.testimonial_layout?i+="."+e+a+" {flex-direction: column;}":"horizontal"==l.testimonial_layout&&(i+="."+e+a+" {flex-direction: row;align-items: center;}"),"top"==l.testimonial_image_position||""==l.testimonial_image_position?i+="."+e+a+" .oxy-testimonial-photo-wrap {order: 1;}":"bottom"==l.testimonial_image_position&&(i+="."+e+a+" .oxy-testimonial-photo-wrap {order: 3;}"),i+="."+e+a+" .oxy-testimonial-photo {width:"+l.testimonial_image_size+";height:"+l.testimonial_image_size+";"+w+"}",i+="."+e+a+" .oxy-testimonial-photo-wrap,."+e+a+" .oxy-testimonial-author-wrap,."+e+a+" .oxy-testimonial-content-wrap {align-items:"+S+";text-align:"+f+";}",i+="."+e+a+" .oxy-testimonial-text {margin-bottom:"+l.testimonial_text_space_below+";"+Qe.generateTypographyCSS(l,"testimonial_text_typography")+"}",i+="."+e+a+" .oxy-testimonial-author {margin-bottom:"+l.testimonial_author_space_below+";"+Qe.generateTypographyCSS(l,"testimonial_author_typography")+"}",i+="."+e+a+" .oxy-testimonial-author-info {margin-bottom:"+l.testimonial_author_info_space_below+";"+Qe.generateTypographyCSS(l,"testimonial_author_info_typography")+"}",A=Qe.getMediaMaxSize(Qe.classes[e].original.testimonial_vertical_layout_below)){var P=l.testimonial_image_spacing;P||(P=Qe.defaultOptions.oxy_testimonial.testimonial_image_spacing+Qe.defaultOptions.oxy_testimonial["testimonial_image_spacing-unit"]),i+="@media (max-width: "+A+"){."+e+a+" {flex-direction: column !important;}."+e+a+" .oxy-testimonial-photo {margin: 0;margin-"+("bottom"==l.testimonial_image_position?"top":"bottom")+":"+P+";}."+e+a+" .oxy-testimonial-photo-wrap, ."+e+a+" .oxy-testimonial-author-wrap, ."+e+a+" .oxy-testimonial-content-wrap {align-items:"+v+";text-align:"+C+";}}"}}var O=!1;if(Qe.classes[e])for(paramName in Qe.classes[e].original)0===paramName.indexOf("icon_box_")&&(O=!0);if(!o&&O){var z,T,G,M,V,A;if(O=!1,"top"==l.icon_box_icon_position?z="column":"left"==l.icon_box_icon_position?z="row":"right"==l.icon_box_icon_position?z="row-reverse":"bottom"==l.icon_box_icon_position&&(z="column-reverse"),"left"==l.icon_box_icon_position||"right"==l.icon_box_icon_position){var I=l.icon_box_icon_space_before||Qe.defaultOptions.oxy_icon_box.icon_box_icon_space_before+Qe.defaultOptions.oxy_icon_box["icon_box_icon_space_before-unit"];right=l.icon_box_icon_space_after||Qe.defaultOptions.oxy_icon_box.icon_box_icon_space_after+Qe.defaultOptions.oxy_icon_box["icon_box_icon_space_after-unit"],G="margin-left: "+I+";\n",G+="margin-right: "+right+";\n",G+="margin-bottom: 0; margin-top: 0;"}else G="margin-top: "+l.icon_box_icon_space_before+";\n",G+="margin-bottom: "+l.icon_box_icon_space_after+";\n";"left"==l.icon_box_icon_position||"right"==l.icon_box_icon_position?T=l.icon_box_icon_vertical_alignment:"left"==l.icon_box_content_alignment?T="flex-start":"center"==l.icon_box_content_alignment?T="center":"right"==l.icon_box_content_alignment&&(T="flex-end"),V="left"==l.icon_box_mobile_content_alignment?(M="flex-start","left"):"center"==l.icon_box_mobile_content_alignment?M="center":"right"==l.icon_box_mobile_content_alignment?(M="flex-end","right"):(M="flex-start","left"),i+="."+e+a+" {text-align: "+l.icon_box_content_alignment+";flex-direction: "+z+";}",i+="."+e+a+" .oxy-icon-box-icon {"+G+"align-self: "+T+";}",i+="."+e+a+" .oxy-icon-box-heading {"+Qe.generateTypographyCSS(l,"icon_box_heading_typography")+"margin-top: "+l.icon_box_heading_space_above+";margin-bottom: "+l.icon_box_heading_space_below+";}",i+="."+e+a+" .oxy-icon-box-text {"+Qe.generateTypographyCSS(l,"icon_box_text_typography")+"margin-top: "+l.icon_box_text_space_above+";margin-bottom: "+l.icon_box_text_space_below+";align-self: "+T+";}",i+="."+e+a+" .oxy-icon-box-link {margin-top: "+l.icon_box_link_space_above+";margin-bottom: "+l.icon_box_link_space_below+";}",(A=Qe.getMediaMaxSize(Qe.classes[e].original.icon_box_vertical_layout_below))&&!r&&(i+="@media (max-width: "+A+"){."+e+a+".oxy-icon-box {flex-direction: column !important;text-align: "+V+";}."+e+a+" .oxy-icon-box-icon {margin-left: 0;margin-right: 0;margin-top: "+l.icon_box_icon_space_before+";margin-bottom: "+l.icon_box_icon_space_after+";}."+e+a+" .oxy-icon-box-icon, .oxy-icon-box-text {align-self: "+M+";}}")}var E=!1;if(Qe.classes[e])for(paramName in Qe.classes[e].original)0===paramName.indexOf("progress_bar_")&&(E=!0);if(!o&&E){E=!1;var F="",N=[];if("true"==l.progress_bar_stripes&&(F="background-image: linear-gradient(-45deg,rgba(255,255,255,.12) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.12) 50%,rgba(255,255,255,.12) 75%,transparent 75%,transparent);"),"false"==l.progress_bar_stripes&&(F="background-image:none;"),"true"==l.progress_bar_animation_stripes){var j=l.progress_bar_animation_stripes_duration||Qe.defaultOptions.oxy_progress_bar.progress_bar_animation_stripes_duration;N.stripes="oxy_progress_bar_stripes "+j+" linear infinite"}if("false"==l.progress_bar_animation_stripes&&(N.stripes="none 0s paused"),"true"==l.progress_bar_animate_width){var K=l.progress_bar_animation_width_duration||Qe.defaultOptions.oxy_progress_bar.progress_bar_animation_width_duration;N.width="oxy_progress_bar_width "+K+" ease-out 1"}"false"==l.progress_bar_animate_width&&(N.width="none 0s paused");var B=[];for(var D in N)B.push(N[D]);i+="."+e+a+" .oxy-progress-bar-background {background-color:"+Qe.getGlobalColorValue(l.progress_bar_background_color)+";"+F+"animation:"+N.stripes+";}",i+="."+e+a+" .oxy-progress-bar-progress-wrap {width:"+l.progress_bar_progress+";}",i+="."+e+a+" .oxy-progress-bar-progress {background-color:"+Qe.getGlobalColorValue(l.progress_bar_bar_color)+";padding:"+l.progress_bar_bar_padding+";"+F+"animation:"+B.join()+";}",i+="."+e+a+" .oxy-progress-bar-overlay-text {"+Qe.generateTypographyCSS(l,"progress_bar_left_text_typography")+"}",i+="."+e+a+" .oxy-progress-bar-overlay-percent {"+Qe.generateTypographyCSS(l,"progress_bar_right_text_typography")+"}"}var H,X,Y,W,L,U,$=!1;if(Qe.classes[e])for(paramName in Qe.classes[e].original)0===paramName.indexOf("pricing_box_")&&($=!0);if(!o&&$)$=!1,"vertical"==l.pricing_box_price_layout?(X="column","left"==l.pricing_box_price_alignment?H="flex-start":"center"==l.pricing_box_price_alignment?H="center":"right"==l.pricing_box_price_alignment&&(H="flex-end")):"horizontal"==l.pricing_box_price_layout&&(X="row"),"horizontal"==l.pricing_box_price_layout&&("left"==l.pricing_box_price_alignment?Y="flex-start":"center"==l.pricing_box_price_alignment?Y="center":"right"==l.pricing_box_price_alignment&&(Y="flex-end")),"left"==l.pricing_box_global_alignment?W="flex-start":"center"==l.pricing_box_global_alignment?W="center":"right"==l.pricing_box_global_alignment&&(W="flex-end"),"left"==l.pricing_box_graphic_alignment?L="flex-start":"center"==l.pricing_box_graphic_alignment?L="center":"right"==l.pricing_box_graphic_alignment?L="flex-end":W&&(L=W),"left"==l.pricing_box_cta_alignment?U="flex-start":"center"==l.pricing_box_cta_alignment?U="center":"right"==l.pricing_box_cta_alignment?U="flex-end":W&&(U=W),i+="."+e+a+" .oxy-pricing-box-section {"+Qe.generateArrayOptionsCSS(l,"pricing_box_global")+"text-align:"+l.pricing_box_global_alignment+";}",i+="."+e+a+" .oxy-pricing-box-section.oxy-pricing-box-price {justify-content:"+W+";}",i+="."+e+a+" .oxy-pricing-box-section.oxy-pricing-box-graphic {"+Qe.generateArrayOptionsCSS(l,"pricing_box_graphic")+"background-color:"+Qe.getGlobalColorValue(l.pricing_box_graphic_background)+";text-align:"+l.pricing_box_graphic_alignment+";justify-content:"+L+";}",i+="."+e+a+" .oxy-pricing-box-section.oxy-pricing-box-title {"+Qe.generateArrayOptionsCSS(l,"pricing_box_title")+"text-align:"+l.pricing_box_title_alignment+";background-color:"+Qe.getGlobalColorValue(l.pricing_box_title_background)+";}",i+="."+e+a+" .oxy-pricing-box-title-title {"+Qe.generateTypographyCSS(l,"pricing_box_title_typography")+"}",i+="."+e+a+" .oxy-pricing-box-title-subtitle {"+Qe.generateTypographyCSS(l,"pricing_box_subtitle_typography")+"}",i+="."+e+a+" .oxy-pricing-box-section.oxy-pricing-box-price {"+Qe.generateArrayOptionsCSS(l,"pricing_box_price")+"text-align:"+l.pricing_box_price_alignment+";background-color:"+Qe.getGlobalColorValue(l.pricing_box_price_background)+";flex-direction:"+X+";justify-content:"+Y+";align-items:"+H+";}",i+="."+e+a+" .oxy-pricing-box-currency {"+Qe.generateTypographyCSS(l,"pricing_box_price_amount_currency_typography")+"}",i+="."+e+a+" .oxy-pricing-box-amount-main {"+Qe.generateTypographyCSS(l,"pricing_box_price_amount_main_typography")+"}",i+="."+e+a+" .oxy-pricing-box-amount-decimal {"+Qe.generateTypographyCSS(l,"pricing_box_price_amount_decimal_typography")+"}",i+="."+e+a+" .oxy-pricing-box-term {"+Qe.generateTypographyCSS(l,"pricing_box_price_amount_term_typography")+"}",i+="."+e+a+" .oxy-pricing-box-sale-price {"+Qe.generateTypographyCSS(l,"pricing_box_price_sale_typography")+"margin-bottom:"+l.pricing_box_price_sale_space_below+";}",i+="."+e+a+" .oxy-pricing-box-section.oxy-pricing-box-content {"+Qe.generateArrayOptionsCSS(l,"pricing_box_content")+"background-color:"+Qe.getGlobalColorValue(l.pricing_box_content_background)+";text-align:"+l.pricing_box_content_alignment+";"+Qe.generateTypographyCSS(l,"pricing_box_content_typography")+"}",i+="."+e+a+" .oxy-pricing-box-section.oxy-pricing-box-cta {"+Qe.generateArrayOptionsCSS(l,"pricing_box_cta")+"background-color:"+Qe.getGlobalColorValue(l.pricing_box_cta_background)+";text-align:"+l.pricing_box_cta_alignment+";justify-content:"+U+";}";!o&&Qe.classHasOptions(e,"slider-")&&(r||"original"!=n||(l["slider-arrow-color"]&&"lighter"==l["slider-arrow-color"]&&(i+="."+e+" .unslider-arrow {",i+="background-color: rgba(255,255,255,0.2); ",i+="}"),l["slider-dot-color"]&&(i+="."+e+" .unslider-nav ol li {",i+="border-color: "+Qe.getGlobalColorValue(l["slider-dot-color"])+"; ",i+="}",i+="."+e+" .unslider-nav ol li.unslider-active {",i+="background-color: "+Qe.getGlobalColorValue(l["slider-dot-color"])+"; ",i+="}"),l["slider-remove-padding"]&&"yes"==l["slider-remove-padding"]&&(i+="."+e+" .unslider {",i+="padding: 0px; ",i+="}",i+="."+e+" .unslider-wrap.unslider-carousel > li {",i+="padding: 0px; ",i+="}",i+="."+e+" .unslider-arrow.next {",i+="right: 10px; ",i+="z-index: 100; ",i+="}",i+="."+e+" .unslider-arrow.prev {",i+="left: 10px; ",i+="z-index: 100; ",i+="}"),l["slider-dots-overlay"]&&"yes"==l["slider-dots-overlay"]&&(i+="."+e+" .unslider .unslider-nav {",i+="position: absolute; bottom: 0; left: 0; right: 0; z-index: 100",i+="}"),l["slider-stretch-slides"]&&"yes"==l["slider-stretch-slides"]&&(i+="."+e+" .unslider-wrap {",i+="display: flex;",i+="}",i+="."+e+" .ct-slide {",i+="height: 100%;",i+="}",i+="."+e+" .unslider,",i+="."+e+" .oxygen-unslider-container,",i+="."+e+" .unslider-wrap,",i+="."+e+" .unslider-wrap li {",i+="height: 100%;",i+="}"),l["slider-stretch-slides"]&&"yes"==l["slider-stretch-slides"]&&l["slider-animation"]&&"fade"==l["slider-animation"]&&(i+="."+e+" .unslider-fade ul li.unslider-active {",i+="width: 100%;",i+="}"),l["slider-slide-padding"]&&(i+="."+e+" .ct-slide {",i+="padding: "+l["slider-slide-padding"],i+="}")));var Z=!1;if(Qe.classes[e])for(paramName in Qe.classes[e].original)0===paramName.indexOf("toggle_")&&(Z=!0);!o&&Z&&(i+="."+e+a+" .oxy-expand-collapse-icon {font-size:"+l.toggle_icon_size+";}",i+="."+e+a+" .oxy-expand-collapse-icon::before,."+e+a+" .oxy-expand-collapse-icon::after {background-color:"+Qe.getGlobalColorValue(l.toggle_icon_color)+";}");var Q=!1;if(Qe.classes[e])for(paramName in Qe.classes[e].original)0===paramName.indexOf("superbox_")&&(Q=!0);if(!o&&Q){var q,R,J,ee,te,oe=l.superbox_secondary_scale_start,re=l.superbox_secondary_scale_finish,ae=l.superbox_primary_scale_start,ie=l.superbox_primary_scale_finish,ne="",se="",le="",ce="";void 0!==oe&&(R="transform: scale("+oe+");"),void 0!==re&&(J="transform: scale("+re+");"),void 0!==ae&&(ee="transform: scale("+ae+");"),void 0!==ie&&(te="transform: scale("+ie+");"),l.superbox_secondary_slide_direction&&(q=Qe.slide_position(l.superbox_secondary_slide_direction,(l.superbox_secondary_slide_distance||"")+"px"),"in"==l.superbox_secondary_slide_inorout?(ne=q.out_css,se=q.in_css):"out"==l.superbox_secondary_slide_inorout&&(ne=q.in_css,se=q.out_css)),l.superbox_primary_slide_direction&&(q=Qe.slide_position(l.superbox_primary_slide_direction,(l.superbox_primary_slide_distance||"")+"px"),"in"==l.superbox_primary_slide_inorout?(le=q.out_css,ce=q.in_css):"out"==l.superbox_primary_slide_inorout&&(le=q.in_css,ce=q.out_css)),i+="."+e+" .oxy-superbox-secondary, ."+e+" .oxy-superbox-primary {transition-duration:"+l.superbox_transition_duration+";}",i+="."+e+" .oxy-superbox-secondary {opacity:"+l.superbox_secondary_opacity_start+";"+ne+R+"}",i+="."+e+":hover .oxy-superbox-secondary {opacity:"+l.superbox_secondary_opacity_finish+";z-index: 2147483642;"+se+J+"}",i+="."+e+" .oxy-superbox-primary {opacity:"+l.superbox_primary_opacity_start+";"+le+ee+"}",i+="."+e+":hover .oxy-superbox-primary {opacity:"+l.superbox_primary_opacity_finish+";"+ce+te+"}"}if(void 0!==Qe.componentsTemplates)for(var pe in Qe.componentsTemplates)if(Qe.componentsTemplates.hasOwnProperty(pe)){var de=!1;if(Qe.classes[e])for(paramName in Qe.classes[e][n])0===paramName.indexOf(pe)&&(de=!0);if(!o&&de&&Qe.componentsTemplates[pe].registeredSelectors){var ge=Qe.componentsTemplates[pe].registeredSelectors;for(var D in selectorsCSS="",ge)if(ge.hasOwnProperty(D)){var me=ge[D],ue="";if(me)for(var _e in me)me.hasOwnProperty(_e)&&l[me[_e]]&&(ue+=_e+":"+Qe.getGlobalColorValue(l[me[_e]])+";");ue&&(selectorsCSS+="."+e+" "+D+a+"{"+ue+"}")}i+=selectorsCSS}}if(l&&void 0!==Qe.componentsTemplates)for(var pe in Qe.componentsTemplates)if(Qe.componentsTemplates.hasOwnProperty(pe)){var ye=Qe.componentsTemplates[pe].valuesCSS;for(var he in ye)if(ye.hasOwnProperty(he)&&ye[he][l[he]]){var be=ye[he][l[he]];i+=Qe.prefixCSSSelectors(be,e,!0)}}if(l["box-shadow-color"]){var xe="inset"==l["box-shadow-inset"]?l["box-shadow-inset"]+" ":"",Se=l["box-shadow-horizontal-offset"]?l["box-shadow-horizontal-offset"]+"px ":"",fe=l["box-shadow-vertical-offset"]?l["box-shadow-vertical-offset"]+"px ":"",ve=l["box-shadow-blur"]?l["box-shadow-blur"]+"px ":"0px ",Ce=l["box-shadow-spread"]?l["box-shadow-spread"]+"px ":"";l["box-shadow"]=xe+Se+fe+ve+Ce+Qe.getGlobalColorValue(l["box-shadow-color"])}if(l["text-shadow-color"]){Se=l["text-shadow-horizontal-offset"]?l["text-shadow-horizontal-offset"]+"px ":"",fe=l["text-shadow-vertical-offset"]?l["text-shadow-vertical-offset"]+"px ":"",ve=l["text-shadow-blur"]?l["text-shadow-blur"]+"px ":"0px ";l["text-shadow"]=Se+fe+ve+Qe.getGlobalColorValue(l["text-shadow-color"])}for(var we in o?e.indexOf(".")<0&&e.indexOf("#")<0&&e.indexOf("body")<0?i+=".oxygen-body "+e+a:i+=e+a:i+="."+e+a,i+="{",i+=Qe.getBackgroundLayersCSS(l,null,o,e,r,n)||"",i+=Qe.getTransformCSS(l)||"",l)if(l.hasOwnProperty(we)){if("custom-css"==we)continue;if(0<=["display","flex-direction","flex-wrap","align-items","align-content","justify-content","gap"].indexOf(we)&&!o)continue;var ke=l[we];if("flex-direction"==we){i+=we+":"+ke+(Pe="reverse"==l["flex-reverse"]?"-reverse":"")+";";continue}if("filter"==we&&l["filter-amount-"+ke])ke+="("+l["filter-amount-"+ke]+")";else if("filter"==we)continue;if("content"==we.trim().toLowerCase()&&(ke='"'+ke.replace('"','\\"')+'"',Qe.contentAdded[e+a]=!0),("font-family"==we||-1<we.indexOf("font-family"))&&void 0!==ke&&(Qe.loadWebFont(ke),-1===ke.indexOf(",")&&"inherit"!==ke.toLowerCase()&&(ke="'"+ke+"'")),"background-image"==we||"background-size"==we)continue;ke&&Qe.excludeProperties.indexOf(we)<0&&"background-layers"!==we&&(i+=we+":"+Qe.getGlobalColorValue(ke)+";"),"-webkit-font-smoothing"==we&&(i+="-moz-osx-font-smoothing:"+("antialiased"===ke?"grayscale":"unset")+";")}if("before"!=n&&"after"!=n||Qe.contentAdded[e+a]||(i+='content:"";',Qe.contentAdded[e+a]=!0),l["custom-css"]&&(i+=Qe.replaceGlobalColors(l["custom-css"])),i+="}",(l["container-padding-top"]||l["container-padding-right"]||l["container-padding-bottom"]||l["container-padding-left"])&&(i+="."+e+a+" .ct-section-inner-wrap {",l["container-padding-top"]&&(i+="padding-top:"+l["container-padding-top"]+";"),l["container-padding-right"]&&(i+="padding-right:"+l["container-padding-right"]+";"),l["container-padding-bottom"]&&(i+="padding-bottom:"+l["container-padding-bottom"]+";"),l["container-padding-left"]&&(i+="padding-left:"+l["container-padding-left"]+";"),i+="}"),(l.display||l["flex-direction"]||l["flex-wrap"]||l["align-items"]||l["align-content"]||l["justify-content"]||l.gap)&&!o){i+="."+e+":not(.ct-section)"+a,Qe.isPseudoElement(a)?i+=",."+e+".ct-section .ct-section-inner-wrap"+a:i+=",."+e+".ct-section"+a+" .ct-section-inner-wrap",i+="{",l.display&&"grid"!=l["flex-direction"]&&(i+="display:"+l.display+";");var Pe="reverse"==l["flex-reverse"]?"-reverse":"";l["flex-direction"]&&"grid"!=l["flex-direction"]&&(i+="flex-direction:"+l["flex-direction"]+Pe+";"),l["justify-content"]&&(i+="justify-content:"+l["justify-content"]+";"),l["align-content"]&&(i+="align-content:"+l["align-content"]+";"),l["align-items"]&&(i+="align-items:"+l["align-items"]+";"),l["flex-wrap"]&&(i+="flex-wrap:"+l["flex-wrap"]+";"),l.gap&&(i+="gap:"+l.gap+";"),i+="}"}if("grid"==l.display){var Oe=Qe.getGridCSS(l,void 0,"forceDisplayGrid")||"";Oe&&(i+="."+e+":not(.ct-section):not(.oxy-easy-posts)"+a,Qe.isPseudoElement(a)?(i+=",."+e+".oxy-easy-posts .oxy-posts"+a,i+=",."+e+".ct-section .ct-section-inner-wrap"+a):(i+=",."+e+".oxy-easy-posts"+a+" .oxy-posts",i+=",."+e+".ct-section"+a+" .ct-section-inner-wrap"),i+="{",i+=Oe,i+="}"),i+=Qe.getGridChildCSS(l,e,a,!1,"is class")}}return i},Qe.generateTreeCSS=function(t,o,r,a){if(a=0,a++,"[object Array]"!==Object.prototype.toString.call(t))return!1;Qe.log&&console.log("generateTreeCSS()",t,o),angular.forEach(t,function(e){e.options.name=e.name,e.options.original,e.options.id=e.options.original,Qe.generateDynamicBackgrounds(e.id,!1,"id",function(){o.styles+=Qe.getSingleComponentCSS(e.options,e.id),e.children?Qe.generateTreeCSS(e.children,o,r,a):a<=1&&r&&r()},{children:t})}),a--},Qe.classHasOptions=function(e,t){if(Qe.classes[e])for(paramName in Qe.classes[e].original)if(0===paramName.indexOf(t))return!0},Qe.classHasOption=function(e){var t=Qe.componentsClasses[Qe.component.active.id];if(null!=t)for(i in t){var o=t[i];for(stateKey in Qe.classes[o])if("media"!=stateKey){var r=Qe.classes[o][stateKey];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&r[e[0]]&&r[e[0]][e[1]])return!0;if(3==e.length&&r[e[0]]&&r[e[0]][e[1]]&&r[e[0]][e[1]][e[2]])return!0}else if(r[e])return!0}if(!Qe.isEditing("media"))return!1;if(Qe.classes[o].media){var a=Qe.sortedMediaList();for(var i in a)if(a.hasOwnProperty(i)){var n=a[i];if("default"==n)continue;if(Qe.classes[o].media[n]){var s=Qe.classes[o].media[n];for(stateKey in s){r=s[stateKey];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&r[e[0]]&&r[e[0]][e[1]])return!0;if(3==e.length&&r[e[0]]&&r[e[0]][e[1]]&&r[e[0]][e[1]][e[2]])return!0}else if(r[e])return!0}}if(n==Qe.getCurrentMedia())return!1}}}},Qe.classHasOptionEqualTo=function(e,t){var o=Qe.componentsClasses[Qe.component.active.id];if(null!=o)for(key in o){var r=o[key];if(Qe.classes[r].media)for(mediaKey in Qe.classes[r].media){var a=Qe.classes[r].media[mediaKey];for(stateKey in a){var i=a[stateKey];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&i[e[0]]&&i[e[0]][e[1]]&&i[e[0]][e[1]]==t)return!0;if(3==e.length&&i[e[0]]&&i[e[0]][e[1]]&&i[e[0]][e[1]][e[2]]&&i[e[0]][e[1]][e[2]]==t)return!0}else if(i[e])return!0}}for(stateKey in Qe.classes[r])if("media"!=stateKey){i=Qe.classes[r][stateKey];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&i[e[0]]&&i[e[0]][e[1]]&&i[e[0]][e[1]]==t)return!0;if(3==e.length&&i[e[0]]&&i[e[0]][e[1]]&&i[e[0]][e[1]][e[2]]&&i[e[0]][e[1]][e[2]]==t)return!0}else if(i[e]&&i[e]==t)return!0}}},Qe.IDHasOption=function(e){var t=Qe.component.active.id;for(stateKey in Qe.component.options[t])if("media"!=stateKey&&"model"!=stateKey&&"original"!=stateKey){var o=Qe.component.options[t][stateKey]||[];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&o[e[0]]&&o[e[0]][e[1]])return!0;if(3==e.length&&o[e[0]]&&o[e[0]][e[1]]&&o[e[0]][e[1]][e[2]])return!0}else if(o[e])return!0}if(!Qe.isEditing("media"))return!1;if(Qe.component.options[t].media){var r=Qe.sortedMediaList();for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];if("default"==i)continue;if(Qe.component.options[t].media[i]){var n=Qe.component.options[t].media[i];for(stateKey in n){o=n[stateKey];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&o[e[0]]&&o[e[0]][e[1]])return!0;if(3==e.length&&o[e[0]]&&o[e[0]][e[1]]&&o[e[0]][e[1]][e[2]])return!0}else if(o[e])return!0}}if(i==Qe.getCurrentMedia())return!1}}},Qe.IDHasOptionEqualTo=function(e,t){var o=Qe.component.active.id;if(Qe.component.options[o].media)for(mediaKey in Qe.component.options[o].media){var r=Qe.component.options[o].media[mediaKey];for(stateKey in r){var a=r[stateKey];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&a[e[0]]&&a[e[0]][e[1]]&&a[e[0]][e[1]]==t)return!0;if(3==e.length&&a[e[0]]&&a[e[0]][e[1]]&&a[e[0]][e[1]][e[2]]&&a[e[0]][e[1]][e[2]]==t)return!0}else if(a[e])return!0}}for(stateKey in Qe.component.options[o])if("media"!=stateKey&&"model"!=stateKey&&"original"!=stateKey){a=Qe.component.options[o][stateKey]||[];if(-1<e.indexOf(".")){if(2==(e=e.split(".")).length&&a[e[0]]&&a[e[0]][e[1]]&&a[e[0]][e[1]]==t)return!0;if(3==e.length&&a[e[0]]&&a[e[0]][e[1]]&&a[e[0]][e[1]][e[2]]&&a[e[0]][e[1]][e[2]]==t)return!0}else if(a[e]&&a[e]==t)return!0}},Qe.applyComponentCSS=function(e,t){null==e&&(e=Qe.component.active.id),null==t&&(t=Qe.component.active.name),Qe.setOption(e,t,"custom-css",!1,!1)},Qe.applyStyleSheet=function(e){var t="\n"+Qe.replaceGlobalColors(e.css)+"\n",o=document.getElementById("ct-style-sheet-"+e.name);if(null===o){var r=document.getElementsByClassName("ct-css-location"),a=angular.element(r[r.length-1]);(o=angular.element("<style>").attr("id","ct-style-sheet-"+e.name).addClass("ct-css-location")).insertAfter(a)}else o=angular.element(o);if(o.empty(),o.append(t),bracket=Qe.bracketsFailed(t)){if("("==bracket||"{"==bracket)var i="closing";else i="opening";var n="Warning: there is no "+i+' bracket for "'+bracket+'" somewhere in your CSS. This may break page styling.';jQuery(".oxygen-code-error-container",s.oxygenUIElement).show().html(n)}else jQuery(".oxygen-code-error-container",s.oxygenUIElement).hide().html("");Qe.unsavedChanges()},Qe.addDesignSetStyleSheets=function(e){for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];"object"==typeof o&&void 0===Qe.styleSheets[o.name]&&(Qe.styleSheets[o.name]=Qe.stripSlashes(o.content),Qe.applyStyleSheet(o.name))}},Qe.getWidth=function(e){if(!e)return{value:"",unit:""};var t=parseInt(e,10),o="";return t!==e&&(o=-1<e.indexOf("%")?"%":-1<e.indexOf("em")?"em":-1<e.indexOf("rem")?"rem":"px"),{value:t,unit:o}},Qe.outputPageSettingsCSS=function(){var e="div.ct-section-inner-wrap, div.oxy-header-container{";e+="max-width:"+Qe.getPageWidth()+"px;",e+="}",Qe.getPageSetting("overlay-header-above")&&"never"!=Qe.getPageSetting("overlay-header-above")&&("always"!=Qe.getPageSetting("overlay-header-above")&&(e+="@media (min-width: "+Qe.getMediaMinSize(Qe.getPageSetting("overlay-header-above"))+") {"),e+="body.oxy-overlay-header .oxy-header {position: absolute;left: 0;right: 0;z-index: 2147483640;}body.oxy-overlay-header .oxy-header:not(.oxy-sticky-header-active),body.oxy-overlay-header .oxy-header:not(.oxy-sticky-header-active) .oxy-header-row {background-color: initial !important;}body.oxy-overlay-header .oxy-header .oxygen-hide-in-overlay{display: none;}body.oxy-overlay-header .oxy-header .oxygen-only-show-in-overlay{display: block;}","always"!=Qe.getPageSetting("overlay-header-above")&&(e+="}")),Qe.outputCSSStyles("ct-page-settings-styles",e)},Qe.updateGlobalSettingsCSS=function(){var e="",t=Qe.getGlobalFont("Text"),o=Qe.getGlobalFont("Display");-1===t.indexOf(",")&&(t="'"+t+"'"),-1===o.indexOf(",")&&(o="'"+o+"'"),e+="body {",e+="font-family: "+t+";",e+="line-height: "+Qe.globalSettings.body_text["line-height"]+";",e+="font-size: "+Qe.globalSettings.body_text["font-size"]+Qe.globalSettings.body_text["font-size-unit"]+";",e+="font-weight: "+Qe.globalSettings.body_text["font-weight"]+";",e+="color: "+Qe.getGlobalColorValue(Qe.globalSettings.body_text.color)+";",e+="}",e+=".oxy-nav-menu-hamburger-line {",e+="background-color: "+Qe.getGlobalColorValue(Qe.globalSettings.body_text.color)+";",e+="}",e+="h1, h2, h3, h4, h5, h6 {",e+="font-family: "+o+";",""!==Qe.globalSettings.headings.H1["font-size"]&&(e+="font-size: "+Qe.globalSettings.headings.H1["font-size"]+Qe.globalSettings.headings.H1["font-size-unit"]+";"),""!==Qe.globalSettings.headings.H1["font-weight"]&&(e+="font-weight: "+Qe.globalSettings.headings.H1["font-weight"]+";"),""!==Qe.globalSettings.headings.H1["line-height"]&&(e+="line-height: "+Qe.globalSettings.headings.H1["line-height"]+";"),""!==Qe.globalSettings.headings.H1.color&&(e+="color: "+Qe.getGlobalColorValue(Qe.globalSettings.headings.H1.color)+";"),e+="}";var r="h2, h3, h4, h5, h6";for(var a in Qe.globalSettings.headings)if(Qe.globalSettings.headings.hasOwnProperty(a)){var i="";if("H1"==a)continue;""!==Qe.globalSettings.headings[a]["font-size"]&&(i+="font-size: "+Qe.globalSettings.headings[a]["font-size"]+Qe.globalSettings.headings[a]["font-size-unit"]+";"),""!==Qe.globalSettings.headings[a]["font-weight"]&&(i+="font-weight: "+Qe.globalSettings.headings[a]["font-weight"]+";"),""!==Qe.globalSettings.headings[a]["line-height"]&&(i+="line-height: "+Qe.globalSettings.headings[a]["line-height"]+";"),""!==Qe.globalSettings.headings[a].color&&(i+="color: "+Qe.getGlobalColorValue(Qe.globalSettings.headings[a].color)+";"),""!==i&&(e+=r+"{",e+=i,e+="}"),r=r.replace(a.toLowerCase()+", ","")}var n={all:"a",text_link:".ct-link-text",link_wrapper:".ct-link",button:".ct-link-button"};for(var s in n)if(n.hasOwnProperty(s)){var l="";r=n[s];Qe.globalSettings.links[s]=Qe.globalSettings.links[s]||{},""!==Qe.globalSettings.links[s].color&&(l+="color: "+Qe.getGlobalColorValue(Qe.globalSettings.links[s].color)+";"),""!==Qe.globalSettings.links[s]["font-weight"]&&(l+="font-weight: "+Qe.globalSettings.links[s]["font-weight"]+";"),Qe.globalSettings.links[s]["text-decoration"]&&(l+="text-decoration: "+Qe.globalSettings.links[s]["text-decoration"]+";"),Qe.globalSettings.links[s]["border-radius"]&&(l+="border-radius: "+Qe.globalSettings.links[s]["border-radius"]+Qe.globalSettings.links[s]["border-radius-unit"]+";"),""!==l&&(e+=r+" {",e+=l,e+="}"),(l="")!==Qe.globalSettings.links[s].hover_color&&(l+="color: "+Qe.getGlobalColorValue(Qe.globalSettings.links[s].hover_color)+";"),Qe.globalSettings.links[s]["hover_text-decoration"]&&(l+="text-decoration: "+Qe.globalSettings.links[s]["hover_text-decoration"]+";"),""!==l&&(e+=r+":hover {",e+=l,e+="}")}for(var c in e+=".ct-section-inner-wrap {",e+="padding-top: "+Qe.globalSettings.sections["container-padding-top"]+Qe.globalSettings.sections["container-padding-top-unit"]+";",e+="padding-left: "+Qe.globalSettings.sections["container-padding-left"]+Qe.globalSettings.sections["container-padding-left-unit"]+";",e+="padding-right: "+Qe.globalSettings.sections["container-padding-right"]+Qe.globalSettings.sections["container-padding-right-unit"]+";",e+="padding-bottom: "+Qe.globalSettings.sections["container-padding-bottom"]+Qe.globalSettings.sections["container-padding-bottom-unit"]+";",e+="}",e+=".ct-new-columns > .ct-div-block {",e+="padding-top: "+Qe.globalSettings.columns["padding-top"]+Qe.globalSettings.columns["padding-top-unit"]+";",e+="padding-left: "+Qe.globalSettings.columns["padding-left"]+Qe.globalSettings.columns["padding-left-unit"]+";",e+="padding-right: "+Qe.globalSettings.columns["padding-right"]+Qe.globalSettings.columns["padding-right-unit"]+";",e+="padding-bottom: "+Qe.globalSettings.columns["padding-bottom"]+Qe.globalSettings.columns["padding-bottom-unit"]+";",e+="}",e+=".oxy-header-container {",e+="padding-left: "+Qe.globalSettings.sections["container-padding-left"]+Qe.globalSettings.sections["container-padding-left-unit"]+";",e+="padding-right: "+Qe.globalSettings.sections["container-padding-right"]+Qe.globalSettings.sections["container-padding-right-unit"]+";",e+="}",Qe.globalSettings)if(Qe.globalSettings.hasOwnProperty(c)){var p=Qe.globalSettings[c];for(var d in p)p.hasOwnProperty(d)&&("font-family"==d||-1<d.indexOf("font-family"))&&Qe.loadWebFont(p[d])}e+=Qe.replaceGlobalWooSettings(CtBuilderAjax.wooGlobalStyles),Qe.outputCSSStyles("oxygen-global-settings-styles",e)},Qe.$watch("globalSettings",function(e,t){Qe.updateGlobalSettingsCSS()},!0),Qe.$watch("globalSettings.sections",function(e,t){Qe.pageSettingsUpdate(),Qe.applyModelOptions()},!0),Qe.$watch("globalSettings.woo",function(e,t){Qe.updateAllComponentsCacheStyles(),Qe.outputCSSOptions()},!0),Qe.$watch("pageSettingsMeta",function(e,t){Qe.pageSettingsUpdate()},!0),Qe.$watch("pageSettingsMeta.aos",function(e,t){Qe.updateAOS()},!0),Qe.updateAOS=function(){var e=angular.copy(Qe.pageSettingsMeta.aos);for(var t in e)""!==e[t]&&void 0!==e[t]||delete e[t];var o=angular.extend({},Qe.globalSettings.aos,e);for(var t in"false"===o.once&&(o.once=!1),e=o)""!==e[t]&&void 0!==e[t]||delete e[t];aosDefaults={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1},o=angular.extend({},aosDefaults,e),jQuery('[data-aos-enabled="true"]').each(function(){var e=jQuery(this).attr("ng-attr-component-id");Qe.setOption(e,Qe.component.options[e].name,"aos-type")}),AOS.init(o)},Qe.bracketsFailed=function(e){return e=(""+e).replace(/(\/[*][^*]*[*]\/)|(\/\/[^\n]*)/gm,""),function(e){for(var t={"}":"{",")":"("},o=[],r=0,a=(e=""+e).length;r<a;r++)t[e[r]]&&o.pop()===t[e[r]]||o.push(e[r]);return!!o.length&&o[0]}(e=(""+e).replace(/[^(){}]/g,""))},Qe.mapCSSProperty=function(e,t,o){Qe.mappedSelectors[o]||(Qe.mappedSelectors[o]={}),Qe.mappedSelectors[o][t]||(Qe.mappedSelectors[o][t]={}),Qe.mappedSelectors[o][t]=e},Qe.unmapCSSProperty=function(e,t){Qe.mappedSelectors[t][e]=null,delete Qe.mappedSelectors[t][e]},Qe.getMappedCSS=function(t,e){var o="";for(var r in Qe.mappedSelectors){var a=Qe.mappedSelectors[r];for(var i in o+=(r=r.split(",").map(function(e){return"#"+t+" "+e}).join(","))+"{",a)if(void 0!==a[i]&&void 0!==e[a[i]]&&""!==e[a[i]].toString().trim()){var n="";void 0!==e[a[i]+"-unit"]&&(n=e[a[i]+"-unit"]),o+="background-image"===i?i+": url("+e[a[i]]+");":i+":"+Qe.getGlobalColorValue(e[a[i]])+n+";"}o+="}"}return o},Qe.generateAllAPISelectorsCSS=function(e,t,o){if(void 0===Qe.componentsTemplates)return"";var r="";for(var a in Qe.componentsTemplates)Qe.componentsTemplates.hasOwnProperty(a)&&(r+=Qe.generateAPISelectorsCSS(a,e,t,o));return r},Qe.generateAPISelectorsCSS=function(e,t,o,r){if(void 0===Qe.componentsTemplates[e]||void 0===Qe.componentsTemplates[e].registeredSelectors)return"";var a="",i=Qe.componentsTemplates[e].registeredSelectors,n=angular.copy(Qe.componentsTemplates[e].complexProperties);for(var s in i)if(i.hasOwnProperty(s)){var l=i[s],c="";if(l){for(var p in l){if(l.hasOwnProperty(p)){if(!o)continue;if("typography"==p)c+=Qe.generateTypographyCSS(o,l[p]);else if("box-shadow"==p)c+=Qe.generateBoxShadowCSS(o,l[p]);else if(-1<p.indexOf(">")){var d=p.split(">");if(n&&n[d[0]]){var g=n[d[0]];n[d[0]]=g.replace("{"+d[1]+"}",o[l[p]])}}else if(o[l[p]]){g=Qe.addFontFamilyQuotes(p,o[l[p]]);g=Qe.getGlobalColorValue(g),"transform:rotate"==p&&(p="transform",g="rotate("+g+")"),"background-image:url"==p&&(p="background-image",g="url("+g+")"),c+=p+":"+g+";"}else{var m=[];for(var u in o)if(o.hasOwnProperty(u)&&-1<u.indexOf(l[p])){var _;_=u.replace(l[p]+"_","");g=Qe.addFontFamilyQuotes(_,o[u]);m[_]=g}if(m["background-position-top"]||m["background-position-left"]){var y=m["background-position-top"]||"0%",h=m["background-position-left"]||"0%";m["background-position"]=h,m["background-position"]+=" "+y,delete m["background-position-top"],delete m["background-position-left"]}if("manual"==m["background-size"]){var b=m["background-size-width"]||"auto",x=m["background-size-height"]||"auto";m["background-size"]=b,m["background-size"]+=" "+x,delete m["background-size-width"],delete m["background-size-height"]}for(var u in m)if(m.hasOwnProperty(u)){g=m[u];"background-image"==u&&(g="url("+g+")"),c+=u+":"+Qe.getGlobalColorValue(g)+";"}}}for(var p in n)if(n.hasOwnProperty(p)){if(-1<n[p].indexOf("{"))continue;c+=p+":"+Qe.getGlobalColorValue(n[p])+";"}}c&&(c=s+"{"+c+"}",a+=Qe.prefixCSSSelectors(c,t,r))}}return a},Qe.position_css=function(e,t){var o;for(var r in e){var a=e[r];!0===t&&null!==a&&(a="0"),null!==a&&(o=r+":"+a+";")}return o},Qe.slide_position=function(e,t){var o="100%",r=[],a=[];switch(void 0!==t&&"px"!==t&&(o=t),e){case"left":r.left="-"+o;break;case"right":r.left=""+o;break;case"top":r.top="-"+o;break;case"bottom":r.top=""+o}return a.out_css=Qe.position_css(r),a.in_css=Qe.position_css(r,!0),a},Qe.SPECIFICITY=(o=function(e){var t,o,r,a,i=[];for(r=0,a=(t=e.split(",")).length;r<a;r+=1)0<(o=t[r]).length&&i.push(n(o));return i},n=function(l){var e,t,o,c=l,p={a:0,b:0,c:0},d=[];return e=function(e,t){var o,r,a,i,n,s;if(e.test(c))for(r=0,a=(o=c.match(e)).length;r<a;r+=1)p[t]+=1,i=o[r],n=c.indexOf(i),s=i.length,d.push({selector:l.substr(n,s),type:t,index:n,length:s}),c=c.replace(i,Array(s+1).join(" "))},(t=function(e){var t,o,r,a;if(e.test(c))for(o=0,r=(t=c.match(e)).length;o<r;o+=1)a=t[o],c=c.replace(a,Array(a.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),t(/\\[0-9A-Fa-f]{1,5}\s/g),t(/\\./g),(o=/:not\(([^\)]*)\)/g).test(c)&&(c=c.replace(o,"     $1 ")),function(){var e,t,o,r,a=/{[^]*/gm;if(a.test(c))for(t=0,o=(e=c.match(a)).length;t<o;t+=1)r=e[t],c=c.replace(r,Array(r.length+1).join(" "))}(),e(/(\[[^\]]+\])/g,"b"),e(/(#[^\s\+>~\.\[:]+)/g,"a"),e(/(\.[^\s\+>~\.\[:]+)/g,"b"),e(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),e(/(:[\w-]+\([^\)]*\))/gi,"b"),e(/(:[^\s\+>~\.\[:]+)/g,"b"),c=(c=c.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),e(/([^\s\+>~\.\[:]+)/g,"c"),d.sort(function(e,t){return e.index-t.index}),{selector:l,specificity:"0,"+p.a.toString()+","+p.b.toString()+","+p.c.toString(),specificityArray:[0,p.a,p.b,p.c],parts:d}},{calculate:o,compare:function(e,t){var o,r,a;if("string"==typeof e){if(-1!==e.indexOf(","))throw"Invalid CSS selector";o=n(e).specificityArray}else{if(!Array.isArray(e))throw"Invalid CSS selector or specificity array";if(4!==e.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";o=e}if("string"==typeof t){if(-1!==t.indexOf(","))throw"Invalid CSS selector";r=n(t).specificityArray}else{if(!Array.isArray(t))throw"Invalid CSS selector or specificity array";if(4!==t.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";r=t}for(a=0;a<4;a+=1){if(o[a]<r[a])return-1;if(o[a]>r[a])return 1}return 0}})}]);
CTFrontendBuilder.controller("ControllerTemplates",["$scope","$parentScope","$timeout","$interval",function(m,u,f,e){m.replaceAfterReusable=!1,m.template={},m.template.postData={},m.componentizeOptions={},m.componentizeOptions.name="Re-usable component",m.componentizeOptions.pageName="Re-usable page",m.componentizeOptions.setName="My Design Set",m.componentizeOptions.status="public",m.previewType="",m.separatorAdded=!1,m.loadTemplatesTerm=function(e,o){m.previewType=o,m.loadTemplateData(m.setTemplateData,e)},m.setTemplateData=function(e){if(m.log&&console.log("setTemplateData()",e),void 0!==e.bodyClass&&jQuery("body").addClass(e.bodyClass).addClass("oxygen-builder-body"),void 0!==e.postData&&(m.template.postData=e.postData),void 0!==e.edit_link&&(m.template.postData.edit_link=e.edit_link),void 0!==e.postsList||void 0!==e.termsList){var o=!1;if(void 0!==e.postsList&&(null===e.postsList||(m.template.postsList=e.postsList,e.default?(m.loadTemplatesTerm(e.default.id,"post"),o=!0):e.postsList[0]&&(m.loadTemplatesTerm(e.postsList[0].id,"post"),o=!0))),void 0!==e.termsList&&e.termsList[0]&&(m.template.termsList=e.termsList,o||(m.loadTemplatesTerm(e.termsList[0].id,"term"),o=!0)),o)return}e.meta_keys&&(u.current_post_meta_keys=e.meta_keys),m.rebuildDOM(0),m.outputCSSOptions()},m.loadReusablePart=function(e,o){void 0!==o?m.loadComponentsTree(m.addReusableChildren,e,o):m.loadComponentsTree(m.addReusable,e,o)},m.addReusable=function(e,o){var t={};t=void 0!==e[0]&&void 0!==e[0].content?e[0].content:e,m.log&&console.log("addReusable()",o);var n=m.component.active.id,i={id:0,name:"ct_reusable",options:{view_id:o}},s=m.getClosestPossibleInsert(n,t,m.replaceAfterReusable);m.componentBuffer=i,m.componentInsertId=s.id,0<=s.index&&(m.newComponentKey=s.index);var a=m.component.id;m.updateNewComponentIds(m.componentBuffer,s),m.findComponentItem(m.componentsTree.children,s.id,m.pasteComponentToTree),m.replaceAfterReusable&&(m.removeComponentById(m.replaceAfterReusable),m.replaceAfterReusable=!1),m.cancelDeleteUndo(),m.rebuildDOM(a),m.activateComponent(a);var r=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),f.cancel(r)},0,!1);if(void 0!==oxygenVSBInitTabs)var c=f(function(){oxygenVSBInitTabs("#"+m.component.options[a].selector),f.cancel(c)},500,!1),l=f(function(){oxygenVSBInitTabs("#"+m.component.options[a].selector),f.cancel(l)},1500,!1);m.unsavedChanges()},m.recursively_find_reusable=function(e){_.forEach(e,function(e){if("ct_reusable"==e.name)e.options.view_id;e.children&&m.recursively_find_reusable(e.children)})},m.addPageFromSource=function(e,o,n){var i=m.component.active.id;i<0&&(iframeScope.activateComponent(0,"root"),i=0,iframeScope.currentClass=!1);var t=JSON.parse(e);if(!t||!t.components||t.components.length<1)m.showErrorModal(0,"Could not load the page. "+(t.error?t.error:"Try again!"));else{var s=!1,a=!1;if(t.components&&(s=t.components),s){t.classes&&(a=t.classes);var r={};t.colors&&(r=m.mergeIncomingSourceColors(t.colors,n));var c={};if(t.lookuptable&&(c=t.lookuptable),a){for(key in 0<Object.keys(r).length&&(a=m.ctMapSourceColors(a,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(a=m.ctCreateVariableColors(a,n,c)),m.styleFolders.hasOwnProperty(n)||(m.styleFolders[n]={status:1,key:n}),a)a[key].parent=n;m.classes=Object.assign(a,m.classes),m.classesCached=!1}var l=m.component.id;_.each(s,function(e){var o=m.component.id;0<Object.keys(r).length&&(e=m.ctMapSourceColors(e,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(e=m.ctCreateVariableColors(e,n,c));var t={id:0,index:iframeScope.getComponentById(i).index()+1};m.componentBuffer=e,0<=t.index&&(m.newComponentKey=t.index),m.updateNewComponentIds(m.componentBuffer,t),m.findComponentItem(m.componentsTree.children,t.id,m.pasteComponentToTree),m.cancelDeleteUndo(),m.rebuildDOM(o),m.updateComponentCacheStyles(o,function(){m.cache.idCSS="",Object.keys(m.cache.idStyles).map(function(e,o){m.cache.idCSS+=m.cache.idStyles[e]}),m.outputCSSStylesAfterWait("id",m.cache.idCSS)}),i=o}),m.rebuildDOM(0),m.outputCSSOptions(),m.activateComponent(l);var d=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),f.cancel(d)},0,!1)}else m.showErrorModal(0,"Page not loaded, try again")}},m.ctMapSourceColors=function(e,t){for(key in e)"string"==typeof e[key]?e[key]=e[key].replace(/color\((\d*)\)/g,function(e,o){return"color("+t[parseInt(o)]+")"}):(e[key]instanceof Array||e[key]instanceof Object)&&(e[key]=m.ctMapSourceColors(e[key],t));return e},m.ctCreateVariableColorsCallback=function(e,o,t){var n=_.findWhere(iframeScope.globalColorSets.sets,{name:o});void 0===n&&(n={id:++iframeScope.globalColorSets.setsIncrement,name:o},iframeScope.globalColorSets.sets.push(n));var i,s=e.toLowerCase(),a=!1;t[s]?a=t[s]:t[s.replace(/ /g,"")]&&(a=t[s.replace(/ /g,"")]),4===s.length&&(s="#"+s.substr(1).repeat(2),!1===a&&t[s]&&(a=t[s]));var r=!1;if(!1!==a&&(_.each(t,function(e,o){!1===r&&e==a&&(r=o),4===r.length&&(r="#"+r.substr(1).repeat(2))}),void 0!==(i=_.findWhere(iframeScope.globalColorSets.colors,{name:a,set:n.id}))&&r!==s&&(s=r,i.value=r)),void 0===i&&(i=_.findWhere(iframeScope.globalColorSets.colors,{sourceVal:s,set:n.id})),void 0===i){if("IGNORE"==a)return s;i={id:++iframeScope.globalColorSets.colorsIncrement,name:a||"color #"+iframeScope.globalColorSets.colorsIncrement,value:s,sourceVal:s,set:n.id},iframeScope.globalColorSets.colors.push(i)}return"color("+i.id+")"},m.ctCreateVariableColors=function(e,o,t){for(key in e)"string"==typeof e[key]?e[key]=e[key].replace(/#[0-9|a-f]{3,6}|rgba\([\d|\s]*\,[\d|\s]*\,[\d|\s]*\,[^\)]*\)/gi,function(e){return m.ctCreateVariableColorsCallback(e,o,t)}):(e[key]instanceof Array||e[key]instanceof Object)&&(e[key]=m.ctCreateVariableColors(e[key],o,t));var n=_.find(iframeScope.globalColorSets.sets,{name:o});if(void 0===n)return e;var i=[];return _.each(t,function(e){var o,t=_.find(iframeScope.globalColorSets.colors,{set:n.id,name:e});t&&(o=iframeScope.globalColorSets.colors.indexOf(t)),void 0!==o&&(i.push(t),iframeScope.globalColorSets.colors.splice(o,1))}),iframeScope.globalColorSets.colors=i.concat(iframeScope.globalColorSets.colors),e},m.mergeIncomingSourceColors=function(e,o){var t={},n=_.findWhere(iframeScope.globalColorSets.sets,{name:o});for(key in void 0===n&&(n={id:++iframeScope.globalColorSets.setsIncrement,name:o},iframeScope.globalColorSets.sets.push(n)),e){var i=_.findWhere(iframeScope.globalColorSets.colors,{name:e[key].name,set:n.id});t[parseInt(key)]=void 0!==i?parseInt(i.id):(iframeScope.globalColorSets.colors.push({id:++iframeScope.globalColorSets.colorsIncrement,name:e[key].name,value:e[key].value,set:n.id}),parseInt(iframeScope.globalColorSets.colorsIncrement))}return t},m.addComponentFromSource=function(e,o,t,n){null!=o&&o||(o=m.component.active.id),o<0&&(iframeScope.activateComponent(0,"root"),o=0,iframeScope.currentClass=!1);var i=JSON.parse(e);if(!i||!i.component||i.component.length<1)m.showErrorModal(0,"Could not load the component. "+(i.error?i.error:"Try again!"));else{var s=!1,a=!1;if(i.component&&(s=i.component),s){i.classes&&(a=i.classes);var r={};i.colors&&(r=m.mergeIncomingSourceColors(i.colors,n));var c={};i.lookuptable&&(c=i.lookuptable),0<Object.keys(r).length&&(s=m.ctMapSourceColors(s,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(s=m.ctCreateVariableColors(s,n,c));var l=m.component.id,d=m.getClosestPossibleInsert(o,s);if(m.componentBuffer=s,0<=d.index&&(m.newComponentKey=d.index),a){for(key in 0<Object.keys(r).length&&(a=m.ctMapSourceColors(a,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(a=m.ctCreateVariableColors(a,n,c)),m.styleFolders.hasOwnProperty(n)||(m.styleFolders[n]={status:1,key:n}),a)a[key].parent=n;m.classes=Object.assign(a,m.classes),m.classesCached=!1}m.updateNewComponentIds(m.componentBuffer,d),m.findComponentItem(m.componentsTree.children,d.id,m.pasteComponentToTree),m.cancelDeleteUndo(),m.rebuildDOM(l),m.updateComponentCacheStyles(l,function(){m.cache.idCSS="",Object.keys(m.cache.idStyles).map(function(e,o){m.cache.idCSS+=m.cache.idStyles[e]}),m.outputCSSStylesAfterWait("id",m.cache.idCSS)}),m.outputCSSOptions(),m.activateComponent(l);var p=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),f.cancel(p)},0,!1)}else m.showErrorModal(0,"Component not loaded, try again")}},m.addReusableChildren=function(e,o,t){null==t&&(t=m.component.active.id),m.log&&console.log("addReusableChildren()",e,o,t);var n={};void 0!==e[0]&&void 0!==e[0].content||(n=e);var i=m.getClosestPossibleInsert(t,n);m.addReusableChild(n.children,0,-1,i),m.newComponentKey=-1},m.addReusableChild=function(t,n,i,s){if(0==t.length){m.activateComponent(i);var e=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),f.cancel(e)},0,!1);return m.outputCSSOptions(),void u.hideDialogWindow()}var o=m.component.id;if(i<0&&(i=o),m.componentBuffer=t[0],0<=s.index&&(m.newComponentKey=s.index+n),m.updateNewComponentIds(m.componentBuffer,s),m.findComponentItem(m.componentsTree.children,s.id,m.pasteComponentToTree),m.cancelDeleteUndo(),m.rebuildDOM(o),m.updateComponentCacheStyles(o,function(){m.cache.idCSS="",Object.keys(m.cache.idStyles).map(function(e,o){m.cache.idCSS+=m.cache.idStyles[e]}),m.outputCSSStylesAfterWait("id",m.cache.idCSS)}),void 0!==oxygenVSBInitTabs)var a=f(function(){oxygenVSBInitTabs("#"+m.component.options[o].selector),f.cancel(a)},500,!1),r=f(function(){oxygenVSBInitTabs("#"+m.component.options[o].selector),f.cancel(r)},1500,!1);function c(e){var o;0<m.buildingOxygenTreeCounter&&e<900?(o=e,o++,setTimeout(function(){c(o)},100)):m.addReusableChild(t.splice(1),n+1,i,s),0<m.buildingOxygenTreeCounter&&900<=e&&console.log("Tree building timeout. ID counter is not incremented.")}c(0)},m.addReusableContent=function(e,o){if(e){m.log&&console.log("addReusableContent()",e),e.edit_link&&(m.reusableEditLinks[o]=e.edit_link);var t=m.getComponentById(o);if(t){t.append(e.post_content);var n=jQuery(e.post_content);if(n){var s=[];for(n.attr("class")&&(s=n.attr("class").split(/\s+/)),i=0;i<s.length;++i)if(0<=s[i].indexOf("ct-")){var a=s[i].replace(/\-/g,"_");m.component.options[o].dndtype=a;break}}}m.reusableCSS={},m.reusableCSS.styles="",e.post_tree&&m.generateTreeCSS(e.post_tree,m.reusableCSS,function(){m.outputCSSStyles("ct-re-usable-styles-"+e.ID,m.reusableCSS.styles)})}},m.getClosestPossibleInsert=function(e,o,t){if(m.log&&console.log("getClosestPossibleInsert()",e,o),null==e)return{};var n=m.getComponentById(e);insertData={componentToInsertIn:n,componentInsertId:0,parentId:0,index:0<e?n.index()+1:-1},i=0;var s=insertData.componentToInsertIn[0].attributes["is-nestable"],a=insertData.componentToInsertIn[0].classList.contains("ct_reusable"),r=JSON.stringify(o),c=-1<r.indexOf('"name":"ct_section"'),l=-1<r.indexOf('"name":"ct_link"')||-1<r.indexOf('"name":"ct_link_text"');function d(e,o){for(var t=e.componentToInsertIn,n=e.parentId;!t.hasClass(o)&&!t.hasClass("ct-builder");)t=t.parent();e.parentId=t[0].getAttribute("ng-attr-component-id"),0!=e.parentId?(e.index=t.index()+1,e.componentToInsertIn=jQuery(t).parent().closest("[is-nestable]"),e.componentInsertId=e.componentToInsertIn[0].getAttribute("ng-attr-component-id")):e.parentId=n}if(c&&d(insertData,"ct_section"),l&&d(insertData,"ct_link"),0==insertData.parentId)if(!s||a||t)for(;(!s||t||a)&&i<10;)insertData.componentToInsertIn=jQuery(insertData.componentToInsertIn).parent().closest("[is-nestable]"),insertData.componentToInsertIn&&(s=insertData.componentToInsertIn[0].attributes["is-nestable"],a=insertData.componentToInsertIn[0].classList.contains("ct_reusable"),insertData.componentInsertId=insertData.componentToInsertIn[0].getAttribute("ng-attr-component-id")),s&&(t=!1),i++;else insertData.componentInsertId=e,insertData.index=-1;return{id:insertData.componentInsertId,index:insertData.index}},m.isCanComponentize=function(e,o){return!(-1<["ct_reusable","oxy_header_row","ct_slide","oxy_tab","oxy_tab_content"].indexOf(o))&&0<e},m.saveReusable=function(e,o){void 0===o&&(o=!1),m.cancelDeleteUndo(),void 0===e&&(e=m.component.active.id);var t=prompt(o?"New Block Name":"New Re-Usable Name",m.componentizeOptions.name);if(null!=t)if(u.showLoadingOverlay("saveReusable()"),m.componentizeOptions.name=t,m.isSelectableEnabled&&m.isDOMNodesSelected){var n=jQuery("#ct-dom-tree").find(".ct-selected-dom-node").first().parent().parent().children(".ct-dom-tree-node").has(".ct-selected-dom-node"),i=[];n.each(function(){i.push(jQuery(this).attr("ng-attr-tree-id"))}),m.selectedComponents=[];for(var s=0;e=i[s],s<=i.length-1;s++)m.findComponentItem(m.componentsTree.children,e,m.addSelectedComponent);m.saveComponentAsView(null,m.selectedComponents,o)}else m.findComponentItem(m.componentsTree.children,e,m.saveComponentAsView,o);else alert("Name can't be empty")},m.replaceReusablePart=function(e,o){m.replaceAfterReusable=e,m.loadReusablePart(o)},m.showComponentize=function(e){u.showDialogWindow(),m.componentizeOptions.id=e,u.dialogForms.showComponentizeForm=!0},m.componentize=function(){if(m.isSelectableEnabled&&m.isDOMNodesSelected){var e=jQuery("#ct-dom-tree").find(".ct-selected-dom-node").first().parent().parent().children(".ct-dom-tree-node").has(".ct-selected-dom-node"),o=[];e.each(function(){o.push(jQuery(this).attr("ng-attr-tree-id"))}),m.selectedComponents=[];for(var t,n=0;t=o[n],n<=o.length-1;n++)m.findComponentItem(m.componentsTree.children,t,m.addSelectedComponent);m.postComponentize(null,m.selectedComponents)}else 0<m.componentizeOptions.idToUpdate?(m.componentizeOptions.assetId=null,m.findComponentItem(m.componentsTree.children,m.componentizeOptions.id,m.postComponentize),m.componentizeOptions.id=null):m.postAsset(m.componentizeOptions.screenshot,function(){m.findComponentItem(m.componentsTree.children,m.componentizeOptions.id,m.postComponentize),m.componentizeOptions.id=null});u.hideDialogWindow()},m.showPageComponentize=function(e){u.showDialogWindow(),u.dialogForms.showPageComponentizeForm=!0},m.tryPageComponentize=function(){m.postAsset(m.componentizeOptions.screenshot,function(){m.pageComponentize()}),u.hideDialogWindow()},m.addSelectedComponent=function(e,o){m.selectedComponents.push(o)},m.addWidget=function(e,o,t){var n=m.component.id;m.addComponent("ct_widget","widget"),m.component.options[n].model.class_name=e,m.setOption(n,"ct_widget","class_name"),m.component.options[n].model.id_base=o,m.setOption(n,"ct_widget","id_base"),m.component.options[n].model.pretty_name=t,m.setOption(n,"ct_widget","pretty_name"),m.component.options[n].nicename=t+" (#"+n+")",m.updateFriendlyName(n)},m.addSidebar=function(e){var o=m.component.id;m.addComponent("ct_sidebar","sidebar"),m.setOptionModel("sidebar_id",e,o,"ct_sidebar"),m.rebuildDOM(o)},m.loadWidgetForm=function(){m.renderWidget(m.component.active.id,!0)},m.applyWidgetInstance=function(e){m.log&&console.log("applyWidgetInstance()",e),e||(e=m.component.active.id);var o=m.component.options[e];if("ct_widget"!=o.name)return!1;var c={},t=jQuery("#ct-widget-form",window.parent.document).serializeArray(),l=o.original.id_base,n=jQuery("#ct-widget-form input:checkbox",window.parent.document).map(function(){if(!this.checked)return{name:this.name,value:!!this.checked&&this.value}});for(i=0;i<n.length;i++)t.push(n[i]);jQuery.each(t,function(e,o){var t=o.name.replace(l,"");if(-1<(t=(t=t.replace(/widget-\[\d\]\[/,"")).replace("]","")).indexOf("[")){var n=t.replace(/\[(.*)\]/,""),i=[],s=t.replace(n,"").match(/\[[^\]]*\]/g),a=function(e,o,t,n){0==n.length?e[t]=o:(void 0===e[t]&&(e[t]={}),a(e[t],o,n.shift(),n))};for(j=0;j<s.length;j++)"[]"!=s[j]&&i.push(s[j].replace(/\[|\]/g,""));if(0<i.length){var r=i.slice();void 0===c[n]&&(c[n]={}),a(c[n],o.value,r.shift(),r)}else void 0===c[n]&&(c[n]=[]),c[n].push(o.value)}else""!==t&&(c[t]=o.value)}),m.component.options[m.component.active.id].model.instance=c,m.setOption(m.component.active.id,"ct_widget","instance"),m.renderWidget(m.component.active.id)},m.loadHTMLForm=function(){u.showDialogWindow(),angular.element("#ct-html-component-form").val(m.component.options[m.component.active.id].model.html)},m.applyCodeBlock=function(e,o){m.log&&console.log("applyCodeBlock()",e,o),m.applyCodeBlockPHP(e,o),m.applyCodeBlockJS(e,o),m.applyCodeBlockCSS(e,o)},m.applyCodeBlockPHP=function(e,o){void 0===e&&(e=m.component.active.id),void 0===o&&(o=!0),m.log&&console.log("applyCodeBlockPHP()",e),o&&m.setOption(e,"ct_code_block","code-php",!1,!1);var t="#"+m.component.options[e].selector,n=m.getOption("code-php",e);m.execCode(n,t,m.insertElementContent)},m.applyCodeBlockJS=function(e,o){m.applyingComponentJS=!0,jQuery(".oxygen-code-error-container",u.oxygenUIElement).hide().html(""),void 0===e&&(e=m.component.active.id),void 0===o&&(o=!0),m.log&&console.log("applyCodeBlockJS()",e,o),o&&m.setOption(e,"ct_code_block","code-js",!1,!1),code=m.getOption("code-js",e),m.outputJSScript("js-code-",e,code),m.applyingComponentJS=!1},m.applyCodeBlockCSS=function(e,o){void 0===e&&(e=m.component.active.id),void 0===o&&(o=!0),m.log&&console.log("applyCodeBlockCSS()",e,o),o&&m.setOption(e,"ct_code_block","code-css",!1,!1),code=m.getOption("code-css",e);var t=m.component.options[e].selector;code=code.replace(new RegExp("%%ELEMENT_ID%%","g"),t),code=m.replaceGlobalColors(code),m.outputCSSStyles("ct_code_block_css_"+e,code)},m.outputJSScript=function(e,o,t){m.log&&console.log("outputJSScript()",e,o);var n=m.component.options[o].selector;t=t.replace(new RegExp("%%ELEMENT_ID%%","g"),n);var i=document.getElementById(e+o);i&&document.body.removeChild(i);var s=document.createElement("script");s.type="text/javascript",s.setAttribute("id",e+o);try{s.appendChild(document.createTextNode(t)),document.body.appendChild(s)}catch(e){s.text=t,document.body.appendChild(s)}},m.setupJSErrorNotice=function(){window.onerror=function(e,o,t){if(m.applyingComponentJS)jQuery(".oxygen-code-error-container",u.oxygenUIElement).show().html(e+" on line #"+t);else{if("object"==typeof o)return;if(void 0!==o.indexOf&&-1<o.indexOf("/component-framework/vendor/aos/aos.js"))return;if(0<=e.indexOf("ResizeObserver loop limit exceeded"))return;m.showNoticeModal("<div>"+e+" on line #"+t+" in "+o+"</div>")}}},m.insertElementContent=function(e,o,t){m.log&&console.log("insertElementContent()",e,o);var n=angular.element(o);n.html(""),m.cleanInsert("<span class='removeOnInsert'>"+e+"</span>",n),m.adjustResizeBox()},m.getLinkId=function(e){void 0===e&&(e=m.component.active.id);var o=jQuery("[ng-attr-component-id='"+e+"']","#ct-builder").closest(".ct-links");return 0<o.length&&o.attr("ng-attr-component-id")},m.addSeparator=function(e){m.separatorAdded=!0},m.addComponentClassesStyles=function(e){if(e.options&&void 0!==e.options.classes)for(var o in m.classes)if(e.options&&-1<e.options.classes.indexOf(o)){var t=e.options.classes.indexOf(o);e.options.classes.splice(t,1),e.options.classes.push({name:o,styles:m.classes[o]})}for(var n in e.children)if(e.children.hasOwnProperty(n)){var i=e.children[n];m.addComponentClassesStyles(i)}},m.parseTreeClassesStyles=function(e){if(e.options&&void 0!==e.options.classes){for(var o in e.options.classes)if(e.options.classes.hasOwnProperty(o)&&null!=e.options.classes[o].name){var t=e.options.classes[o].name,n=e.options.classes[o].styles;e.options.classes[o]=t,void 0!==m.classes[t]||(m.classes[t]=n)}m.classesCached=!1,m.outputCSSOptions()}for(var o in e.children)if(e.children.hasOwnProperty(o)){var i=e.children[o];m.parseTreeClassesStyles(i)}}}]),function(e,t){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(e,o){return t(e,o)});else if("undefined"!=typeof exports){var o=require("jquery");t(exports,o)}else t(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,r){function o(n,t){function s(e,o,t){return e[o]=t,e}function e(){return i}var i={},a={};this.addPair=function(e){if(!c.validate.test(e.name))return this;var o=function(e,o){for(var t,n=e.match(c.key);void 0!==(t=n.pop());)c.push.test(t)?o=s([],(i=e.replace(/\[\]$/,""),void 0===a[i]&&(a[i]=0),a[i]++),o):c.fixed.test(t)?o=s([],t,o):c.named.test(t)&&(o=s({},t,o));var i;return o}(e.name,function(e){switch(r('[name="'+e.name+'"]',t).attr("type")){case"checkbox":return"on"===e.value||e.value;default:return e.value}}(e));return i=n.extend(!0,i,o),this},this.addPairs=function(e){if(!n.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var o=0,t=e.length;o<t;o++)this.addPair(e[o]);return this},this.serialize=e,this.serializeJSON=function(){return JSON.stringify(e())}}var c={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return o.patterns=c,o.serializeObject=function(){return new o(r,this).addPairs(this.serializeArray()).serialize()},o.serializeJSON=function(){return new o(r,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==r.fn&&(r.fn.serializeObject=o.serializeObject,r.fn.serializeJSON=o.serializeJSON),e.FormSerializer=o});
CTFrontendBuilder.controller("ControllerMediaQueries",["$scope","$parentScope","$http","$timeout","$interval",function(u,o,e,r,t){u.currentMedia="default",u.initMedia=function(){var e=u.getPageWidth(),t=u.getBreakPointWidth("tablet"),i=u.getBreakPointWidth("phone-landscape"),a=u.getBreakPointWidth("phone-portrait");u.previousBreakPointsValues={"page-width":{page:u.pageSettingsMeta["max-width"],global:u.globalSettings["max-width"]},tablet:u.globalSettings.breakpoints.tablet,"phone-landscape":u.globalSettings.breakpoints["phone-landscape"],"phone-portrait":u.globalSettings.breakpoints["phone-portrait"]},u.mediaList={default:{maxSize:"100%",title:"Full Screen"},"page-width":{maxSize:e+"px",title:"Page container ("+e+"px) and below"},tablet:{maxSize:t-1+"px",title:"Less than "+t+"px"},"phone-landscape":{maxSize:i-1+"px",title:"Less than "+i+"px"},"phone-portrait":{maxSize:a-1+"px",title:"Less than "+a+"px"}},u.mediaListAbove={default:{minSize:"100%",title:"Full Screen"},"page-width":{minSize:e+1+"px",title:"Above Page container ("+e+"px)"},tablet:{minSize:t+"px",title:"At or above "+t+"px"},"phone-landscape":{minSize:i+"px",title:"At or above "+i+"px"},"phone-portrait":{minSize:a+"px",title:"At or above "+a+"px"}}},u.setCurrentMedia=function(e,t,i){if(u.getCurrentMedia()!=e){if(u.currentMedia=e,void 0===t||t){var a=u.getMediaPreviewSize(e,i);o.adjustViewport(a),"default"==e?o.hideViewportRuller():o.showViewportRuller()}if(o.adjustViewportContainer(),o.disableContentEdit(),o.disableSelectable(),o.closeAllTabs(["advancedSettings","componentBrowser"]),u.applyModelOptions(),o.checkTabs(),u.parentScope.activeForEditBgLayer=!1,!u.isEditing("custom-selector"))var n=r(function(){o.scrollToComponent(u.getActiveComponent().attr("id")),r.cancel(n)},0,!1)}},u.getCurrentMedia=function(){return u.currentMedia},u.getMediaTitle=function(e,t,i){return e?"never"==e?"Never":"always"==e?"Always":void 0!==u.mediaListAbove&&!0===t?i&&"page-width"==e?"Page container ("+u.getPageWidth("global")+"px) and above":u.mediaListAbove[e].title:void 0!==u.mediaList?i&&"page-width"==e?"Page container ("+u.getPageWidth("global")+"px) and below":u.mediaList[e].title:"":""},u.getMediaMaxSize=function(e){return void 0!==u.mediaList[e]&&u.mediaList[e].maxSize},u.getMediaMinSize=function(e){return void 0!==u.mediaList[e]&&u.mediaListAbove[e].minSize},u.getMediaPreviewSize=function(e,t){if("default"==e)return"100%";var i=u.sortedMediaList(!1,t);for(var a in i){if(i[a]==e){if(void 0!==(e=i[parseInt(a)+1])){if("page-width"==e&&t)var n=parseInt(u.getPageWidth(!0))+1;else n=parseInt(u.mediaList[e].maxSize)+1;return n+"px"}n=u.getBreakPointWidth("phone-portrait")-120;return(n=Math.max(n,320))+"px"}}},u.getMediaNameBySize=function(e){var t=[];for(var i in u.mediaList)u.mediaList.hasOwnProperty(i)&&e<parseInt(u.mediaList[i].maxSize)&&t.push(i);return 0<t.length?t[t.length-1]:"default"},u.getAllMediaNames=function(e){if("default"==e)return[];var t=[];for(var i in u.mediaList)u.mediaList.hasOwnProperty(i)&&parseInt(u.mediaList[e].maxSize)<parseInt(u.mediaList[i].maxSize)&&t.push(i);return t.push(e),t},u.setMediaParameter=function(e,t,i,a){u.component.options[e].media||(u.component.options[e].media={}),u.component.options[e].media[u.currentMedia]||(u.component.options[e].media[u.currentMedia]={}),u.component.options[e].media[u.currentMedia][a]||(u.component.options[e].media[u.currentMedia][a]={}),u.component.options[e].media[u.currentMedia][a][t]=i},u.isHasMedia=function(e,t){if(null==t&&(t=u.component.active.id),u.isEditing("id")){if("ct_reusable"!=u.component.active.name)return!!(u.component.options[t].media&&u.component.options[t].media[e]&&u.component.options[t].media[e][u.currentState]);var i=u.component.options[t].original.view_id;if(!u.postsData[i])return!1;var a=u.postsData[i].post_tree;return!!u.findMedia(a,e)}return u.isEditing("class")?!!(u.classes[u.currentClass]&&u.classes[u.currentClass].media&&u.classes[u.currentClass].media[e]&&u.classes[u.currentClass].media[e][u.currentState]):u.isEditing("custom-selector")&&!u.isEditing("class")?!!(u.customSelectors[u.selectorToEdit]&&u.customSelectors[u.selectorToEdit].media&&u.customSelectors[u.selectorToEdit].media[e]&&u.customSelectors[u.selectorToEdit].media[e][u.currentState]):void 0},u.isHasMedias=function(){for(var e in u.mediaList)if(u.mediaList.hasOwnProperty(e)){if("default"===e)continue;if(!0===u.isHasMedia(e))return!0}return!1},u.removeComponentMedia=function(e,t){u.cancelDeleteUndo(),u.isEditing("id")?(null==t&&(t=u.component.active.id),u.component.options[t].media&&u.component.options[t].media[e]&&u.component.options[t].media[e][u.currentState]&&(u.component.options[t].media[e][u.currentState]={},delete u.component.options[t].media[e][u.currentState],u.outputCSSOptions(t),u.applyModelOptions(),u.findComponentItem(u.componentsTree.children,t,u.removeMediaFromTree,e))):u.isEditing("class")?u.classes[u.currentClass]&&u.classes[u.currentClass].media&&u.classes[u.currentClass].media[e]&&u.classes[u.currentClass].media[e][u.currentState]&&(u.classes[u.currentClass].media[e][u.currentState]={},delete u.classes[u.currentClass].media[e][u.currentState],u.outputCSSOptions(),u.applyModelOptions()):u.isEditing("custom-selector")&&u.customSelectors[u.selectorToEdit]&&u.customSelectors[u.selectorToEdit].media&&u.customSelectors[u.selectorToEdit].media[e]&&u.customSelectors[u.selectorToEdit].media[e][u.currentState]&&(u.customSelectors[u.selectorToEdit].media[e][u.currentState]={},delete u.customSelectors[u.selectorToEdit].media[e][u.currentState],u.outputCSSOptions(),u.applyModelOptions()),u.unsavedChanges(),u.adjustResizeBox()},u.removeMediaFromTree=function(e,t,i){delete t.options.media[i]},u.sortedMediaList=function(e,t){if(!0===e){var i=u.mediaListAbove;size="minSize"}else{i=u.mediaList;size="maxSize"}var a=["default"],n=!1;if(i)if(!0===t)var o=u.globalSettings["max-width"];else o=i["page-width"][size];for(var r in i)if(i.hasOwnProperty(r)){if("default"==r||"page-width"==r)continue;parseInt(i[r][size])>=parseInt(o)||n?a.push(r):(a.push("page-width"),a.push(r),n=!0)}return n||a.push("page-width"),a},u.getBreakpointValue=function(e,t,i){if(void 0===i&&(i=u.component.active.id),u.isEditing("id"))if("default"==t){if(u.component.options[i][u.currentState]&&u.component.options[i][u.currentState][e])return u.component.options[i][u.currentState][e]}else if(u.component.options[i].media&&u.component.options[i].media[t]&&u.component.options[i].media[t][u.currentState]&&u.component.options[i].media[t][u.currentState][e])return u.component.options[i].media[t][u.currentState][e];if(u.isEditing("class"))if("default"==t){if(u.classes[u.currentClass]&&u.classes[u.currentClass][u.currentState]&&u.classes[u.currentClass][u.currentState][e])return u.classes[u.currentClass][u.currentState][e]}else if(u.classes[u.currentClass]&&u.classes[u.currentClass].media&&u.classes[u.currentClass].media[t]&&u.classes[u.currentClass].media[t][u.currentState]&&u.classes[u.currentClass].media[t][u.currentState][e])return u.classes[u.currentClass].media[t][u.currentState][e];if(u.isEditing("custom-selector")&&!u.isEditing("class"))if("default"==t){if(u.customSelectors[u.selectorToEdit]&&u.customSelectors[u.selectorToEdit][u.currentState]&&u.customSelectors[u.selectorToEdit][u.currentState][e])return u.customSelectors[u.selectorToEdit][u.currentState][e]}else if(u.customSelectors[u.selectorToEdit]&&u.customSelectors[u.selectorToEdit].media&&u.customSelectors[u.selectorToEdit].media[t]&&u.customSelectors[u.selectorToEdit].media[t][u.currentState]&&u.customSelectors[u.selectorToEdit].media[t][u.currentState][e])return u.customSelectors[u.selectorToEdit].media[t][u.currentState][e];return""},u.getClosestBreakpointValue=function(e,t,i){if(!u.isEditing("media"))return"";void 0===i&&(i=u.component.active.id);var a=u.component.active.name;void 0===t&&(t=u.currentMedia);var n=u.sortedMediaList().reverse(),o=!1;if(0<e.indexOf("-unit")){var r=e.replace("-unit","");if(!u.isInherited(i,r))return-1<e.indexOf("container-padding")?u.globalSettings.sections[e]:u.defaultOptions[a][e]||u.defaultOptions.all[e];for(var s in n)if(n.hasOwnProperty(s)){var c=n[s];if(o){var d=u.getBreakpointValue(r,c),l=u.getBreakpointValue(e,c);if(d&&l)return l;if(d&&!l)return-1<e.indexOf("container-padding")?u.globalSettings.sections[e]:u.defaultOptions[a][e]||u.defaultOptions.all[e]}c==t&&(o=!0)}}for(var s in n)if(n.hasOwnProperty(s)){c=n[s];if(o)if(d=u.getBreakpointValue(e,c))return d;c==t&&(o=!0)}return""}}]);
CTFrontendBuilder.controller("ControllerAPI",["$scope","$parentScope","$http","$timeout",function(d,c,e,t){d.itemOptions={},d.showAddItemDialog=function(e,t,o,n,i,r,a,m,p){var s;if(void 0!==m){if("component"===t){var l=[];l=p?d.experimental_components[p].items[m].contents:d.libraryCategories[m].contents,s=_.findWhere(l,{id:e,name:a,page:r,source:i})}else if("page"===t||"template"===t){l=[];l=p?"template"===t?d.experimental_components[p].templates:d.experimental_components[p].pages:d.libraryPages[m].contents,s=_.findWhere(l,{id:e,name:a,source:i})}if(void 0!==s.firstFew&&0===s.firstFew)return c.showDialogWindow(),void(c.dialogForms.showProComponentPageAddDialog=!0)}else s=void 0!==a&&void 0!==r?d.getSourceComponent(e,a,r):d.getAPIItem(e,t);"template"===t&&(t="page"),d.itemOptions={id:e,type:t,termId:o,termType:n,currentItem:s},void 0!==i&&(d.itemOptions.source=i),void 0!==r&&(d.itemOptions.page=r),void 0!==p&&(d.itemOptions.designSet=p),d.addItem()},d.addItem=function(e,t,o,n,i,r){switch(d.cancelDeleteUndo(),null==e&&(e=d.itemOptions.id),null==t&&(t=d.itemOptions.type),null==n&&null!=d.itemOptions.source&&(n=d.itemOptions.source),null==i&&null!=d.itemOptions.page&&(i=d.itemOptions.page),null==r&&null!=d.itemOptions.designSet&&(r=d.itemOptions.designSet),void 0!==o&&o.stopPropagation(),d.itemOptions={},t){case"component":void 0!==n&&void 0!==i?d.getComponentFromSource(e,n,r,i,d.addComponentFromSource):d.makeAPICall("get_components",{id:e},d.addReusableChildren);break;case"page":void 0!==n?d.getPageFromSource(e,n,r,d.addPageFromSource):d.makeAPICall("get_pages",{id:e},d.addReusableChildren)}c.hideDialogWindow()},d.getSourceComponent=function(t,e,o){var n=d.experimental_components[e].items.filter(function(e){return e.id==t&&e.page==o});return n[0]?n[0]:null}}]);
CTFrontendBuilder.controller("ControllerDragnDropLists",["$scope","$timeout","$parentScope","$interval",function(m,o,e,t){m.isHorizontal=!1,m.ghostElementForImg=new Image,m.ghostElementForImg.src=CtBuilderAjax.oxyFrameworkURI+"/toolbar/UI/images/ghost_img.png",m.dragoverCallback=function(e,t,n,r){if(m.hideResizeBox(),jQuery("body").addClass("oxygen-dragging"),m.currentDragoverElement=angular.element(document.querySelector("#"+e)),"'ct_div_block'"==m.selectedDragElement.attr("dnd-type")&&"'oxy_dynamic_list'"==m.selectedDragElement.parent().attr("dnd-type"))return!1;if("'ct_div_block'"==m.currentDragoverElement.attr("dnd-type")&&"'ct_section'"==m.selectedDragElement.attr("dnd-type")&&"ct-builder"!=m.currentDragoverElement.parent().attr("id"))return!1;if("'ct_div_block'"==m.selectedDragElement.attr("dnd-type")&&"'ct_new_columns'"==m.selectedDragElement.parent().attr("dnd-type")&&"'ct_new_columns'"!=m.currentDragoverElement.attr("dnd-type"))return!1;if("'ct_div_block'"==m.selectedDragElement.attr("dnd-type")&&"'oxy_tabs'"==m.selectedDragElement.parent().attr("dnd-type")&&"'oxy_tabs'"!=m.currentDragoverElement.attr("dnd-type"))return!1;if("'ct_div_block'"==m.selectedDragElement.attr("dnd-type")&&"'oxy_tabs_contents'"==m.selectedDragElement.parent().attr("dnd-type")&&"'oxy_tabs_contents'"!=m.currentDragoverElement.attr("dnd-type"))return!1;if(m.currentDragoverElement.is("[dnd-horizontal-list]")?"column"==m.currentDragoverElement.css("flex-direction")?m.isHorizontal=!1:m.isHorizontal=!0:m.currentDragoverElement.children().eq(0).is("[dnd-horizontal-list]")&&("column"==m.currentDragoverElement.children().eq(0).css("flex-direction")?m.isHorizontal=!1:m.isHorizontal=!0),("'ct_div_block'"!=m.currentDragoverElement.attr("dnd-type")||"'ct_new_columns'"!=m.currentDragoverElement.parent().attr("dnd-type"))&&m.onCheckEdgeOfContainer(m.currentDragoverElement,t))return!1;angular.element(document.querySelectorAll(".dndDragover")).removeClass("dndDragover"),"'ct_section'"==m.currentDragoverElement.attr("dnd-type")?m.currentDragoverElement.children(".ct-inner-wrap").addClass("dndDragover"):m.currentDragoverElement.addClass("dndDragover");var a=m.selectedDragElementClone,l=angular.element(document.querySelector(".dndPlaceholder"));if(void 0!==m.selectedDragElement||0==l.children().length){l.parent(".oxy-icon-box").length&&l.prependTo(l.parent(".oxy-icon-box").children(".oxy-icon-box-content").children(".oxy-icon-box-link")),l.parent(".oxy-pricing-box").length&&l.prependTo(l.parent(".oxy-pricing-box").children(".oxy-pricing-box-cta")),l.after(a),m.selectedDragElement.addClass("hide");var d=angular.element(document.querySelector(".dndDraggingContainer"));"'ct_div_block'"==d.attr("dnd-type")&&0==d.children(":not(.dndDraggingSource)").length&&d.addClass("emptyDefaultSize")}return void 0!==l&&(angular.element(document.querySelectorAll(".dndTempEmptyHeight")).removeClass("dndTempEmptyHeight"),l.parent().addClass("dndTempEmptyHeight")),angular.element(document.querySelectorAll(".dndAvailableDragTarget")).removeClass("dndAvailableDragTarget"),"'ct_section'"==m.currentDragoverElement.attr("dnd-type")?(m.currentDragoverElement.children(".ct-inner-wrap").children(".ct-div-block").addClass("dndAvailableDragTarget"),m.currentDragoverElement.children(".ct-inner-wrap").children(".ct-section").children(".ct-section-inner-wrap").addClass("dndAvailableDragTarget"),m.currentDragoverElement.children(".ct-inner-wrap").children(".ct-new-columns").children(".ct-div-block").addClass("dndAvailableDragTarget")):(m.currentDragoverElement.children(".ct-div-block").addClass("dndAvailableDragTarget"),m.currentDragoverElement.children(".ct-section").children(".ct-section-inner-wrap").addClass("dndAvailableDragTarget"),m.currentDragoverElement.children(".ct-new-columns").children(".ct-div-block").addClass("dndAvailableDragTarget")),m.currentDragoverElement.parent().addClass("dndAvailableDragTarget").children(".ct-div-block").addClass("dndAvailableDragTarget"),m.currentDragoverElement.parent().children(".ct-section").children(".ct-section-inner-wrap").addClass("dndAvailableDragTarget"),m.currentDragoverElement.parent().children(".ct-new-columns").children(".ct-div-block").addClass("dndAvailableDragTarget"),!0},m.dragstartCallback=function(e,t,n){m.selectedDragElement=m.getComponentById(e),m.selectedDragElement.parent().addClass("dndDraggingContainer"),"'ct_div_block'"!=m.selectedDragElement.attr("dnd-type")&&"'ct_link'"!=m.selectedDragElement.attr("dnd-type")||""==m.selectedDragElement.html()&&m.selectedDragElement.addClass("emptyDefaultSize"),"'ct_inner_content'"==m.selectedDragElement.attr("dnd-type")&&""==m.selectedDragElement.html()&&m.selectedDragElement.css({height:m.selectedDragElement.height()}),m.selectedDragElement.find("iframe").each(function(e){var t=angular.element(document.createElement("div"));t.css({background:"rgba(0,0,0,0.5)",width:jQuery(this).outerWidth()+"px",height:jQuery(this).outerHeight()+"px"}),"'ct_video'"==m.selectedDragElement.attr("dnd-type")&&t.css({position:"absolute"}),jQuery(this).replaceWith(t)}),m.selectedDragElementClone=m.selectedDragElement.clone().removeClass("dndDraggingSource dndDragging ct-active").addClass("dndDraggingCloneSource"),m.selectedDragElementId=m.selectedDragElement.attr("id");"'ct_image'"==m.selectedDragElement.attr("dnd-type")?n.dataTransfer.setDragImage(m.ghostElementForImg,-0,-0):m.changeGhostImage(e,t,n,0,0)},m.dragendCallback=function(e,t,n){m.selectedDragElement.removeClass("hide").parent().removeClass("dndDraggingContainer").removeClass("emptyDefaultSize"),angular.element(document.querySelectorAll(".dndDragover")).removeClass("dndDragover"),angular.element(document.querySelectorAll(".dndAvailableDragTarget")).removeClass("dndAvailableDragTarget");var r,a,l,d,o,c,i=m.selectedDragElementClone;if(a=m.selectedDragElement.attr("ng-attr-component-id"),r=angular.element(parent.document.querySelector('[ng-attr-tree-id="'+a+'"]')),1e5<(c=m.selectedDragElement.parent().closest("[ng-attr-component-id]").attr("ng-attr-component-id"))&&(c=m.innerContentRoot&&m.innerContentRoot.id?m.innerContentRoot.id:0),o=angular.element(parent.document.querySelector('[ng-attr-tree-id="'+c+'"]')),null!=(d=i.parent().closest("[ng-attr-component-id]").attr("ng-attr-component-id"))){1e5<d&&(d=m.innerContentRoot&&m.innerContentRoot.id?m.innerContentRoot.id:0),l=angular.element(parent.document.querySelector('[ng-attr-tree-id="'+d+'"]'));var g=i.parent().children(":not(.dndDraggingSource)").index(i),s=m.findComponentItem(m.componentsTree.children,d,m.calculateBuiltInOffset);i.parent().removeClass("dndTempEmptyHeight"),i.remove(),m.updateDomTreeNBuilder(r,l,o,g+s);m.getComponentById(a);m.activateComponent(e),m.updateBreadcrumbs(e),m.adjustResizeBox()}else console.log("Drag failed: not created DNDPlaceholder");jQuery("body").removeClass("oxygen-dragging")},m.changeGhostImage=function(e,t,n,r,a){var l=document.createElement("div");l.className="dndGhostWrapper";var d=document.createElement("div");d.className+="dndGhostSource",d.innerHTML=m.component.options[e].nicename?m.component.options[e].nicename.replace(" (#"+e+")",""):m.calcDefaultComponentTitle(m.component.options[e]).replace(" (#"+e+")",""),l.appendChild(d),document.querySelector("#"+t).appendChild(l),n.dataTransfer.setDragImage(l,-r,-a),o(function(){l.parentNode.removeChild(l)},500,!1)},m.updateDomTreeNBuilder=function(e,t,n,r){var a=n[0].attributes["ng-attr-tree-id"].value,l=t[0].attributes["ng-attr-tree-id"].value,d=(t.parent().attr("ng-attr-tree-id"),e[0].attributes["ng-attr-tree-id"].value);m.componentInsertId=l,m.newComponentKey=r,m.reorderSameParent=a==l,m.findParentComponentItem(m.componentsTree,d,m.cutComponentFromTree),m.findComponentItem(m.componentsTree.children,m.componentInsertId,m.pasteComponentToTree),m.findComponentItem(m.componentsTree.children,d,m.updateComponentParentId),m.findParentComponentItem(m.componentsTree,d,m.updateCurrentActiveParent);var o=m.getComponentById(l);o&&o.hasClass("ct-new-columns")&&a==l?m.rebuildDOM(l):(o&&o.hasClass("ct-new-columns")?m.rebuildDOM(a):o&&o.hasClass("oxy-icon-box"),m.rebuildDOM(d,!0)),m.cancelDeleteUndo()},m.onCheckEdgeOfContainer=function(e,t){var n=e[0].getBoundingClientRect();return t.clientY<=n.top+n.height&&t.clientY>=n.top+n.height-3||t.clientY>=n.top&&t.clientY<=n.top+3||t.clientX<=n.left+n.width&&t.clientX>=n.left+n.width-3||t.clientX>=n.left&&t.clientX<=n.left+3},m.dragstartResizeBoxCallback=function(e,t){void 0===t&&(t=m.component.active.id);var n=m.component.options[t].selector;angular.element(document.querySelector("#oxygen-resize-box-drag-handler")).removeClass("dndDraggingSource dndDragging"),m.getComponentById(t).addClass("dndDraggingSource dndDragging"),m.dragstartCallback(t,n,e)},m.dragendResizeBoxCallback=function(e,t){var n=t||m.component.active.id;m.dragendCallback(n,m.selectedDragElementDNDType,e)}}]);
CTFrontendBuilder.controller("ControllerUndoRedo",["$scope","$parentScope","$timeout","$interval",function(f,t,n,o){var r={},l={},h=!1,p=!0,u=new UndoManager;function e(e){d();var t=angular.copy(e.data),n=angular.copy(l),o=DeepDiff(n,t);o&&m(o)}function m(e){var r=!(h=!0),c=!1,l=1/0,p=[],u=[],m=[];if(e.forEach(function e(t){var n=t.path;if("componentsTree"===n[0]){var o=n.lastIndexOf("children");if(0<o)if(n.includes("options")){c=!0;var a=n.slice(0,o+2).join(".");-1==u.indexOf(a)&&u.push(a);var s=_.last(n);("tag"==s||"original"==s&&(_.has(t.lhs,"tag")||_.has(t.rhs,"tag")))&&-1==m.indexOf(a)&&m.push(a)}else r=!0,l=Math.min(o,l),a=n.slice(0,l).join("."),-1==p.indexOf(a)&&p.push(a)}switch(t.kind){case"EDIT":case"NEW":objectPath.set(f,n,t.rhs);break;case"DELETE":objectPath.del(f,n);break;case"ARRAY":var i=t.item;i.path=n.concat(t.index),e(i)}}),r){var o=[];l<1/0&&p.forEach(function(e){var t=objectPath.get(f,e,null);if(t&&"number"==typeof t.id){var n=t.id;void 0===o[n]&&(o[n]=t)}}),0==o.length&&o.push(f.componentsTree),o.forEach(function(e){var t=e.id,n=e.name,o=f.getComponentById(t);o&&0<o.closest("[ctdynamiclist]").length&&f.updateRepeaterQuery(t),"ct_slide"==n&&(t=e.options.ct_parent),f.rebuildDOM(t)})}if(c){var d=[];u.forEach(function(e){var t=objectPath.get(f,e,null),n=f.component.options;if(t&&t.id&&t.options){var o=t.id,a=t.name,s=n[o].nicename,i=n[o].ct_parent;if(n[o]={},f.applyComponentDefaultOptions(o,a,t),f.applyComponentSavedOptions(o,t),f.applyModelOptions(o,a),n[o].nicename=s,n[o].ct_parent=i,!r&&"object"==typeof f.componentsTemplates&&f.componentsTemplates.hasOwnProperty(a)){var c=f.componentsTemplates[a].rebuildTriggerOptions;c&&_.each(t.options.original,function(e,t){c.includes(t)&&!d[o]&&(d[o]=a)})}}}),d.forEach(function(e,t){n(function(){f.renderComponentWithAJAX("oxy_render_"+e,t)})}),!r&&m.length&&m.forEach(function(e){var t=objectPath.get(f,e,null);t&&f.rebuildDOM(t.id)})}f.classesCached=!1,f.updateAllComponentsCacheStyles(),f.outputCSSOptions(),f.outputPageSettingsCSS(),f.adjustResizeBox(),f.cancelDeleteUndo(),f.skipChanges=!0,f.waitOxygenTree(function(){h=!1})}function d(){l={component:{active:f.component.active},componentsTree:f.componentsTree,classes:f.classes,currentClass:f.currentClass,componentsClasses:f.componentsClasses,customSelectors:f.customSelectors,styleSets:f.styleSets,styleFolders:f.styleFolders,styleSheets:f.styleSheets,currentActiveStylesheetFolder:f.currentActiveStylesheetFolder,pageSettingsMeta:f.pageSettingsMeta,globalSettings:f.globalSettings,globalColorSets:f.globalColorSets,easyPostsCustomTemplates:f.easyPostsCustomTemplates,commentsListCustomTemplates:f.commentsListCustomTemplates,elementPresets:f.elementPresets}}function a(){if(0!=p&&!h){d();var e=angular.copy(l);if(!_.isEqual(e,r)){var t=DeepDiff(e,r),n=DeepDiff(r,e);if(t&&n){var o,a,s,i=!0;for(var c in n)if("component"!=n[c].path[0]){i=!1;break}if(!i)f.skipChanges?f.skipChanges=!1:(o=t,a=n,s=f.component.options[f.component.active.id].nicename||f.component.active.name||"Unknown",u.add({time:new Date,name:s,data:angular.copy(l),undo:function(){m.call(this,o)},redo:function(){m.call(this,a)}})),r=angular.copy(l)}}}}f.undoManager=u,f.pauseDataWatcher=function(){a(),p=!1},f.resumeDataWatcher=function(){p=!0,a()},f.watchIntervalCallback=a,f.firstHistoryItem={},f.historyItems=[],f.skipChanges=!1,f.canUndo=!1,f.canRedo=!1,f.undo=function(){0==h&&u.undo()},f.redo=function(){0==h&&u.redo()},u.setChangeCallback(function(){f.canUndo=u.hasUndo(),f.canRedo=u.hasRedo();var o=[],a=u.getIndex(),e=u.getCommands();f.firstHistoryItem.active=-1==a,e.forEach(function(e,t){var n={index:t,time:e.time.toLocaleTimeString(),name:e.name,active:a==t};o.push(n)}),f.historyItems=o}),u.setDoCallback(e),f.doFirstHistoryItem=function(){u.setIndex(-1),e(f.firstHistoryItem)},f.$on("oxygen_components_loaded",function(){var e=o(function(){0==t.overlaysCount&&(!function(){d(),r=angular.copy(l);var e=new Date;f.firstHistoryItem={index:-1,name:"Initial State",time:e.toLocaleTimeString(),data:angular.copy(l),active:!0},f.historyLimit&&u.setLimit(f.historyLimit),o(a,1e3)}(),o.cancel(e))},100)})}]);
CTFrontendBuilder.controller("ControllerShortcuts",["$scope","$parentScope","$timeout","$interval","$rootScope",function(e,o,t,a,r){var n,c,i,s=(n=function(e){if("true"==CtBuilderAjax.userCanFullAccess&&!e.originalEvent.repeat&&!o.isActiveActionTab("contentEditing")){var t=!1,a=e.key.toLowerCase();if(e.keyCode,e.ctrlKey||e.metaKey)switch(a){case"s":o.triggerCodeMirrorBlur(),iframeScope.savePage(),t=!0;break;case"backspace":case"delete":iframeScope.removeActiveComponent(),t=!0;break;case"d":iframeScope.duplicateComponent(),t=!0;break;case"c":r.$broadcast("copyElement"),t=!0;break;case"v":r.$broadcast("pasteElement"),t=!0;break;case"z":iframeScope.undo();break;case"y":iframeScope.redo()}return!t&&void 0}},c=250,function(){var e=this,t=arguments;i&&clearTimeout(i),i=setTimeout(function(){i=null,n.apply(e,t)},c)});function l(e){if(["s","backspace","delete","d","c","v","z","y"].includes(e.key.toLowerCase())&&!(e.target.parentElement.classList.contains("textarea")&&"s"!=e.key.toLowerCase()||"INPUT"==e.target.nodeName&&"s"!=e.key.toLowerCase()||"TEXTAREA"==e.target.nodeName&&"s"!=e.key.toLowerCase()||o.isActiveActionTab("contentEditing")))return e.ctrlKey||e.metaKey?(s(e),!1):void 0}angular.element("body").on("keydown",l),parent.angular.element("body").on("keydown",l)}]);
CTFrontendBuilder.controller("ControllerCopyPaste",["$scope","$parentScope","$timeout","$interval","$window",function(i,e,r,n,o){i.$on("copyElement",function(){var e=i.component.active.id;if(0<e){if(i.findParentComponentItem(i.componentsTree,e,i.copyComponentTreeNode),-1===["ct_inner_content","ct_reusable"].indexOf(i.componentBuffer.name)){var n=JSON.stringify(i.componentBuffer);return window.localStorage.setItem("oxygen-componentbuffer",n),void i.showNoticeModal("<div>Element "+i.componentBuffer.name+" copied to Oxygen clipboard</div>","ct-notice")}i.showNoticeModal("<div>Element of type "+i.componentBuffer.name+" can't be copied/pasted.</div>")}else i.showNoticeModal("<div>Body element can't be copied/pasted.</div>")}),i.$on("pasteElement",function(){if(window.localStorage.getItem("oxygen-componentbuffer")){var e,n=window.localStorage.getItem("oxygen-componentbuffer");try{e=JSON.parse(n)}catch(e){return}if(i.addComponent(e.name)){var o=i.component.active.parent;if(o){var t=o.id;i.updateNewComponentIds(e,o);var c=50;i.isAJAXElement(e.name)&&(c=1500),r(function(){i.removeActiveComponent(),i.componentBuffer=e,i.findComponentItem(i.componentsTree.children,t,i.pasteComponentToTree),i.rebuildDOM(i.componentBuffer.id),i.activateComponent(i.componentBuffer.id,i.componentBuffer.name)},c,!1)}}}})}]);
function oxygenMD5(t){function a(t,e){var n=t[0],o=t[1],i=t[2],a=t[3];o=s(o=s(o=s(o=s(o=p(o=p(o=p(o=p(o=d(o=d(o=d(o=d(o=r(o=r(o=r(o=r(o,i=r(i,a=r(a,n=r(n,o,i,a,e[0],7,-680876936),o,i,e[1],12,-389564586),n,o,e[2],17,606105819),a,n,e[3],22,-1044525330),i=r(i,a=r(a,n=r(n,o,i,a,e[4],7,-176418897),o,i,e[5],12,1200080426),n,o,e[6],17,-1473231341),a,n,e[7],22,-45705983),i=r(i,a=r(a,n=r(n,o,i,a,e[8],7,1770035416),o,i,e[9],12,-1958414417),n,o,e[10],17,-42063),a,n,e[11],22,-1990404162),i=r(i,a=r(a,n=r(n,o,i,a,e[12],7,1804603682),o,i,e[13],12,-40341101),n,o,e[14],17,-1502002290),a,n,e[15],22,1236535329),i=d(i,a=d(a,n=d(n,o,i,a,e[1],5,-165796510),o,i,e[6],9,-1069501632),n,o,e[11],14,643717713),a,n,e[0],20,-373897302),i=d(i,a=d(a,n=d(n,o,i,a,e[5],5,-701558691),o,i,e[10],9,38016083),n,o,e[15],14,-660478335),a,n,e[4],20,-405537848),i=d(i,a=d(a,n=d(n,o,i,a,e[9],5,568446438),o,i,e[14],9,-1019803690),n,o,e[3],14,-187363961),a,n,e[8],20,1163531501),i=d(i,a=d(a,n=d(n,o,i,a,e[13],5,-1444681467),o,i,e[2],9,-51403784),n,o,e[7],14,1735328473),a,n,e[12],20,-1926607734),i=p(i,a=p(a,n=p(n,o,i,a,e[5],4,-378558),o,i,e[8],11,-2022574463),n,o,e[11],16,1839030562),a,n,e[14],23,-35309556),i=p(i,a=p(a,n=p(n,o,i,a,e[1],4,-1530992060),o,i,e[4],11,1272893353),n,o,e[7],16,-155497632),a,n,e[10],23,-1094730640),i=p(i,a=p(a,n=p(n,o,i,a,e[13],4,681279174),o,i,e[0],11,-358537222),n,o,e[3],16,-722521979),a,n,e[6],23,76029189),i=p(i,a=p(a,n=p(n,o,i,a,e[9],4,-640364487),o,i,e[12],11,-421815835),n,o,e[15],16,530742520),a,n,e[2],23,-995338651),i=s(i,a=s(a,n=s(n,o,i,a,e[0],6,-198630844),o,i,e[7],10,1126891415),n,o,e[14],15,-1416354905),a,n,e[5],21,-57434055),i=s(i,a=s(a,n=s(n,o,i,a,e[12],6,1700485571),o,i,e[3],10,-1894986606),n,o,e[10],15,-1051523),a,n,e[1],21,-2054922799),i=s(i,a=s(a,n=s(n,o,i,a,e[8],6,1873313359),o,i,e[15],10,-30611744),n,o,e[6],15,-1560198380),a,n,e[13],21,1309151649),i=s(i,a=s(a,n=s(n,o,i,a,e[4],6,-145523070),o,i,e[11],10,-1120210379),n,o,e[2],15,718787259),a,n,e[9],21,-343485551),t[0]=g(n,t[0]),t[1]=g(o,t[1]),t[2]=g(i,t[2]),t[3]=g(a,t[3])}function c(t,e,n,o,i,a){return e=g(g(e,t),g(o,a)),g(e<<i|e>>>32-i,n)}function r(t,e,n,o,i,a,r){return c(e&n|~e&o,t,e,i,a,r)}function d(t,e,n,o,i,a,r){return c(e&o|n&~o,t,e,i,a,r)}function p(t,e,n,o,i,a,r){return c(e^n^o,t,e,i,a,r)}function s(t,e,n,o,i,a,r){return c(n^(e|~o),t,e,i,a,r)}function l(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var o="0123456789abcdef".split("");function n(t){for(var e="",n=0;n<4;n++)e+=o[t>>8*n+4&15]+o[t>>8*n&15];return e}function e(t){return function(t){for(var e=0;e<t.length;e++)t[e]=n(t[e]);return t.join("")}(function(t){txt="";var e,n=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)a(o,l(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),55<e)for(a(o,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,a(o,i),o}(t))}function g(t,e){return t+e&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=e("hello"))function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return e(t)}CTFrontendBuilder.directive("ngBuilderWrap",["$parentScope","$compile","$timeout","$interval",function(R,t,N,F){return{restrict:"A",link:function(D,t){D.insertBeforeComponent=function(t,e){for(var n=e.activeComponent;!n.is(t)&&!n.hasClass("ct-builder");)n=n.parent();0!=n[0].getAttribute("ng-attr-component-id")&&(e.index=n.index()+1,n=jQuery(n).parent().closest("[is-nestable]"),e.idToInsert=n[0].getAttribute("ng-attr-component-id"),D.activateComponent(e.idToInsert),e.activeComponent=D.getActiveComponent())},D.tree=[{"oxy-timeline":[{"oxy-timeline-entry":["ct_headline","ct_text_block","ct_image"]},{"oxy-timeline-entry":[{ct_div_block:["ct_headline"]},"ct_text_block","ct_image"]},{"oxy-timeline-entry":["ct_headline","ct_text_block","ct_image"]}]},"ct_headline"],D.addComponentsTree=function(t,e){for(key in t)if(t.hasOwnProperty(key)){var n=t[key];if("object"==typeof n){for(subKey in n)if(n.hasOwnProperty(subKey)){var o=D.addComponent(subKey);"object"==typeof n[subKey]&&D.addComponentsTree(n[subKey],o),"string"==typeof n[subKey]&&D.addComponent(n[subKey],"",!0)}void 0!==e&&D.activateComponent(e)}"string"==typeof n&&D.addComponent(n,"",!0)}void 0!==e&&D.activateComponent(e)},D.addComponents=function(t,e){if(D.addComponent(t),"ct_columns"==t)var n=N(function(){D.addComponent(e,!1,!0),N.cancel(n)},0,!1),o=N(function(){D.addColumn(D.component.active.id),D.columns[D.component.active.id]=2,F.cancel(o)},500,!1);else n=N(function(){D.waitOxygenTree(function(){D.addComponent(e)}),N.cancel(n)},0,!1)},D.addTab=function(){var n=D.component.active.id,o=D.component.active.name;if("oxy_tabs"==D.component.active.name){var t=D.getOption("tabs_contents_wrapper"),e=jQuery("#"+t).attr("ng-attr-component-id"),i=D.addComponent("oxy_tab",!1,!0),a=D.getOption("active_tab_class",n);D.addClassToComponentSafe(i,a.replace("-active","")),D.addClassToComponentSafe(i,a),D.activeSelectors[i]=a.replace("-active","");var r=N(function(){D.activateComponent(i,"oxy_tab");var t=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Another Tab",t,"ct_text_block"),N.cancel(r)},0,!1);D.activateComponent(e,"oxy_tabs_contents"),addedComponentIDTwo=D.addComponent("oxy_tab_content",!1,!0),D.addClassToComponentSafe(addedComponentIDTwo,a.replace("tabs-","tabs-contents-").replace("-active","")),D.activeSelectors[addedComponentIDTwo]=a.replace("tabs-","tabs-contents-").replace("-active","");var c=N(function(){D.activateComponent(addedComponentIDTwo,"oxy_tab_content");var t=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Another Tab Contents",t,"ct_text_block");var e=N(function(){jQuery(D.getComponentById(i)).trigger("click"),D.activateComponent(n,o),D.adjustResizeBox(),F.cancel(e)},100,!1);N.cancel(c)},0,!1)}else if("oxy_tabs_contents"==D.component.active.name){t=D.getOption("tabs_wrapper"),e=jQuery("#"+t).attr("ng-attr-component-id"),i=D.addComponent("oxy_tab_content",!1,!0),a=D.getOption("active_tab_class",e);D.addClassToComponentSafe(i,a.replace("tabs-","tabs-contents-").replace("-active","")),D.activeSelectors[i]=a.replace("tabs-","tabs-contents-").replace("-active","");c=N(function(){D.activateComponent(i,"oxy_tab_content");var t=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Another Tab Contents",t,"ct_text_block"),N.cancel(c)},0,!1);D.activateComponent(e,"oxy_tabs"),addedComponentIDTwo=D.addComponent("oxy_tab",!1,!0),D.addClassToComponentSafe(addedComponentIDTwo,a.replace("-active","")),D.addClassToComponentSafe(addedComponentIDTwo,a),D.activeSelectors[addedComponentIDTwo]=a.replace("-active","");r=N(function(){D.activateComponent(addedComponentIDTwo,"oxy_tab");var t=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Another Tab",t,"ct_text_block");var e=N(function(){jQuery(D.getComponentById(addedComponentIDTwo)).trigger("click"),D.activateComponent(n,o),D.adjustResizeBox(),F.cancel(e)},100,!1);N.cancel(r)},0,!1)}},D.addComponent=function(t,e,n,o){D.cancelDeleteUndo(),D.log&&console.log("addComponent()",t,e,n,o);var i=jQuery("div.ct-component.ct-inner-content:not(.ct-inner-content-workarea)");if("ct_inner_content"===t&&0<i.length)alert("You cannot add more than one Inner Content component to a template.");else{if(!("oxy-product-tabs"===t&&0<jQuery(".oxy-product-tabs").length)){"ct_inner_content"===t&&(D.innerContentAdded=!0),"oxy_dynamic_list"==t&&(iframeScope.dynamicListActions.actions[D.component.id]={});var a=!1;D.applyComponentDefaultOptions(D.component.id,t);var r=null;null!=o&&(r=o.parent_id);var c={},d=D.getComponentTemplate(t,D.component.id,e,null,r);if(c.idToInsert=D.component.active.id,c.activeComponent=D.getActiveComponent(),c.index=!1,c.activeComponent||(c.activeComponent=document.getElementsByClassName("ct-builder"),c.activeComponent=angular.element(c.activeComponent),c.idToInsert=0),D.isAPIComponent(t)&&D.insertBeforeComponent("."+t,c),"ct_section"==t&&D.insertBeforeComponent(".ct_section, .oxy_header, .ct_slider",c),"ct_modal"==t){D.insertBeforeComponent(".ct_section, .oxy_header, .ct_slider, .ct_modal",c);var p=N(function(){D.setOptionModel("width",iframeScope.component.options[D.component.active.id].model.width,D.component.active.id,"ct_modal"),N.cancel(p)},0,!1)}if("ct_new_columns"==t&&D.insertBeforeComponent(".ct_new_columns",c),"oxy_tabs"!=t&&"oxy_tabs_contents"!=t||D.insertBeforeComponent(".oxy_tabs, .oxy_tabs_contents",c),"ct_link"!=t&&"ct_link_text"!=t||D.insertBeforeComponent(".ct_link",c),"oxy_header"==t&&D.insertBeforeComponent(".oxy_header, .ct_section",c),"ct_inner_content"==t&&D.insertBeforeComponent(".oxy_header, .ct_section",c),"ct_slider"==t&&D.insertBeforeComponent(".ct_slider",c),"oxy_icon_box"==t&&D.insertBeforeComponent(".oxy_icon_box",c),"oxy_pricing_box"==t&&D.insertBeforeComponent(".oxy_pricing_box",c),"ct_inner_content"!=D.component.active.name||D.isTemplateInnerContent(D.component.active)||D.insertBeforeComponent(".ct_inner_content",c),"ct_link_button"!=t&&"ct_link_text"!=t&&"builtin"!==e&&D.insertBeforeComponent(".oxy_pricing_box, .oxy_icon_box",c),"ct_columns"==D.component.active.name&&"ct_column"==t)(s=D.getInnerWrap(c.activeComponent)).append(d),D.cleanInsert(c.activeComponent),callback=D.insertComponentToTree,D.setOptionModel("width","100",D.component.id,"ct_column");else if("oxy_header"==D.component.active.name&&"oxy_header_row"==t){var s=D.getInnerWrap(c.activeComponent);callback=D.insertComponentToTree,s.append(d),D.cleanInsert(c.activeComponent)}else if("ct_new_columns"==D.component.active.name&&"ct_div_block"==t){s=D.getInnerWrap(c.activeComponent);callback=D.insertComponentToTree,s.append(d),D.cleanInsert(c.activeComponent)}else if("ct_new_columns"==D.component.active.name&&"ct_div_block"!=t&&0<c.activeComponent.children(".ct_div_block").length){var l=c.activeComponent.children(".ct_div_block").first();c.idToInsert=parseInt(l.attr("ng-attr-component-id")),callback=D.insertComponentToTree,D.cleanInsert(d,l)}else if(("oxy_tabs"==D.component.active.name||"oxy_tabs_contents"==D.component.active.name)&&"ct_div_block"!=t&&0<c.activeComponent.children(".ct_div_block").length){var g=c.activeComponent.children(".ct_div_block").first();c.idToInsert=parseInt(g.attr("ng-attr-component-id")),callback=D.insertComponentToTree,D.cleanInsert(d,g)}else if("oxy_header_row"==D.component.active.name&&"oxy_header_row"==t)a=c.activeComponent.parent(),c.index=c.activeComponent.index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index);else if("oxy_header_row"==D.component.active.name&&"oxy_header_left"!==t&&"oxy_header_center"!==t&&"oxy_header_right"!==t){var m=c.activeComponent.find(".oxy-header-left");c.idToInsert=parseInt(m.attr("ng-attr-component-id")),callback=D.insertComponentToTree,D.cleanInsert(d,m)}else if("oxy_header"==D.component.active.name&&"oxy_header_left"!==t&&"oxy_header_center"!==t&&"oxy_header_right"!==t){m=c.activeComponent.find(".oxy-header-left");c.idToInsert=parseInt(m.attr("ng-attr-component-id")),callback=D.insertComponentToTree,D.cleanInsert(d,m)}else if("oxy_header_left"==t||"oxy_header_center"==t||"oxy_header_right"==t){s=D.getInnerWrap(c.activeComponent);callback=D.insertComponentToTree,s.append(d),D.cleanInsert(c.activeComponent)}else if("ct_ul"==D.component.active.name&&"ct_li"!=t)a=c.activeComponent.parent(),c.index=c.activeComponent.index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index);else if("ct_if_else_wrap"==D.component.active.name&&"ct_if_wrap"!=t&&"ct_else_wrap"!=t)a=c.activeComponent.parent(),c.index=c.activeComponent.index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index);else if("oxy_dynamic_list"==D.component.active.name&&("ct_div_block"!=t||0<c.activeComponent.children(".ct_div_block").length)){0<(s=c.activeComponent.children("div:first-child")).length?(D.cleanInsert(d,s,c.index),callback=D.insertComponentToChild):(a=c.activeComponent.parent(),c.index=c.activeComponent.index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index))}else if("ct_li"==D.component.active.name&&"ct_li"!=t)a=c.activeComponent.parent().parent(),c.index=c.activeComponent.parent().index()+1,callback=D.insertComponentToGrandParent,D.cleanInsert(d,a,c.index);else if("ct_slide"==D.component.active.name&&"ct_slide"==t)a=c.activeComponent.parent().parent(),c.index=c.activeComponent.parent().index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index);else if(D.component.active.name==t&&D.isAPIComponent(t))a=c.activeComponent.parent().closest("[is-nestable]"),c.index=c.activeComponent.parent().closest("ct-component").index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index);else if("ct_slider"==D.component.active.name&&"ct_slide"!=t&&0<c.activeComponent.find(".unslider-active").length){var u=c.activeComponent.find(".unslider-active").children(".ct_slide");c.idToInsert=parseInt(u.attr("ng-attr-component-id")),callback=D.insertComponentToTree,D.cleanInsert(d,u)}else if("ct_slider"==D.component.active.name&&"ct_slide"!=t&&0==c.activeComponent.find(".unslider-active").length)a=c.activeComponent.parent(),c.index=c.activeComponent.index()+1,callback=D.insertComponentToParent,D.cleanInsert(d,a,c.index);else if(c.activeComponent[0].attributes["is-nestable"]&&D.canBeChild(D.component.active.name,t)){if((jQuery("body").hasClass("ct_inner")||jQuery("body",window.parent.document).hasClass("ct_inner"))&&(0===parseInt(c.idToInsert)||1e5<parseInt(c.idToInsert))&&0<jQuery(".ct-inner-content.ct-component").length){var b=parseInt(jQuery(".ct-inner-content.ct-component").attr("ng-attr-component-id"));c.idToInsert!=b&&(c.idToInsert=b,c.index=!1,D.activateComponent(c.idToInsert),c.activeComponent=D.getActiveComponent(),callback=D.insertComponentToTree)}s=D.getInnerWrap(c.activeComponent);"builtin"==e&&(s=D.getBuiltInWrap(c.activeComponent)),D.cleanInsert(d,s,c.index),callback=D.insertComponentToTree}else if("builtin"==e)s=D.getBuiltInWrap(c.activeComponent),D.cleanInsert(d,s,c.index),callback=D.insertComponentToTree;else{if(a=c.activeComponent.parent(),callback=D.insertComponentToParent,!a[0].attributes["is-nestable"]&&!a.hasClass("ct-inner-wrap")){for(;!a[0].attributes["is-nestable"]&&!a.hasClass("ct-inner-wrap");)a=a.parent();callback=D.insertComponentToGrandParent}"true"==D.component.options[D.component.active.id].original.oxy_builtin&&(a=a.parent()),c.index=c.activeComponent.index()+1,D.cleanInsert(d,a,c.index)}if("shortcode"==e)var v=!0;if("widget"==e)var _=!0;if("data"==e)var f=!0;if("sidebar"==e)var y=!0;if("nav_menu"==e)var C=!0;if("builtin"==e){var x=!0;D.builtinComponents[D.component.id]=!0}var h={id:D.component.id,name:t,isShortcode:v,isWidget:_,isData:f,isSidebar:y,isNavMenu:C,isBuiltIn:x,index:c.index};if(D.findComponentItem(D.componentsTree.children,c.idToInsert,callback,h),n||D.activateComponent(D.component.id,t),D.justaddedcomponents=D.justaddedcomponents||[],D.justaddedcomponents.push(D.component.id),D.setOption(D.component.id,t),D.setFirstTimeOptions(D.component.id,t),"ct_slide"==t)var S=N(function(){D.rebuildDOM(c.idToInsert),N.cancel(S)},0,!1);if(void 0!==o&&o.rebuild_parent)var $=N(function(){console.log("rebuild",c.idToInsert),D.rebuildDOM(c.idToInsert),N.cancel($)},0,!1);if("ct_span"!==t){var T=D.getComponentById(h.id).parent().closest(".oxy-dynamic-list");0<T.length&&!T.hasClass("oxy-dynamic-list-edit")&&(D.afterComponentsAddedSignal&&clearTimeout(D.afterComponentsAddedSignal),D.afterComponentsAddedSignal=setTimeout(function(){D.updateRepeaterQuery(parseInt(T.attr("ng-attr-component-id")))},500))}D.rebuildDOMChangeParent(c.idToInsert),(a=D.findComponentItem(D.componentsTree.children,c.idToInsert,D.getComponentItem)).children&&1===a.children.length&&D.isAJAXElement(a.name)&&D.rebuildDOM(c.idToInsert),D.component.id++,R.closeAllTabs(),D.unsavedChanges();var k=0;"ct_slide"!=t&&"oxy_social_icons"!=t||(k=1e3);var O=N(function(){var t=D.getActiveComponent();t&&R.scrollToComponent(t.attr("id")),N.cancel(O)},k,!1);if("oxy_header_row"==t)var w=N(function(){D.waitOxygenTree(function(){D.addComponent("oxy_header_left",!1,!0),D.addComponent("oxy_header_center",!1,!0),D.addComponent("oxy_header_right",!1,!0)}),N.cancel(w)},0,!1);if("oxy_dynamic_list"==t)var I=N(function(){D.waitOxygenTree(function(){D.addComponent("ct_div_block",!1,!0,{parent_id:h.id})}),N.cancel(I)},0,!1);if("oxy_icon_box"==t)var j=N(function(){D.waitOxygenTree(function(){var t=D.addComponent("ct_fancy_icon","builtin",!0);D.setOptionModel("icon-id","Lineariconsicon-rocket",t,"ct_fancy_icon")}),N.cancel(j)},0,!1);if("oxy_superbox"==t)var Q=N(function(){D.waitOxygenTree(function(){var t=D.addComponent("ct_div_block","builtin",!0),e=D.addComponent("ct_div_block","builtin",!0);D.component.options[t].nicename="Primary",D.component.options[e].nicename="Secondary",D.updateFriendlyName(t),D.updateFriendlyName(e),D.addClassToComponentSafe(t,"oxy-superbox-primary"),D.addClassToComponentSafe(e,"oxy-superbox-secondary"),D.setOptionModel("align-items","center",e,"ct_div_block"),D.setOptionModel("justify-content","center",e,"ct_div_block"),D.setOptionModel("background-color","rgba(0,0,0,0.3)",e,"ct_div_block"),D.setOptionModel("text-align","center",e,"ct_div_block"),D.activateComponent(t);var n=D.addComponent("ct_image",!1,!0);D.setOptionModel("src","https://source.unsplash.com/random/480x270",n,"ct_image"),D.setOptionModel("width","400",n,"ct_image"),D.activateComponent(e);var o=D.addComponent("ct_headline",!1,!0);D.setOptionModel("ct_content","Superbox",o,"ct_headline"),D.setOptionModel("font-size","36",o,"ct_headline"),D.setOptionModel("color","#ffffff",o,"ct_headline"),D.setOptionModel("tag","h2",o,"ct_headline"),D.activateComponent(h.id)}),N.cancel(Q)},0,!1);if("oxy_pricing_box"==t)var B=N(function(){D.waitOxygenTree(function(){var t=D.addComponent("ct_image","builtin",!0);D.setOptionModel("src","http://via.placeholder.com/300x150",t,"ct_image"),D.addComponent("ct_link_button",!1,!0)}),N.cancel(B)},0,!1);if("oxy_tabs"==t){for(var E,M=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),U=0;M.length<4&&U<1e5;)M=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),U++;D.waitOxygenTree(function(){var a=N(function(){E=D.addComponent("oxy_tab",!1,!0);var t=D.addComponent("oxy_tab",!1,!0),e=D.addComponent("oxy_tab",!1,!0);D.addClassToComponentSafe(E,"tabs-"+M+"-tab"),D.addClassToComponentSafe(t,"tabs-"+M+"-tab"),D.addClassToComponentSafe(e,"tabs-"+M+"-tab"),D.addClassToComponentSafe(E,"tabs-"+M+"-tab-active"),D.addClassToComponentSafe(t,"tabs-"+M+"-tab-active"),D.addClassToComponentSafe(e,"tabs-"+M+"-tab-active"),D.activeSelectors=D.activeSelectors||{},D.activeSelectors[E]="tabs-"+M+"-tab",D.activeSelectors[t]="tabs-"+M+"-tab",D.activeSelectors[e]="tabs-"+M+"-tab",D.activateComponent(E,"oxy_tab");var n=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Tab #1",n,"ct_text_block"),D.activateComponent(t,"oxy_tab");var o=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Tab #2",o,"ct_text_block"),D.activateComponent(e,"oxy_tab");var i=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Tab #3",i,"ct_text_block"),N.cancel(a)},0,!1)}),D.waitOxygenTree(function(){var p=N(function(){D.activateComponent(h.id,"oxy_tabs");var t=D.addComponent("oxy_tabs_contents",!1,!0);D.activateComponent(t,"oxy_tabs_contents");var e=D.addComponent("oxy_tab_content",!1,!0),n=D.addComponent("oxy_tab_content",!1,!0),o=D.addComponent("oxy_tab_content",!1,!0);D.addClassToComponentSafe(e,"tabs-contents-"+M+"-tab"),D.addClassToComponentSafe(n,"tabs-contents-"+M+"-tab"),D.addClassToComponentSafe(o,"tabs-contents-"+M+"-tab"),D.activeSelectors=D.activeSelectors||{},D.activeSelectors[e]="tabs-contents-"+M+"-tab",D.activeSelectors[n]="tabs-contents-"+M+"-tab",D.activeSelectors[o]="tabs-contents-"+M+"-tab",D.activateComponent(e,"oxy_tab_content");var i=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Tab Content #1",i,"ct_text_block"),D.activateComponent(n,"oxy_tab_content");var a=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Tab Content #2",a,"ct_text_block"),D.activateComponent(o,"oxy_tab_content");var r=D.addComponent("ct_text_block",!1,!0);D.setOptionModel("ct_content","Tab Content #3",r,"ct_text_block"),D.activateComponent(h.id,"oxy_tabs"),D.setOptionModel("tabs_wrapper",D.component.options[h.id].selector,t,"oxy_tabs_contents"),D.setOptionModel("tabs_contents_wrapper",D.component.options[t].selector,h.id,"oxy_tabs"),D.setOptionModel("active_tab_class","tabs-"+M+"-tab-active",h.id,"oxy_tabs");var c=N(function(){jQuery(D.getComponentById(h.id)).children(".oxy-tabs-wrapper > div").eq(0).trigger("click"),D.activateComponent(E,"oxy_tab"),F.cancel(c)},100,!1),d=N(function(){D.waitOxygenTree(function(){D.adjustResizeBox()}),F.cancel(d)},200,!1);N.cancel(p)},100,!1)})}if("oxy_toggle"==t){for(M=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),U=0;M.length<4&&U<1e5;)M=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),U++;var A=D.component.active.parent.id,L=D.component.active.parent.name;D.addClassToComponentSafe(h.id,"toggle-"+M),D.addClassToComponentSafe(h.id,"toggle-"+M+"-expanded"),D.activeSelectors[h.id]="toggle-"+M,D.setOptionModel("toggle_active_class","toggle-"+M+"-expanded",h.id,"oxy_toggle");var P=N(function(){D.waitOxygenTree(function(){D.addComponent("ct_headline",!1,!0),D.activateComponent(A,L),D.addComponent("ct_text_block",!1,!0)}),N.cancel(P)},10,!1)}return h.id}D.showNoticeModal("<div>You cannot add more than one Product Tabs element</div>")}}}}}]),CTFrontendBuilder.directive("ngModel",["$timeout","$interval",function(t,e){return{restrict:"A",priority:-1,link:function(t,e,n){t.$watch(n.ngModel,function(t){e.is(":radio")&&(e.next().addClass("ct-update-css"),e.next().removeClass("ct-update-css"))})}}}]),CTFrontendBuilder.directive("ctFloatEditor",function(){return{link:function(t,e,n,o){var i=angular.element("#oxygen-topbar").outerHeight(),a=t.getActiveComponent(),r=a.outerHeight(),c=a[0].getBoundingClientRect(),d=a.offset();n.draggable({handle:".ct-draggable-handle",containment:"document"});var p=n.outerHeight(),s=n.outerWidth(),l=xOffset=0;l=n.is(".ct-choose-selector")?110:i+p>c.top?r+8:-(p+8);var g=e.showSidePanel?330:0;c.left+s>document.documentElement.clientWidth-20-g&&(xOffset=document.documentElement.clientWidth-20-g-(c.left+s)),n.css({top:d.top+l,left:d.left+xOffset})}}}),CTFrontendBuilder.directive("oxygenResizeBox",["$timeout","$interval",function(v,t){return{restrict:"AE",scope:{rOptions:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@"},link:function(i,a,t){"flexBasis"in document.documentElement.style||"webkitFlexBasis"in document.documentElement.style||document.documentElement.style,window.getComputedStyle(a[0],null);var r,c,d,p,s,e=i.rOptions||["top","right","bottom","left","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],o=i.rCenteredX?2:1,l=i.rCenteredY?2:1,n=i.rGrabber?i.rGrabber:"<span></span>",g=function(t){return t.touches?t.touches[0].clientX:t.clientX},m=function(t){return t.touches?t.touches[0].clientY:t.clientY},u=function(t){if("true"!=i.$parent.getOption("selector-locked")){var e="x"===d?r-g(t):r-m(t);switch(c){case"margin-top":if(s=0<marginTop-e*l?marginTop-e*l:0,i.$parent.parentScope.showStatusBar("margin-top:"+s+marginTopUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-top",s.toString()+marginTopUnit);else if(i.$parent.isEditing("class")){var n="."+i.$parent.currentClass+"{margin-top:"+s.toString()+marginTopUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"margin-bottom":if(s=0<marginBottom-e*l?marginBottom-e*l:0,i.$parent.parentScope.showStatusBar("margin-bottom:"+s+marginBottomUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-bottom",s.toString()+marginBottomUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{margin-bottom:"+s.toString()+marginBottomUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"margin-right":if(s=0<marginRight-e*o?marginRight-e*o:0,i.$parent.parentScope.showStatusBar("margin-right:"+s+marginRightUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-right",s.toString()+marginRightUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{margin-right:"+s.toString()+marginRightUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"margin-left":if(s=0<marginLeft-e*o?marginLeft-e*o:0,i.$parent.parentScope.showStatusBar("margin-left:"+s+marginLeftUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-left",s.toString()+marginLeftUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{margin-left:"+s.toString()+marginLeftUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"padding-top":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingTop-e*l?containerPaddingTop-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-top",s.toString()+paddingTopUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-top:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingTop-e*l?paddingTop-e*l:0,i.$parent.isEditing("id"))jQuery(p).css("padding-top",s.toString()+paddingTopUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-top:"+s.toString()+paddingTopUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-top:"+s+paddingTopUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-bottom",s.toString()+paddingTopUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-bottom:"+s.toString()+paddingTopUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n);break;case"padding-bottom":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingBottom-e*l?containerPaddingBottom-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-bottom",s.toString()+paddingBottomUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-bottom:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingBottom-e*l?paddingBottom-e*l:0,i.$parent.isEditing("id"))jQuery(p).css("padding-bottom",s.toString()+paddingBottomUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-bottom:"+s.toString()+paddingBottomUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-bottom:"+s+paddingBottomUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-top",s.toString()+paddingBottomUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-top:"+s.toString()+paddingBottomUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n);break;case"padding-right":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingRight-e*l?containerPaddingRight-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-right",s.toString()+paddingRightUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-right:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingRight-e*o?paddingRight-e*o:0,i.$parent.isEditing("id"))jQuery(p).css("padding-right",s.toString()+paddingRightUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-right:"+s.toString()+paddingRightUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-right:"+s+paddingRightUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-left",s.toString()+paddingRightUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-left:"+s.toString()+paddingRightUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n);break;case"padding-left":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingLeft-e*l?containerPaddingLeft-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-left",s.toString()+paddingLeftUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-left:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingLeft-e*o?paddingLeft-e*o:0,i.$parent.isEditing("id"))jQuery(p).css("padding-left",s.toString()+paddingLeftUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-left:"+s.toString()+paddingLeftUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-left:"+s+paddingLeftUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-right",s.toString()+paddingLeftUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-right:"+s.toString()+paddingLeftUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n)}0<s&&(jQuery("#rb-"+c+"-button").css("display","none"),jQuery("#rb-"+c).addClass("rb-currently-editing")),0==s&&jQuery("#rb-"+c).removeClass("rb-currently-editing"),i.$parent.adjustResizeBox(),i.$apply()}},b=function(t){if(i.$parent.outputCSSStyles("oxy-dragging-styles",""),i.$apply(),document.removeEventListener("mouseup",b,!1),document.removeEventListener("mousemove",u,!1),document.removeEventListener("touchend",b,!1),document.removeEventListener("touchmove",u,!1),window.parent.document.removeEventListener("mouseup",b,!1),window.parent.document.removeEventListener("touchend",b,!1),void 0!==s)switch(c){case"margin-top":i.$parent.setOptionModel("margin-top",s.toString()),jQuery(p).css("margin-top","");break;case"margin-bottom":i.$parent.setOptionModel("margin-bottom",s.toString()),jQuery(p).css("margin-bottom","");break;case"margin-right":i.$parent.setOptionModel("margin-right",s.toString()),jQuery(p).css("margin-right","");break;case"margin-left":i.$parent.setOptionModel("margin-left",s.toString()),jQuery(p).css("margin-left","");break;case"padding-top":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-top",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-top","")):(i.$parent.setOptionModel("padding-top",s.toString()),jQuery(p).css("padding-top","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-bottom",s.toString()),jQuery(p).css("padding-bottom",""));break;case"padding-bottom":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-bottom",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-bottom","")):(i.$parent.setOptionModel("padding-bottom",s.toString()),jQuery(p).css("padding-bottom","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-top",s.toString()),jQuery(p).css("padding-top",""));break;case"padding-right":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-right",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-right","")):(i.$parent.setOptionModel("padding-right",s.toString()),jQuery(p).css("padding-right","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-left",s.toString()),jQuery(p).css("padding-left",""));break;case"padding-left":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-left",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-left","")):(i.$parent.setOptionModel("padding-left",s.toString()),jQuery(p).css("padding-left","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-right",s.toString()),jQuery(p).css("padding-right",""))}a.removeClass("oxygen-no-transition"),jQuery(".rb-currently-editing").removeClass("rb-currently-editing"),i.$parent.parentScope.hideStatusBar(),i.$parent.parentScope.$apply();var e=v(function(){jQuery("body").removeClass("oxy-dragging-resize-box"),v.cancel(e)},0,!1)};e.forEach(function(o){var t=document.createElement("div");t.setAttribute("class","rb"),t.setAttribute("id","rb-"+o),t.innerHTML=n,a.append(t),t.ondragstart=function(){return!1};var e=function(t){var e,n;"true"===i.rDisabled||1!==t.which&&!t.touches||(e=t,n=o,jQuery("body").addClass("oxy-dragging-resize-box"),c=n,jQuery("#rb-"+c),d=0<=c.indexOf("left")||0<=c.indexOf("right")?"x":"y",r="x"===d?g(e):m(e),s=void 0,p=i.$parent.getActiveComponent(),containerPaddingBottom=parseInt(i.$parent.getOption("container-padding-bottom")),containerPaddingBottomUnit=i.$parent.getOptionUnit("container-padding-bottom"),containerPaddingTop=parseInt(i.$parent.getOption("container-padding-top")),containerPaddingTopUnit=i.$parent.getOptionUnit("container-padding-top"),containerPaddingLeft=parseInt(i.$parent.getOption("container-padding-left")),containerPaddingLeftUnit=i.$parent.getOptionUnit("container-padding-left"),containerPaddingRight=parseInt(i.$parent.getOption("container-padding-right")),containerPaddingRightUnit=i.$parent.getOptionUnit("container-padding-right"),paddingTop=parseInt(i.$parent.getOption("padding-top"))||0,paddingTopUnit=i.$parent.getOptionUnit("padding-top"),paddingRight=parseInt(i.$parent.getOption("padding-right"))||0,paddingRightUnit=i.$parent.getOptionUnit("padding-right"),paddingBottom=parseInt(i.$parent.getOption("padding-bottom"))||0,paddingBottomUnit=i.$parent.getOptionUnit("padding-bottom"),paddingLeft=parseInt(i.$parent.getOption("padding-left"))||0,paddingLeftUnit=i.$parent.getOptionUnit("padding-left"),marginTop=parseInt(i.$parent.getOption("margin-top"))||0,marginTopUnit=i.$parent.getOptionUnit("margin-top"),marginRight=parseInt(i.$parent.getOption("margin-right"))||0,marginRightUnit=i.$parent.getOptionUnit("margin-right"),marginBottom=parseInt(i.$parent.getOption("margin-bottom"))||0,marginBottomUnit=i.$parent.getOptionUnit("margin-bottom"),marginLeft=parseInt(i.$parent.getOption("margin-left"))||0,marginLeftUnit=i.$parent.getOptionUnit("margin-left"),a.addClass("oxygen-no-transition"),document.addEventListener("mouseup",b,!1),document.addEventListener("mousemove",u,!1),document.addEventListener("touchend",b,!1),document.addEventListener("touchmove",u,!1),window.parent.document.addEventListener("mouseup",b,!1),window.parent.document.addEventListener("touchend",b,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,i.$apply())};t.addEventListener("mousedown",e,!1),t.addEventListener("touchstart",e,!1),-1==["top","right","left","bottom"].indexOf(o)?(jQuery(t).mouseenter(function(){jQuery(this).addClass("rb-currently-editing")}).mouseleave(function(){jQuery(this).removeClass("rb-currently-editing")}),jQuery(t).dblclick(function(){p=i.$parent.getActiveComponent(),i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-"+o,""),jQuery(".ct-section-inner-wrap",p).css(o,"")):(i.$parent.setOptionModel(o,""),jQuery(p).css(o,"")),i.$parent.outputCSSStyles("oxy-dragging-styles",""),i.$apply()}),jQuery(t).addClass("rb-overlay")):(t.addEventListener("mouseover",function(t){var e;if(i.$parent.parentScope.isActiveName("ct_section"))jQuery("#rb-margin-"+o+"-button").css("display","none"),e=parseInt(i.$parent.getOption("container-padding-"+o));else{var n=parseInt(i.$parent.getOption("margin-"+o));e=parseInt(i.$parent.getOption("padding-"+o)),0<n?jQuery("#rb-margin-"+o+"-button").css("display","none"):jQuery("#rb-margin-"+o+"-button").css("display","")}0<e?jQuery("#rb-padding-"+o+"-button").css("display","none"):jQuery("#rb-padding-"+o+"-button").css("display","")},!1),t.addEventListener("mouseout",function(t){jQuery("#rb-margin-"+o+"-button").css("display",""),jQuery("#rb-padding-"+o+"-button").css("display","")},!1),jQuery(t).addClass("rb-border"))}),i.$parent.rbMarginTop=jQuery("#rb-margin-top"),i.$parent.rbMarginLeft=jQuery("#rb-margin-left"),i.$parent.rbMarginRight=jQuery("#rb-margin-right"),i.$parent.rbMarginBottom=jQuery("#rb-margin-bottom"),i.$parent.rbPaddingTop=jQuery("#rb-padding-top"),i.$parent.rbPaddingLeft=jQuery("#rb-padding-left"),i.$parent.rbPaddingRight=jQuery("#rb-padding-right"),i.$parent.rbPaddingBottom=jQuery("#rb-padding-bottom"),i.$parent.rbTop=jQuery("#rb-top"),i.$parent.rbLeft=jQuery("#rb-left"),i.$parent.rbRight=jQuery("#rb-right"),i.$parent.rbBottom=jQuery("#rb-bottom"),i.$parent.rbTitleBar=jQuery("#oxygen-resize-box-titlebar"),i.$parent.rbParentTitleBar=jQuery("#oxygen-resize-box-parent-titlebar")}}}]),CTFrontendBuilder.directive("oxygenResizeFlex",["$timeout","$interval",function(b,t){return{restrict:"AE",scope:{rOptions:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rId:"=",rGrabber:"@",rDisabled:"@"},link:function(o,i,t){"flexBasis"in document.documentElement.style||"webkitFlexBasis"in document.documentElement.style||document.documentElement.style;var a,r,c,e=b(function(){var t=i.css("position");""!=t&&"static"!=t||i.addClass("oxygen-resizable-relative"),b.cancel(e)},0,!1),d=window.getComputedStyle(i[0],null),n=o.rOptions||["right"],p=o.rCenteredX?2:1,s=(o.rCenteredY,o.rGrabber?o.rGrabber:"<span></span>"),l=function(t){return t.touches?t.touches[0].clientX:t.clientX},g=function(t){return t.touches?t.touches[0].clientY:t.clientY},m=function(t){var e="x"===c?a-l(t):a-g(t);switch(r){case"right":var n=0<width-e*p?width-e*p:0;o.$parent.setOptionModel("flex-basis",n+"px",o.rId),console.log(width,n)}},u=function(t){o.$apply(),document.removeEventListener("mouseup",u,!1),document.removeEventListener("mousemove",m,!1),document.removeEventListener("touchend",u,!1),document.removeEventListener("touchmove",m,!1),i.removeClass("oxygen-no-transition")};n.forEach(function(n){var t=document.createElement("div");t.setAttribute("class","rg rg-"+n),t.innerHTML=s,i.append(t),t.ondragstart=function(){return!1};var e=function(t){var e;"true"===o.rDisabled||1!==t.which&&!t.touches||(e=t,c=0<=(r=n).indexOf("left")||0<=r.indexOf("right")?"x":"y",a="x"===c?l(e):g(e),width=parseInt(o.$parent.getOption("width"))||parseInt(d.getPropertyValue("width")),i.addClass("oxygen-no-transition"),document.addEventListener("mouseup",u,!1),document.addEventListener("mousemove",m,!1),document.addEventListener("touchend",u,!1),document.addEventListener("touchmove",m,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,o.$apply())};t.addEventListener("mousedown",e,!1),t.addEventListener("touchstart",e,!1)})}}}]),CTFrontendBuilder.directive("oxyimageonload",function(){return{restrict:"A",link:function(t,e,n){e.bind("load",function(){t.adjustResizeBox()})}}});
CTFrontendBuilder.directive("oxygenSlider",["$timeout","$interval",function(e,n){return{link:function(a,t,n){e(function(){var i=t.parent().attr("ng-attr-component-id");a.$parent&&a.$parent.waitOxygenTree(function(){void 0===a.$parent.sliders&&(a.$parent.sliders={});var r=a.component.options[i].id;a.$parent.sliders[i]=t.on("unslider.ready",function(){a.$parent.adjustResizeBox()}).unslider({autoplay:"yes"==r["slider-autoplay"],delay:parseInt(r["slider-autoplay-delay"]),animation:r["slider-animation"],speed:parseInt(r["slider-animation-speed"]),arrows:"yes"==r["slider-show-arrows"],nav:"yes"==r["slider-show-dots"],infinite:!1}).on("unslider.change",function(n,e,i){if("no"==r["slider-autoplay"]){a.$parent.titleBarsVisibility("hidden");var t=i.children().attr("ng-attr-component-id");a.$parent.activateComponent(t)}}).on("unslider.moved",function(){a.$parent.adjustResizeBox(),a.$parent.titleBarsVisibility("visible","visible")});var n=a.$parent.getActiveComponent();if(0<n.parents(".ct-slider").length){var e=n.closest("li").index();a.$parent.sliders[i].unslider("animate:"+e)}t.siblings(".unslider-arrow").mousedown(function(n){n.stopPropagation()}),t.siblings(".unslider-nav").find("li").mousedown(function(n){n.stopPropagation()})})},0,!1)}}}]);