var CTCommonDirectives=angular.module("CTCommonDirectives",[]);CTCommonDirectives.factory("ctScopeService",function(){var n={};return{store:function(e,t){n[e]=t},get:function(e){return n[e]}}}),CTCommonDirectives.factory("ctOxyCache",function(){var n={};return{store:function(e,t){n[e]=t},get:function(e){return n[e]}}});var newTreeControlState={acceptsDrop:["ct_columns","ct_new_columns","ct_column","ct_section","ct_ul","ct_link","ct_inner_content","ct_div_block","oxy_dynamic_list","ct_nestable_shortcode","oxy_icon_box_button_area","oxy_tabs","oxy_tabs_contents","oxy_tab","oxy_tab_content","oxy_toggle","oxy_header","ct_if_wrap","ct_else_wrap","oxy_header","oxy_header_left","oxy_header_center","oxy_header_right","ct_slider","ct_slide","ct_modal"],currentShowMore:null};CTCommonDirectives.directive("newTreeControl",function(){return{restrict:"A",scope:{newTreeControl:"="},link:function(o,a,e){-1<newTreeControlState.acceptsDrop.indexOf(o.newTreeControl.item.name)?setTimeout(function(){a.addClass("ct_accepts_drop")},200):o.$parent.iframeScope.waitComponentsTemplates(function(){o.$parent.iframeScope.isAPIComponent(o.newTreeControl.item.name)&&o.$parent.iframeScope.componentsTemplates[o.newTreeControl.item.name].nestable&&setTimeout(function(){a.addClass("ct_accepts_drop")},200)}),a.attr("data-component-name",o.newTreeControl.item.name),o.$parent.$on("treeCollapse",function(){o.newTreeControl.collapsed=!0}),o.$parent.$on("treeExpand",function(){o.newTreeControl.collapsed=!1}),o.$parent.$on("nodeExpand",function(e,t){a.get(0)===t&&(o.newTreeControl.collapsed=!1)}),o.$parent.$on("nodeShowMore",function(e,t){null===t&&(o.newTreeControl&&o.newTreeControl.editable&&(o.newTreeControl.editable=!1),o.newTreeControl&&o.newTreeControl.showCategorize&&(o.newTreeControl.showCategorize=!1));var n=parseInt(a.attr("ng-attr-tree-id"));n===parseInt(t)?(o.newTreeControl.showMoreOptions=!o.newTreeControl.showMoreOptions,o.newTreeControl.showMoreOptions&&(newTreeControlState.currentShowMore=t,setTimeout(function(){newTreeControlState.currentShowMore=null},500))):!0===o.newTreeControl.showMoreOptions&&n!==parseInt(newTreeControlState.currentShowMore)&&(o.newTreeControl.showMoreOptions=!1)})}}}),CTCommonDirectives.directive("ctiriscolorpicker",function(){return{restrict:"A",require:"ngModel",scope:{ctiriscallback:"=",gradientindex:"="},link:function(i,c,t,p){var n=!1;setTimeout(function(){c.alphaColorPicker({color:i.$parent.iframeScope.getGlobalColorValue(p.$modelValue),change:function(e){c.val().length!=e.color.toString().length&&0!==c.val().length||n||(n=setTimeout(function(){void 0!==i.$parent.globalColorToEdit.id?(i.$parent.updateGlobalColorValue(c.ctColorPicker("color")),i.$parent.globalColorChange()):p.$setViewValue(i.$parent.iframeScope.getGlobalColorValue(c.ctColorPicker("color"))),clearTimeout(n),n=!1},100)),i.ctiriscallback&&i.ctiriscallback()}});var e=t.ngModel;void 0!==i.gradientindex&&(e=e.replace("$index",i.gradientindex)),i.$parent.$watch(e,function(e){var t=i.$parent.iframeScope.getGlobalColorNiceName(e),n=c.closest(".oxygen-color-picker");if(jQuery(".oxy-global-color-label",n).remove(),t){var o;n.removeClass("oxy-not-global-color-value").children("input").prop("disabled",!0).after("<span class='oxy-global-color-label' title='"+t+"'>"+t+"<span class='oxy-global-color-label-remove'>Ã—</span></span>");var a=i.$parent.iframeScope.getGlobalColorValue(e).replace(/ /g,"");o=a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(o=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),parseInt(o)):100;var r=c.closest(".wp-picker-container").find(".alpha-slider");r.slider("value",o),r.find(".ui-slider-handle").text(o.toString())}else n.addClass("oxy-not-global-color-value").children("input").prop("disabled",!1),i.$parent.$parent.activeGlobalColor={};if(n.addClass("oxy-not-empty-color-value"),!(e&&""!==e||p.$modelValue))return n.removeClass("oxy-not-empty-color-value"),void c.closest(".wp-picker-container").find(".wp-color-result").css("background-color","");c.ctColorPicker("color",i.$parent.iframeScope.getGlobalColorValue(e))}),i.$apply()},0)}}}),CTCommonDirectives.directive("ctdynamicdata",["$compile","ctScopeService",function($compile,ctScopeService){return{restrict:"A",replace:!0,scope:{data:"=",result:"=",resultkey:"@",callback:"=",noshadow:"=",backbutton:"=",optionname:"="},link:function(scope,element,attrs){angular.element("body").on("click",".oxy-dynamicdata-popup-background, .oxygen-data-close-dialog",function(){angular.element("#ctdynamicdata-popup").remove(),angular.element(".oxy-dynamicdata-popup-background").remove()}),scope.dynamicDataModel={},scope.showOptionsPanel={item:!1},scope.processCallback=function(e,t,n){if(n&&(scope.showOptionsPanel.item=e.name+e.data+t.data,"button"==e.type&&(void 0===scope.dynamicDataModel.settings_path?scope.dynamicDataModel.settings_path=e.data:scope.dynamicDataModel.settings_path=scope.dynamicDataModel.settings_path+"/"+e.data)),(scope.callback||void 0!==scope.result)&&(!e.properties||0==e.properties.length)){var o='[oxygen data="'+t.data+'"',a={},r=function(e){scope.dynamicDataModel.hasOwnProperty(e.data)&&void 0!==scope.dynamicDataModel[e.data].trim&&""!==scope.dynamicDataModel[e.data].trim()&&!e.helper&&scope.dynamicDataModel[e.data]!==e.nullVal&&scope.fieldIsVisible(e)&&(a[e.data]=scope.dynamicDataModel[e.data]),_.each(e.properties,function(e){r(e)})};_.each(t.properties,function(e){r(e)}),_.each(a,function(e,t){e=e.replace(/'/g,"__SINGLE_QUOTE__"),o+=" "+t+'="'+e+'"'}),t.append&&(o+=" "+t.append),void 0!==scope.dynamicDataModel.settings_path&&(o+=' settings_path="'+scope.dynamicDataModel.settings_path+'"'),void 0!==scope.dynamicDataModel.settings_page&&(o+=' settings_page="'+scope.dynamicDataModel.settings_page+'"'),void 0!==scope.dynamicDataModel.map&&(o+=" metabox_field_type='map'"),o+="]",null!=scope.optionname?(void 0!==scope.result&&(void 0!==scope.resultkey?scope.result[scope.resultkey]=o:scope.result=o),scope.callback&&scope.callback(o,scope.optionname,element)):(void 0!==scope.result&&(void 0!==scope.resultkey?scope.result[scope.resultkey]=o:scope.result=o),scope.callback&&scope.callback(o)),angular.element("#ctdynamicdata-popup").remove(),angular.element(".oxy-dynamicdata-popup-background").remove()}("yes"!=scope.dynamicDataModel.use_default_output_format&&"yes"!=scope.dynamicDataModel.use_default_taxonomy_output_format||($scope.iframeScope.findComponentItem($scope.iframeScope.componentsTree.children,$scope.iframeScope.component.active.id,$scope.iframeScope.updateTreeComponentTag,"ct_shortcode"),$scope.iframeScope.setOptionModel("full_shortcode",o),$scope.iframeScope.setOptionModel("ct_content","")),1==scope.dynamicDataModel.map&&"custom_metabox_content"==t.data)&&($scope.iframeScope.getOption("width")||($scope.iframeScope.setOptionModel("width","100"),$scope.iframeScope.setOptionModel("width-unit","%")));"map"!=e.metabox_field_type&&"osm"!=e.metabox_field_type||(scope.dynamicDataModel.map=!0)},scope.applyChange=function(property){"separator"==property.data&&(scope.dynamicDataModel[property.data]=scope.dynamicDataModel[property.data].replace("]","").replace("[","")),property.change&&eval(property.change)},scope.back=function(e){scope.dynamicDataModel={},scope.showOptionsPanel.item=!1},scope.fieldIsVisible=function(e){return!("yes"==scope.dynamicDataModel.use_default_output_format&&"use_default_output_format"!==e.data&&"settings_page"!==e.data&&!e.properties)&&(void 0===e.show_condition||scope.$eval(e.show_condition))},scope.isChildPanelVisible=function(e,t){if(!scope.showOptionsPanel.item)return!1;if(e.properties){for(var n=!1,o=e.properties.length-1;0<=o;o--){if(scope.showOptionsPanel.item===e.properties[o].name+e.properties[o].data+t.data)return!0;if(e.properties[o].properties&&(n=scope.isChildPanelVisible(e.properties[o],t)))return!0}return n}return!1},scope.isNavigationOnlyPanel=function(e){for(var t=!0,n=e.properties.length-1;0<=n;n--)if("button"!=e.properties[n].type&&"heading"!=e.properties[n].type&&"label"!=e.properties[n].type){t=!1;break}return t},element.on("click",function(e){for(var t=scope.$parent.$parent.iframeScope.component.active.id,n=scope.$parent.$parent.iframeScope.getComponentById(t).parent().closest(".oxy-dynamic-list"),o=!1;n&&0<n.length;)o=parseInt(n.attr("ng-attr-component-id")),n=!scope.$parent.$parent.iframeScope.component.options[o].original.use_acf_repeater&&!scope.$parent.$parent.iframeScope.component.options[o].original.use_metabox_clonable_group&&(o=!1,n.parent().closest(".oxy-dynamic-list"));scope.$parent.$parent.acfRepeaterDynamicDialogProcess(o),scope.$parent.$parent.metaBoxRepeaterDynamicDialogProcess(o),scope.showOptionsPanel.item=!1,scope.dynamicDataModel={},angular.element("body #ctdynamicdata-popup").remove(),angular.element("body .oxy-dynamicdata-popup-background").remove(),e.target.closest(".oxygen-toolbar-button")?scope.dynamicDataModel.triggered_from_text_element=!0:scope.dynamicDataModel.triggered_from_text_element=!1;var a='<div class="oxy-dynamicdata-popup-background"></div><div id="ctdynamicdata-popup" class="oxygen-data-dialog'+(scope.noshadow?" ct-global-conditions-add-modal":"")+'"><h1>Insert Dynamic Data</h1><div>';CtBuilderAjax.freeVersion&&(a+='<div style="border: 4px solid #7046db;-webkit-font-smoothing: antialiased;background-color: white;width: 100%;margin-bottom: 16px;padding: 24px;display: flex;line-height: var(--oxy-big-line-height);flex-direction: column;align-items: center;"><h2 style="color: black;font-weight: var(--oxy-regular-font-weight);text-align: center;line-height: var(--oxy-small-line-height);font-size: 21px;">Dynamic Data requires Oxygen Pro.</h2><a target="_blank" href="https://oxygenbuilder.com/upgrade-to-pro/?utm_source=free-version&utm_medium=in-plugin&utm_content=dynamic-data" style="padding-top: 11px;padding-bottom: 11px;padding-right: 24px;padding-left: 24px;color: white;background-color: #7046db;-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;border-radius: 3px;font-weight: var(--oxy-regular-font-weight);text-decoration: none;box-shadow: 0px 1px 0px 0px #4016ab;margin-top: 16px;">Get Oxygen Pro</a></div>'),scope.backbutton&&(a+='<div class="oxygen-data-back-button oxygen-data-close-dialog">&lt; BACK</div>');var r=$compile(a+='<div class="oxygen-data-dialog-data-picker"ng-repeat="item in data"><h2>{{item.name}}</h2><ul><li ng-repeat="dataitem in item.children" ng-mouseup="processCallback(dataitem, dataitem, true); $event.stopPropagation();"><span>{{dataitem.name}}</span><div ng-if="dataitem.properties" ng-show="showOptionsPanel.item === dataitem.name+dataitem.data+dataitem.data || isChildPanelVisible( dataitem, dataitem )" class="oxygen-data-dialog-options" ng-mouseup="$event.stopPropagation();"><h1>{{dataitem.name}} Options</h1><div><div class="oxygen-data-back-button" ng-mouseup="back()">&lt; BACK</div><div ng-repeat="property in dataitem.properties" ng-class="{inline: property.type==\'button\'}"><div  ng-include="\'dynamicDataRecursiveDialog\'" ng-class="{inline: property.type==\'button\'}"></div></div></div><div class="oxygen-apply-button" ng-mouseup="processCallback(item, dataitem)" ng-show="!isNavigationOnlyPanel(dataitem)">INSERT</div></div></li></ul></div></div></div>')(scope);scope.$parent.$parent.oxygenUIElement.append(r),scope.$apply()})}}}]),CTCommonDirectives.directive("ctdynamiclist",["$compile","ctScopeService",function(e,t){return{restrict:"A",replace:!0,scope:{dynamicListOptions:"=",dynamicActions:"="},link:function(g,f,e){var r=parseInt(f.attr("ng-attr-component-id")),i={};function y(n,o,e){g.$parent.$parent.dynamicListTrees.forcleanup[r]&&0<g.$parent.$parent.dynamicListTrees.forcleanup[r].length&&g.$parent.$parent.dynamicListTrees.forcleanup[r].forEach(function(e){delete g.$parent.$parent.cache.idStyles[e],g.$parent.$parent.recycleIDs.push(e)}),g.$parent.$parent.dynamicListTrees.forcleanup[r]=[],g.$parent.$parent.dynamicListTrees.trees[r]=[],n.forEach(function(e,t){var n=JSON.parse(JSON.stringify(o));n.repeaterListIndex=t,function t(n,e,o){void 0===n.source_id&&(n.source_id=n.id),void 0!==i[n.source_id]?n.id=i[n.source_id]:n.id=0<g.$parent.$parent.recycleIDs.length?g.$parent.$parent.recycleIDs.shift():g.$parent.$parent.component.id++,n.options.ct_id=n.id,g.$parent.$parent.component.options[n.id]={id:{},model:{},original:{}},void 0!==e&&(n.options.ct_parent=e);var a=o.find(function(e){return e.ct_id===n.source_id});a&&a.ct_content&&(n.options.ct_content=a.ct_content,n.options.ct_content=n.options.ct_content.replace(/\<span id\=\"ct-placeholder-([^\"]*)\"\>\<\/span\>/gi,function(e,t){var n=0<g.$parent.$parent.recycleIDs.length?g.$parent.$parent.recycleIDs.shift():g.$parent.$parent.component.id++;return'<span id="ct-placeholder-'+(i[t]=n)+'"></span>'})),a&&a.renderedHTML&&(n.options.renderedHTML=a.renderedHTML),a&&a.original&&(n.options.original=a.original),"oxy_dynamic_list"==n.name&&(g.$parent.dynamicListActions.actions[n.id]={}),g.$parent.$parent.dynamicListTrees.forcleanup[r].push(n.id),n.children&&0<n.children.length&&n.children.forEach(function(e){t(e,n.id,o)})}(n,null,e),g.$parent.$parent.dynamicListTrees.trees[r].push(n)}),f.attr("data-for-id",r);var t=f.children(".oxy_repeater_original");t.length<1&&(t=f.children().first()).addClass("oxy_repeater_original"),t.siblings().remove(),g.$parent.buildComponentsFromTree(g.$parent.$parent.dynamicListTrees.trees[r],null,!1,f),t.insertBefore(f.children().first()),g.$parent.$parent.dynamicListTrees.trees[r].forEach(function(e,t){!function n(e,o,a){e.children&&e.children.forEach(function(t){if("oxy_dynamic_list"==t.name){var e=o[a].find(function(e){return e.ct_id===t.source_id});g.$parent.$parent.dynamicListAction(t.id,1,!0,t,e.children)}else n(t,o,a)})}(e,n,t)}),g.$parent.$parent.adjustResizeBox(),g.$parent.$parent.$emit("oxy-dynamic-list-"+r),o&&o.children&&function(e){e.forEach(function(e){g.$parent.componentsTemplates[e.name]&&g.$parent.componentsTemplates[e.name].has_js?g.$parent.rebuildDOM(e.id):e.children&&e.children});g.$parent.componentsTemplates[""]}(o.children),e&&f.append(angular.element('<div class="oxy-repeater-pages-wrap" style="opacity:1">').append(angular.element('<div class="oxy-repeater-pages">').append(e)))}f.on("click",function(e){var t=angular.element(e.target).closest(".oxy_repeater_original");t.closest("#"+f.attr("id")).length<1&&(t=!1),(!t||t.length<1)&&g.$parent.$parent.parentScope.scrollToComponent(f.children().attr("id"),100)}),angular.extend(g.dynamicActions.actions[r],{action:function(e,t,n,o,a){e=parseInt(e),void 0!==n&&g.$parent.$parent.waitOxygenTree(function(){!function(e,t,n,o){var a=parseInt(f.attr("ng-attr-component-id"));if(!g.$parent.$parent)return;if(g.$parent.$parent.component.options[a].model.listrendertype){var r=f.children().first();return r.addClass("oxy_repeater_original"),g.$parent.$parent.adjustResizeBox(),g.$parent.$parent.$emit("oxy-dynamic-list-"+a)}if(e!==a)return;var i=null;i=n||g.$parent.findComponentItem(g.$parent.componentsTree.children,a,g.$parent.getComponentItem);if(!i||!i.children||i.children.length<1)return;var c=i.children[0];if(n)y(o,c);else{for(var p=function o(e){var a=[];e.forEach(function(e){var t=angular.element.extend(!0,{},e.options);"oxy_dynamic_list"===e.name&&(t.children=o(e.children)),t.name=e.name;var n=g.$parent.$parent.componentsTemplates[t.name];n&&n.phpCallback&&(t.renderedHTML=!0,t.component=e),a.push(t),"oxy_dynamic_list"!==e.name&&e.children&&(a=a.concat(o(e.children)))});return a}(i.children),l=!1,s=f,d=[],m=0;s&&0<s.length;){var u=parseInt(s.attr("ng-attr-component-id"));g.$parent.$parent.component.options[u].original.use_acf_repeater?(s=s.parent().closest(".oxy-dynamic-list"),0<m&&d.push(g.$parent.$parent.component.options[u].original.acf_repeater)):g.$parent.$parent.component.options[u].original.use_metabox_clonable_group?(s=s.parent().closest(".oxy-dynamic-list"),0<m&&d.push(g.$parent.$parent.component.options[u].original.metabox_group)):(l=parseInt(s.attr("ng-attr-component-id")),s=!1),m++}g.$parent.getDynamicDataFromQuery(a,p,y,c,l,d)}}(e,0,o,a)})}}),g.$parent.$parent.dynamicListTrees.runMainOnLoad.push(r)}}}]),CTCommonDirectives.directive("dyncontenteditable",["$compile","$timeout","$interval","ctScopeService",function(e,t,n,o){return{restrict:"A",link:function(i,c,e){c.bind("dblclick",function(e){e.stopPropagation();var t=c.attr("ng-attr-component-id"),n=i.findComponentItem(i.componentsTree.children,t,i.getComponentItem);if(n){var o;if("ct_span"==n.name)angular.element("[ng-attr-component-id="+t+"]").attr("disabled","disabled"),c.removeAttr("disabled"),i.buildComponentsFromTree([n],null,!1,c),o=c.children(),c.replaceWith(o);else{angular.element("[ng-attr-component-id="+t+"]").attr("disabled","disabled"),c.removeAttr("disabled");var a=c.parent(),r=(c.index(),angular.element("<div>").css("display","none"));a.append(r),i.buildComponentsFromTree([n],null,!1,r),(o=r.children()).insertBefore(c),c.css("display","none"),c.attr("disabled","disabled"),r.remove()}setTimeout(function(){o.trigger("dblclick")},100)}})}}}]),CTCommonDirectives.directive("ctrendernestableshortcode",["$http",function(e){return{restrict:"A",link:function(o,e,t){var a=parseInt(e.attr("ng-attr-component-id")),r=function(e,t){o.$parent.component.options[a].model.wrapping_end=void 0!==t?(t=t.split("_#wrapped_content_replacer#_"),o.$parent.component.options[a].model.wrapping_start=t[0],t[1]):o.$parent.component.options[a].model.wrapping_start="",o.$parent.setOption(a,"ct_nestable_shortcode","wrapping_start"),o.$parent.setOption(a,"ct_nestable_shortcode","wrapping_end"),o.$parent.rebuildDOM(a)},n=!1;o.$watch(e.attr("ct-nestable-shortcode-model"),function(e,t){!1===n&&t!==e&&(n=setTimeout(function(){setTimeout(function(){if(o.$parent){var e=o.$parent.component.options[a].id.wrapping_shortcode;if(e){var n=[];e.replace(/\[([^\s\]]{1,})[^\]]*\]/gi,function(e,t){return n.push(e),n.push(t),""});var t={original:{full_shortcode:n[0]+"_#wrapped_content_replacer#_[/"+n[1]+"]"}};o.renderShortcode(a,"ct_shortcode",r,t)}}},0),n=!1},500))})}}}]),CTCommonDirectives.directive("ctevalconditions",function(){return{restrict:"A",link:function(t,n,e){setTimeout(function(){var e=parseInt(n.attr("ng-attr-component-id"));t.parentScope.evalGlobalConditions(e)},0)}}}),CTCommonDirectives.directive("ctrenderoxyshortcode",["$http","ctOxyCache",function(e,t){return{restrict:"A",require:"ngModel",link:function(i,c,e,t){var o=function(e,t,n){c.html(t);var o=parseInt(c.attr("ng-attr-component-id")),a=i.getComponentById(o);if(0<e.indexOf("metabox_field_type='map'")&&void 0!==n){var r=a.closest("body");r.find('link[data-forId="'+o+'"], script[data-forId="'+o+'"]').remove(),function e(t){try{if(1<t.length){var n=t[0];r.append(angular.element(n).attr("data-forId",o)).ready(function(){setTimeout(function(){e(t.slice(1))},300)})}else r.append(angular.element(t[0]).attr("data-forId",o))}catch(e){console.log("JS error happened:",e)}}(n)}};setTimeout(function(){var e=parseInt(c.attr("ng-attr-component-id")),t=i.$parent.getOption("ct_content",e),n={original:{full_shortcode:t}};0<t.indexOf("metabox_field_type='map'")&&(i.$parent.getOption("width",e)||(i.$parent.setOptionModel("width","100",e),i.$parent.setOptionModel("width-unit","%",e)));0<t.indexOf("data='content'")&&(i.$parent.currentClass="oxy-stock-content-styles",i.addClassToComponent(e,"oxy-stock-content-styles",!1),i.$parent.currentClass=!1),i.renderShortcode(e,"ct_shortcode",o,n)},0)}}}]),CTCommonDirectives.directive("contenteditable",["$timeout","$interval","ctScopeService",function(p,e,l){return{restrict:"A",require:"ngModel",link:function(a,r,i,o){function c(){o.$setViewValue(r.html())}r.unbind("paste input"),o.$render=function(){void 0!==i.disabledynamic&&"true"===i.disabledynamic&&(r.removeClass("oxygen-disabled"),o.$viewValue.replace(/\<span id\=\"ct-placeholder-([^\"]*)\"\>\<\/span\>/gi,function(e,t){$scope.iframeScope.component.options[parseInt(t)].model.ct_content.match(/\[oxygen[^\]]*\]/gi)&&r.addClass("oxygen-disabled")})),r.html(o.$viewValue||"")},r.bind("input",function(e,t){a.$apply(c),t&&void 0!==i.plaintext&&"true"===i.plaintext&&(jQuery("<span>").html(r.html()).text().trim()!==r.html().trim().replace("&nbsp;","")&&r.html(r.text()),o.$setViewValue(r.text())),""===r.html().trim()&&void 0!==i.defaulttext&&""!==i.defaulttext.trim()&&r.text(i.defaulttext);var n=p(function(){var e=a,t=i.optionname||"ct_content";a.iframeScope&&(e=a.iframeScope),e.setOption(e.component.active.id,e.component.active.name,t),p.cancel(n)},20,!1)}),r.bind("paste",function(){setTimeout(function(){r.trigger("input","paste")},0)}),void 0===i.plaintext||"true"!==i.plaintext?(r.bind("click",function(e){e.preventDefault()}),r.bind("dblclick",function(e){e.stopPropagation();var t=l.get("scope").parentScope,n=i.optionname||"ct_content",o=a.getOption(n);a.contentEditableData.original=o,a.dynamicSpanCycleIDs=[],o=o.replace(/\<span id\=\"ct-placeholder-([^\"]*)\"\>\<\/span\>/gi,function(e,t){var n=a.component.options[parseInt(t)].model.ct_content;return n.match(/\[oxygen[^\]]*\]/gi)?(a.$parent.dynamicSpanCycleIDs.push(parseInt(t)),a.removeComponentById(parseInt(t),"span",a.component.active.id),n):e}),a.setOptionModel(n,o,a.component.active.id,a.component.active.name),a.contentEditableData.beingEdited=o,t.enableContentEdit(r),a.$apply()}),r[0].attributes["ng-attr-paragraph"]?r.bind("keypress",function(e){13==e.keyCode&&document.execCommand("formatBlock",!1,"p")}):r.bind("keypress",function(e){if(13==e.keyCode)return document.execCommand("insertHTML",!1,"<br><br>"),!1})):r.bind("keypress",function(e){if(13==e.keyCode)return r.blur(),!1}),void 0===i.ngBlur&&""===i.ngBlur||r.bind("blur",function(){var e=p(function(){a.$apply(i.ngBlur),p.cancel(e)},0,!1)})}}}]),CTCommonDirectives.directive("focusMe",["$timeout",function(o){return{scope:{trigger:"=focusMe"},link:function(t,n){t.$watch("trigger",function(e){!0===e&&o(function(){n[0].focus(),t.trigger=!1})})}}}]),CTCommonDirectives.directive("oxyRangeFix",function(){return{priority:0,require:"ngModel",link:{pre:function(e,t,n,o){o.$validators=[],o.$formatters=[],o.$parsers=[],o.$render=function(){}}}}});