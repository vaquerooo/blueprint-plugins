/*
jQuery Waypoints - v2.0.3
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
;(function(){var G=[].indexOf||function(c){for(var i=0,r=this.length;i<r;i++)if(i in this&&this[i]===c)return i;return-1},B=[].slice;(function(c,i){return typeof define==="function"&&define.amd?define("waypoints",["jquery"],function(r){return i(r,c)}):i(c.jQuery,c)})(this,function(c,i){var r,C,x,q,D,t,s,y,l,n,z,A,E,w,u,o;r=c(i);y=G.call(i,"ontouchstart")>=0;q={horizontal:{},vertical:{}};D=1;s={};t="waypoints-context-id";z="resize.waypoints";A="scroll.waypoints";E=1;w="waypoints-waypoint-ids";u="waypoint";o="waypoints";C=function(){function b(a){var d=this;this.$element=a;this.element=a[0];this.didScroll=this.didResize=false;this.id="context"+D++;this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()};this.waypoints={horizontal:{},vertical:{}};a.data(t,this.id);s[this.id]=this;a.bind(A,function(){var e;if(!(d.didScroll||y)){d.didScroll=true;e=function(){d.doScroll();return d.didScroll=false};return i.setTimeout(e,c[o].settings.scrollThrottle)}});a.bind(z,function(){var e;if(!d.didResize){d.didResize=true;e=function(){c[o]("refresh");return d.didResize=false};return i.setTimeout(e,c[o].settings.resizeThrottle)}})}b.prototype.doScroll=function(){var a,d=this;a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(y&&(!a.vertical.oldScroll||!a.vertical.newScroll))c[o]("refresh");c.each(a,function(e,f){var g,k,h;h=[];g=(k=f.newScroll>f.oldScroll)?f.forward:f.backward;c.each(d.waypoints[e],function(j,m){var p,v;if(f.oldScroll<(p=m.offset)&&p<=f.newScroll)return h.push(m);else if(f.newScroll<(v=m.offset)&&v<=f.oldScroll)return h.push(m)});h.sort(function(j,m){return j.offset-m.offset});k||h.reverse();return c.each(h,function(j,m){if(m.options.continuous||j===h.length-1)return m.trigger([g])})});return this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}};b.prototype.refresh=function(){var a,d,e=this;d=c.isWindow(this.element);a=this.$element.offset();this.doScroll();a={horizontal:{contextOffset:d?0:a.left,contextScroll:d?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:d?0:a.top,contextScroll:d?0:this.oldScroll.y,contextDimension:d?c[o]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return c.each(a,function(f,g){return c.each(e.waypoints[f],function(k,h){var j,m,p,v,F;j=h.options.offset;p=h.offset;m=c.isWindow(h.element)?0:h.$element.offset()[g.offsetProp];if(c.isFunction(j))j=j.apply(h.element);else if(typeof j==="string"){j=parseFloat(j);if(h.options.offset.indexOf("%")>-1)j=Math.ceil(g.contextDimension*j/100)}h.offset=m-g.contextOffset+g.contextScroll-j;if(!(h.options.onlyOnScroll&&p!=null||!h.enabled))if(p!==null&&p<(v=g.oldScroll)&&v<=h.offset)return h.trigger([g.backward]);else if(p!==null&&p>(F=g.oldScroll)&&F>=h.offset)return h.trigger([g.forward]);else if(p===null&&g.oldScroll>=h.offset)return h.trigger([g.forward])})})};b.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical)){this.$element.unbind([z,A].join(" "));return delete s[this.id]}};return b}();x=function(){function b(a,d,e){var f;e=c.extend({},c.fn[u].defaults,e);if(e.offset==="bottom-in-view")e.offset=function(){var g;g=c[o]("viewportHeight");c.isWindow(d.element)||(g=d.$element.height());return g-c(this).outerHeight()};this.$element=a;this.element=a[0];this.axis=e.horizontal?"horizontal":"vertical";this.callback=e.handler;this.context=d;this.enabled=e.enabled;this.id="waypoints"+E++;this.offset=null;this.options=e;d.waypoints[this.axis][this.id]=this;q[this.axis][this.id]=this;e=(f=a.data(w))!=null?f:[];e.push(this.id);a.data(w,e)}b.prototype.trigger=function(a){if(this.enabled){this.callback!=null&&this.callback.apply(this.element,a);if(this.options.triggerOnce)return this.destroy()}};b.prototype.disable=function(){return this.enabled=false};b.prototype.enable=function(){this.context.refresh();return this.enabled=true};b.prototype.destroy=function(){delete q[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};b.getWaypointsByElement=function(a){var d;a=c(a).data(w);if(!a)return[];d=c.extend({},q.horizontal,q.vertical);return c.map(a,function(e){return d[e]})};return b}();n={init:function(b,a){if(a==null)a={};if(a.handler==null)a.handler=b;this.each(function(){var d,e,f;d=c(this);f=(e=a.context)!=null?e:c.fn[u].defaults.context;c.isWindow(f)||(f=d.closest(f));f=c(f);(e=s[f.data(t)])||(e=new C(f));return new x(d,e,a)});c[o]("refresh");return this},disable:function(){return n._invoke(this,"disable")},enable:function(){return n._invoke(this,"enable")},destroy:function(){return n._invoke(this,"destroy")},prev:function(b,a){return n._traverse.call(this,b,a,function(d,e,f){if(e>0)return d.push(f[e-1])})},next:function(b,a){return n._traverse.call(this,b,a,function(d,e,f){if(e<f.length-1)return d.push(f[e+1])})},_traverse:function(b,a,d){var e,f;if(b==null)b="vertical";if(a==null)a=i;f=l.aggregate(a);e=[];this.each(function(){var g;g=c.inArray(this,f[b]);return d(e,g,f[b])});return this.pushStack(e)},_invoke:function(b,a){b.each(function(){var d;d=x.getWaypointsByElement(this);return c.each(d,function(e,f){f[a]();return true})});return this}};c.fn[u]=function(){var b,a;a=arguments[0];b=2<=arguments.length?B.call(arguments,1):[];return n[a]?n[a].apply(this,b):c.isFunction(a)?n.init.apply(this,arguments):c.isPlainObject(a)?n.init.apply(this,[null,a]):a?c.error("The "+a+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")};c.fn[u].defaults={context:i,continuous:true,enabled:true,horizontal:false,offset:0,triggerOnce:false};l={refresh:function(){return c.each(s,function(b,a){return a.refresh()})},viewportHeight:function(){var b;return(b=i.innerHeight)!=null?b:r.height()},aggregate:function(b){var a,d,e;a=q;if(b)a=(e=s[c(b).data(t)])!=null?e.waypoints:void 0;if(!a)return[];d={horizontal:[],vertical:[]};c.each(d,function(f,g){c.each(a[f],function(k,h){return g.push(h)});g.sort(function(k,h){return k.offset-h.offset});d[f]=c.map(g,function(k){return k.element});return d[f]=c.unique(d[f])});return d},above:function(b){if(b==null)b=i;return l._filter(b,"vertical",function(a,d){return d.offset<=a.oldScroll.y})},below:function(b){if(b==null)b=i;return l._filter(b,"vertical",function(a,d){return d.offset>a.oldScroll.y})},left:function(b){if(b==null)b=i;return l._filter(b,"horizontal",function(a,d){return d.offset<=a.oldScroll.x})},right:function(b){if(b==null)b=i;return l._filter(b,"horizontal",function(a,d){return d.offset>a.oldScroll.x})},enable:function(){return l._invoke("enable")},disable:function(){return l._invoke("disable")},destroy:function(){return l._invoke("destroy")},extendFn:function(b,a){return n[b]=a},_invoke:function(b){var a;a=c.extend({},q.vertical,q.horizontal);return c.each(a,function(d,e){e[b]();return true})},_filter:function(b,a,d){var e,f;e=s[c(b).data(t)];if(!e)return[];f=[];c.each(e.waypoints[a],function(g,k){if(d(e,k))return f.push(k)});f.sort(function(g,k){return g.offset-k.offset});return c.map(f,function(g){return g.element})}};c[o]=function(){var b,a;a=arguments[0];b=2<=arguments.length?B.call(arguments,1):[];return l[a]?l[a].apply(null,b):l.aggregate.call(null,a)};c[o].settings={resizeThrottle:100,scrollThrottle:30};return r.load(function(){return c[o]("refresh")})})}).call(this);