!function(i){OEVideo=function(o){this.id=o.id,this.type=o.type,this.aspectRatio=o.aspectRatio,this.lightbox=o.lightbox,this.overlay=o.overlay,this.comp=i("."+this.id),this.selector=o.selector,this._init()},OEVideo.prototype={_init:function(){this.lightbox?this._initLightbox():this.overlay&&this._inlinePlay()},_inlinePlay:function(){if(this.comp.find(".oe-video-iframe").length>0){var o=this.comp.find(".oe-video-iframe");o.attr("src",o.attr("src").replace("&autoplay=1","")),o.attr("src",o.attr("src").replace("autoplay=1",""))}this.comp.find(".oe-video-image-overlay").on("click",i.proxy(function(){if(this.comp.find(".oe-video-image-overlay").fadeOut(800,function(){this.remove()}),this.comp.find(".oe-video-player").length>0)this.comp.find(".oe-video-player")[0].play();else{var i=this.comp.find(".oe-video-iframe").attr("src");i&&this.comp.find(".oe-video-iframe").attr("src",i);var o=this.comp.find(".oe-video-iframe")[0].src.replace("&autoplay=0",""),t=(o=o.replace("autoplay=0","")).split("#");o=t[0]+"&autoplay=1",void 0!==t[1]&&(o+="#"+t[1]),this.comp.find(".oe-video-iframe")[0].src=o}},this))},_initLightbox:function(){var o=this.id,t=this.selector,a={modal:!1,baseClass:"fancybox-"+o,buttons:["close"],wheel:!1,touch:!1,hideOnOverlayClick:!0,afterLoad:function(a,e){if(!i(".fancybox-"+o).find(".oe-video-player").length){i(".fancybox-"+o).addClass("fancybox"+t);var n=i(".fancybox-"+o).find(".oe-video-iframe")[0].src.replace("&autoplay=0",""),c=(n=n.replace("autoplay=0","")).split("#");n=c[0]+"&autoplay=1",void 0!==c[1]&&(n+="#"+c[1]),i(".fancybox-"+o).find(".oe-video-iframe")[0].src=n}}},e="oev-ar-"+this.aspectRatio;this.comp.find(".oe-video-image-overlay").on("click",function(o){o.stopPropagation(),i.fancybox.open(i('<div class="'+e+' fancybox-content"></div>').html(i(this).find(".oe-video-lightbox-content").html()),a)})}}}(jQuery);