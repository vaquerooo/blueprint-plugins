!function(){var e=angular.element("body"),t=parent.angular.element("body");function o(o,n){var i=o.component.active,r=["ct_id","ct_parent","ct_content","nicename","selector","activeselector"],c=["href","url","target","globalConditionsResult","globalconditions","use-custom","custom-code","code-php","code-css","code-js","full_shortcode","embed_src","src","image_type","attachment_height","attachment_id","attachment_size","attachment_url","attachment_width"];function s(e){var t=null;return function o(n){void 0!==n.id&&n.id==e?t=n:n.children&&n.children.forEach(o)}(o.componentsTree),t}function a(e,t){for(key in"object"!=typeof o.styleFolders[t]&&(o.styleFolders[t]={status:1,key:t}),e)e[key].parent=t;o.classes=Object.assign(e,o.classes),o.classesCached=!1}function l(e,t,n,i){var r={},c=o.globalColorSets,s=_.findWhere(c.sets,{name:i});function a(e,t){return"color("+r[parseInt(t)]+")"}function l(e){_.each(e,(function(t,o){var n=/color\((\d*)\)/g;"string"==typeof t&&n.test(t)?e[o]=t.replace(n,a):"object"==typeof t&&l(e[o])}))}return"object"!=typeof s&&(s={id:++c.setsIncrement,name:i},c.sets.push(s)),_.each(e,(function(e){var t=_.findWhere(c.colors,{name:e.name,set:s.id});"object"!=typeof t&&(t={id:++c.colorsIncrement,name:e.name,value:e.value,set:s.id},c.colors.push(t)),r[e.id]=t.id})),l(t),l(n),r}function d(e){var t=i.id,d=function(e){try{return JSON.parse(decodeURIComponent(escape(atob(e))))}catch(e){console.error(e)}return!1}(e),p=!n.isActiveActionTab("contentEditing")&&(i.id>0||0),u="Imported";if(d.constructor!==Object)throw new Error("Invalid clipboard contents");if("object"==typeof d.component){var f=d.component,h=d.classes;l(d.colors,f,h,u),a(h,u);var m={id:0,depth:0,name:"root",children:[]};Array.isArray(f)?m.children=f:m.children.push(f),n.showLoadingOverlay(),setTimeout((function(){try{o.addReusableChildren(m,null,t)}catch(e){console.error(e)}n.hideLoadingOverlay()}))}if("object"==typeof d.style){if(!0!==p)throw new error("Can not apply styles to the selected element");if(f=s(t)){var y=f.options,b=d.style,v=b.currentClass;h=d.classes;l(d.colors,b,h,u),a(h,u),_.extend(b.original,_.pick(y.original,c)),_.extend(b,_.pick(y,r)),delete b.currentClass,f.options=b,o.componentsClasses[t]=b.classes,o.component.options[t]=_.pick(o.component.options[t],r),o.rebuildDOM(t),v?o.setCurrentClass(v):o.switchEditToId(!0),o.adjustResizeBox()}}if("object"==typeof d.conditions){if(!0!==p)throw new Error("Can not apply conditions! The selected element is invalid");(f=s(t))&&(o.setOptionModel("globalconditions",d.conditions,t,name),o.setOptionModel("conditionstype",d.conditionstype,t,name))}}function p(e){var t=e.target;if(!["INPUT","TEXTAREA"].includes(t.nodeName)&&!t.isContentEditable){try{var n=e.originalEvent.clipboardData.getData("Text").trim();if(!n)throw new Error("The clipboard is empty");d(n)}catch(e){console.error(e),setTimeout((function(){var t;t="Failed to process the clipboard contents<br/>"+e,setTimeout((function(){o.showNoticeModal("<div>"+t+"</div>"),o.$$phase||o.$digest()}),100)}),100)}return!1}}e.on("paste","[contenteditable]",(function(e){this.isContentEditable||(e.stopImmediatePropagation(),p(e))})),e.on("paste",p),t.on("paste",p)}if(CTFrontendBuilder.directive("hydrogenPaste",["$parentScope",function(e){return{restrict:"A",link:function(t){o(t,e)}}}]),HP_Options&&HP_Options.OxyKeydownConflict){function n(e){(e.ctrlKey||e.metaKey)&&86==e.keyCode&&e.stopImmediatePropagation()}e.on("keydown",n),t.on("keydown",n)}}();